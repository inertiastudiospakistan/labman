var pM=Object.defineProperty;var mM=(n,e,t)=>e in n?pM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var cr=(n,e,t)=>mM(n,typeof e!="symbol"?e+"":e,t);function gM(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var Dre=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bR(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var W_={exports:{}},wm={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BT;function yM(){if(BT)return wm;BT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,s){var a=null;if(s!==void 0&&(a=""+s),i.key!==void 0&&(a=""+i.key),"key"in i){s={};for(var c in i)c!=="key"&&(s[c]=i[c])}else s=i;return i=s.ref,{$$typeof:n,type:r,key:a,ref:i!==void 0?i:null,props:s}}return wm.Fragment=e,wm.jsx=t,wm.jsxs=t,wm}var qT;function vM(){return qT||(qT=1,W_.exports=yM()),W_.exports}var f=vM(),K_={exports:{}},pn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GT;function _M(){if(GT)return pn;GT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),_=Symbol.iterator;function w(ne){return ne===null||typeof ne!="object"?null:(ne=_&&ne[_]||ne["@@iterator"],typeof ne=="function"?ne:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,L={};function B(ne,H,te){this.props=ne,this.context=H,this.refs=L,this.updater=te||P}B.prototype.isReactComponent={},B.prototype.setState=function(ne,H){if(typeof ne!="object"&&typeof ne!="function"&&ne!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ne,H,"setState")},B.prototype.forceUpdate=function(ne){this.updater.enqueueForceUpdate(this,ne,"forceUpdate")};function K(){}K.prototype=B.prototype;function W(ne,H,te){this.props=ne,this.context=H,this.refs=L,this.updater=te||P}var J=W.prototype=new K;J.constructor=W,O(J,B.prototype),J.isPureReactComponent=!0;var ae=Array.isArray;function le(){}var U={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function N(ne,H,te){var Y=te.ref;return{$$typeof:n,type:ne,key:H,ref:Y!==void 0?Y:null,props:te}}function F(ne,H){return N(ne.type,H,ne.props)}function S(ne){return typeof ne=="object"&&ne!==null&&ne.$$typeof===n}function k(ne){var H={"=":"=0",":":"=2"};return"$"+ne.replace(/[=:]/g,function(te){return H[te]})}var M=/\/+/g;function Q(ne,H){return typeof ne=="object"&&ne!==null&&ne.key!=null?k(""+ne.key):H.toString(36)}function pe(ne){switch(ne.status){case"fulfilled":return ne.value;case"rejected":throw ne.reason;default:switch(typeof ne.status=="string"?ne.then(le,le):(ne.status="pending",ne.then(function(H){ne.status==="pending"&&(ne.status="fulfilled",ne.value=H)},function(H){ne.status==="pending"&&(ne.status="rejected",ne.reason=H)})),ne.status){case"fulfilled":return ne.value;case"rejected":throw ne.reason}}throw ne}function se(ne,H,te,Y,fe){var ge=typeof ne;(ge==="undefined"||ge==="boolean")&&(ne=null);var xe=!1;if(ne===null)xe=!0;else switch(ge){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(ne.$$typeof){case n:case e:xe=!0;break;case p:return xe=ne._init,se(xe(ne._payload),H,te,Y,fe)}}if(xe)return fe=fe(ne),xe=Y===""?"."+Q(ne,0):Y,ae(fe)?(te="",xe!=null&&(te=xe.replace(M,"$&/")+"/"),se(fe,H,te,"",function(Ge){return Ge})):fe!=null&&(S(fe)&&(fe=F(fe,te+(fe.key==null||ne&&ne.key===fe.key?"":(""+fe.key).replace(M,"$&/")+"/")+xe)),H.push(fe)),1;xe=0;var we=Y===""?".":Y+":";if(ae(ne))for(var Ie=0;Ie<ne.length;Ie++)Y=ne[Ie],ge=we+Q(Y,Ie),xe+=se(Y,H,te,ge,fe);else if(Ie=w(ne),typeof Ie=="function")for(ne=Ie.call(ne),Ie=0;!(Y=ne.next()).done;)Y=Y.value,ge=we+Q(Y,Ie++),xe+=se(Y,H,te,ge,fe);else if(ge==="object"){if(typeof ne.then=="function")return se(pe(ne),H,te,Y,fe);throw H=String(ne),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(ne).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return xe}function ve(ne,H,te){if(ne==null)return ne;var Y=[],fe=0;return se(ne,Y,"","",function(ge){return H.call(te,ge,fe++)}),Y}function me(ne){if(ne._status===-1){var H=ne._result;H=H(),H.then(function(te){(ne._status===0||ne._status===-1)&&(ne._status=1,ne._result=te)},function(te){(ne._status===0||ne._status===-1)&&(ne._status=2,ne._result=te)}),ne._status===-1&&(ne._status=0,ne._result=H)}if(ne._status===1)return ne._result.default;throw ne._result}var Se=typeof reportError=="function"?reportError:function(ne){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ne=="object"&&ne!==null&&typeof ne.message=="string"?String(ne.message):String(ne),error:ne});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ne);return}console.error(ne)},Ve={map:ve,forEach:function(ne,H,te){ve(ne,function(){H.apply(this,arguments)},te)},count:function(ne){var H=0;return ve(ne,function(){H++}),H},toArray:function(ne){return ve(ne,function(H){return H})||[]},only:function(ne){if(!S(ne))throw Error("React.Children.only expected to receive a single React element child.");return ne}};return pn.Activity=g,pn.Children=Ve,pn.Component=B,pn.Fragment=t,pn.Profiler=i,pn.PureComponent=W,pn.StrictMode=r,pn.Suspense=u,pn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,pn.__COMPILER_RUNTIME={__proto__:null,c:function(ne){return U.H.useMemoCache(ne)}},pn.cache=function(ne){return function(){return ne.apply(null,arguments)}},pn.cacheSignal=function(){return null},pn.cloneElement=function(ne,H,te){if(ne==null)throw Error("The argument must be a React element, but you passed "+ne+".");var Y=O({},ne.props),fe=ne.key;if(H!=null)for(ge in H.key!==void 0&&(fe=""+H.key),H)!C.call(H,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&H.ref===void 0||(Y[ge]=H[ge]);var ge=arguments.length-2;if(ge===1)Y.children=te;else if(1<ge){for(var xe=Array(ge),we=0;we<ge;we++)xe[we]=arguments[we+2];Y.children=xe}return N(ne.type,fe,Y)},pn.createContext=function(ne){return ne={$$typeof:a,_currentValue:ne,_currentValue2:ne,_threadCount:0,Provider:null,Consumer:null},ne.Provider=ne,ne.Consumer={$$typeof:s,_context:ne},ne},pn.createElement=function(ne,H,te){var Y,fe={},ge=null;if(H!=null)for(Y in H.key!==void 0&&(ge=""+H.key),H)C.call(H,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(fe[Y]=H[Y]);var xe=arguments.length-2;if(xe===1)fe.children=te;else if(1<xe){for(var we=Array(xe),Ie=0;Ie<xe;Ie++)we[Ie]=arguments[Ie+2];fe.children=we}if(ne&&ne.defaultProps)for(Y in xe=ne.defaultProps,xe)fe[Y]===void 0&&(fe[Y]=xe[Y]);return N(ne,ge,fe)},pn.createRef=function(){return{current:null}},pn.forwardRef=function(ne){return{$$typeof:c,render:ne}},pn.isValidElement=S,pn.lazy=function(ne){return{$$typeof:p,_payload:{_status:-1,_result:ne},_init:me}},pn.memo=function(ne,H){return{$$typeof:d,type:ne,compare:H===void 0?null:H}},pn.startTransition=function(ne){var H=U.T,te={};U.T=te;try{var Y=ne(),fe=U.S;fe!==null&&fe(te,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(le,Se)}catch(ge){Se(ge)}finally{H!==null&&te.types!==null&&(H.types=te.types),U.T=H}},pn.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},pn.use=function(ne){return U.H.use(ne)},pn.useActionState=function(ne,H,te){return U.H.useActionState(ne,H,te)},pn.useCallback=function(ne,H){return U.H.useCallback(ne,H)},pn.useContext=function(ne){return U.H.useContext(ne)},pn.useDebugValue=function(){},pn.useDeferredValue=function(ne,H){return U.H.useDeferredValue(ne,H)},pn.useEffect=function(ne,H){return U.H.useEffect(ne,H)},pn.useEffectEvent=function(ne){return U.H.useEffectEvent(ne)},pn.useId=function(){return U.H.useId()},pn.useImperativeHandle=function(ne,H,te){return U.H.useImperativeHandle(ne,H,te)},pn.useInsertionEffect=function(ne,H){return U.H.useInsertionEffect(ne,H)},pn.useLayoutEffect=function(ne,H){return U.H.useLayoutEffect(ne,H)},pn.useMemo=function(ne,H){return U.H.useMemo(ne,H)},pn.useOptimistic=function(ne,H){return U.H.useOptimistic(ne,H)},pn.useReducer=function(ne,H,te){return U.H.useReducer(ne,H,te)},pn.useRef=function(ne){return U.H.useRef(ne)},pn.useState=function(ne){return U.H.useState(ne)},pn.useSyncExternalStore=function(ne,H,te){return U.H.useSyncExternalStore(ne,H,te)},pn.useTransition=function(){return U.H.useTransition()},pn.version="19.2.1",pn}var HT;function hx(){return HT||(HT=1,K_.exports=_M()),K_.exports}var Ee=hx();const Gg=bR(Ee),bM=gM({__proto__:null,default:Gg},[Ee]);var J_={exports:{}},Em={},Q_={exports:{}},X_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zT;function xM(){return zT||(zT=1,(function(n){function e(se,ve){var me=se.length;se.push(ve);e:for(;0<me;){var Se=me-1>>>1,Ve=se[Se];if(0<i(Ve,ve))se[Se]=ve,se[me]=Ve,me=Se;else break e}}function t(se){return se.length===0?null:se[0]}function r(se){if(se.length===0)return null;var ve=se[0],me=se.pop();if(me!==ve){se[0]=me;e:for(var Se=0,Ve=se.length,ne=Ve>>>1;Se<ne;){var H=2*(Se+1)-1,te=se[H],Y=H+1,fe=se[Y];if(0>i(te,me))Y<Ve&&0>i(fe,te)?(se[Se]=fe,se[Y]=me,Se=Y):(se[Se]=te,se[H]=me,Se=H);else if(Y<Ve&&0>i(fe,me))se[Se]=fe,se[Y]=me,Se=Y;else break e}}return ve}function i(se,ve){var me=se.sortIndex-ve.sortIndex;return me!==0?me:se.id-ve.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,c=a.now();n.unstable_now=function(){return a.now()-c}}var u=[],d=[],p=1,g=null,_=3,w=!1,P=!1,O=!1,L=!1,B=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function J(se){for(var ve=t(d);ve!==null;){if(ve.callback===null)r(d);else if(ve.startTime<=se)r(d),ve.sortIndex=ve.expirationTime,e(u,ve);else break;ve=t(d)}}function ae(se){if(O=!1,J(se),!P)if(t(u)!==null)P=!0,le||(le=!0,k());else{var ve=t(d);ve!==null&&pe(ae,ve.startTime-se)}}var le=!1,U=-1,C=5,N=-1;function F(){return L?!0:!(n.unstable_now()-N<C)}function S(){if(L=!1,le){var se=n.unstable_now();N=se;var ve=!0;try{e:{P=!1,O&&(O=!1,K(U),U=-1),w=!0;var me=_;try{t:{for(J(se),g=t(u);g!==null&&!(g.expirationTime>se&&F());){var Se=g.callback;if(typeof Se=="function"){g.callback=null,_=g.priorityLevel;var Ve=Se(g.expirationTime<=se);if(se=n.unstable_now(),typeof Ve=="function"){g.callback=Ve,J(se),ve=!0;break t}g===t(u)&&r(u),J(se)}else r(u);g=t(u)}if(g!==null)ve=!0;else{var ne=t(d);ne!==null&&pe(ae,ne.startTime-se),ve=!1}}break e}finally{g=null,_=me,w=!1}ve=void 0}}finally{ve?k():le=!1}}}var k;if(typeof W=="function")k=function(){W(S)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,Q=M.port2;M.port1.onmessage=S,k=function(){Q.postMessage(null)}}else k=function(){B(S,0)};function pe(se,ve){U=B(function(){se(n.unstable_now())},ve)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(se){se.callback=null},n.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<se?Math.floor(1e3/se):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(se){switch(_){case 1:case 2:case 3:var ve=3;break;default:ve=_}var me=_;_=ve;try{return se()}finally{_=me}},n.unstable_requestPaint=function(){L=!0},n.unstable_runWithPriority=function(se,ve){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var me=_;_=se;try{return ve()}finally{_=me}},n.unstable_scheduleCallback=function(se,ve,me){var Se=n.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Se+me:Se):me=Se,se){case 1:var Ve=-1;break;case 2:Ve=250;break;case 5:Ve=1073741823;break;case 4:Ve=1e4;break;default:Ve=5e3}return Ve=me+Ve,se={id:p++,callback:ve,priorityLevel:se,startTime:me,expirationTime:Ve,sortIndex:-1},me>Se?(se.sortIndex=me,e(d,se),t(u)===null&&se===t(d)&&(O?(K(U),U=-1):O=!0,pe(ae,me-Se))):(se.sortIndex=Ve,e(u,se),P||w||(P=!0,le||(le=!0,k()))),se},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(se){var ve=_;return function(){var me=_;_=ve;try{return se.apply(this,arguments)}finally{_=me}}}})(X_)),X_}var $T;function wM(){return $T||($T=1,Q_.exports=xM()),Q_.exports}var Z_={exports:{}},zs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YT;function EM(){if(YT)return zs;YT=1;var n=hx();function e(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(u,d,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:u,containerInfo:d,implementation:p}}var a=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return zs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,zs.createPortal=function(u,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return s(u,d,null,p)},zs.flushSync=function(u){var d=a.T,p=r.p;try{if(a.T=null,r.p=2,u)return u()}finally{a.T=d,r.p=p,r.d.f()}},zs.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(u,d))},zs.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},zs.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var p=d.as,g=c(p,d.crossOrigin),_=typeof d.integrity=="string"?d.integrity:void 0,w=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?r.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:g,integrity:_,fetchPriority:w}):p==="script"&&r.d.X(u,{crossOrigin:g,integrity:_,fetchPriority:w,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},zs.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=c(d.as,d.crossOrigin);r.d.M(u,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(u)},zs.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,g=c(p,d.crossOrigin);r.d.L(u,p,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},zs.preloadModule=function(u,d){if(typeof u=="string")if(d){var p=c(d.as,d.crossOrigin);r.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(u)},zs.requestFormReset=function(u){r.d.r(u)},zs.unstable_batchedUpdates=function(u,d){return u(d)},zs.useFormState=function(u,d,p){return a.H.useFormState(u,d,p)},zs.useFormStatus=function(){return a.H.useHostTransitionStatus()},zs.version="19.2.1",zs}var WT;function xR(){if(WT)return Z_.exports;WT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Z_.exports=EM(),Z_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KT;function TM(){if(KT)return Em;KT=1;var n=wM(),e=hx(),t=xR();function r(o){var l="https://react.dev/errors/"+o;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)l+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function s(o){var l=o,h=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(h=l.return),o=l.return;while(o)}return l.tag===3?h:null}function a(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function c(o){if(o.tag===31){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function u(o){if(s(o)!==o)throw Error(r(188))}function d(o){var l=o.alternate;if(!l){if(l=s(o),l===null)throw Error(r(188));return l!==o?null:o}for(var h=o,m=l;;){var E=h.return;if(E===null)break;var A=E.alternate;if(A===null){if(m=E.return,m!==null){h=m;continue}break}if(E.child===A.child){for(A=E.child;A;){if(A===h)return u(E),o;if(A===m)return u(E),l;A=A.sibling}throw Error(r(188))}if(h.return!==m.return)h=E,m=A;else{for(var q=!1,ee=E.child;ee;){if(ee===h){q=!0,h=E,m=A;break}if(ee===m){q=!0,m=E,h=A;break}ee=ee.sibling}if(!q){for(ee=A.child;ee;){if(ee===h){q=!0,h=A,m=E;break}if(ee===m){q=!0,m=A,h=E;break}ee=ee.sibling}if(!q)throw Error(r(189))}}if(h.alternate!==m)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?o:l}function p(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o;for(o=o.child;o!==null;){if(l=p(o),l!==null)return l;o=o.sibling}return null}var g=Object.assign,_=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),K=Symbol.for("react.consumer"),W=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),S=Symbol.iterator;function k(o){return o===null||typeof o!="object"?null:(o=S&&o[S]||o["@@iterator"],typeof o=="function"?o:null)}var M=Symbol.for("react.client.reference");function Q(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===M?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case O:return"Fragment";case B:return"Profiler";case L:return"StrictMode";case ae:return"Suspense";case le:return"SuspenseList";case N:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case P:return"Portal";case W:return o.displayName||"Context";case K:return(o._context.displayName||"Context")+".Consumer";case J:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case U:return l=o.displayName||null,l!==null?l:Q(o.type)||"Memo";case C:l=o._payload,o=o._init;try{return Q(o(l))}catch{}}return null}var pe=Array.isArray,se=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},Se=[],Ve=-1;function ne(o){return{current:o}}function H(o){0>Ve||(o.current=Se[Ve],Se[Ve]=null,Ve--)}function te(o,l){Ve++,Se[Ve]=o.current,o.current=l}var Y=ne(null),fe=ne(null),ge=ne(null),xe=ne(null);function we(o,l){switch(te(ge,l),te(fe,o),te(Y,null),l.nodeType){case 9:case 11:o=(o=l.documentElement)&&(o=o.namespaceURI)?uT(o):0;break;default:if(o=l.tagName,l=l.namespaceURI)l=uT(l),o=dT(l,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}H(Y),te(Y,o)}function Ie(){H(Y),H(fe),H(ge)}function Ge(o){o.memoizedState!==null&&te(xe,o);var l=Y.current,h=dT(l,o.type);l!==h&&(te(fe,o),te(Y,h))}function Qe(o){fe.current===o&&(H(Y),H(fe)),xe.current===o&&(H(xe),vm._currentValue=me)}var it,dt;function vt(o){if(it===void 0)try{throw Error()}catch(h){var l=h.stack.trim().match(/\n( *(at )?)/);it=l&&l[1]||"",dt=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+it+o+dt}var ce=!1;function ht(o,l){if(!o||ce)return"";ce=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(l){var Ze=function(){throw Error()};if(Object.defineProperty(Ze.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ze,[])}catch(qe){var je=qe}Reflect.construct(o,[],Ze)}else{try{Ze.call()}catch(qe){je=qe}o.call(Ze.prototype)}}else{try{throw Error()}catch(qe){je=qe}(Ze=o())&&typeof Ze.catch=="function"&&Ze.catch(function(){})}}catch(qe){if(qe&&je&&typeof qe.stack=="string")return[qe.stack,je.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=m.DetermineComponentFrameRoot(),q=A[0],ee=A[1];if(q&&ee){var _e=q.split(`
`),Fe=ee.split(`
`);for(E=m=0;m<_e.length&&!_e[m].includes("DetermineComponentFrameRoot");)m++;for(;E<Fe.length&&!Fe[E].includes("DetermineComponentFrameRoot");)E++;if(m===_e.length||E===Fe.length)for(m=_e.length-1,E=Fe.length-1;1<=m&&0<=E&&_e[m]!==Fe[E];)E--;for(;1<=m&&0<=E;m--,E--)if(_e[m]!==Fe[E]){if(m!==1||E!==1)do if(m--,E--,0>E||_e[m]!==Fe[E]){var We=`
`+_e[m].replace(" at new "," at ");return o.displayName&&We.includes("<anonymous>")&&(We=We.replace("<anonymous>",o.displayName)),We}while(1<=m&&0<=E);break}}}finally{ce=!1,Error.prepareStackTrace=h}return(h=o?o.displayName||o.name:"")?vt(h):""}function Bt(o,l){switch(o.tag){case 26:case 27:case 5:return vt(o.type);case 16:return vt("Lazy");case 13:return o.child!==l&&l!==null?vt("Suspense Fallback"):vt("Suspense");case 19:return vt("SuspenseList");case 0:case 15:return ht(o.type,!1);case 11:return ht(o.type.render,!1);case 1:return ht(o.type,!0);case 31:return vt("Activity");default:return""}}function Mt(o){try{var l="",h=null;do l+=Bt(o,h),h=o,o=o.return;while(o);return l}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var Ke=Object.prototype.hasOwnProperty,bt=n.unstable_scheduleCallback,ye=n.unstable_cancelCallback,He=n.unstable_shouldYield,rt=n.unstable_requestPaint,at=n.unstable_now,_t=n.unstable_getCurrentPriorityLevel,gt=n.unstable_ImmediatePriority,mt=n.unstable_UserBlockingPriority,Yt=n.unstable_NormalPriority,wt=n.unstable_LowPriority,nn=n.unstable_IdlePriority,St=n.log,rr=n.unstable_setDisableYieldValue,Rt=null,Ot=null;function rn(o){if(typeof St=="function"&&rr(o),Ot&&typeof Ot.setStrictMode=="function")try{Ot.setStrictMode(Rt,o)}catch{}}var dn=Math.clz32?Math.clz32:en,qt=Math.log,Vn=Math.LN2;function en(o){return o>>>=0,o===0?32:31-(qt(o)/Vn|0)|0}var tn=256,Gn=262144,jt=4194304;function Ft(o){var l=o&42;if(l!==0)return l;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function vn(o,l,h){var m=o.pendingLanes;if(m===0)return 0;var E=0,A=o.suspendedLanes,q=o.pingedLanes;o=o.warmLanes;var ee=m&134217727;return ee!==0?(m=ee&~A,m!==0?E=Ft(m):(q&=ee,q!==0?E=Ft(q):h||(h=ee&~o,h!==0&&(E=Ft(h))))):(ee=m&~A,ee!==0?E=Ft(ee):q!==0?E=Ft(q):h||(h=m&~o,h!==0&&(E=Ft(h)))),E===0?0:l!==0&&l!==E&&(l&A)===0&&(A=E&-E,h=l&-l,A>=h||A===32&&(h&4194048)!==0)?l:E}function Vi(o,l){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&l)===0}function Si(o,l){switch(o){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bo(){var o=jt;return jt<<=1,(jt&62914560)===0&&(jt=4194304),o}function gi(o){for(var l=[],h=0;31>h;h++)l.push(o);return l}function Gt(o,l){o.pendingLanes|=l,l!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function $o(o,l,h,m,E,A){var q=o.pendingLanes;o.pendingLanes=h,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=h,o.entangledLanes&=h,o.errorRecoveryDisabledLanes&=h,o.shellSuspendCounter=0;var ee=o.entanglements,_e=o.expirationTimes,Fe=o.hiddenUpdates;for(h=q&~h;0<h;){var We=31-dn(h),Ze=1<<We;ee[We]=0,_e[We]=-1;var je=Fe[We];if(je!==null)for(Fe[We]=null,We=0;We<je.length;We++){var qe=je[We];qe!==null&&(qe.lane&=-536870913)}h&=~Ze}m!==0&&_s(o,m,0),A!==0&&E===0&&o.tag!==0&&(o.suspendedLanes|=A&~(q&~l))}function _s(o,l,h){o.pendingLanes|=l,o.suspendedLanes&=~l;var m=31-dn(l);o.entangledLanes|=l,o.entanglements[m]=o.entanglements[m]|1073741824|h&261930}function ts(o,l){var h=o.entangledLanes|=l;for(o=o.entanglements;h;){var m=31-dn(h),E=1<<m;E&l|o[m]&l&&(o[m]|=l),h&=~E}}function ns(o,l){var h=l&-l;return h=(h&42)!==0?1:er(h),(h&(o.suspendedLanes|l))!==0?0:h}function er(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function fr(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function ni(){var o=ve.p;return o!==0?o:(o=window.event,o===void 0?32:LT(o.type))}function Bi(o,l){var h=ve.p;try{return ve.p=o,l()}finally{ve.p=h}}var Ii=Math.random().toString(36).slice(2),Hn="__reactFiber$"+Ii,ir="__reactProps$"+Ii,ri="__reactContainer$"+Ii,rs="__reactEvents$"+Ii,Us="__reactListeners$"+Ii,ma="__reactHandles$"+Ii,ro="__reactResources$"+Ii,is="__reactMarker$"+Ii;function Yo(o){delete o[Hn],delete o[ir],delete o[rs],delete o[Us],delete o[ma]}function bs(o){var l=o[Hn];if(l)return l;for(var h=o.parentNode;h;){if(l=h[ri]||h[Hn]){if(h=l.alternate,l.child!==null||h!==null&&h.child!==null)for(o=vT(o);o!==null;){if(h=o[Hn])return h;o=vT(o)}return l}o=h,h=o.parentNode}return null}function qi(o){if(o=o[Hn]||o[ri]){var l=o.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return o}return null}function xs(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o.stateNode;throw Error(r(33))}function js(o){var l=o[ro];return l||(l=o[ro]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Cr(o){o[is]=!0}var vl=new Set,ss={};function Vs(o,l){io(o,l),io(o+"Capture",l)}function io(o,l){for(ss[o]=l,o=0;o<l.length;o++)vl.add(l[o])}var Va=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_l={},bl={};function sc(o){return Ke.call(bl,o)?!0:Ke.call(_l,o)?!1:Va.test(o)?bl[o]=!0:(_l[o]=!0,!1)}function ws(o,l,h){if(sc(l))if(h===null)o.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":o.removeAttribute(l);return;case"boolean":var m=l.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){o.removeAttribute(l);return}}o.setAttribute(l,""+h)}}function Ci(o,l,h){if(h===null)o.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttribute(l,""+h)}}function Fr(o,l,h,m){if(m===null)o.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(h);return}o.setAttributeNS(l,h,""+m)}}function wn(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Wo(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Bs(o,l,h){var m=Object.getOwnPropertyDescriptor(o.constructor.prototype,l);if(!o.hasOwnProperty(l)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var E=m.get,A=m.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return E.call(this)},set:function(q){h=""+q,A.call(this,q)}}),Object.defineProperty(o,l,{enumerable:m.enumerable}),{getValue:function(){return h},setValue:function(q){h=""+q},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function Rn(o){if(!o._valueTracker){var l=Wo(o)?"checked":"value";o._valueTracker=Bs(o,l,""+o[l])}}function ga(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var h=l.getValue(),m="";return o&&(m=Wo(o)?o.checked?"true":"false":o.value),o=m,o!==h?(l.setValue(o),!0):!1}function Wr(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var wr=/[\n"\\]/g;function Ur(o){return o.replace(wr,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Ba(o,l,h,m,E,A,q,ee){o.name="",q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?o.type=q:o.removeAttribute("type"),l!=null?q==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+wn(l)):o.value!==""+wn(l)&&(o.value=""+wn(l)):q!=="submit"&&q!=="reset"||o.removeAttribute("value"),l!=null?oc(o,q,wn(l)):h!=null?oc(o,q,wn(h)):m!=null&&o.removeAttribute("value"),E==null&&A!=null&&(o.defaultChecked=!!A),E!=null&&(o.checked=E&&typeof E!="function"&&typeof E!="symbol"),ee!=null&&typeof ee!="function"&&typeof ee!="symbol"&&typeof ee!="boolean"?o.name=""+wn(ee):o.removeAttribute("name")}function su(o,l,h,m,E,A,q,ee){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(o.type=A),l!=null||h!=null){if(!(A!=="submit"&&A!=="reset"||l!=null)){Rn(o);return}h=h!=null?""+wn(h):"",l=l!=null?""+wn(l):h,ee||l===o.value||(o.value=l),o.defaultValue=l}m=m??E,m=typeof m!="function"&&typeof m!="symbol"&&!!m,o.checked=ee?o.checked:!!m,o.defaultChecked=!!m,q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"&&(o.name=q),Rn(o)}function oc(o,l,h){l==="number"&&Wr(o.ownerDocument)===o||o.defaultValue===""+h||(o.defaultValue=""+h)}function Gi(o,l,h,m){if(o=o.options,l){l={};for(var E=0;E<h.length;E++)l["$"+h[E]]=!0;for(h=0;h<o.length;h++)E=l.hasOwnProperty("$"+o[h].value),o[h].selected!==E&&(o[h].selected=E),E&&m&&(o[h].defaultSelected=!0)}else{for(h=""+wn(h),l=null,E=0;E<o.length;E++){if(o[E].value===h){o[E].selected=!0,m&&(o[E].defaultSelected=!0);return}l!==null||o[E].disabled||(l=o[E])}l!==null&&(l.selected=!0)}}function ac(o,l,h){if(l!=null&&(l=""+wn(l),l!==o.value&&(o.value=l),h==null)){o.defaultValue!==l&&(o.defaultValue=l);return}o.defaultValue=h!=null?""+wn(h):""}function Ko(o,l,h,m){if(l==null){if(m!=null){if(h!=null)throw Error(r(92));if(pe(m)){if(1<m.length)throw Error(r(93));m=m[0]}h=m}h==null&&(h=""),l=h}h=wn(l),o.defaultValue=h,m=o.textContent,m===h&&m!==""&&m!==null&&(o.value=m),Rn(o)}function yi(o,l){if(l){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=l;return}}o.textContent=l}var ya=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lc(o,l,h){var m=l.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?m?o.setProperty(l,""):l==="float"?o.cssFloat="":o[l]="":m?o.setProperty(l,h):typeof h!="number"||h===0||ya.has(l)?l==="float"?o.cssFloat=h:o[l]=(""+h).trim():o[l]=h+"px"}function cc(o,l,h){if(l!=null&&typeof l!="object")throw Error(r(62));if(o=o.style,h!=null){for(var m in h)!h.hasOwnProperty(m)||l!=null&&l.hasOwnProperty(m)||(m.indexOf("--")===0?o.setProperty(m,""):m==="float"?o.cssFloat="":o[m]="");for(var E in l)m=l[E],l.hasOwnProperty(E)&&h[E]!==m&&lc(o,E,m)}else for(var A in l)l.hasOwnProperty(A)&&lc(o,A,l[A])}function xl(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Jo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function os(o){return Jo.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function so(){}var Qo=null;function as(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var va=null,Kt=null;function qa(o){var l=qi(o);if(l&&(o=l.stateNode)){var h=o[ir]||null;e:switch(o=l.stateNode,l.type){case"input":if(Ba(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),l=h.name,h.type==="radio"&&l!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+Ur(""+l)+'"][type="radio"]'),l=0;l<h.length;l++){var m=h[l];if(m!==o&&m.form===o.form){var E=m[ir]||null;if(!E)throw Error(r(90));Ba(m,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(l=0;l<h.length;l++)m=h[l],m.form===o.form&&ga(m)}break e;case"textarea":ac(o,h.value,h.defaultValue);break e;case"select":l=h.value,l!=null&&Gi(o,!!h.multiple,l,!1)}}}var El=!1;function _a(o,l,h){if(El)return o(l,h);El=!0;try{var m=o(l);return m}finally{if(El=!1,(va!==null||Kt!==null)&&(H0(),va&&(l=va,o=Kt,Kt=va=null,qa(l),o)))for(l=0;l<o.length;l++)qa(o[l])}}function vi(o,l){var h=o.stateNode;if(h===null)return null;var m=h[ir]||null;if(m===null)return null;h=m[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(o=o.type,m=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!m;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(r(231,l,typeof h));return h}var ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ga=!1;if(ii)try{var zn={};Object.defineProperty(zn,"passive",{get:function(){Ga=!0}}),window.addEventListener("test",zn,zn),window.removeEventListener("test",zn,zn)}catch{Ga=!1}var Es=null,Ha=null,oo=null;function uc(){if(oo)return oo;var o,l=Ha,h=l.length,m,E="value"in Es?Es.value:Es.textContent,A=E.length;for(o=0;o<h&&l[o]===E[o];o++);var q=h-o;for(m=1;m<=q&&l[h-m]===E[A-m];m++);return oo=E.slice(o,1<m?1-m:void 0)}function Ts(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function Xo(){return!0}function As(){return!1}function Kr(o){function l(h,m,E,A,q){this._reactName=h,this._targetInst=E,this.type=m,this.nativeEvent=A,this.target=q,this.currentTarget=null;for(var ee in o)o.hasOwnProperty(ee)&&(h=o[ee],this[ee]=h?h(A):A[ee]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Xo:As,this.isPropagationStopped=As,this}return g(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Xo)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Xo)},persist:function(){},isPersistent:Xo}),l}var xo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ri=Kr(xo),wo=g({},xo,{view:0,detail:0}),ba=Kr(wo),Eo,To,qs,za=g({},wo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qt,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==qs&&(qs&&o.type==="mousemove"?(Eo=o.screenX-qs.screenX,To=o.screenY-qs.screenY):To=Eo=0,qs=o),Eo)},movementY:function(o){return"movementY"in o?o.movementY:To}}),Tl=Kr(za),Ns=g({},za,{dataTransfer:0}),Ao=Kr(Ns),dc=g({},wo,{relatedTarget:0}),ao=Kr(dc),Al=g({},xo,{animationName:0,elapsedTime:0,pseudoElement:0}),I=Kr(Al),z=g({},xo,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),de=Kr(z),be=g({},xo,{data:0}),Ce=Kr(be),Ye={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pt(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=Nt[o])?!!l[o]:!1}function Qt(){return Pt}var Ht=g({},wo,{key:function(o){if(o.key){var l=Ye[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=Ts(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?tt[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qt,charCode:function(o){return o.type==="keypress"?Ts(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Ts(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),En=Kr(Ht),pr=g({},za,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tr=Kr(pr),b=g({},wo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qt}),D=Kr(b),G=g({},xo,{propertyName:0,elapsedTime:0,pseudoElement:0}),ie=Kr(G),Pe=g({},za,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Ue=Kr(Pe),ct=g({},xo,{newState:0,oldState:0}),ln=Kr(ct),mr=[9,13,27,32],bn=ii&&"CompositionEvent"in window,$n=null;ii&&"documentMode"in document&&($n=document.documentMode);var Pi=ii&&"TextEvent"in window&&!$n,Hi=ii&&(!bn||$n&&8<$n&&11>=$n),sr=" ",zi=!1;function lo(o,l){switch(o){case"keyup":return mr.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xa(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var wa=!1;function Ss(o,l){switch(o){case"compositionend":return xa(l);case"keypress":return l.which!==32?null:(zi=!0,sr);case"textInput":return o=l.data,o===sr&&zi?null:o;default:return null}}function $a(o,l){if(wa)return o==="compositionend"||!bn&&lo(o,l)?(o=uc(),oo=Ha=Es=null,wa=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Hi&&l.locale!=="ko"?null:l.data;default:return null}}var ou={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bd(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!ou[o.type]:l==="textarea"}function co(o,l,h,m){va?Kt?Kt.push(m):Kt=[m]:va=m,l=Q0(l,"onChange"),0<l.length&&(h=new Ri("onChange","change",null,h,m),o.push({event:h,listeners:l}))}var Zo=null,Ya=null;function xd(o){iT(o,0)}function ea(o){var l=xs(o);if(ga(l))return o}function Nl(o,l){if(o==="change")return l}var Gs=!1;if(ii){var Is;if(ii){var Ea="oninput"in document;if(!Ea){var Ta=document.createElement("div");Ta.setAttribute("oninput","return;"),Ea=typeof Ta.oninput=="function"}Is=Ea}else Is=!1;Gs=Is&&(!document.documentMode||9<document.documentMode)}function Wa(){Zo&&(Zo.detachEvent("onpropertychange",au),Ya=Zo=null)}function au(o){if(o.propertyName==="value"&&ea(Ya)){var l=[];co(l,Ya,o,as(o)),_a(xd,l)}}function lu(o,l,h){o==="focusin"?(Wa(),Zo=l,Ya=h,Zo.attachEvent("onpropertychange",au)):o==="focusout"&&Wa()}function Jr(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return ea(Ya)}function Dh(o,l){if(o==="click")return ea(l)}function Aa(o,l){if(o==="input"||o==="change")return ea(l)}function Na(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var $i=typeof Object.is=="function"?Object.is:Na;function Ka(o,l){if($i(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var h=Object.keys(o),m=Object.keys(l);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var E=h[m];if(!Ke.call(l,E)||!$i(o[E],l[E]))return!1}return!0}function cu(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function uu(o,l){var h=cu(o);o=0;for(var m;h;){if(h.nodeType===3){if(m=o+h.textContent.length,o<=l&&m>=l)return{node:h,offset:l-o};o=m}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=cu(h)}}function Ja(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?Ja(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function Qa(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var l=Wr(o.document);l instanceof o.HTMLIFrameElement;){try{var h=typeof l.contentWindow.location.href=="string"}catch{h=!1}if(h)o=l.contentWindow;else break;l=Wr(o.document)}return l}function Sa(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}var hc=ii&&"documentMode"in document&&11>=document.documentMode,uo=null,Xa=null,ls=null,No=!1;function Bn(o,l,h){var m=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;No||uo==null||uo!==Wr(m)||(m=uo,"selectionStart"in m&&Sa(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),ls&&Ka(ls,m)||(ls=m,m=Q0(Xa,"onSelect"),0<m.length&&(l=new Ri("onSelect","select",null,l,h),o.push({event:l,listeners:m}),l.target=uo)))}function Ln(o,l){var h={};return h[o.toLowerCase()]=l.toLowerCase(),h["Webkit"+o]="webkit"+l,h["Moz"+o]="moz"+l,h}var gr={animationend:Ln("Animation","AnimationEnd"),animationiteration:Ln("Animation","AnimationIteration"),animationstart:Ln("Animation","AnimationStart"),transitionrun:Ln("Transition","TransitionRun"),transitionstart:Ln("Transition","TransitionStart"),transitioncancel:Ln("Transition","TransitionCancel"),transitionend:Ln("Transition","TransitionEnd")},Qr={},Ia={};ii&&(Ia=document.createElement("div").style,"AnimationEvent"in window||(delete gr.animationend.animation,delete gr.animationiteration.animation,delete gr.animationstart.animation),"TransitionEvent"in window||delete gr.transitionend.transition);function ta(o){if(Qr[o])return Qr[o];if(!gr[o])return o;var l=gr[o],h;for(h in l)if(l.hasOwnProperty(h)&&h in Ia)return Qr[o]=l[h];return o}var fc=ta("animationend"),wd=ta("animationiteration"),Bp=ta("animationstart"),b0=ta("transitionrun"),x0=ta("transitionstart"),w0=ta("transitioncancel"),qp=ta("transitionend"),Gp=new Map,pc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");pc.push("scrollEnd");function So(o,l){Gp.set(o,l),Vs(l,[o])}var Ed=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},ho=[],mc=0,Lh=0;function Td(){for(var o=mc,l=Lh=mc=0;l<o;){var h=ho[l];ho[l++]=null;var m=ho[l];ho[l++]=null;var E=ho[l];ho[l++]=null;var A=ho[l];if(ho[l++]=null,m!==null&&E!==null){var q=m.pending;q===null?E.next=E:(E.next=q.next,q.next=E),m.pending=E}A!==0&&Nd(h,E,A)}}function Ad(o,l,h,m){ho[mc++]=o,ho[mc++]=l,ho[mc++]=h,ho[mc++]=m,Lh|=m,o.lanes|=m,o=o.alternate,o!==null&&(o.lanes|=m)}function Mh(o,l,h,m){return Ad(o,l,h,m),cs(o)}function Za(o,l){return Ad(o,null,null,l),cs(o)}function Nd(o,l,h){o.lanes|=h;var m=o.alternate;m!==null&&(m.lanes|=h);for(var E=!1,A=o.return;A!==null;)A.childLanes|=h,m=A.alternate,m!==null&&(m.childLanes|=h),A.tag===22&&(o=A.stateNode,o===null||o._visibility&1||(E=!0)),o=A,A=A.return;return o.tag===3?(A=o.stateNode,E&&l!==null&&(E=31-dn(h),o=A.hiddenUpdates,m=o[E],m===null?o[E]=[l]:m.push(l),l.lane=h|536870912),A):null}function cs(o){if(50<dm)throw dm=0,v_=null,Error(r(185));for(var l=o.return;l!==null;)o=l,l=o.return;return o.tag===3?o.stateNode:null}var Yi={};function Oh(o,l,h,m){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function us(o,l,h,m){return new Oh(o,l,h,m)}function Fh(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Io(o,l){var h=o.alternate;return h===null?(h=us(o.tag,l,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=l,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&65011712,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,l=o.dependencies,h.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h.refCleanup=o.refCleanup,h}function Sd(o,l){o.flags&=65011714;var h=o.alternate;return h===null?(o.childLanes=0,o.lanes=l,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=h.childLanes,o.lanes=h.lanes,o.child=h.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=h.memoizedProps,o.memoizedState=h.memoizedState,o.updateQueue=h.updateQueue,o.type=h.type,l=h.dependencies,o.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),o}function du(o,l,h,m,E,A){var q=0;if(m=o,typeof o=="function")Fh(o)&&(q=1);else if(typeof o=="string")q=nM(o,h,Y.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case N:return o=us(31,h,l,E),o.elementType=N,o.lanes=A,o;case O:return Sl(h.children,E,A,l);case L:q=8,E|=24;break;case B:return o=us(12,h,l,E|2),o.elementType=B,o.lanes=A,o;case ae:return o=us(13,h,l,E),o.elementType=ae,o.lanes=A,o;case le:return o=us(19,h,l,E),o.elementType=le,o.lanes=A,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case W:q=10;break e;case K:q=9;break e;case J:q=11;break e;case U:q=14;break e;case C:q=16,m=null;break e}q=29,h=Error(r(130,o===null?"null":typeof o,"")),m=null}return l=us(q,h,l,E),l.elementType=o,l.type=m,l.lanes=A,l}function Sl(o,l,h,m){return o=us(7,o,m,l),o.lanes=h,o}function Id(o,l,h){return o=us(6,o,null,l),o.lanes=h,o}function Uh(o){var l=us(18,null,null,0);return l.stateNode=o,l}function hu(o,l,h){return l=us(4,o.children!==null?o.children:[],o.key,l),l.lanes=h,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}var jh=new WeakMap;function Co(o,l){if(typeof o=="object"&&o!==null){var h=jh.get(o);return h!==void 0?h:(l={value:o,source:l,stack:Mt(l)},jh.set(o,l),l)}return{value:o,source:l,stack:Mt(l)}}var fu=[],gc=0,Vh=null,Cd=0,Ro=[],Po=0,Il=null,ko=1,Do="";function fo(o,l){fu[gc++]=Cd,fu[gc++]=Vh,Vh=o,Cd=l}function E0(o,l,h){Ro[Po++]=ko,Ro[Po++]=Do,Ro[Po++]=Il,Il=o;var m=ko;o=Do;var E=32-dn(m)-1;m&=~(1<<E),h+=1;var A=32-dn(l)+E;if(30<A){var q=E-E%5;A=(m&(1<<q)-1).toString(32),m>>=q,E-=q,ko=1<<32-dn(l)+E|h<<E|m,Do=A+o}else ko=1<<A|h<<E|m,Do=o}function Hp(o){o.return!==null&&(fo(o,1),E0(o,1,0))}function Bh(o){for(;o===Vh;)Vh=fu[--gc],fu[gc]=null,Cd=fu[--gc],fu[gc]=null;for(;o===Il;)Il=Ro[--Po],Ro[Po]=null,Do=Ro[--Po],Ro[Po]=null,ko=Ro[--Po],Ro[Po]=null}function T0(o,l){Ro[Po++]=ko,Ro[Po++]=Do,Ro[Po++]=Il,ko=l.id,Do=l.overflow,Il=o}var Wi=null,Er=null,An=!1,Cs=null,jr=!1,na=Error(r(519));function Cl(o){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw pu(Co(l,o)),na}function zp(o){var l=o.stateNode,h=o.type,m=o.memoizedProps;switch(l[Hn]=o,l[ir]=m,h){case"dialog":Sn("cancel",l),Sn("close",l);break;case"iframe":case"object":case"embed":Sn("load",l);break;case"video":case"audio":for(h=0;h<fm.length;h++)Sn(fm[h],l);break;case"source":Sn("error",l);break;case"img":case"image":case"link":Sn("error",l),Sn("load",l);break;case"details":Sn("toggle",l);break;case"input":Sn("invalid",l),su(l,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":Sn("invalid",l);break;case"textarea":Sn("invalid",l),Ko(l,m.value,m.defaultValue,m.children)}h=m.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||l.textContent===""+h||m.suppressHydrationWarning===!0||lT(l.textContent,h)?(m.popover!=null&&(Sn("beforetoggle",l),Sn("toggle",l)),m.onScroll!=null&&Sn("scroll",l),m.onScrollEnd!=null&&Sn("scrollend",l),m.onClick!=null&&(l.onclick=so),l=!0):l=!1,l||Cl(o,!0)}function el(o){for(Wi=o.return;Wi;)switch(Wi.tag){case 5:case 31:case 13:jr=!1;return;case 27:case 3:jr=!0;return;default:Wi=Wi.return}}function Ki(o){if(o!==Wi)return!1;if(!An)return el(o),An=!0,!1;var l=o.tag,h;if((h=l!==3&&l!==27)&&((h=l===5)&&(h=o.type,h=!(h!=="form"&&h!=="button")||D_(o.type,o.memoizedProps)),h=!h),h&&Er&&Cl(o),el(o),l===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));Er=yT(o)}else if(l===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));Er=yT(o)}else l===27?(l=Er,Iu(o.type)?(o=U_,U_=null,Er=o):Er=l):Er=Wi?ka(o.stateNode.nextSibling):null;return!0}function yc(){Er=Wi=null,An=!1}function $p(){var o=Cs;return o!==null&&(jo===null?jo=o:jo.push.apply(jo,o),Cs=null),o}function pu(o){Cs===null?Cs=[o]:Cs.push(o)}var qh=ne(null),Rl=null,Ca=null;function Pl(o,l,h){te(qh,l._currentValue),l._currentValue=h}function Lo(o){o._currentValue=qh.current,H(qh)}function mu(o,l,h){for(;o!==null;){var m=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,m!==null&&(m.childLanes|=l)):m!==null&&(m.childLanes&l)!==l&&(m.childLanes|=l),o===h)break;o=o.return}}function vc(o,l,h,m){var E=o.child;for(E!==null&&(E.return=o);E!==null;){var A=E.dependencies;if(A!==null){var q=E.child;A=A.firstContext;e:for(;A!==null;){var ee=A;A=E;for(var _e=0;_e<l.length;_e++)if(ee.context===l[_e]){A.lanes|=h,ee=A.alternate,ee!==null&&(ee.lanes|=h),mu(A.return,h,o),m||(q=null);break e}A=ee.next}}else if(E.tag===18){if(q=E.return,q===null)throw Error(r(341));q.lanes|=h,A=q.alternate,A!==null&&(A.lanes|=h),mu(q,h,o),q=null}else q=E.child;if(q!==null)q.return=E;else for(q=E;q!==null;){if(q===o){q=null;break}if(E=q.sibling,E!==null){E.return=q.return,q=E;break}q=q.return}E=q}}function kl(o,l,h,m){o=null;for(var E=l,A=!1;E!==null;){if(!A){if((E.flags&524288)!==0)A=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var q=E.alternate;if(q===null)throw Error(r(387));if(q=q.memoizedProps,q!==null){var ee=E.type;$i(E.pendingProps.value,q.value)||(o!==null?o.push(ee):o=[ee])}}else if(E===xe.current){if(q=E.alternate,q===null)throw Error(r(387));q.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(o!==null?o.push(vm):o=[vm])}E=E.return}o!==null&&vc(l,o,h,m),l.flags|=262144}function Gh(o){for(o=o.firstContext;o!==null;){if(!$i(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Dl(o){Rl=o,Ca=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Ji(o){return A0(Rl,o)}function Hh(o,l){return Rl===null&&Dl(o),A0(o,l)}function A0(o,l){var h=l._currentValue;if(l={context:l,memoizedValue:h,next:null},Ca===null){if(o===null)throw Error(r(308));Ca=l,o.dependencies={lanes:0,firstContext:l},o.flags|=524288}else Ca=Ca.next=l;return h}var F1=typeof AbortController<"u"?AbortController:function(){var o=[],l=this.signal={aborted:!1,addEventListener:function(h,m){o.push(m)}};this.abort=function(){l.aborted=!0,o.forEach(function(h){return h()})}},U1=n.unstable_scheduleCallback,j1=n.unstable_NormalPriority,Xr={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gu(){return{controller:new F1,data:new Map,refCount:0}}function Rd(o){o.refCount--,o.refCount===0&&U1(j1,function(){o.controller.abort()})}var Pd=null,zh=0,v=0,T=null;function R(o,l){if(Pd===null){var h=Pd=[];zh=0,v=T_(),T={status:"pending",value:void 0,then:function(m){h.push(m)}}}return zh++,l.then(V,V),l}function V(){if(--zh===0&&Pd!==null){T!==null&&(T.status="fulfilled");var o=Pd;Pd=null,v=0,T=null;for(var l=0;l<o.length;l++)(0,o[l])()}}function $(o,l){var h=[],m={status:"pending",value:null,reason:null,then:function(E){h.push(E)}};return o.then(function(){m.status="fulfilled",m.value=l;for(var E=0;E<h.length;E++)(0,h[E])(l)},function(E){for(m.status="rejected",m.reason=E,E=0;E<h.length;E++)(0,h[E])(void 0)}),m}var X=se.S;se.S=function(o,l){kE=at(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&R(o,l),X!==null&&X(o,l)};var Z=ne(null);function re(){var o=Z.current;return o!==null?o:Ar.pooledCache}function oe(o,l){l===null?te(Z,Z.current):te(Z,l.pool)}function he(){var o=re();return o===null?null:{parent:Xr._currentValue,pool:o}}var Te=Error(r(460)),Me=Error(r(474)),ue=Error(r(542)),Ne={then:function(){}};function ke(o){return o=o.status,o==="fulfilled"||o==="rejected"}function $e(o,l,h){switch(h=o[h],h===void 0?o.push(l):h!==l&&(l.then(so,so),l=h),l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,ot(o),o;default:if(typeof l.status=="string")l.then(so,so);else{if(o=Ar,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=l,o.status="pending",o.then(function(m){if(l.status==="pending"){var E=l;E.status="fulfilled",E.value=m}},function(m){if(l.status==="pending"){var E=l;E.status="rejected",E.reason=m}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,ot(o),o}throw ze=l,Te}}function De(o){try{var l=o._init;return l(o._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(ze=h,Te):h}}var ze=null;function Je(){if(ze===null)throw Error(r(459));var o=ze;return ze=null,o}function ot(o){if(o===Te||o===ue)throw Error(r(483))}var et=null,kt=0;function Tt(o){var l=kt;return kt+=1,et===null&&(et=[]),$e(et,o,l)}function cn(o,l){l=l.props.ref,o.ref=l!==void 0?l:null}function It(o,l){throw l.$$typeof===_?Error(r(525)):(o=Object.prototype.toString.call(l),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o)))}function Tn(o){function l(Re,Ae){if(o){var Oe=Re.deletions;Oe===null?(Re.deletions=[Ae],Re.flags|=16):Oe.push(Ae)}}function h(Re,Ae){if(!o)return null;for(;Ae!==null;)l(Re,Ae),Ae=Ae.sibling;return null}function m(Re){for(var Ae=new Map;Re!==null;)Re.key!==null?Ae.set(Re.key,Re):Ae.set(Re.index,Re),Re=Re.sibling;return Ae}function E(Re,Ae){return Re=Io(Re,Ae),Re.index=0,Re.sibling=null,Re}function A(Re,Ae,Oe){return Re.index=Oe,o?(Oe=Re.alternate,Oe!==null?(Oe=Oe.index,Oe<Ae?(Re.flags|=67108866,Ae):Oe):(Re.flags|=67108866,Ae)):(Re.flags|=1048576,Ae)}function q(Re){return o&&Re.alternate===null&&(Re.flags|=67108866),Re}function ee(Re,Ae,Oe,Xe){return Ae===null||Ae.tag!==6?(Ae=Id(Oe,Re.mode,Xe),Ae.return=Re,Ae):(Ae=E(Ae,Oe),Ae.return=Re,Ae)}function _e(Re,Ae,Oe,Xe){var Zt=Oe.type;return Zt===O?We(Re,Ae,Oe.props.children,Xe,Oe.key):Ae!==null&&(Ae.elementType===Zt||typeof Zt=="object"&&Zt!==null&&Zt.$$typeof===C&&De(Zt)===Ae.type)?(Ae=E(Ae,Oe.props),cn(Ae,Oe),Ae.return=Re,Ae):(Ae=du(Oe.type,Oe.key,Oe.props,null,Re.mode,Xe),cn(Ae,Oe),Ae.return=Re,Ae)}function Fe(Re,Ae,Oe,Xe){return Ae===null||Ae.tag!==4||Ae.stateNode.containerInfo!==Oe.containerInfo||Ae.stateNode.implementation!==Oe.implementation?(Ae=hu(Oe,Re.mode,Xe),Ae.return=Re,Ae):(Ae=E(Ae,Oe.children||[]),Ae.return=Re,Ae)}function We(Re,Ae,Oe,Xe,Zt){return Ae===null||Ae.tag!==7?(Ae=Sl(Oe,Re.mode,Xe,Zt),Ae.return=Re,Ae):(Ae=E(Ae,Oe),Ae.return=Re,Ae)}function Ze(Re,Ae,Oe){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number"||typeof Ae=="bigint")return Ae=Id(""+Ae,Re.mode,Oe),Ae.return=Re,Ae;if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case w:return Oe=du(Ae.type,Ae.key,Ae.props,null,Re.mode,Oe),cn(Oe,Ae),Oe.return=Re,Oe;case P:return Ae=hu(Ae,Re.mode,Oe),Ae.return=Re,Ae;case C:return Ae=De(Ae),Ze(Re,Ae,Oe)}if(pe(Ae)||k(Ae))return Ae=Sl(Ae,Re.mode,Oe,null),Ae.return=Re,Ae;if(typeof Ae.then=="function")return Ze(Re,Tt(Ae),Oe);if(Ae.$$typeof===W)return Ze(Re,Hh(Re,Ae),Oe);It(Re,Ae)}return null}function je(Re,Ae,Oe,Xe){var Zt=Ae!==null?Ae.key:null;if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint")return Zt!==null?null:ee(Re,Ae,""+Oe,Xe);if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case w:return Oe.key===Zt?_e(Re,Ae,Oe,Xe):null;case P:return Oe.key===Zt?Fe(Re,Ae,Oe,Xe):null;case C:return Oe=De(Oe),je(Re,Ae,Oe,Xe)}if(pe(Oe)||k(Oe))return Zt!==null?null:We(Re,Ae,Oe,Xe,null);if(typeof Oe.then=="function")return je(Re,Ae,Tt(Oe),Xe);if(Oe.$$typeof===W)return je(Re,Ae,Hh(Re,Oe),Xe);It(Re,Oe)}return null}function qe(Re,Ae,Oe,Xe,Zt){if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number"||typeof Xe=="bigint")return Re=Re.get(Oe)||null,ee(Ae,Re,""+Xe,Zt);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case w:return Re=Re.get(Xe.key===null?Oe:Xe.key)||null,_e(Ae,Re,Xe,Zt);case P:return Re=Re.get(Xe.key===null?Oe:Xe.key)||null,Fe(Ae,Re,Xe,Zt);case C:return Xe=De(Xe),qe(Re,Ae,Oe,Xe,Zt)}if(pe(Xe)||k(Xe))return Re=Re.get(Oe)||null,We(Ae,Re,Xe,Zt,null);if(typeof Xe.then=="function")return qe(Re,Ae,Oe,Tt(Xe),Zt);if(Xe.$$typeof===W)return qe(Re,Ae,Oe,Hh(Ae,Xe),Zt);It(Ae,Xe)}return null}function Ct(Re,Ae,Oe,Xe){for(var Zt=null,Yn=null,Ut=Ae,_n=Ae=0,kn=null;Ut!==null&&_n<Oe.length;_n++){Ut.index>_n?(kn=Ut,Ut=null):kn=Ut.sibling;var Wn=je(Re,Ut,Oe[_n],Xe);if(Wn===null){Ut===null&&(Ut=kn);break}o&&Ut&&Wn.alternate===null&&l(Re,Ut),Ae=A(Wn,Ae,_n),Yn===null?Zt=Wn:Yn.sibling=Wn,Yn=Wn,Ut=kn}if(_n===Oe.length)return h(Re,Ut),An&&fo(Re,_n),Zt;if(Ut===null){for(;_n<Oe.length;_n++)Ut=Ze(Re,Oe[_n],Xe),Ut!==null&&(Ae=A(Ut,Ae,_n),Yn===null?Zt=Ut:Yn.sibling=Ut,Yn=Ut);return An&&fo(Re,_n),Zt}for(Ut=m(Ut);_n<Oe.length;_n++)kn=qe(Ut,Re,_n,Oe[_n],Xe),kn!==null&&(o&&kn.alternate!==null&&Ut.delete(kn.key===null?_n:kn.key),Ae=A(kn,Ae,_n),Yn===null?Zt=kn:Yn.sibling=kn,Yn=kn);return o&&Ut.forEach(function(Du){return l(Re,Du)}),An&&fo(Re,_n),Zt}function on(Re,Ae,Oe,Xe){if(Oe==null)throw Error(r(151));for(var Zt=null,Yn=null,Ut=Ae,_n=Ae=0,kn=null,Wn=Oe.next();Ut!==null&&!Wn.done;_n++,Wn=Oe.next()){Ut.index>_n?(kn=Ut,Ut=null):kn=Ut.sibling;var Du=je(Re,Ut,Wn.value,Xe);if(Du===null){Ut===null&&(Ut=kn);break}o&&Ut&&Du.alternate===null&&l(Re,Ut),Ae=A(Du,Ae,_n),Yn===null?Zt=Du:Yn.sibling=Du,Yn=Du,Ut=kn}if(Wn.done)return h(Re,Ut),An&&fo(Re,_n),Zt;if(Ut===null){for(;!Wn.done;_n++,Wn=Oe.next())Wn=Ze(Re,Wn.value,Xe),Wn!==null&&(Ae=A(Wn,Ae,_n),Yn===null?Zt=Wn:Yn.sibling=Wn,Yn=Wn);return An&&fo(Re,_n),Zt}for(Ut=m(Ut);!Wn.done;_n++,Wn=Oe.next())Wn=qe(Ut,Re,_n,Wn.value,Xe),Wn!==null&&(o&&Wn.alternate!==null&&Ut.delete(Wn.key===null?_n:Wn.key),Ae=A(Wn,Ae,_n),Yn===null?Zt=Wn:Yn.sibling=Wn,Yn=Wn);return o&&Ut.forEach(function(fM){return l(Re,fM)}),An&&fo(Re,_n),Zt}function br(Re,Ae,Oe,Xe){if(typeof Oe=="object"&&Oe!==null&&Oe.type===O&&Oe.key===null&&(Oe=Oe.props.children),typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case w:e:{for(var Zt=Oe.key;Ae!==null;){if(Ae.key===Zt){if(Zt=Oe.type,Zt===O){if(Ae.tag===7){h(Re,Ae.sibling),Xe=E(Ae,Oe.props.children),Xe.return=Re,Re=Xe;break e}}else if(Ae.elementType===Zt||typeof Zt=="object"&&Zt!==null&&Zt.$$typeof===C&&De(Zt)===Ae.type){h(Re,Ae.sibling),Xe=E(Ae,Oe.props),cn(Xe,Oe),Xe.return=Re,Re=Xe;break e}h(Re,Ae);break}else l(Re,Ae);Ae=Ae.sibling}Oe.type===O?(Xe=Sl(Oe.props.children,Re.mode,Xe,Oe.key),Xe.return=Re,Re=Xe):(Xe=du(Oe.type,Oe.key,Oe.props,null,Re.mode,Xe),cn(Xe,Oe),Xe.return=Re,Re=Xe)}return q(Re);case P:e:{for(Zt=Oe.key;Ae!==null;){if(Ae.key===Zt)if(Ae.tag===4&&Ae.stateNode.containerInfo===Oe.containerInfo&&Ae.stateNode.implementation===Oe.implementation){h(Re,Ae.sibling),Xe=E(Ae,Oe.children||[]),Xe.return=Re,Re=Xe;break e}else{h(Re,Ae);break}else l(Re,Ae);Ae=Ae.sibling}Xe=hu(Oe,Re.mode,Xe),Xe.return=Re,Re=Xe}return q(Re);case C:return Oe=De(Oe),br(Re,Ae,Oe,Xe)}if(pe(Oe))return Ct(Re,Ae,Oe,Xe);if(k(Oe)){if(Zt=k(Oe),typeof Zt!="function")throw Error(r(150));return Oe=Zt.call(Oe),on(Re,Ae,Oe,Xe)}if(typeof Oe.then=="function")return br(Re,Ae,Tt(Oe),Xe);if(Oe.$$typeof===W)return br(Re,Ae,Hh(Re,Oe),Xe);It(Re,Oe)}return typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint"?(Oe=""+Oe,Ae!==null&&Ae.tag===6?(h(Re,Ae.sibling),Xe=E(Ae,Oe),Xe.return=Re,Re=Xe):(h(Re,Ae),Xe=Id(Oe,Re.mode,Xe),Xe.return=Re,Re=Xe),q(Re)):h(Re,Ae)}return function(Re,Ae,Oe,Xe){try{kt=0;var Zt=br(Re,Ae,Oe,Xe);return et=null,Zt}catch(Ut){if(Ut===Te||Ut===ue)throw Ut;var Yn=us(29,Ut,null,Re.mode);return Yn.lanes=Xe,Yn.return=Re,Yn}finally{}}}var Tr=Tn(!0),fn=Tn(!1),At=!1;function ft(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Rr(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function sn(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function gn(o,l,h){var m=o.updateQueue;if(m===null)return null;if(m=m.shared,(Zn&2)!==0){var E=m.pending;return E===null?l.next=l:(l.next=E.next,E.next=l),m.pending=l,l=cs(o),Nd(o,null,h),l}return Ad(o,m,l,h),cs(o)}function Qn(o,l,h){if(l=l.updateQueue,l!==null&&(l=l.shared,(h&4194048)!==0)){var m=l.lanes;m&=o.pendingLanes,h|=m,l.lanes=h,ts(o,h)}}function _i(o,l){var h=o.updateQueue,m=o.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var E=null,A=null;if(h=h.firstBaseUpdate,h!==null){do{var q={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};A===null?E=A=q:A=A.next=q,h=h.next}while(h!==null);A===null?E=A=l:A=A.next=l}else E=A=l;h={baseState:m.baseState,firstBaseUpdate:E,lastBaseUpdate:A,shared:m.shared,callbacks:m.callbacks},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=l:o.next=l,h.lastBaseUpdate=l}var Qi=!1;function yr(){if(Qi){var o=T;if(o!==null)throw o}}function si(o,l,h,m){Qi=!1;var E=o.updateQueue;At=!1;var A=E.firstBaseUpdate,q=E.lastBaseUpdate,ee=E.shared.pending;if(ee!==null){E.shared.pending=null;var _e=ee,Fe=_e.next;_e.next=null,q===null?A=Fe:q.next=Fe,q=_e;var We=o.alternate;We!==null&&(We=We.updateQueue,ee=We.lastBaseUpdate,ee!==q&&(ee===null?We.firstBaseUpdate=Fe:ee.next=Fe,We.lastBaseUpdate=_e))}if(A!==null){var Ze=E.baseState;q=0,We=Fe=_e=null,ee=A;do{var je=ee.lane&-536870913,qe=je!==ee.lane;if(qe?(Pn&je)===je:(m&je)===je){je!==0&&je===v&&(Qi=!0),We!==null&&(We=We.next={lane:0,tag:ee.tag,payload:ee.payload,callback:null,next:null});e:{var Ct=o,on=ee;je=l;var br=h;switch(on.tag){case 1:if(Ct=on.payload,typeof Ct=="function"){Ze=Ct.call(br,Ze,je);break e}Ze=Ct;break e;case 3:Ct.flags=Ct.flags&-65537|128;case 0:if(Ct=on.payload,je=typeof Ct=="function"?Ct.call(br,Ze,je):Ct,je==null)break e;Ze=g({},Ze,je);break e;case 2:At=!0}}je=ee.callback,je!==null&&(o.flags|=64,qe&&(o.flags|=8192),qe=E.callbacks,qe===null?E.callbacks=[je]:qe.push(je))}else qe={lane:je,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null},We===null?(Fe=We=qe,_e=Ze):We=We.next=qe,q|=je;if(ee=ee.next,ee===null){if(ee=E.shared.pending,ee===null)break;qe=ee,ee=qe.next,qe.next=null,E.lastBaseUpdate=qe,E.shared.pending=null}}while(!0);We===null&&(_e=Ze),E.baseState=_e,E.firstBaseUpdate=Fe,E.lastBaseUpdate=We,A===null&&(E.shared.lanes=0),Eu|=q,o.lanes=q,o.memoizedState=Ze}}function ds(o,l){if(typeof o!="function")throw Error(r(191,o));o.call(l)}function oi(o,l){var h=o.callbacks;if(h!==null)for(o.callbacks=null,o=0;o<h.length;o++)ds(h[o],l)}var xn=ne(null),On=ne(0);function Pr(o,l){o=Ic,te(On,o),te(xn,l),Ic=o|l.baseLanes}function qn(){te(On,Ic),te(xn,xn.current)}function bi(){Ic=On.current,H(xn),H(On)}var kr=ne(null),Fn=null;function Zr(o){var l=o.alternate;te(Mn,Mn.current&1),te(kr,o),Fn===null&&(l===null||xn.current!==null||l.memoizedState!==null)&&(Fn=o)}function Xn(o){te(Mn,Mn.current),te(kr,o),Fn===null&&(Fn=o)}function ai(o){o.tag===22?(te(Mn,Mn.current),te(kr,o),Fn===null&&(Fn=o)):li()}function li(){te(Mn,Mn.current),te(kr,kr.current)}function or(o){H(kr),Fn===o&&(Fn=null),H(Mn)}var Mn=ne(0);function hs(o){for(var l=o;l!==null;){if(l.tag===13){var h=l.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||O_(h)||F_(h)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Vr=0,Jt=null,Xt=null,Un=null,Hs=!1,Mo=!1,Rs=!1,ci=0,Ll=0,Ml=null,$h=0;function vr(){throw Error(r(321))}function Yp(o,l){if(l===null)return!1;for(var h=0;h<l.length&&h<o.length;h++)if(!$i(o[h],l[h]))return!1;return!0}function Wp(o,l,h,m,E,A){return Vr=A,Jt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,se.H=o===null||o.memoizedState===null?G5:Y1,Rs=!1,A=h(m,E),Rs=!1,Mo&&(A=tl(l,h,m,E)),Yh(o),A}function Yh(o){se.H=nm;var l=Xt!==null&&Xt.next!==null;if(Vr=0,Un=Xt=Jt=null,Hs=!1,Ll=0,Ml=null,l)throw Error(r(300));o===null||Di||(o=o.dependencies,o!==null&&Gh(o)&&(Di=!0))}function tl(o,l,h,m){Jt=o;var E=0;do{if(Mo&&(Ml=null),Ll=0,Mo=!1,25<=E)throw Error(r(301));if(E+=1,Un=Xt=null,o.updateQueue!=null){var A=o.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}se.H=H5,A=l(h,m)}while(Mo);return A}function V1(){var o=se.H,l=o.useState()[0];return l=typeof l.then=="function"?Ol(l):l,o=o.useState()[0],(Xt!==null?Xt.memoizedState:null)!==o&&(Jt.flags|=1024),l}function Kp(){var o=ci!==0;return ci=0,o}function Jp(o,l,h){l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~h}function Wh(o){if(Hs){for(o=o.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}Hs=!1}Vr=0,Un=Xt=Jt=null,Mo=!1,Ll=ci=0,Ml=null}function ki(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Un===null?Jt.memoizedState=Un=o:Un=Un.next=o,Un}function Br(){if(Xt===null){var o=Jt.alternate;o=o!==null?o.memoizedState:null}else o=Xt.next;var l=Un===null?Jt.memoizedState:Un.next;if(l!==null)Un=l,Xt=o;else{if(o===null)throw Jt.alternate===null?Error(r(467)):Error(r(310));Xt=o,o={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},Un===null?Jt.memoizedState=Un=o:Un=Un.next=o}return Un}function kd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ol(o){var l=Ll;return Ll+=1,Ml===null&&(Ml=[]),o=$e(Ml,o,l),l=Jt,(Un===null?l.memoizedState:Un.next)===null&&(l=l.alternate,se.H=l===null||l.memoizedState===null?G5:Y1),o}function yu(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Ol(o);if(o.$$typeof===W)return Ji(o)}throw Error(r(438,String(o)))}function _c(o){var l=null,h=Jt.updateQueue;if(h!==null&&(l=h.memoCache),l==null){var m=Jt.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(l={data:m.data.map(function(E){return E.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),h===null&&(h=kd(),Jt.updateQueue=h),h.memoCache=l,h=l.data[l.index],h===void 0)for(h=l.data[l.index]=Array(o),m=0;m<o;m++)h[m]=F;return l.index++,h}function Ra(o,l){return typeof l=="function"?l(o):l}function Kh(o){var l=Br();return vu(l,Xt,o)}function vu(o,l,h){var m=o.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=h;var E=o.baseQueue,A=m.pending;if(A!==null){if(E!==null){var q=E.next;E.next=A.next,A.next=q}l.baseQueue=E=A,m.pending=null}if(A=o.baseState,E===null)o.memoizedState=A;else{l=E.next;var ee=q=null,_e=null,Fe=l,We=!1;do{var Ze=Fe.lane&-536870913;if(Ze!==Fe.lane?(Pn&Ze)===Ze:(Vr&Ze)===Ze){var je=Fe.revertLane;if(je===0)_e!==null&&(_e=_e.next={lane:0,revertLane:0,gesture:null,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null}),Ze===v&&(We=!0);else if((Vr&je)===je){Fe=Fe.next,je===v&&(We=!0);continue}else Ze={lane:0,revertLane:Fe.revertLane,gesture:null,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null},_e===null?(ee=_e=Ze,q=A):_e=_e.next=Ze,Jt.lanes|=je,Eu|=je;Ze=Fe.action,Rs&&h(A,Ze),A=Fe.hasEagerState?Fe.eagerState:h(A,Ze)}else je={lane:Ze,revertLane:Fe.revertLane,gesture:Fe.gesture,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null},_e===null?(ee=_e=je,q=A):_e=_e.next=je,Jt.lanes|=Ze,Eu|=Ze;Fe=Fe.next}while(Fe!==null&&Fe!==l);if(_e===null?q=A:_e.next=ee,!$i(A,o.memoizedState)&&(Di=!0,We&&(h=T,h!==null)))throw h;o.memoizedState=A,o.baseState=q,o.baseQueue=_e,m.lastRenderedState=A}return E===null&&(m.lanes=0),[o.memoizedState,m.dispatch]}function Jh(o){var l=Br(),h=l.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=o;var m=h.dispatch,E=h.pending,A=l.memoizedState;if(E!==null){h.pending=null;var q=E=E.next;do A=o(A,q.action),q=q.next;while(q!==E);$i(A,l.memoizedState)||(Di=!0),l.memoizedState=A,l.baseQueue===null&&(l.baseState=A),h.lastRenderedState=A}return[A,m]}function Qh(o,l,h){var m=Jt,E=Br(),A=An;if(A){if(h===void 0)throw Error(r(407));h=h()}else h=l();var q=!$i((Xt||E).memoizedState,h);if(q&&(E.memoizedState=h,Di=!0),E=E.queue,B1(Xp.bind(null,m,E,o),[o]),E.getSnapshot!==l||q||Un!==null&&Un.memoizedState.tag&1){if(m.flags|=2048,xc(9,{destroy:void 0},Qp.bind(null,m,E,h,l),null),Ar===null)throw Error(r(349));A||(Vr&127)!==0||nl(m,l,h)}return h}function nl(o,l,h){o.flags|=16384,o={getSnapshot:l,value:h},l=Jt.updateQueue,l===null?(l=kd(),Jt.updateQueue=l,l.stores=[o]):(h=l.stores,h===null?l.stores=[o]:h.push(o))}function Qp(o,l,h,m){l.value=h,l.getSnapshot=m,N0(l)&&Zp(o)}function Xp(o,l,h){return h(function(){N0(l)&&Zp(o)})}function N0(o){var l=o.getSnapshot;o=o.value;try{var h=l();return!$i(o,h)}catch{return!0}}function Zp(o){var l=Za(o,2);l!==null&&Vo(l,o,2)}function Fl(o){var l=ki();if(typeof o=="function"){var h=o;if(o=h(),Rs){rn(!0);try{h()}finally{rn(!1)}}}return l.memoizedState=l.baseState=o,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ra,lastRenderedState:o},l}function S0(o,l,h,m){return o.baseState=h,vu(o,Xt,typeof m=="function"?m:Ra)}function I0(o,l,h,m,E){if(k0(o))throw Error(r(485));if(o=l.action,o!==null){var A={payload:E,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(q){A.listeners.push(q)}};se.T!==null?h(!0):A.isTransition=!1,m(A),h=l.pending,h===null?(A.next=l.pending=A,C0(l,A)):(A.next=h.next,l.pending=h.next=A)}}function C0(o,l){var h=l.action,m=l.payload,E=o.state;if(l.isTransition){var A=se.T,q={};se.T=q;try{var ee=h(E,m),_e=se.S;_e!==null&&_e(q,ee),em(o,l,ee)}catch(Fe){bc(o,l,Fe)}finally{A!==null&&q.types!==null&&(A.types=q.types),se.T=A}}else try{A=h(E,m),em(o,l,A)}catch(Fe){bc(o,l,Fe)}}function em(o,l,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(m){R0(o,l,m)},function(m){return bc(o,l,m)}):R0(o,l,h)}function R0(o,l,h){l.status="fulfilled",l.value=h,Xh(l),o.state=h,l=o.pending,l!==null&&(h=l.next,h===l?o.pending=null:(h=h.next,l.next=h,C0(o,h)))}function bc(o,l,h){var m=o.pending;if(o.pending=null,m!==null){m=m.next;do l.status="rejected",l.reason=h,Xh(l),l=l.next;while(l!==m)}o.action=null}function Xh(o){o=o.listeners;for(var l=0;l<o.length;l++)(0,o[l])()}function Dd(o,l){return l}function Pa(o,l){if(An){var h=Ar.formState;if(h!==null){e:{var m=Jt;if(An){if(Er){t:{for(var E=Er,A=jr;E.nodeType!==8;){if(!A){E=null;break t}if(E=ka(E.nextSibling),E===null){E=null;break t}}A=E.data,E=A==="F!"||A==="F"?E:null}if(E){Er=ka(E.nextSibling),m=E.data==="F!";break e}}Cl(m)}m=!1}m&&(l=h[0])}}return h=ki(),h.memoizedState=h.baseState=l,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dd,lastRenderedState:l},h.queue=m,h=V5.bind(null,Jt,m),m.dispatch=h,m=Fl(!1),A=$1.bind(null,Jt,!1,m.queue),m=ki(),E={state:l,dispatch:null,action:o,pending:null},m.queue=E,h=I0.bind(null,Jt,E,A,h),E.dispatch=h,m.memoizedState=o,[l,h,!1]}function rl(o){var l=Br();return il(l,Xt,o)}function il(o,l,h){if(l=vu(o,l,Dd)[0],o=Kh(Ra)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var m=Ol(l)}catch(q){throw q===Te?ue:q}else m=l;l=Br();var E=l.queue,A=E.dispatch;return h!==l.memoizedState&&(Jt.flags|=2048,xc(9,{destroy:void 0},Zh.bind(null,E,h),null)),[m,A,o]}function Zh(o,l){o.action=l}function ef(o){var l=Br(),h=Xt;if(h!==null)return il(l,h,o);Br(),l=l.memoizedState,h=Br();var m=h.queue.dispatch;return h.memoizedState=o,[l,m,!1]}function xc(o,l,h,m){return o={tag:o,create:h,deps:m,inst:l,next:null},l=Jt.updateQueue,l===null&&(l=kd(),Jt.updateQueue=l),h=l.lastEffect,h===null?l.lastEffect=o.next=o:(m=h.next,h.next=o,o.next=m,l.lastEffect=o),o}function P0(){return Br().memoizedState}function _u(o,l,h,m){var E=ki();Jt.flags|=o,E.memoizedState=xc(1|l,{destroy:void 0},h,m===void 0?null:m)}function bu(o,l,h,m){var E=Br();m=m===void 0?null:m;var A=E.memoizedState.inst;Xt!==null&&m!==null&&Yp(m,Xt.memoizedState.deps)?E.memoizedState=xc(l,A,h,m):(Jt.flags|=o,E.memoizedState=xc(1|l,A,h,m))}function N5(o,l){_u(8390656,8,o,l)}function B1(o,l){bu(2048,8,o,l)}function aL(o){Jt.flags|=4;var l=Jt.updateQueue;if(l===null)l=kd(),Jt.updateQueue=l,l.events=[o];else{var h=l.events;h===null?l.events=[o]:h.push(o)}}function S5(o){var l=Br().memoizedState;return aL({ref:l,nextImpl:o}),function(){if((Zn&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function I5(o,l){return bu(4,2,o,l)}function C5(o,l){return bu(4,4,o,l)}function R5(o,l){if(typeof l=="function"){o=o();var h=l(o);return function(){typeof h=="function"?h():l(null)}}if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function P5(o,l,h){h=h!=null?h.concat([o]):null,bu(4,4,R5.bind(null,l,o),h)}function q1(){}function k5(o,l){var h=Br();l=l===void 0?null:l;var m=h.memoizedState;return l!==null&&Yp(l,m[1])?m[0]:(h.memoizedState=[o,l],o)}function D5(o,l){var h=Br();l=l===void 0?null:l;var m=h.memoizedState;if(l!==null&&Yp(l,m[1]))return m[0];if(m=o(),Rs){rn(!0);try{o()}finally{rn(!1)}}return h.memoizedState=[m,l],m}function G1(o,l,h){return h===void 0||(Vr&1073741824)!==0&&(Pn&261930)===0?o.memoizedState=l:(o.memoizedState=h,o=LE(),Jt.lanes|=o,Eu|=o,h)}function L5(o,l,h,m){return $i(h,l)?h:xn.current!==null?(o=G1(o,h,m),$i(o,l)||(Di=!0),o):(Vr&42)===0||(Vr&1073741824)!==0&&(Pn&261930)===0?(Di=!0,o.memoizedState=h):(o=LE(),Jt.lanes|=o,Eu|=o,l)}function M5(o,l,h,m,E){var A=ve.p;ve.p=A!==0&&8>A?A:8;var q=se.T,ee={};se.T=ee,$1(o,!1,l,h);try{var _e=E(),Fe=se.S;if(Fe!==null&&Fe(ee,_e),_e!==null&&typeof _e=="object"&&typeof _e.then=="function"){var We=$(_e,m);tm(o,l,We,sa(o))}else tm(o,l,m,sa(o))}catch(Ze){tm(o,l,{then:function(){},status:"rejected",reason:Ze},sa())}finally{ve.p=A,q!==null&&ee.types!==null&&(q.types=ee.types),se.T=q}}function lL(){}function H1(o,l,h,m){if(o.tag!==5)throw Error(r(476));var E=O5(o).queue;M5(o,E,l,me,h===null?lL:function(){return F5(o),h(m)})}function O5(o){var l=o.memoizedState;if(l!==null)return l;l={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ra,lastRenderedState:me},next:null};var h={};return l.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ra,lastRenderedState:h},next:null},o.memoizedState=l,o=o.alternate,o!==null&&(o.memoizedState=l),l}function F5(o){var l=O5(o);l.next===null&&(l=o.alternate.memoizedState),tm(o,l.next.queue,{},sa())}function z1(){return Ji(vm)}function U5(){return Br().memoizedState}function j5(){return Br().memoizedState}function cL(o){for(var l=o.return;l!==null;){switch(l.tag){case 24:case 3:var h=sa();o=sn(h);var m=gn(l,o,h);m!==null&&(Vo(m,l,h),Qn(m,l,h)),l={cache:gu()},o.payload=l;return}l=l.return}}function uL(o,l,h){var m=sa();h={lane:m,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},k0(o)?B5(l,h):(h=Mh(o,l,h,m),h!==null&&(Vo(h,o,m),q5(h,l,m)))}function V5(o,l,h){var m=sa();tm(o,l,h,m)}function tm(o,l,h,m){var E={lane:m,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(k0(o))B5(l,E);else{var A=o.alternate;if(o.lanes===0&&(A===null||A.lanes===0)&&(A=l.lastRenderedReducer,A!==null))try{var q=l.lastRenderedState,ee=A(q,h);if(E.hasEagerState=!0,E.eagerState=ee,$i(ee,q))return Ad(o,l,E,0),Ar===null&&Td(),!1}catch{}finally{}if(h=Mh(o,l,E,m),h!==null)return Vo(h,o,m),q5(h,l,m),!0}return!1}function $1(o,l,h,m){if(m={lane:2,revertLane:T_(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},k0(o)){if(l)throw Error(r(479))}else l=Mh(o,h,m,2),l!==null&&Vo(l,o,2)}function k0(o){var l=o.alternate;return o===Jt||l!==null&&l===Jt}function B5(o,l){Mo=Hs=!0;var h=o.pending;h===null?l.next=l:(l.next=h.next,h.next=l),o.pending=l}function q5(o,l,h){if((h&4194048)!==0){var m=l.lanes;m&=o.pendingLanes,h|=m,l.lanes=h,ts(o,h)}}var nm={readContext:Ji,use:yu,useCallback:vr,useContext:vr,useEffect:vr,useImperativeHandle:vr,useLayoutEffect:vr,useInsertionEffect:vr,useMemo:vr,useReducer:vr,useRef:vr,useState:vr,useDebugValue:vr,useDeferredValue:vr,useTransition:vr,useSyncExternalStore:vr,useId:vr,useHostTransitionStatus:vr,useFormState:vr,useActionState:vr,useOptimistic:vr,useMemoCache:vr,useCacheRefresh:vr};nm.useEffectEvent=vr;var G5={readContext:Ji,use:yu,useCallback:function(o,l){return ki().memoizedState=[o,l===void 0?null:l],o},useContext:Ji,useEffect:N5,useImperativeHandle:function(o,l,h){h=h!=null?h.concat([o]):null,_u(4194308,4,R5.bind(null,l,o),h)},useLayoutEffect:function(o,l){return _u(4194308,4,o,l)},useInsertionEffect:function(o,l){_u(4,2,o,l)},useMemo:function(o,l){var h=ki();l=l===void 0?null:l;var m=o();if(Rs){rn(!0);try{o()}finally{rn(!1)}}return h.memoizedState=[m,l],m},useReducer:function(o,l,h){var m=ki();if(h!==void 0){var E=h(l);if(Rs){rn(!0);try{h(l)}finally{rn(!1)}}}else E=l;return m.memoizedState=m.baseState=E,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:E},m.queue=o,o=o.dispatch=uL.bind(null,Jt,o),[m.memoizedState,o]},useRef:function(o){var l=ki();return o={current:o},l.memoizedState=o},useState:function(o){o=Fl(o);var l=o.queue,h=V5.bind(null,Jt,l);return l.dispatch=h,[o.memoizedState,h]},useDebugValue:q1,useDeferredValue:function(o,l){var h=ki();return G1(h,o,l)},useTransition:function(){var o=Fl(!1);return o=M5.bind(null,Jt,o.queue,!0,!1),ki().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,l,h){var m=Jt,E=ki();if(An){if(h===void 0)throw Error(r(407));h=h()}else{if(h=l(),Ar===null)throw Error(r(349));(Pn&127)!==0||nl(m,l,h)}E.memoizedState=h;var A={value:h,getSnapshot:l};return E.queue=A,N5(Xp.bind(null,m,A,o),[o]),m.flags|=2048,xc(9,{destroy:void 0},Qp.bind(null,m,A,h,l),null),h},useId:function(){var o=ki(),l=Ar.identifierPrefix;if(An){var h=Do,m=ko;h=(m&~(1<<32-dn(m)-1)).toString(32)+h,l="_"+l+"R_"+h,h=ci++,0<h&&(l+="H"+h.toString(32)),l+="_"}else h=$h++,l="_"+l+"r_"+h.toString(32)+"_";return o.memoizedState=l},useHostTransitionStatus:z1,useFormState:Pa,useActionState:Pa,useOptimistic:function(o){var l=ki();l.memoizedState=l.baseState=o;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=h,l=$1.bind(null,Jt,!0,h),h.dispatch=l,[o,l]},useMemoCache:_c,useCacheRefresh:function(){return ki().memoizedState=cL.bind(null,Jt)},useEffectEvent:function(o){var l=ki(),h={impl:o};return l.memoizedState=h,function(){if((Zn&2)!==0)throw Error(r(440));return h.impl.apply(void 0,arguments)}}},Y1={readContext:Ji,use:yu,useCallback:k5,useContext:Ji,useEffect:B1,useImperativeHandle:P5,useInsertionEffect:I5,useLayoutEffect:C5,useMemo:D5,useReducer:Kh,useRef:P0,useState:function(){return Kh(Ra)},useDebugValue:q1,useDeferredValue:function(o,l){var h=Br();return L5(h,Xt.memoizedState,o,l)},useTransition:function(){var o=Kh(Ra)[0],l=Br().memoizedState;return[typeof o=="boolean"?o:Ol(o),l]},useSyncExternalStore:Qh,useId:U5,useHostTransitionStatus:z1,useFormState:rl,useActionState:rl,useOptimistic:function(o,l){var h=Br();return S0(h,Xt,o,l)},useMemoCache:_c,useCacheRefresh:j5};Y1.useEffectEvent=S5;var H5={readContext:Ji,use:yu,useCallback:k5,useContext:Ji,useEffect:B1,useImperativeHandle:P5,useInsertionEffect:I5,useLayoutEffect:C5,useMemo:D5,useReducer:Jh,useRef:P0,useState:function(){return Jh(Ra)},useDebugValue:q1,useDeferredValue:function(o,l){var h=Br();return Xt===null?G1(h,o,l):L5(h,Xt.memoizedState,o,l)},useTransition:function(){var o=Jh(Ra)[0],l=Br().memoizedState;return[typeof o=="boolean"?o:Ol(o),l]},useSyncExternalStore:Qh,useId:U5,useHostTransitionStatus:z1,useFormState:ef,useActionState:ef,useOptimistic:function(o,l){var h=Br();return Xt!==null?S0(h,Xt,o,l):(h.baseState=o,[o,h.queue.dispatch])},useMemoCache:_c,useCacheRefresh:j5};H5.useEffectEvent=S5;function W1(o,l,h,m){l=o.memoizedState,h=h(m,l),h=h==null?l:g({},l,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var K1={enqueueSetState:function(o,l,h){o=o._reactInternals;var m=sa(),E=sn(m);E.payload=l,h!=null&&(E.callback=h),l=gn(o,E,m),l!==null&&(Vo(l,o,m),Qn(l,o,m))},enqueueReplaceState:function(o,l,h){o=o._reactInternals;var m=sa(),E=sn(m);E.tag=1,E.payload=l,h!=null&&(E.callback=h),l=gn(o,E,m),l!==null&&(Vo(l,o,m),Qn(l,o,m))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var h=sa(),m=sn(h);m.tag=2,l!=null&&(m.callback=l),l=gn(o,m,h),l!==null&&(Vo(l,o,h),Qn(l,o,h))}};function z5(o,l,h,m,E,A,q){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(m,A,q):l.prototype&&l.prototype.isPureReactComponent?!Ka(h,m)||!Ka(E,A):!0}function $5(o,l,h,m){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(h,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(h,m),l.state!==o&&K1.enqueueReplaceState(l,l.state,null)}function Ld(o,l){var h=l;if("ref"in l){h={};for(var m in l)m!=="ref"&&(h[m]=l[m])}if(o=o.defaultProps){h===l&&(h=g({},h));for(var E in o)h[E]===void 0&&(h[E]=o[E])}return h}function Y5(o){Ed(o)}function W5(o){console.error(o)}function K5(o){Ed(o)}function D0(o,l){try{var h=o.onUncaughtError;h(l.value,{componentStack:l.stack})}catch(m){setTimeout(function(){throw m})}}function J5(o,l,h){try{var m=o.onCaughtError;m(h.value,{componentStack:h.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function J1(o,l,h){return h=sn(h),h.tag=3,h.payload={element:null},h.callback=function(){D0(o,l)},h}function Q5(o){return o=sn(o),o.tag=3,o}function X5(o,l,h,m){var E=h.type.getDerivedStateFromError;if(typeof E=="function"){var A=m.value;o.payload=function(){return E(A)},o.callback=function(){J5(l,h,m)}}var q=h.stateNode;q!==null&&typeof q.componentDidCatch=="function"&&(o.callback=function(){J5(l,h,m),typeof E!="function"&&(Tu===null?Tu=new Set([this]):Tu.add(this));var ee=m.stack;this.componentDidCatch(m.value,{componentStack:ee!==null?ee:""})})}function dL(o,l,h,m,E){if(h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(l=h.alternate,l!==null&&kl(l,h,E,!0),h=kr.current,h!==null){switch(h.tag){case 31:case 13:return Fn===null?z0():h.alternate===null&&ui===0&&(ui=3),h.flags&=-257,h.flags|=65536,h.lanes=E,m===Ne?h.flags|=16384:(l=h.updateQueue,l===null?h.updateQueue=new Set([m]):l.add(m),x_(o,m,E)),!1;case 22:return h.flags|=65536,m===Ne?h.flags|=16384:(l=h.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([m])},h.updateQueue=l):(h=l.retryQueue,h===null?l.retryQueue=new Set([m]):h.add(m)),x_(o,m,E)),!1}throw Error(r(435,h.tag))}return x_(o,m,E),z0(),!1}if(An)return l=kr.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=E,m!==na&&(o=Error(r(422),{cause:m}),pu(Co(o,h)))):(m!==na&&(l=Error(r(423),{cause:m}),pu(Co(l,h))),o=o.current.alternate,o.flags|=65536,E&=-E,o.lanes|=E,m=Co(m,h),E=J1(o.stateNode,m,E),_i(o,E),ui!==4&&(ui=2)),!1;var A=Error(r(520),{cause:m});if(A=Co(A,h),um===null?um=[A]:um.push(A),ui!==4&&(ui=2),l===null)return!0;m=Co(m,h),h=l;do{switch(h.tag){case 3:return h.flags|=65536,o=E&-E,h.lanes|=o,o=J1(h.stateNode,m,o),_i(h,o),!1;case 1:if(l=h.type,A=h.stateNode,(h.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Tu===null||!Tu.has(A))))return h.flags|=65536,E&=-E,h.lanes|=E,E=Q5(E),X5(E,o,h,m),_i(h,E),!1}h=h.return}while(h!==null);return!1}var Q1=Error(r(461)),Di=!1;function Ps(o,l,h,m){l.child=o===null?fn(l,null,h,m):Tr(l,o.child,h,m)}function Z5(o,l,h,m,E){h=h.render;var A=l.ref;if("ref"in m){var q={};for(var ee in m)ee!=="ref"&&(q[ee]=m[ee])}else q=m;return Dl(l),m=Wp(o,l,h,q,A,E),ee=Kp(),o!==null&&!Di?(Jp(o,l,E),wc(o,l,E)):(An&&ee&&Hp(l),l.flags|=1,Ps(o,l,m,E),l.child)}function eE(o,l,h,m,E){if(o===null){var A=h.type;return typeof A=="function"&&!Fh(A)&&A.defaultProps===void 0&&h.compare===null?(l.tag=15,l.type=A,tE(o,l,A,m,E)):(o=du(h.type,null,m,l,l.mode,E),o.ref=l.ref,o.return=l,l.child=o)}if(A=o.child,!s_(o,E)){var q=A.memoizedProps;if(h=h.compare,h=h!==null?h:Ka,h(q,m)&&o.ref===l.ref)return wc(o,l,E)}return l.flags|=1,o=Io(A,m),o.ref=l.ref,o.return=l,l.child=o}function tE(o,l,h,m,E){if(o!==null){var A=o.memoizedProps;if(Ka(A,m)&&o.ref===l.ref)if(Di=!1,l.pendingProps=m=A,s_(o,E))(o.flags&131072)!==0&&(Di=!0);else return l.lanes=o.lanes,wc(o,l,E)}return X1(o,l,h,m,E)}function nE(o,l,h,m){var E=m.children,A=o!==null?o.memoizedState:null;if(o===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((l.flags&128)!==0){if(A=A!==null?A.baseLanes|h:h,o!==null){for(m=l.child=o.child,E=0;m!==null;)E=E|m.lanes|m.childLanes,m=m.sibling;m=E&~A}else m=0,l.child=null;return rE(o,l,A,h,m)}if((h&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},o!==null&&oe(l,A!==null?A.cachePool:null),A!==null?Pr(l,A):qn(),ai(l);else return m=l.lanes=536870912,rE(o,l,A!==null?A.baseLanes|h:h,h,m)}else A!==null?(oe(l,A.cachePool),Pr(l,A),li(),l.memoizedState=null):(o!==null&&oe(l,null),qn(),li());return Ps(o,l,E,h),l.child}function rm(o,l){return o!==null&&o.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function rE(o,l,h,m,E){var A=re();return A=A===null?null:{parent:Xr._currentValue,pool:A},l.memoizedState={baseLanes:h,cachePool:A},o!==null&&oe(l,null),qn(),ai(l),o!==null&&kl(o,l,m,!0),l.childLanes=E,null}function L0(o,l){return l=O0({mode:l.mode,children:l.children},o.mode),l.ref=o.ref,o.child=l,l.return=o,l}function iE(o,l,h){return Tr(l,o.child,null,h),o=L0(l,l.pendingProps),o.flags|=2,or(l),l.memoizedState=null,o}function hL(o,l,h){var m=l.pendingProps,E=(l.flags&128)!==0;if(l.flags&=-129,o===null){if(An){if(m.mode==="hidden")return o=L0(l,m),l.lanes=536870912,rm(null,o);if(Xn(l),(o=Er)?(o=gT(o,jr),o=o!==null&&o.data==="&"?o:null,o!==null&&(l.memoizedState={dehydrated:o,treeContext:Il!==null?{id:ko,overflow:Do}:null,retryLane:536870912,hydrationErrors:null},h=Uh(o),h.return=l,l.child=h,Wi=l,Er=null)):o=null,o===null)throw Cl(l);return l.lanes=536870912,null}return L0(l,m)}var A=o.memoizedState;if(A!==null){var q=A.dehydrated;if(Xn(l),E)if(l.flags&256)l.flags&=-257,l=iE(o,l,h);else if(l.memoizedState!==null)l.child=o.child,l.flags|=128,l=null;else throw Error(r(558));else if(Di||kl(o,l,h,!1),E=(h&o.childLanes)!==0,Di||E){if(m=Ar,m!==null&&(q=ns(m,h),q!==0&&q!==A.retryLane))throw A.retryLane=q,Za(o,q),Vo(m,o,q),Q1;z0(),l=iE(o,l,h)}else o=A.treeContext,Er=ka(q.nextSibling),Wi=l,An=!0,Cs=null,jr=!1,o!==null&&T0(l,o),l=L0(l,m),l.flags|=4096;return l}return o=Io(o.child,{mode:m.mode,children:m.children}),o.ref=l.ref,l.child=o,o.return=l,o}function M0(o,l){var h=l.ref;if(h===null)o!==null&&o.ref!==null&&(l.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(r(284));(o===null||o.ref!==h)&&(l.flags|=4194816)}}function X1(o,l,h,m,E){return Dl(l),h=Wp(o,l,h,m,void 0,E),m=Kp(),o!==null&&!Di?(Jp(o,l,E),wc(o,l,E)):(An&&m&&Hp(l),l.flags|=1,Ps(o,l,h,E),l.child)}function sE(o,l,h,m,E,A){return Dl(l),l.updateQueue=null,h=tl(l,m,h,E),Yh(o),m=Kp(),o!==null&&!Di?(Jp(o,l,A),wc(o,l,A)):(An&&m&&Hp(l),l.flags|=1,Ps(o,l,h,A),l.child)}function oE(o,l,h,m,E){if(Dl(l),l.stateNode===null){var A=Yi,q=h.contextType;typeof q=="object"&&q!==null&&(A=Ji(q)),A=new h(m,A),l.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=K1,l.stateNode=A,A._reactInternals=l,A=l.stateNode,A.props=m,A.state=l.memoizedState,A.refs={},ft(l),q=h.contextType,A.context=typeof q=="object"&&q!==null?Ji(q):Yi,A.state=l.memoizedState,q=h.getDerivedStateFromProps,typeof q=="function"&&(W1(l,h,q,m),A.state=l.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(q=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),q!==A.state&&K1.enqueueReplaceState(A,A.state,null),si(l,m,A,E),yr(),A.state=l.memoizedState),typeof A.componentDidMount=="function"&&(l.flags|=4194308),m=!0}else if(o===null){A=l.stateNode;var ee=l.memoizedProps,_e=Ld(h,ee);A.props=_e;var Fe=A.context,We=h.contextType;q=Yi,typeof We=="object"&&We!==null&&(q=Ji(We));var Ze=h.getDerivedStateFromProps;We=typeof Ze=="function"||typeof A.getSnapshotBeforeUpdate=="function",ee=l.pendingProps!==ee,We||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(ee||Fe!==q)&&$5(l,A,m,q),At=!1;var je=l.memoizedState;A.state=je,si(l,m,A,E),yr(),Fe=l.memoizedState,ee||je!==Fe||At?(typeof Ze=="function"&&(W1(l,h,Ze,m),Fe=l.memoizedState),(_e=At||z5(l,h,_e,m,je,Fe,q))?(We||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(l.flags|=4194308)):(typeof A.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=m,l.memoizedState=Fe),A.props=m,A.state=Fe,A.context=q,m=_e):(typeof A.componentDidMount=="function"&&(l.flags|=4194308),m=!1)}else{A=l.stateNode,Rr(o,l),q=l.memoizedProps,We=Ld(h,q),A.props=We,Ze=l.pendingProps,je=A.context,Fe=h.contextType,_e=Yi,typeof Fe=="object"&&Fe!==null&&(_e=Ji(Fe)),ee=h.getDerivedStateFromProps,(Fe=typeof ee=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(q!==Ze||je!==_e)&&$5(l,A,m,_e),At=!1,je=l.memoizedState,A.state=je,si(l,m,A,E),yr();var qe=l.memoizedState;q!==Ze||je!==qe||At||o!==null&&o.dependencies!==null&&Gh(o.dependencies)?(typeof ee=="function"&&(W1(l,h,ee,m),qe=l.memoizedState),(We=At||z5(l,h,We,m,je,qe,_e)||o!==null&&o.dependencies!==null&&Gh(o.dependencies))?(Fe||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(m,qe,_e),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(m,qe,_e)),typeof A.componentDidUpdate=="function"&&(l.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof A.componentDidUpdate!="function"||q===o.memoizedProps&&je===o.memoizedState||(l.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||q===o.memoizedProps&&je===o.memoizedState||(l.flags|=1024),l.memoizedProps=m,l.memoizedState=qe),A.props=m,A.state=qe,A.context=_e,m=We):(typeof A.componentDidUpdate!="function"||q===o.memoizedProps&&je===o.memoizedState||(l.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||q===o.memoizedProps&&je===o.memoizedState||(l.flags|=1024),m=!1)}return A=m,M0(o,l),m=(l.flags&128)!==0,A||m?(A=l.stateNode,h=m&&typeof h.getDerivedStateFromError!="function"?null:A.render(),l.flags|=1,o!==null&&m?(l.child=Tr(l,o.child,null,E),l.child=Tr(l,null,h,E)):Ps(o,l,h,E),l.memoizedState=A.state,o=l.child):o=wc(o,l,E),o}function aE(o,l,h,m){return yc(),l.flags|=256,Ps(o,l,h,m),l.child}var Z1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function e_(o){return{baseLanes:o,cachePool:he()}}function t_(o,l,h){return o=o!==null?o.childLanes&~h:0,l&&(o|=ia),o}function lE(o,l,h){var m=l.pendingProps,E=!1,A=(l.flags&128)!==0,q;if((q=A)||(q=o!==null&&o.memoizedState===null?!1:(Mn.current&2)!==0),q&&(E=!0,l.flags&=-129),q=(l.flags&32)!==0,l.flags&=-33,o===null){if(An){if(E?Zr(l):li(),(o=Er)?(o=gT(o,jr),o=o!==null&&o.data!=="&"?o:null,o!==null&&(l.memoizedState={dehydrated:o,treeContext:Il!==null?{id:ko,overflow:Do}:null,retryLane:536870912,hydrationErrors:null},h=Uh(o),h.return=l,l.child=h,Wi=l,Er=null)):o=null,o===null)throw Cl(l);return F_(o)?l.lanes=32:l.lanes=536870912,null}var ee=m.children;return m=m.fallback,E?(li(),E=l.mode,ee=O0({mode:"hidden",children:ee},E),m=Sl(m,E,h,null),ee.return=l,m.return=l,ee.sibling=m,l.child=ee,m=l.child,m.memoizedState=e_(h),m.childLanes=t_(o,q,h),l.memoizedState=Z1,rm(null,m)):(Zr(l),n_(l,ee))}var _e=o.memoizedState;if(_e!==null&&(ee=_e.dehydrated,ee!==null)){if(A)l.flags&256?(Zr(l),l.flags&=-257,l=r_(o,l,h)):l.memoizedState!==null?(li(),l.child=o.child,l.flags|=128,l=null):(li(),ee=m.fallback,E=l.mode,m=O0({mode:"visible",children:m.children},E),ee=Sl(ee,E,h,null),ee.flags|=2,m.return=l,ee.return=l,m.sibling=ee,l.child=m,Tr(l,o.child,null,h),m=l.child,m.memoizedState=e_(h),m.childLanes=t_(o,q,h),l.memoizedState=Z1,l=rm(null,m));else if(Zr(l),F_(ee)){if(q=ee.nextSibling&&ee.nextSibling.dataset,q)var Fe=q.dgst;q=Fe,m=Error(r(419)),m.stack="",m.digest=q,pu({value:m,source:null,stack:null}),l=r_(o,l,h)}else if(Di||kl(o,l,h,!1),q=(h&o.childLanes)!==0,Di||q){if(q=Ar,q!==null&&(m=ns(q,h),m!==0&&m!==_e.retryLane))throw _e.retryLane=m,Za(o,m),Vo(q,o,m),Q1;O_(ee)||z0(),l=r_(o,l,h)}else O_(ee)?(l.flags|=192,l.child=o.child,l=null):(o=_e.treeContext,Er=ka(ee.nextSibling),Wi=l,An=!0,Cs=null,jr=!1,o!==null&&T0(l,o),l=n_(l,m.children),l.flags|=4096);return l}return E?(li(),ee=m.fallback,E=l.mode,_e=o.child,Fe=_e.sibling,m=Io(_e,{mode:"hidden",children:m.children}),m.subtreeFlags=_e.subtreeFlags&65011712,Fe!==null?ee=Io(Fe,ee):(ee=Sl(ee,E,h,null),ee.flags|=2),ee.return=l,m.return=l,m.sibling=ee,l.child=m,rm(null,m),m=l.child,ee=o.child.memoizedState,ee===null?ee=e_(h):(E=ee.cachePool,E!==null?(_e=Xr._currentValue,E=E.parent!==_e?{parent:_e,pool:_e}:E):E=he(),ee={baseLanes:ee.baseLanes|h,cachePool:E}),m.memoizedState=ee,m.childLanes=t_(o,q,h),l.memoizedState=Z1,rm(o.child,m)):(Zr(l),h=o.child,o=h.sibling,h=Io(h,{mode:"visible",children:m.children}),h.return=l,h.sibling=null,o!==null&&(q=l.deletions,q===null?(l.deletions=[o],l.flags|=16):q.push(o)),l.child=h,l.memoizedState=null,h)}function n_(o,l){return l=O0({mode:"visible",children:l},o.mode),l.return=o,o.child=l}function O0(o,l){return o=us(22,o,null,l),o.lanes=0,o}function r_(o,l,h){return Tr(l,o.child,null,h),o=n_(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function cE(o,l,h){o.lanes|=l;var m=o.alternate;m!==null&&(m.lanes|=l),mu(o.return,l,h)}function i_(o,l,h,m,E,A){var q=o.memoizedState;q===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:E,treeForkCount:A}:(q.isBackwards=l,q.rendering=null,q.renderingStartTime=0,q.last=m,q.tail=h,q.tailMode=E,q.treeForkCount=A)}function uE(o,l,h){var m=l.pendingProps,E=m.revealOrder,A=m.tail;m=m.children;var q=Mn.current,ee=(q&2)!==0;if(ee?(q=q&1|2,l.flags|=128):q&=1,te(Mn,q),Ps(o,l,m,h),m=An?Cd:0,!ee&&o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&cE(o,h,l);else if(o.tag===19)cE(o,h,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(E){case"forwards":for(h=l.child,E=null;h!==null;)o=h.alternate,o!==null&&hs(o)===null&&(E=h),h=h.sibling;h=E,h===null?(E=l.child,l.child=null):(E=h.sibling,h.sibling=null),i_(l,!1,E,h,A,m);break;case"backwards":case"unstable_legacy-backwards":for(h=null,E=l.child,l.child=null;E!==null;){if(o=E.alternate,o!==null&&hs(o)===null){l.child=E;break}o=E.sibling,E.sibling=h,h=E,E=o}i_(l,!0,h,null,A,m);break;case"together":i_(l,!1,null,null,void 0,m);break;default:l.memoizedState=null}return l.child}function wc(o,l,h){if(o!==null&&(l.dependencies=o.dependencies),Eu|=l.lanes,(h&l.childLanes)===0)if(o!==null){if(kl(o,l,h,!1),(h&l.childLanes)===0)return null}else return null;if(o!==null&&l.child!==o.child)throw Error(r(153));if(l.child!==null){for(o=l.child,h=Io(o,o.pendingProps),l.child=h,h.return=l;o.sibling!==null;)o=o.sibling,h=h.sibling=Io(o,o.pendingProps),h.return=l;h.sibling=null}return l.child}function s_(o,l){return(o.lanes&l)!==0?!0:(o=o.dependencies,!!(o!==null&&Gh(o)))}function fL(o,l,h){switch(l.tag){case 3:we(l,l.stateNode.containerInfo),Pl(l,Xr,o.memoizedState.cache),yc();break;case 27:case 5:Ge(l);break;case 4:we(l,l.stateNode.containerInfo);break;case 10:Pl(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,Xn(l),null;break;case 13:var m=l.memoizedState;if(m!==null)return m.dehydrated!==null?(Zr(l),l.flags|=128,null):(h&l.child.childLanes)!==0?lE(o,l,h):(Zr(l),o=wc(o,l,h),o!==null?o.sibling:null);Zr(l);break;case 19:var E=(o.flags&128)!==0;if(m=(h&l.childLanes)!==0,m||(kl(o,l,h,!1),m=(h&l.childLanes)!==0),E){if(m)return uE(o,l,h);l.flags|=128}if(E=l.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),te(Mn,Mn.current),m)break;return null;case 22:return l.lanes=0,nE(o,l,h,l.pendingProps);case 24:Pl(l,Xr,o.memoizedState.cache)}return wc(o,l,h)}function dE(o,l,h){if(o!==null)if(o.memoizedProps!==l.pendingProps)Di=!0;else{if(!s_(o,h)&&(l.flags&128)===0)return Di=!1,fL(o,l,h);Di=(o.flags&131072)!==0}else Di=!1,An&&(l.flags&1048576)!==0&&E0(l,Cd,l.index);switch(l.lanes=0,l.tag){case 16:e:{var m=l.pendingProps;if(o=De(l.elementType),l.type=o,typeof o=="function")Fh(o)?(m=Ld(o,m),l.tag=1,l=oE(null,l,o,m,h)):(l.tag=0,l=X1(null,l,o,m,h));else{if(o!=null){var E=o.$$typeof;if(E===J){l.tag=11,l=Z5(null,l,o,m,h);break e}else if(E===U){l.tag=14,l=eE(null,l,o,m,h);break e}}throw l=Q(o)||o,Error(r(306,l,""))}}return l;case 0:return X1(o,l,l.type,l.pendingProps,h);case 1:return m=l.type,E=Ld(m,l.pendingProps),oE(o,l,m,E,h);case 3:e:{if(we(l,l.stateNode.containerInfo),o===null)throw Error(r(387));m=l.pendingProps;var A=l.memoizedState;E=A.element,Rr(o,l),si(l,m,null,h);var q=l.memoizedState;if(m=q.cache,Pl(l,Xr,m),m!==A.cache&&vc(l,[Xr],h,!0),yr(),m=q.element,A.isDehydrated)if(A={element:m,isDehydrated:!1,cache:q.cache},l.updateQueue.baseState=A,l.memoizedState=A,l.flags&256){l=aE(o,l,m,h);break e}else if(m!==E){E=Co(Error(r(424)),l),pu(E),l=aE(o,l,m,h);break e}else{switch(o=l.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Er=ka(o.firstChild),Wi=l,An=!0,Cs=null,jr=!0,h=fn(l,null,m,h),l.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(yc(),m===E){l=wc(o,l,h);break e}Ps(o,l,m,h)}l=l.child}return l;case 26:return M0(o,l),o===null?(h=wT(l.type,null,l.pendingProps,null))?l.memoizedState=h:An||(h=l.type,o=l.pendingProps,m=X0(ge.current).createElement(h),m[Hn]=l,m[ir]=o,ks(m,h,o),Cr(m),l.stateNode=m):l.memoizedState=wT(l.type,o.memoizedProps,l.pendingProps,o.memoizedState),null;case 27:return Ge(l),o===null&&An&&(m=l.stateNode=_T(l.type,l.pendingProps,ge.current),Wi=l,jr=!0,E=Er,Iu(l.type)?(U_=E,Er=ka(m.firstChild)):Er=E),Ps(o,l,l.pendingProps.children,h),M0(o,l),o===null&&(l.flags|=4194304),l.child;case 5:return o===null&&An&&((E=m=Er)&&(m=GL(m,l.type,l.pendingProps,jr),m!==null?(l.stateNode=m,Wi=l,Er=ka(m.firstChild),jr=!1,E=!0):E=!1),E||Cl(l)),Ge(l),E=l.type,A=l.pendingProps,q=o!==null?o.memoizedProps:null,m=A.children,D_(E,A)?m=null:q!==null&&D_(E,q)&&(l.flags|=32),l.memoizedState!==null&&(E=Wp(o,l,V1,null,null,h),vm._currentValue=E),M0(o,l),Ps(o,l,m,h),l.child;case 6:return o===null&&An&&((o=h=Er)&&(h=HL(h,l.pendingProps,jr),h!==null?(l.stateNode=h,Wi=l,Er=null,o=!0):o=!1),o||Cl(l)),null;case 13:return lE(o,l,h);case 4:return we(l,l.stateNode.containerInfo),m=l.pendingProps,o===null?l.child=Tr(l,null,m,h):Ps(o,l,m,h),l.child;case 11:return Z5(o,l,l.type,l.pendingProps,h);case 7:return Ps(o,l,l.pendingProps,h),l.child;case 8:return Ps(o,l,l.pendingProps.children,h),l.child;case 12:return Ps(o,l,l.pendingProps.children,h),l.child;case 10:return m=l.pendingProps,Pl(l,l.type,m.value),Ps(o,l,m.children,h),l.child;case 9:return E=l.type._context,m=l.pendingProps.children,Dl(l),E=Ji(E),m=m(E),l.flags|=1,Ps(o,l,m,h),l.child;case 14:return eE(o,l,l.type,l.pendingProps,h);case 15:return tE(o,l,l.type,l.pendingProps,h);case 19:return uE(o,l,h);case 31:return hL(o,l,h);case 22:return nE(o,l,h,l.pendingProps);case 24:return Dl(l),m=Ji(Xr),o===null?(E=re(),E===null&&(E=Ar,A=gu(),E.pooledCache=A,A.refCount++,A!==null&&(E.pooledCacheLanes|=h),E=A),l.memoizedState={parent:m,cache:E},ft(l),Pl(l,Xr,E)):((o.lanes&h)!==0&&(Rr(o,l),si(l,null,null,h),yr()),E=o.memoizedState,A=l.memoizedState,E.parent!==m?(E={parent:m,cache:m},l.memoizedState=E,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=E),Pl(l,Xr,m)):(m=A.cache,Pl(l,Xr,m),m!==E.cache&&vc(l,[Xr],h,!0))),Ps(o,l,l.pendingProps.children,h),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function Ec(o){o.flags|=4}function o_(o,l,h,m,E){if((l=(o.mode&32)!==0)&&(l=!1),l){if(o.flags|=16777216,(E&335544128)===E)if(o.stateNode.complete)o.flags|=8192;else if(UE())o.flags|=8192;else throw ze=Ne,Me}else o.flags&=-16777217}function hE(o,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!ST(l))if(UE())o.flags|=8192;else throw ze=Ne,Me}function F0(o,l){l!==null&&(o.flags|=4),o.flags&16384&&(l=o.tag!==22?bo():536870912,o.lanes|=l,sf|=l)}function im(o,l){if(!An)switch(o.tailMode){case"hidden":l=o.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:m.sibling=null}}function Dr(o){var l=o.alternate!==null&&o.alternate.child===o.child,h=0,m=0;if(l)for(var E=o.child;E!==null;)h|=E.lanes|E.childLanes,m|=E.subtreeFlags&65011712,m|=E.flags&65011712,E.return=o,E=E.sibling;else for(E=o.child;E!==null;)h|=E.lanes|E.childLanes,m|=E.subtreeFlags,m|=E.flags,E.return=o,E=E.sibling;return o.subtreeFlags|=m,o.childLanes=h,l}function pL(o,l,h){var m=l.pendingProps;switch(Bh(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dr(l),null;case 1:return Dr(l),null;case 3:return h=l.stateNode,m=null,o!==null&&(m=o.memoizedState.cache),l.memoizedState.cache!==m&&(l.flags|=2048),Lo(Xr),Ie(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(o===null||o.child===null)&&(Ki(l)?Ec(l):o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,$p())),Dr(l),null;case 26:var E=l.type,A=l.memoizedState;return o===null?(Ec(l),A!==null?(Dr(l),hE(l,A)):(Dr(l),o_(l,E,null,m,h))):A?A!==o.memoizedState?(Ec(l),Dr(l),hE(l,A)):(Dr(l),l.flags&=-16777217):(o=o.memoizedProps,o!==m&&Ec(l),Dr(l),o_(l,E,o,m,h)),null;case 27:if(Qe(l),h=ge.current,E=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==m&&Ec(l);else{if(!m){if(l.stateNode===null)throw Error(r(166));return Dr(l),null}o=Y.current,Ki(l)?zp(l):(o=_T(E,m,h),l.stateNode=o,Ec(l))}return Dr(l),null;case 5:if(Qe(l),E=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==m&&Ec(l);else{if(!m){if(l.stateNode===null)throw Error(r(166));return Dr(l),null}if(A=Y.current,Ki(l))zp(l);else{var q=X0(ge.current);switch(A){case 1:A=q.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:A=q.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":A=q.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":A=q.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":A=q.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof m.is=="string"?q.createElement("select",{is:m.is}):q.createElement("select"),m.multiple?A.multiple=!0:m.size&&(A.size=m.size);break;default:A=typeof m.is=="string"?q.createElement(E,{is:m.is}):q.createElement(E)}}A[Hn]=l,A[ir]=m;e:for(q=l.child;q!==null;){if(q.tag===5||q.tag===6)A.appendChild(q.stateNode);else if(q.tag!==4&&q.tag!==27&&q.child!==null){q.child.return=q,q=q.child;continue}if(q===l)break e;for(;q.sibling===null;){if(q.return===null||q.return===l)break e;q=q.return}q.sibling.return=q.return,q=q.sibling}l.stateNode=A;e:switch(ks(A,E,m),E){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&Ec(l)}}return Dr(l),o_(l,l.type,o===null?null:o.memoizedProps,l.pendingProps,h),null;case 6:if(o&&l.stateNode!=null)o.memoizedProps!==m&&Ec(l);else{if(typeof m!="string"&&l.stateNode===null)throw Error(r(166));if(o=ge.current,Ki(l)){if(o=l.stateNode,h=l.memoizedProps,m=null,E=Wi,E!==null)switch(E.tag){case 27:case 5:m=E.memoizedProps}o[Hn]=l,o=!!(o.nodeValue===h||m!==null&&m.suppressHydrationWarning===!0||lT(o.nodeValue,h)),o||Cl(l,!0)}else o=X0(o).createTextNode(m),o[Hn]=l,l.stateNode=o}return Dr(l),null;case 31:if(h=l.memoizedState,o===null||o.memoizedState!==null){if(m=Ki(l),h!==null){if(o===null){if(!m)throw Error(r(318));if(o=l.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(557));o[Hn]=l}else yc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Dr(l),o=!1}else h=$p(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=h),o=!0;if(!o)return l.flags&256?(or(l),l):(or(l),null);if((l.flags&128)!==0)throw Error(r(558))}return Dr(l),null;case 13:if(m=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(E=Ki(l),m!==null&&m.dehydrated!==null){if(o===null){if(!E)throw Error(r(318));if(E=l.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(r(317));E[Hn]=l}else yc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Dr(l),E=!1}else E=$p(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=E),E=!0;if(!E)return l.flags&256?(or(l),l):(or(l),null)}return or(l),(l.flags&128)!==0?(l.lanes=h,l):(h=m!==null,o=o!==null&&o.memoizedState!==null,h&&(m=l.child,E=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(E=m.alternate.memoizedState.cachePool.pool),A=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(A=m.memoizedState.cachePool.pool),A!==E&&(m.flags|=2048)),h!==o&&h&&(l.child.flags|=8192),F0(l,l.updateQueue),Dr(l),null);case 4:return Ie(),o===null&&I_(l.stateNode.containerInfo),Dr(l),null;case 10:return Lo(l.type),Dr(l),null;case 19:if(H(Mn),m=l.memoizedState,m===null)return Dr(l),null;if(E=(l.flags&128)!==0,A=m.rendering,A===null)if(E)im(m,!1);else{if(ui!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(A=hs(o),A!==null){for(l.flags|=128,im(m,!1),o=A.updateQueue,l.updateQueue=o,F0(l,o),l.subtreeFlags=0,o=h,h=l.child;h!==null;)Sd(h,o),h=h.sibling;return te(Mn,Mn.current&1|2),An&&fo(l,m.treeForkCount),l.child}o=o.sibling}m.tail!==null&&at()>q0&&(l.flags|=128,E=!0,im(m,!1),l.lanes=4194304)}else{if(!E)if(o=hs(A),o!==null){if(l.flags|=128,E=!0,o=o.updateQueue,l.updateQueue=o,F0(l,o),im(m,!0),m.tail===null&&m.tailMode==="hidden"&&!A.alternate&&!An)return Dr(l),null}else 2*at()-m.renderingStartTime>q0&&h!==536870912&&(l.flags|=128,E=!0,im(m,!1),l.lanes=4194304);m.isBackwards?(A.sibling=l.child,l.child=A):(o=m.last,o!==null?o.sibling=A:l.child=A,m.last=A)}return m.tail!==null?(o=m.tail,m.rendering=o,m.tail=o.sibling,m.renderingStartTime=at(),o.sibling=null,h=Mn.current,te(Mn,E?h&1|2:h&1),An&&fo(l,m.treeForkCount),o):(Dr(l),null);case 22:case 23:return or(l),bi(),m=l.memoizedState!==null,o!==null?o.memoizedState!==null!==m&&(l.flags|=8192):m&&(l.flags|=8192),m?(h&536870912)!==0&&(l.flags&128)===0&&(Dr(l),l.subtreeFlags&6&&(l.flags|=8192)):Dr(l),h=l.updateQueue,h!==null&&F0(l,h.retryQueue),h=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==h&&(l.flags|=2048),o!==null&&H(Z),null;case 24:return h=null,o!==null&&(h=o.memoizedState.cache),l.memoizedState.cache!==h&&(l.flags|=2048),Lo(Xr),Dr(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function mL(o,l){switch(Bh(l),l.tag){case 1:return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return Lo(Xr),Ie(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 26:case 27:case 5:return Qe(l),null;case 31:if(l.memoizedState!==null){if(or(l),l.alternate===null)throw Error(r(340));yc()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 13:if(or(l),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(r(340));yc()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return H(Mn),null;case 4:return Ie(),null;case 10:return Lo(l.type),null;case 22:case 23:return or(l),bi(),o!==null&&H(Z),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 24:return Lo(Xr),null;case 25:return null;default:return null}}function fE(o,l){switch(Bh(l),l.tag){case 3:Lo(Xr),Ie();break;case 26:case 27:case 5:Qe(l);break;case 4:Ie();break;case 31:l.memoizedState!==null&&or(l);break;case 13:or(l);break;case 19:H(Mn);break;case 10:Lo(l.type);break;case 22:case 23:or(l),bi(),o!==null&&H(Z);break;case 24:Lo(Xr)}}function sm(o,l){try{var h=l.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var E=m.next;h=E;do{if((h.tag&o)===o){m=void 0;var A=h.create,q=h.inst;m=A(),q.destroy=m}h=h.next}while(h!==E)}}catch(ee){lr(l,l.return,ee)}}function xu(o,l,h){try{var m=l.updateQueue,E=m!==null?m.lastEffect:null;if(E!==null){var A=E.next;m=A;do{if((m.tag&o)===o){var q=m.inst,ee=q.destroy;if(ee!==void 0){q.destroy=void 0,E=l;var _e=h,Fe=ee;try{Fe()}catch(We){lr(E,_e,We)}}}m=m.next}while(m!==A)}}catch(We){lr(l,l.return,We)}}function pE(o){var l=o.updateQueue;if(l!==null){var h=o.stateNode;try{oi(l,h)}catch(m){lr(o,o.return,m)}}}function mE(o,l,h){h.props=Ld(o.type,o.memoizedProps),h.state=o.memoizedState;try{h.componentWillUnmount()}catch(m){lr(o,l,m)}}function om(o,l){try{var h=o.ref;if(h!==null){switch(o.tag){case 26:case 27:case 5:var m=o.stateNode;break;case 30:m=o.stateNode;break;default:m=o.stateNode}typeof h=="function"?o.refCleanup=h(m):h.current=m}}catch(E){lr(o,l,E)}}function Ul(o,l){var h=o.ref,m=o.refCleanup;if(h!==null)if(typeof m=="function")try{m()}catch(E){lr(o,l,E)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(E){lr(o,l,E)}else h.current=null}function gE(o){var l=o.type,h=o.memoizedProps,m=o.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":h.autoFocus&&m.focus();break e;case"img":h.src?m.src=h.src:h.srcSet&&(m.srcset=h.srcSet)}}catch(E){lr(o,o.return,E)}}function a_(o,l,h){try{var m=o.stateNode;FL(m,o.type,h,l),m[ir]=l}catch(E){lr(o,o.return,E)}}function yE(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Iu(o.type)||o.tag===4}function l_(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||yE(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Iu(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function c_(o,l,h){var m=o.tag;if(m===5||m===6)o=o.stateNode,l?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(o,l):(l=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,l.appendChild(o),h=h._reactRootContainer,h!=null||l.onclick!==null||(l.onclick=so));else if(m!==4&&(m===27&&Iu(o.type)&&(h=o.stateNode,l=null),o=o.child,o!==null))for(c_(o,l,h),o=o.sibling;o!==null;)c_(o,l,h),o=o.sibling}function U0(o,l,h){var m=o.tag;if(m===5||m===6)o=o.stateNode,l?h.insertBefore(o,l):h.appendChild(o);else if(m!==4&&(m===27&&Iu(o.type)&&(h=o.stateNode),o=o.child,o!==null))for(U0(o,l,h),o=o.sibling;o!==null;)U0(o,l,h),o=o.sibling}function vE(o){var l=o.stateNode,h=o.memoizedProps;try{for(var m=o.type,E=l.attributes;E.length;)l.removeAttributeNode(E[0]);ks(l,m,h),l[Hn]=o,l[ir]=h}catch(A){lr(o,o.return,A)}}var Tc=!1,Li=!1,u_=!1,_E=typeof WeakSet=="function"?WeakSet:Set,fs=null;function gL(o,l){if(o=o.containerInfo,P_=sy,o=Qa(o),Sa(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&m.rangeCount!==0){h=m.anchorNode;var E=m.anchorOffset,A=m.focusNode;m=m.focusOffset;try{h.nodeType,A.nodeType}catch{h=null;break e}var q=0,ee=-1,_e=-1,Fe=0,We=0,Ze=o,je=null;t:for(;;){for(var qe;Ze!==h||E!==0&&Ze.nodeType!==3||(ee=q+E),Ze!==A||m!==0&&Ze.nodeType!==3||(_e=q+m),Ze.nodeType===3&&(q+=Ze.nodeValue.length),(qe=Ze.firstChild)!==null;)je=Ze,Ze=qe;for(;;){if(Ze===o)break t;if(je===h&&++Fe===E&&(ee=q),je===A&&++We===m&&(_e=q),(qe=Ze.nextSibling)!==null)break;Ze=je,je=Ze.parentNode}Ze=qe}h=ee===-1||_e===-1?null:{start:ee,end:_e}}else h=null}h=h||{start:0,end:0}}else h=null;for(k_={focusedElem:o,selectionRange:h},sy=!1,fs=l;fs!==null;)if(l=fs,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,fs=o;else for(;fs!==null;){switch(l=fs,A=l.alternate,o=l.flags,l.tag){case 0:if((o&4)!==0&&(o=l.updateQueue,o=o!==null?o.events:null,o!==null))for(h=0;h<o.length;h++)E=o[h],E.ref.impl=E.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&A!==null){o=void 0,h=l,E=A.memoizedProps,A=A.memoizedState,m=h.stateNode;try{var Ct=Ld(h.type,E);o=m.getSnapshotBeforeUpdate(Ct,A),m.__reactInternalSnapshotBeforeUpdate=o}catch(on){lr(h,h.return,on)}}break;case 3:if((o&1024)!==0){if(o=l.stateNode.containerInfo,h=o.nodeType,h===9)M_(o);else if(h===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":M_(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=l.sibling,o!==null){o.return=l.return,fs=o;break}fs=l.return}}function bE(o,l,h){var m=h.flags;switch(h.tag){case 0:case 11:case 15:Nc(o,h),m&4&&sm(5,h);break;case 1:if(Nc(o,h),m&4)if(o=h.stateNode,l===null)try{o.componentDidMount()}catch(q){lr(h,h.return,q)}else{var E=Ld(h.type,l.memoizedProps);l=l.memoizedState;try{o.componentDidUpdate(E,l,o.__reactInternalSnapshotBeforeUpdate)}catch(q){lr(h,h.return,q)}}m&64&&pE(h),m&512&&om(h,h.return);break;case 3:if(Nc(o,h),m&64&&(o=h.updateQueue,o!==null)){if(l=null,h.child!==null)switch(h.child.tag){case 27:case 5:l=h.child.stateNode;break;case 1:l=h.child.stateNode}try{oi(o,l)}catch(q){lr(h,h.return,q)}}break;case 27:l===null&&m&4&&vE(h);case 26:case 5:Nc(o,h),l===null&&m&4&&gE(h),m&512&&om(h,h.return);break;case 12:Nc(o,h);break;case 31:Nc(o,h),m&4&&EE(o,h);break;case 13:Nc(o,h),m&4&&TE(o,h),m&64&&(o=h.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(h=AL.bind(null,h),zL(o,h))));break;case 22:if(m=h.memoizedState!==null||Tc,!m){l=l!==null&&l.memoizedState!==null||Li,E=Tc;var A=Li;Tc=m,(Li=l)&&!A?Sc(o,h,(h.subtreeFlags&8772)!==0):Nc(o,h),Tc=E,Li=A}break;case 30:break;default:Nc(o,h)}}function xE(o){var l=o.alternate;l!==null&&(o.alternate=null,xE(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&Yo(l)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var qr=null,Oo=!1;function Ac(o,l,h){for(h=h.child;h!==null;)wE(o,l,h),h=h.sibling}function wE(o,l,h){if(Ot&&typeof Ot.onCommitFiberUnmount=="function")try{Ot.onCommitFiberUnmount(Rt,h)}catch{}switch(h.tag){case 26:Li||Ul(h,l),Ac(o,l,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Li||Ul(h,l);var m=qr,E=Oo;Iu(h.type)&&(qr=h.stateNode,Oo=!1),Ac(o,l,h),mm(h.stateNode),qr=m,Oo=E;break;case 5:Li||Ul(h,l);case 6:if(m=qr,E=Oo,qr=null,Ac(o,l,h),qr=m,Oo=E,qr!==null)if(Oo)try{(qr.nodeType===9?qr.body:qr.nodeName==="HTML"?qr.ownerDocument.body:qr).removeChild(h.stateNode)}catch(A){lr(h,l,A)}else try{qr.removeChild(h.stateNode)}catch(A){lr(h,l,A)}break;case 18:qr!==null&&(Oo?(o=qr,pT(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,h.stateNode),ff(o)):pT(qr,h.stateNode));break;case 4:m=qr,E=Oo,qr=h.stateNode.containerInfo,Oo=!0,Ac(o,l,h),qr=m,Oo=E;break;case 0:case 11:case 14:case 15:xu(2,h,l),Li||xu(4,h,l),Ac(o,l,h);break;case 1:Li||(Ul(h,l),m=h.stateNode,typeof m.componentWillUnmount=="function"&&mE(h,l,m)),Ac(o,l,h);break;case 21:Ac(o,l,h);break;case 22:Li=(m=Li)||h.memoizedState!==null,Ac(o,l,h),Li=m;break;default:Ac(o,l,h)}}function EE(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{ff(o)}catch(h){lr(l,l.return,h)}}}function TE(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{ff(o)}catch(h){lr(l,l.return,h)}}function yL(o){switch(o.tag){case 31:case 13:case 19:var l=o.stateNode;return l===null&&(l=o.stateNode=new _E),l;case 22:return o=o.stateNode,l=o._retryCache,l===null&&(l=o._retryCache=new _E),l;default:throw Error(r(435,o.tag))}}function j0(o,l){var h=yL(o);l.forEach(function(m){if(!h.has(m)){h.add(m);var E=NL.bind(null,o,m);m.then(E,E)}})}function Fo(o,l){var h=l.deletions;if(h!==null)for(var m=0;m<h.length;m++){var E=h[m],A=o,q=l,ee=q;e:for(;ee!==null;){switch(ee.tag){case 27:if(Iu(ee.type)){qr=ee.stateNode,Oo=!1;break e}break;case 5:qr=ee.stateNode,Oo=!1;break e;case 3:case 4:qr=ee.stateNode.containerInfo,Oo=!0;break e}ee=ee.return}if(qr===null)throw Error(r(160));wE(A,q,E),qr=null,Oo=!1,A=E.alternate,A!==null&&(A.return=null),E.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)AE(l,o),l=l.sibling}var sl=null;function AE(o,l){var h=o.alternate,m=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Fo(l,o),Uo(o),m&4&&(xu(3,o,o.return),sm(3,o),xu(5,o,o.return));break;case 1:Fo(l,o),Uo(o),m&512&&(Li||h===null||Ul(h,h.return)),m&64&&Tc&&(o=o.updateQueue,o!==null&&(m=o.callbacks,m!==null&&(h=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=h===null?m:h.concat(m))));break;case 26:var E=sl;if(Fo(l,o),Uo(o),m&512&&(Li||h===null||Ul(h,h.return)),m&4){var A=h!==null?h.memoizedState:null;if(m=o.memoizedState,h===null)if(m===null)if(o.stateNode===null){e:{m=o.type,h=o.memoizedProps,E=E.ownerDocument||E;t:switch(m){case"title":A=E.getElementsByTagName("title")[0],(!A||A[is]||A[Hn]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=E.createElement(m),E.head.insertBefore(A,E.querySelector("head > title"))),ks(A,m,h),A[Hn]=o,Cr(A),m=A;break e;case"link":var q=AT("link","href",E).get(m+(h.href||""));if(q){for(var ee=0;ee<q.length;ee++)if(A=q[ee],A.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&A.getAttribute("rel")===(h.rel==null?null:h.rel)&&A.getAttribute("title")===(h.title==null?null:h.title)&&A.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){q.splice(ee,1);break t}}A=E.createElement(m),ks(A,m,h),E.head.appendChild(A);break;case"meta":if(q=AT("meta","content",E).get(m+(h.content||""))){for(ee=0;ee<q.length;ee++)if(A=q[ee],A.getAttribute("content")===(h.content==null?null:""+h.content)&&A.getAttribute("name")===(h.name==null?null:h.name)&&A.getAttribute("property")===(h.property==null?null:h.property)&&A.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&A.getAttribute("charset")===(h.charSet==null?null:h.charSet)){q.splice(ee,1);break t}}A=E.createElement(m),ks(A,m,h),E.head.appendChild(A);break;default:throw Error(r(468,m))}A[Hn]=o,Cr(A),m=A}o.stateNode=m}else NT(E,o.type,o.stateNode);else o.stateNode=TT(E,m,o.memoizedProps);else A!==m?(A===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):A.count--,m===null?NT(E,o.type,o.stateNode):TT(E,m,o.memoizedProps)):m===null&&o.stateNode!==null&&a_(o,o.memoizedProps,h.memoizedProps)}break;case 27:Fo(l,o),Uo(o),m&512&&(Li||h===null||Ul(h,h.return)),h!==null&&m&4&&a_(o,o.memoizedProps,h.memoizedProps);break;case 5:if(Fo(l,o),Uo(o),m&512&&(Li||h===null||Ul(h,h.return)),o.flags&32){E=o.stateNode;try{yi(E,"")}catch(Ct){lr(o,o.return,Ct)}}m&4&&o.stateNode!=null&&(E=o.memoizedProps,a_(o,E,h!==null?h.memoizedProps:E)),m&1024&&(u_=!0);break;case 6:if(Fo(l,o),Uo(o),m&4){if(o.stateNode===null)throw Error(r(162));m=o.memoizedProps,h=o.stateNode;try{h.nodeValue=m}catch(Ct){lr(o,o.return,Ct)}}break;case 3:if(ty=null,E=sl,sl=Z0(l.containerInfo),Fo(l,o),sl=E,Uo(o),m&4&&h!==null&&h.memoizedState.isDehydrated)try{ff(l.containerInfo)}catch(Ct){lr(o,o.return,Ct)}u_&&(u_=!1,NE(o));break;case 4:m=sl,sl=Z0(o.stateNode.containerInfo),Fo(l,o),Uo(o),sl=m;break;case 12:Fo(l,o),Uo(o);break;case 31:Fo(l,o),Uo(o),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,j0(o,m)));break;case 13:Fo(l,o),Uo(o),o.child.flags&8192&&o.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(B0=at()),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,j0(o,m)));break;case 22:E=o.memoizedState!==null;var _e=h!==null&&h.memoizedState!==null,Fe=Tc,We=Li;if(Tc=Fe||E,Li=We||_e,Fo(l,o),Li=We,Tc=Fe,Uo(o),m&8192)e:for(l=o.stateNode,l._visibility=E?l._visibility&-2:l._visibility|1,E&&(h===null||_e||Tc||Li||Md(o)),h=null,l=o;;){if(l.tag===5||l.tag===26){if(h===null){_e=h=l;try{if(A=_e.stateNode,E)q=A.style,typeof q.setProperty=="function"?q.setProperty("display","none","important"):q.display="none";else{ee=_e.stateNode;var Ze=_e.memoizedProps.style,je=Ze!=null&&Ze.hasOwnProperty("display")?Ze.display:null;ee.style.display=je==null||typeof je=="boolean"?"":(""+je).trim()}}catch(Ct){lr(_e,_e.return,Ct)}}}else if(l.tag===6){if(h===null){_e=l;try{_e.stateNode.nodeValue=E?"":_e.memoizedProps}catch(Ct){lr(_e,_e.return,Ct)}}}else if(l.tag===18){if(h===null){_e=l;try{var qe=_e.stateNode;E?mT(qe,!0):mT(_e.stateNode,!1)}catch(Ct){lr(_e,_e.return,Ct)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===o)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break e;for(;l.sibling===null;){if(l.return===null||l.return===o)break e;h===l&&(h=null),l=l.return}h===l&&(h=null),l.sibling.return=l.return,l=l.sibling}m&4&&(m=o.updateQueue,m!==null&&(h=m.retryQueue,h!==null&&(m.retryQueue=null,j0(o,h))));break;case 19:Fo(l,o),Uo(o),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,j0(o,m)));break;case 30:break;case 21:break;default:Fo(l,o),Uo(o)}}function Uo(o){var l=o.flags;if(l&2){try{for(var h,m=o.return;m!==null;){if(yE(m)){h=m;break}m=m.return}if(h==null)throw Error(r(160));switch(h.tag){case 27:var E=h.stateNode,A=l_(o);U0(o,A,E);break;case 5:var q=h.stateNode;h.flags&32&&(yi(q,""),h.flags&=-33);var ee=l_(o);U0(o,ee,q);break;case 3:case 4:var _e=h.stateNode.containerInfo,Fe=l_(o);c_(o,Fe,_e);break;default:throw Error(r(161))}}catch(We){lr(o,o.return,We)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function NE(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var l=o;NE(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),o=o.sibling}}function Nc(o,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)bE(o,l.alternate,l),l=l.sibling}function Md(o){for(o=o.child;o!==null;){var l=o;switch(l.tag){case 0:case 11:case 14:case 15:xu(4,l,l.return),Md(l);break;case 1:Ul(l,l.return);var h=l.stateNode;typeof h.componentWillUnmount=="function"&&mE(l,l.return,h),Md(l);break;case 27:mm(l.stateNode);case 26:case 5:Ul(l,l.return),Md(l);break;case 22:l.memoizedState===null&&Md(l);break;case 30:Md(l);break;default:Md(l)}o=o.sibling}}function Sc(o,l,h){for(h=h&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var m=l.alternate,E=o,A=l,q=A.flags;switch(A.tag){case 0:case 11:case 15:Sc(E,A,h),sm(4,A);break;case 1:if(Sc(E,A,h),m=A,E=m.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(Fe){lr(m,m.return,Fe)}if(m=A,E=m.updateQueue,E!==null){var ee=m.stateNode;try{var _e=E.shared.hiddenCallbacks;if(_e!==null)for(E.shared.hiddenCallbacks=null,E=0;E<_e.length;E++)ds(_e[E],ee)}catch(Fe){lr(m,m.return,Fe)}}h&&q&64&&pE(A),om(A,A.return);break;case 27:vE(A);case 26:case 5:Sc(E,A,h),h&&m===null&&q&4&&gE(A),om(A,A.return);break;case 12:Sc(E,A,h);break;case 31:Sc(E,A,h),h&&q&4&&EE(E,A);break;case 13:Sc(E,A,h),h&&q&4&&TE(E,A);break;case 22:A.memoizedState===null&&Sc(E,A,h),om(A,A.return);break;case 30:break;default:Sc(E,A,h)}l=l.sibling}}function d_(o,l){var h=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==h&&(o!=null&&o.refCount++,h!=null&&Rd(h))}function h_(o,l){o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&Rd(o))}function ol(o,l,h,m){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)SE(o,l,h,m),l=l.sibling}function SE(o,l,h,m){var E=l.flags;switch(l.tag){case 0:case 11:case 15:ol(o,l,h,m),E&2048&&sm(9,l);break;case 1:ol(o,l,h,m);break;case 3:ol(o,l,h,m),E&2048&&(o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&Rd(o)));break;case 12:if(E&2048){ol(o,l,h,m),o=l.stateNode;try{var A=l.memoizedProps,q=A.id,ee=A.onPostCommit;typeof ee=="function"&&ee(q,l.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(_e){lr(l,l.return,_e)}}else ol(o,l,h,m);break;case 31:ol(o,l,h,m);break;case 13:ol(o,l,h,m);break;case 23:break;case 22:A=l.stateNode,q=l.alternate,l.memoizedState!==null?A._visibility&2?ol(o,l,h,m):am(o,l):A._visibility&2?ol(o,l,h,m):(A._visibility|=2,tf(o,l,h,m,(l.subtreeFlags&10256)!==0||!1)),E&2048&&d_(q,l);break;case 24:ol(o,l,h,m),E&2048&&h_(l.alternate,l);break;default:ol(o,l,h,m)}}function tf(o,l,h,m,E){for(E=E&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var A=o,q=l,ee=h,_e=m,Fe=q.flags;switch(q.tag){case 0:case 11:case 15:tf(A,q,ee,_e,E),sm(8,q);break;case 23:break;case 22:var We=q.stateNode;q.memoizedState!==null?We._visibility&2?tf(A,q,ee,_e,E):am(A,q):(We._visibility|=2,tf(A,q,ee,_e,E)),E&&Fe&2048&&d_(q.alternate,q);break;case 24:tf(A,q,ee,_e,E),E&&Fe&2048&&h_(q.alternate,q);break;default:tf(A,q,ee,_e,E)}l=l.sibling}}function am(o,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var h=o,m=l,E=m.flags;switch(m.tag){case 22:am(h,m),E&2048&&d_(m.alternate,m);break;case 24:am(h,m),E&2048&&h_(m.alternate,m);break;default:am(h,m)}l=l.sibling}}var lm=8192;function nf(o,l,h){if(o.subtreeFlags&lm)for(o=o.child;o!==null;)IE(o,l,h),o=o.sibling}function IE(o,l,h){switch(o.tag){case 26:nf(o,l,h),o.flags&lm&&o.memoizedState!==null&&rM(h,sl,o.memoizedState,o.memoizedProps);break;case 5:nf(o,l,h);break;case 3:case 4:var m=sl;sl=Z0(o.stateNode.containerInfo),nf(o,l,h),sl=m;break;case 22:o.memoizedState===null&&(m=o.alternate,m!==null&&m.memoizedState!==null?(m=lm,lm=16777216,nf(o,l,h),lm=m):nf(o,l,h));break;default:nf(o,l,h)}}function CE(o){var l=o.alternate;if(l!==null&&(o=l.child,o!==null)){l.child=null;do l=o.sibling,o.sibling=null,o=l;while(o!==null)}}function cm(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var h=0;h<l.length;h++){var m=l[h];fs=m,PE(m,o)}CE(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)RE(o),o=o.sibling}function RE(o){switch(o.tag){case 0:case 11:case 15:cm(o),o.flags&2048&&xu(9,o,o.return);break;case 3:cm(o);break;case 12:cm(o);break;case 22:var l=o.stateNode;o.memoizedState!==null&&l._visibility&2&&(o.return===null||o.return.tag!==13)?(l._visibility&=-3,V0(o)):cm(o);break;default:cm(o)}}function V0(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var h=0;h<l.length;h++){var m=l[h];fs=m,PE(m,o)}CE(o)}for(o=o.child;o!==null;){switch(l=o,l.tag){case 0:case 11:case 15:xu(8,l,l.return),V0(l);break;case 22:h=l.stateNode,h._visibility&2&&(h._visibility&=-3,V0(l));break;default:V0(l)}o=o.sibling}}function PE(o,l){for(;fs!==null;){var h=fs;switch(h.tag){case 0:case 11:case 15:xu(8,h,l);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var m=h.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Rd(h.memoizedState.cache)}if(m=h.child,m!==null)m.return=h,fs=m;else e:for(h=o;fs!==null;){m=fs;var E=m.sibling,A=m.return;if(xE(m),m===h){fs=null;break e}if(E!==null){E.return=A,fs=E;break e}fs=A}}}var vL={getCacheForType:function(o){var l=Ji(Xr),h=l.data.get(o);return h===void 0&&(h=o(),l.data.set(o,h)),h},cacheSignal:function(){return Ji(Xr).controller.signal}},_L=typeof WeakMap=="function"?WeakMap:Map,Zn=0,Ar=null,Nn=null,Pn=0,ar=0,ra=null,wu=!1,rf=!1,f_=!1,Ic=0,ui=0,Eu=0,Od=0,p_=0,ia=0,sf=0,um=null,jo=null,m_=!1,B0=0,kE=0,q0=1/0,G0=null,Tu=null,Xi=0,Au=null,of=null,Cc=0,g_=0,y_=null,DE=null,dm=0,v_=null;function sa(){return(Zn&2)!==0&&Pn!==0?Pn&-Pn:se.T!==null?T_():ni()}function LE(){if(ia===0)if((Pn&536870912)===0||An){var o=Gn;Gn<<=1,(Gn&3932160)===0&&(Gn=262144),ia=o}else ia=536870912;return o=kr.current,o!==null&&(o.flags|=32),ia}function Vo(o,l,h){(o===Ar&&(ar===2||ar===9)||o.cancelPendingCommit!==null)&&(af(o,0),Nu(o,Pn,ia,!1)),Gt(o,h),((Zn&2)===0||o!==Ar)&&(o===Ar&&((Zn&2)===0&&(Od|=h),ui===4&&Nu(o,Pn,ia,!1)),jl(o))}function ME(o,l,h){if((Zn&6)!==0)throw Error(r(327));var m=!h&&(l&127)===0&&(l&o.expiredLanes)===0||Vi(o,l),E=m?wL(o,l):b_(o,l,!0),A=m;do{if(E===0){rf&&!m&&Nu(o,l,0,!1);break}else{if(h=o.current.alternate,A&&!bL(h)){E=b_(o,l,!1),A=!1;continue}if(E===2){if(A=l,o.errorRecoveryDisabledLanes&A)var q=0;else q=o.pendingLanes&-536870913,q=q!==0?q:q&536870912?536870912:0;if(q!==0){l=q;e:{var ee=o;E=um;var _e=ee.current.memoizedState.isDehydrated;if(_e&&(af(ee,q).flags|=256),q=b_(ee,q,!1),q!==2){if(f_&&!_e){ee.errorRecoveryDisabledLanes|=A,Od|=A,E=4;break e}A=jo,jo=E,A!==null&&(jo===null?jo=A:jo.push.apply(jo,A))}E=q}if(A=!1,E!==2)continue}}if(E===1){af(o,0),Nu(o,l,0,!0);break}e:{switch(m=o,A=E,A){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:Nu(m,l,ia,!wu);break e;case 2:jo=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(E=B0+300-at(),10<E)){if(Nu(m,l,ia,!wu),vn(m,0,!0)!==0)break e;Cc=l,m.timeoutHandle=hT(OE.bind(null,m,h,jo,G0,m_,l,ia,Od,sf,wu,A,"Throttled",-0,0),E);break e}OE(m,h,jo,G0,m_,l,ia,Od,sf,wu,A,null,-0,0)}}break}while(!0);jl(o)}function OE(o,l,h,m,E,A,q,ee,_e,Fe,We,Ze,je,qe){if(o.timeoutHandle=-1,Ze=l.subtreeFlags,Ze&8192||(Ze&16785408)===16785408){Ze={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:so},IE(l,A,Ze);var Ct=(A&62914560)===A?B0-at():(A&4194048)===A?kE-at():0;if(Ct=iM(Ze,Ct),Ct!==null){Cc=A,o.cancelPendingCommit=Ct(HE.bind(null,o,l,A,h,m,E,q,ee,_e,We,Ze,null,je,qe)),Nu(o,A,q,!Fe);return}}HE(o,l,A,h,m,E,q,ee,_e)}function bL(o){for(var l=o;;){var h=l.tag;if((h===0||h===11||h===15)&&l.flags&16384&&(h=l.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var m=0;m<h.length;m++){var E=h[m],A=E.getSnapshot;E=E.value;try{if(!$i(A(),E))return!1}catch{return!1}}if(h=l.child,l.subtreeFlags&16384&&h!==null)h.return=l,l=h;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Nu(o,l,h,m){l&=~p_,l&=~Od,o.suspendedLanes|=l,o.pingedLanes&=~l,m&&(o.warmLanes|=l),m=o.expirationTimes;for(var E=l;0<E;){var A=31-dn(E),q=1<<A;m[A]=-1,E&=~q}h!==0&&_s(o,h,l)}function H0(){return(Zn&6)===0?(hm(0),!1):!0}function __(){if(Nn!==null){if(ar===0)var o=Nn.return;else o=Nn,Ca=Rl=null,Wh(o),et=null,kt=0,o=Nn;for(;o!==null;)fE(o.alternate,o),o=o.return;Nn=null}}function af(o,l){var h=o.timeoutHandle;h!==-1&&(o.timeoutHandle=-1,VL(h)),h=o.cancelPendingCommit,h!==null&&(o.cancelPendingCommit=null,h()),Cc=0,__(),Ar=o,Nn=h=Io(o.current,null),Pn=l,ar=0,ra=null,wu=!1,rf=Vi(o,l),f_=!1,sf=ia=p_=Od=Eu=ui=0,jo=um=null,m_=!1,(l&8)!==0&&(l|=l&32);var m=o.entangledLanes;if(m!==0)for(o=o.entanglements,m&=l;0<m;){var E=31-dn(m),A=1<<E;l|=o[E],m&=~A}return Ic=l,Td(),h}function FE(o,l){Jt=null,se.H=nm,l===Te||l===ue?(l=Je(),ar=3):l===Me?(l=Je(),ar=4):ar=l===Q1?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,ra=l,Nn===null&&(ui=1,D0(o,Co(l,o.current)))}function UE(){var o=kr.current;return o===null?!0:(Pn&4194048)===Pn?Fn===null:(Pn&62914560)===Pn||(Pn&536870912)!==0?o===Fn:!1}function jE(){var o=se.H;return se.H=nm,o===null?nm:o}function VE(){var o=se.A;return se.A=vL,o}function z0(){ui=4,wu||(Pn&4194048)!==Pn&&kr.current!==null||(rf=!0),(Eu&134217727)===0&&(Od&134217727)===0||Ar===null||Nu(Ar,Pn,ia,!1)}function b_(o,l,h){var m=Zn;Zn|=2;var E=jE(),A=VE();(Ar!==o||Pn!==l)&&(G0=null,af(o,l)),l=!1;var q=ui;e:do try{if(ar!==0&&Nn!==null){var ee=Nn,_e=ra;switch(ar){case 8:__(),q=6;break e;case 3:case 2:case 9:case 6:kr.current===null&&(l=!0);var Fe=ar;if(ar=0,ra=null,lf(o,ee,_e,Fe),h&&rf){q=0;break e}break;default:Fe=ar,ar=0,ra=null,lf(o,ee,_e,Fe)}}xL(),q=ui;break}catch(We){FE(o,We)}while(!0);return l&&o.shellSuspendCounter++,Ca=Rl=null,Zn=m,se.H=E,se.A=A,Nn===null&&(Ar=null,Pn=0,Td()),q}function xL(){for(;Nn!==null;)BE(Nn)}function wL(o,l){var h=Zn;Zn|=2;var m=jE(),E=VE();Ar!==o||Pn!==l?(G0=null,q0=at()+500,af(o,l)):rf=Vi(o,l);e:do try{if(ar!==0&&Nn!==null){l=Nn;var A=ra;t:switch(ar){case 1:ar=0,ra=null,lf(o,l,A,1);break;case 2:case 9:if(ke(A)){ar=0,ra=null,qE(l);break}l=function(){ar!==2&&ar!==9||Ar!==o||(ar=7),jl(o)},A.then(l,l);break e;case 3:ar=7;break e;case 4:ar=5;break e;case 7:ke(A)?(ar=0,ra=null,qE(l)):(ar=0,ra=null,lf(o,l,A,7));break;case 5:var q=null;switch(Nn.tag){case 26:q=Nn.memoizedState;case 5:case 27:var ee=Nn;if(q?ST(q):ee.stateNode.complete){ar=0,ra=null;var _e=ee.sibling;if(_e!==null)Nn=_e;else{var Fe=ee.return;Fe!==null?(Nn=Fe,$0(Fe)):Nn=null}break t}}ar=0,ra=null,lf(o,l,A,5);break;case 6:ar=0,ra=null,lf(o,l,A,6);break;case 8:__(),ui=6;break e;default:throw Error(r(462))}}EL();break}catch(We){FE(o,We)}while(!0);return Ca=Rl=null,se.H=m,se.A=E,Zn=h,Nn!==null?0:(Ar=null,Pn=0,Td(),ui)}function EL(){for(;Nn!==null&&!He();)BE(Nn)}function BE(o){var l=dE(o.alternate,o,Ic);o.memoizedProps=o.pendingProps,l===null?$0(o):Nn=l}function qE(o){var l=o,h=l.alternate;switch(l.tag){case 15:case 0:l=sE(h,l,l.pendingProps,l.type,void 0,Pn);break;case 11:l=sE(h,l,l.pendingProps,l.type.render,l.ref,Pn);break;case 5:Wh(l);default:fE(h,l),l=Nn=Sd(l,Ic),l=dE(h,l,Ic)}o.memoizedProps=o.pendingProps,l===null?$0(o):Nn=l}function lf(o,l,h,m){Ca=Rl=null,Wh(l),et=null,kt=0;var E=l.return;try{if(dL(o,E,l,h,Pn)){ui=1,D0(o,Co(h,o.current)),Nn=null;return}}catch(A){if(E!==null)throw Nn=E,A;ui=1,D0(o,Co(h,o.current)),Nn=null;return}l.flags&32768?(An||m===1?o=!0:rf||(Pn&536870912)!==0?o=!1:(wu=o=!0,(m===2||m===9||m===3||m===6)&&(m=kr.current,m!==null&&m.tag===13&&(m.flags|=16384))),GE(l,o)):$0(l)}function $0(o){var l=o;do{if((l.flags&32768)!==0){GE(l,wu);return}o=l.return;var h=pL(l.alternate,l,Ic);if(h!==null){Nn=h;return}if(l=l.sibling,l!==null){Nn=l;return}Nn=l=o}while(l!==null);ui===0&&(ui=5)}function GE(o,l){do{var h=mL(o.alternate,o);if(h!==null){h.flags&=32767,Nn=h;return}if(h=o.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!l&&(o=o.sibling,o!==null)){Nn=o;return}Nn=o=h}while(o!==null);ui=6,Nn=null}function HE(o,l,h,m,E,A,q,ee,_e){o.cancelPendingCommit=null;do Y0();while(Xi!==0);if((Zn&6)!==0)throw Error(r(327));if(l!==null){if(l===o.current)throw Error(r(177));if(A=l.lanes|l.childLanes,A|=Lh,$o(o,h,A,q,ee,_e),o===Ar&&(Nn=Ar=null,Pn=0),of=l,Au=o,Cc=h,g_=A,y_=E,DE=m,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,SL(Yt,function(){return KE(),null})):(o.callbackNode=null,o.callbackPriority=0),m=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||m){m=se.T,se.T=null,E=ve.p,ve.p=2,q=Zn,Zn|=4;try{gL(o,l,h)}finally{Zn=q,ve.p=E,se.T=m}}Xi=1,zE(),$E(),YE()}}function zE(){if(Xi===1){Xi=0;var o=Au,l=of,h=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||h){h=se.T,se.T=null;var m=ve.p;ve.p=2;var E=Zn;Zn|=4;try{AE(l,o);var A=k_,q=Qa(o.containerInfo),ee=A.focusedElem,_e=A.selectionRange;if(q!==ee&&ee&&ee.ownerDocument&&Ja(ee.ownerDocument.documentElement,ee)){if(_e!==null&&Sa(ee)){var Fe=_e.start,We=_e.end;if(We===void 0&&(We=Fe),"selectionStart"in ee)ee.selectionStart=Fe,ee.selectionEnd=Math.min(We,ee.value.length);else{var Ze=ee.ownerDocument||document,je=Ze&&Ze.defaultView||window;if(je.getSelection){var qe=je.getSelection(),Ct=ee.textContent.length,on=Math.min(_e.start,Ct),br=_e.end===void 0?on:Math.min(_e.end,Ct);!qe.extend&&on>br&&(q=br,br=on,on=q);var Re=uu(ee,on),Ae=uu(ee,br);if(Re&&Ae&&(qe.rangeCount!==1||qe.anchorNode!==Re.node||qe.anchorOffset!==Re.offset||qe.focusNode!==Ae.node||qe.focusOffset!==Ae.offset)){var Oe=Ze.createRange();Oe.setStart(Re.node,Re.offset),qe.removeAllRanges(),on>br?(qe.addRange(Oe),qe.extend(Ae.node,Ae.offset)):(Oe.setEnd(Ae.node,Ae.offset),qe.addRange(Oe))}}}}for(Ze=[],qe=ee;qe=qe.parentNode;)qe.nodeType===1&&Ze.push({element:qe,left:qe.scrollLeft,top:qe.scrollTop});for(typeof ee.focus=="function"&&ee.focus(),ee=0;ee<Ze.length;ee++){var Xe=Ze[ee];Xe.element.scrollLeft=Xe.left,Xe.element.scrollTop=Xe.top}}sy=!!P_,k_=P_=null}finally{Zn=E,ve.p=m,se.T=h}}o.current=l,Xi=2}}function $E(){if(Xi===2){Xi=0;var o=Au,l=of,h=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||h){h=se.T,se.T=null;var m=ve.p;ve.p=2;var E=Zn;Zn|=4;try{bE(o,l.alternate,l)}finally{Zn=E,ve.p=m,se.T=h}}Xi=3}}function YE(){if(Xi===4||Xi===3){Xi=0,rt();var o=Au,l=of,h=Cc,m=DE;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Xi=5:(Xi=0,of=Au=null,WE(o,o.pendingLanes));var E=o.pendingLanes;if(E===0&&(Tu=null),fr(h),l=l.stateNode,Ot&&typeof Ot.onCommitFiberRoot=="function")try{Ot.onCommitFiberRoot(Rt,l,void 0,(l.current.flags&128)===128)}catch{}if(m!==null){l=se.T,E=ve.p,ve.p=2,se.T=null;try{for(var A=o.onRecoverableError,q=0;q<m.length;q++){var ee=m[q];A(ee.value,{componentStack:ee.stack})}}finally{se.T=l,ve.p=E}}(Cc&3)!==0&&Y0(),jl(o),E=o.pendingLanes,(h&261930)!==0&&(E&42)!==0?o===v_?dm++:(dm=0,v_=o):dm=0,hm(0)}}function WE(o,l){(o.pooledCacheLanes&=l)===0&&(l=o.pooledCache,l!=null&&(o.pooledCache=null,Rd(l)))}function Y0(){return zE(),$E(),YE(),KE()}function KE(){if(Xi!==5)return!1;var o=Au,l=g_;g_=0;var h=fr(Cc),m=se.T,E=ve.p;try{ve.p=32>h?32:h,se.T=null,h=y_,y_=null;var A=Au,q=Cc;if(Xi=0,of=Au=null,Cc=0,(Zn&6)!==0)throw Error(r(331));var ee=Zn;if(Zn|=4,RE(A.current),SE(A,A.current,q,h),Zn=ee,hm(0,!1),Ot&&typeof Ot.onPostCommitFiberRoot=="function")try{Ot.onPostCommitFiberRoot(Rt,A)}catch{}return!0}finally{ve.p=E,se.T=m,WE(o,l)}}function JE(o,l,h){l=Co(h,l),l=J1(o.stateNode,l,2),o=gn(o,l,2),o!==null&&(Gt(o,2),jl(o))}function lr(o,l,h){if(o.tag===3)JE(o,o,h);else for(;l!==null;){if(l.tag===3){JE(l,o,h);break}else if(l.tag===1){var m=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Tu===null||!Tu.has(m))){o=Co(h,o),h=Q5(2),m=gn(l,h,2),m!==null&&(X5(h,m,l,o),Gt(m,2),jl(m));break}}l=l.return}}function x_(o,l,h){var m=o.pingCache;if(m===null){m=o.pingCache=new _L;var E=new Set;m.set(l,E)}else E=m.get(l),E===void 0&&(E=new Set,m.set(l,E));E.has(h)||(f_=!0,E.add(h),o=TL.bind(null,o,l,h),l.then(o,o))}function TL(o,l,h){var m=o.pingCache;m!==null&&m.delete(l),o.pingedLanes|=o.suspendedLanes&h,o.warmLanes&=~h,Ar===o&&(Pn&h)===h&&(ui===4||ui===3&&(Pn&62914560)===Pn&&300>at()-B0?(Zn&2)===0&&af(o,0):p_|=h,sf===Pn&&(sf=0)),jl(o)}function QE(o,l){l===0&&(l=bo()),o=Za(o,l),o!==null&&(Gt(o,l),jl(o))}function AL(o){var l=o.memoizedState,h=0;l!==null&&(h=l.retryLane),QE(o,h)}function NL(o,l){var h=0;switch(o.tag){case 31:case 13:var m=o.stateNode,E=o.memoizedState;E!==null&&(h=E.retryLane);break;case 19:m=o.stateNode;break;case 22:m=o.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(l),QE(o,h)}function SL(o,l){return bt(o,l)}var W0=null,cf=null,w_=!1,K0=!1,E_=!1,Su=0;function jl(o){o!==cf&&o.next===null&&(cf===null?W0=cf=o:cf=cf.next=o),K0=!0,w_||(w_=!0,CL())}function hm(o,l){if(!E_&&K0){E_=!0;do for(var h=!1,m=W0;m!==null;){if(o!==0){var E=m.pendingLanes;if(E===0)var A=0;else{var q=m.suspendedLanes,ee=m.pingedLanes;A=(1<<31-dn(42|o)+1)-1,A&=E&~(q&~ee),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(h=!0,tT(m,A))}else A=Pn,A=vn(m,m===Ar?A:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(A&3)===0||Vi(m,A)||(h=!0,tT(m,A));m=m.next}while(h);E_=!1}}function IL(){XE()}function XE(){K0=w_=!1;var o=0;Su!==0&&jL()&&(o=Su);for(var l=at(),h=null,m=W0;m!==null;){var E=m.next,A=ZE(m,l);A===0?(m.next=null,h===null?W0=E:h.next=E,E===null&&(cf=h)):(h=m,(o!==0||(A&3)!==0)&&(K0=!0)),m=E}Xi!==0&&Xi!==5||hm(o),Su!==0&&(Su=0)}function ZE(o,l){for(var h=o.suspendedLanes,m=o.pingedLanes,E=o.expirationTimes,A=o.pendingLanes&-62914561;0<A;){var q=31-dn(A),ee=1<<q,_e=E[q];_e===-1?((ee&h)===0||(ee&m)!==0)&&(E[q]=Si(ee,l)):_e<=l&&(o.expiredLanes|=ee),A&=~ee}if(l=Ar,h=Pn,h=vn(o,o===l?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),m=o.callbackNode,h===0||o===l&&(ar===2||ar===9)||o.cancelPendingCommit!==null)return m!==null&&m!==null&&ye(m),o.callbackNode=null,o.callbackPriority=0;if((h&3)===0||Vi(o,h)){if(l=h&-h,l===o.callbackPriority)return l;switch(m!==null&&ye(m),fr(h)){case 2:case 8:h=mt;break;case 32:h=Yt;break;case 268435456:h=nn;break;default:h=Yt}return m=eT.bind(null,o),h=bt(h,m),o.callbackPriority=l,o.callbackNode=h,l}return m!==null&&m!==null&&ye(m),o.callbackPriority=2,o.callbackNode=null,2}function eT(o,l){if(Xi!==0&&Xi!==5)return o.callbackNode=null,o.callbackPriority=0,null;var h=o.callbackNode;if(Y0()&&o.callbackNode!==h)return null;var m=Pn;return m=vn(o,o===Ar?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),m===0?null:(ME(o,m,l),ZE(o,at()),o.callbackNode!=null&&o.callbackNode===h?eT.bind(null,o):null)}function tT(o,l){if(Y0())return null;ME(o,l,!0)}function CL(){BL(function(){(Zn&6)!==0?bt(gt,IL):XE()})}function T_(){if(Su===0){var o=v;o===0&&(o=tn,tn<<=1,(tn&261888)===0&&(tn=256)),Su=o}return Su}function nT(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:os(""+o)}function rT(o,l){var h=l.ownerDocument.createElement("input");return h.name=l.name,h.value=l.value,o.id&&h.setAttribute("form",o.id),l.parentNode.insertBefore(h,l),o=new FormData(o),h.parentNode.removeChild(h),o}function RL(o,l,h,m,E){if(l==="submit"&&h&&h.stateNode===E){var A=nT((E[ir]||null).action),q=m.submitter;q&&(l=(l=q[ir]||null)?nT(l.formAction):q.getAttribute("formAction"),l!==null&&(A=l,q=null));var ee=new Ri("action","action",null,m,E);o.push({event:ee,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Su!==0){var _e=q?rT(E,q):new FormData(E);H1(h,{pending:!0,data:_e,method:E.method,action:A},null,_e)}}else typeof A=="function"&&(ee.preventDefault(),_e=q?rT(E,q):new FormData(E),H1(h,{pending:!0,data:_e,method:E.method,action:A},A,_e))},currentTarget:E}]})}}for(var A_=0;A_<pc.length;A_++){var N_=pc[A_],PL=N_.toLowerCase(),kL=N_[0].toUpperCase()+N_.slice(1);So(PL,"on"+kL)}So(fc,"onAnimationEnd"),So(wd,"onAnimationIteration"),So(Bp,"onAnimationStart"),So("dblclick","onDoubleClick"),So("focusin","onFocus"),So("focusout","onBlur"),So(b0,"onTransitionRun"),So(x0,"onTransitionStart"),So(w0,"onTransitionCancel"),So(qp,"onTransitionEnd"),io("onMouseEnter",["mouseout","mouseover"]),io("onMouseLeave",["mouseout","mouseover"]),io("onPointerEnter",["pointerout","pointerover"]),io("onPointerLeave",["pointerout","pointerover"]),Vs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DL=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fm));function iT(o,l){l=(l&4)!==0;for(var h=0;h<o.length;h++){var m=o[h],E=m.event;m=m.listeners;e:{var A=void 0;if(l)for(var q=m.length-1;0<=q;q--){var ee=m[q],_e=ee.instance,Fe=ee.currentTarget;if(ee=ee.listener,_e!==A&&E.isPropagationStopped())break e;A=ee,E.currentTarget=Fe;try{A(E)}catch(We){Ed(We)}E.currentTarget=null,A=_e}else for(q=0;q<m.length;q++){if(ee=m[q],_e=ee.instance,Fe=ee.currentTarget,ee=ee.listener,_e!==A&&E.isPropagationStopped())break e;A=ee,E.currentTarget=Fe;try{A(E)}catch(We){Ed(We)}E.currentTarget=null,A=_e}}}}function Sn(o,l){var h=l[rs];h===void 0&&(h=l[rs]=new Set);var m=o+"__bubble";h.has(m)||(sT(l,o,2,!1),h.add(m))}function S_(o,l,h){var m=0;l&&(m|=4),sT(h,o,m,l)}var J0="_reactListening"+Math.random().toString(36).slice(2);function I_(o){if(!o[J0]){o[J0]=!0,vl.forEach(function(h){h!=="selectionchange"&&(DL.has(h)||S_(h,!1,o),S_(h,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[J0]||(l[J0]=!0,S_("selectionchange",!1,l))}}function sT(o,l,h,m){switch(LT(l)){case 2:var E=aM;break;case 8:E=lM;break;default:E=G_}h=E.bind(null,l,h,o),E=void 0,!Ga||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(E=!0),m?E!==void 0?o.addEventListener(l,h,{capture:!0,passive:E}):o.addEventListener(l,h,!0):E!==void 0?o.addEventListener(l,h,{passive:E}):o.addEventListener(l,h,!1)}function C_(o,l,h,m,E){var A=m;if((l&1)===0&&(l&2)===0&&m!==null)e:for(;;){if(m===null)return;var q=m.tag;if(q===3||q===4){var ee=m.stateNode.containerInfo;if(ee===E)break;if(q===4)for(q=m.return;q!==null;){var _e=q.tag;if((_e===3||_e===4)&&q.stateNode.containerInfo===E)return;q=q.return}for(;ee!==null;){if(q=bs(ee),q===null)return;if(_e=q.tag,_e===5||_e===6||_e===26||_e===27){m=A=q;continue e}ee=ee.parentNode}}m=m.return}_a(function(){var Fe=A,We=as(h),Ze=[];e:{var je=Gp.get(o);if(je!==void 0){var qe=Ri,Ct=o;switch(o){case"keypress":if(Ts(h)===0)break e;case"keydown":case"keyup":qe=En;break;case"focusin":Ct="focus",qe=ao;break;case"focusout":Ct="blur",qe=ao;break;case"beforeblur":case"afterblur":qe=ao;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":qe=Tl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":qe=Ao;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":qe=D;break;case fc:case wd:case Bp:qe=I;break;case qp:qe=ie;break;case"scroll":case"scrollend":qe=ba;break;case"wheel":qe=Ue;break;case"copy":case"cut":case"paste":qe=de;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":qe=tr;break;case"toggle":case"beforetoggle":qe=ln}var on=(l&4)!==0,br=!on&&(o==="scroll"||o==="scrollend"),Re=on?je!==null?je+"Capture":null:je;on=[];for(var Ae=Fe,Oe;Ae!==null;){var Xe=Ae;if(Oe=Xe.stateNode,Xe=Xe.tag,Xe!==5&&Xe!==26&&Xe!==27||Oe===null||Re===null||(Xe=vi(Ae,Re),Xe!=null&&on.push(pm(Ae,Xe,Oe))),br)break;Ae=Ae.return}0<on.length&&(je=new qe(je,Ct,null,h,We),Ze.push({event:je,listeners:on}))}}if((l&7)===0){e:{if(je=o==="mouseover"||o==="pointerover",qe=o==="mouseout"||o==="pointerout",je&&h!==Qo&&(Ct=h.relatedTarget||h.fromElement)&&(bs(Ct)||Ct[ri]))break e;if((qe||je)&&(je=We.window===We?We:(je=We.ownerDocument)?je.defaultView||je.parentWindow:window,qe?(Ct=h.relatedTarget||h.toElement,qe=Fe,Ct=Ct?bs(Ct):null,Ct!==null&&(br=s(Ct),on=Ct.tag,Ct!==br||on!==5&&on!==27&&on!==6)&&(Ct=null)):(qe=null,Ct=Fe),qe!==Ct)){if(on=Tl,Xe="onMouseLeave",Re="onMouseEnter",Ae="mouse",(o==="pointerout"||o==="pointerover")&&(on=tr,Xe="onPointerLeave",Re="onPointerEnter",Ae="pointer"),br=qe==null?je:xs(qe),Oe=Ct==null?je:xs(Ct),je=new on(Xe,Ae+"leave",qe,h,We),je.target=br,je.relatedTarget=Oe,Xe=null,bs(We)===Fe&&(on=new on(Re,Ae+"enter",Ct,h,We),on.target=Oe,on.relatedTarget=br,Xe=on),br=Xe,qe&&Ct)t:{for(on=LL,Re=qe,Ae=Ct,Oe=0,Xe=Re;Xe;Xe=on(Xe))Oe++;Xe=0;for(var Zt=Ae;Zt;Zt=on(Zt))Xe++;for(;0<Oe-Xe;)Re=on(Re),Oe--;for(;0<Xe-Oe;)Ae=on(Ae),Xe--;for(;Oe--;){if(Re===Ae||Ae!==null&&Re===Ae.alternate){on=Re;break t}Re=on(Re),Ae=on(Ae)}on=null}else on=null;qe!==null&&oT(Ze,je,qe,on,!1),Ct!==null&&br!==null&&oT(Ze,br,Ct,on,!0)}}e:{if(je=Fe?xs(Fe):window,qe=je.nodeName&&je.nodeName.toLowerCase(),qe==="select"||qe==="input"&&je.type==="file")var Yn=Nl;else if(bd(je))if(Gs)Yn=Aa;else{Yn=Jr;var Ut=lu}else qe=je.nodeName,!qe||qe.toLowerCase()!=="input"||je.type!=="checkbox"&&je.type!=="radio"?Fe&&xl(Fe.elementType)&&(Yn=Nl):Yn=Dh;if(Yn&&(Yn=Yn(o,Fe))){co(Ze,Yn,h,We);break e}Ut&&Ut(o,je,Fe),o==="focusout"&&Fe&&je.type==="number"&&Fe.memoizedProps.value!=null&&oc(je,"number",je.value)}switch(Ut=Fe?xs(Fe):window,o){case"focusin":(bd(Ut)||Ut.contentEditable==="true")&&(uo=Ut,Xa=Fe,ls=null);break;case"focusout":ls=Xa=uo=null;break;case"mousedown":No=!0;break;case"contextmenu":case"mouseup":case"dragend":No=!1,Bn(Ze,h,We);break;case"selectionchange":if(hc)break;case"keydown":case"keyup":Bn(Ze,h,We)}var _n;if(bn)e:{switch(o){case"compositionstart":var kn="onCompositionStart";break e;case"compositionend":kn="onCompositionEnd";break e;case"compositionupdate":kn="onCompositionUpdate";break e}kn=void 0}else wa?lo(o,h)&&(kn="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(kn="onCompositionStart");kn&&(Hi&&h.locale!=="ko"&&(wa||kn!=="onCompositionStart"?kn==="onCompositionEnd"&&wa&&(_n=uc()):(Es=We,Ha="value"in Es?Es.value:Es.textContent,wa=!0)),Ut=Q0(Fe,kn),0<Ut.length&&(kn=new Ce(kn,o,null,h,We),Ze.push({event:kn,listeners:Ut}),_n?kn.data=_n:(_n=xa(h),_n!==null&&(kn.data=_n)))),(_n=Pi?Ss(o,h):$a(o,h))&&(kn=Q0(Fe,"onBeforeInput"),0<kn.length&&(Ut=new Ce("onBeforeInput","beforeinput",null,h,We),Ze.push({event:Ut,listeners:kn}),Ut.data=_n)),RL(Ze,o,Fe,h,We)}iT(Ze,l)})}function pm(o,l,h){return{instance:o,listener:l,currentTarget:h}}function Q0(o,l){for(var h=l+"Capture",m=[];o!==null;){var E=o,A=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||A===null||(E=vi(o,h),E!=null&&m.unshift(pm(o,E,A)),E=vi(o,l),E!=null&&m.push(pm(o,E,A))),o.tag===3)return m;o=o.return}return[]}function LL(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function oT(o,l,h,m,E){for(var A=l._reactName,q=[];h!==null&&h!==m;){var ee=h,_e=ee.alternate,Fe=ee.stateNode;if(ee=ee.tag,_e!==null&&_e===m)break;ee!==5&&ee!==26&&ee!==27||Fe===null||(_e=Fe,E?(Fe=vi(h,A),Fe!=null&&q.unshift(pm(h,Fe,_e))):E||(Fe=vi(h,A),Fe!=null&&q.push(pm(h,Fe,_e)))),h=h.return}q.length!==0&&o.push({event:l,listeners:q})}var ML=/\r\n?/g,OL=/\u0000|\uFFFD/g;function aT(o){return(typeof o=="string"?o:""+o).replace(ML,`
`).replace(OL,"")}function lT(o,l){return l=aT(l),aT(o)===l}function _r(o,l,h,m,E,A){switch(h){case"children":typeof m=="string"?l==="body"||l==="textarea"&&m===""||yi(o,m):(typeof m=="number"||typeof m=="bigint")&&l!=="body"&&yi(o,""+m);break;case"className":Ci(o,"class",m);break;case"tabIndex":Ci(o,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Ci(o,h,m);break;case"style":cc(o,m,A);break;case"data":if(l!=="object"){Ci(o,"data",m);break}case"src":case"href":if(m===""&&(l!=="a"||h!=="href")){o.removeAttribute(h);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){o.removeAttribute(h);break}m=os(""+m),o.setAttribute(h,m);break;case"action":case"formAction":if(typeof m=="function"){o.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(h==="formAction"?(l!=="input"&&_r(o,l,"name",E.name,E,null),_r(o,l,"formEncType",E.formEncType,E,null),_r(o,l,"formMethod",E.formMethod,E,null),_r(o,l,"formTarget",E.formTarget,E,null)):(_r(o,l,"encType",E.encType,E,null),_r(o,l,"method",E.method,E,null),_r(o,l,"target",E.target,E,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){o.removeAttribute(h);break}m=os(""+m),o.setAttribute(h,m);break;case"onClick":m!=null&&(o.onclick=so);break;case"onScroll":m!=null&&Sn("scroll",o);break;case"onScrollEnd":m!=null&&Sn("scrollend",o);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(h=m.__html,h!=null){if(E.children!=null)throw Error(r(60));o.innerHTML=h}}break;case"multiple":o.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":o.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){o.removeAttribute("xlink:href");break}h=os(""+m),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(h,""+m):o.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(h,""):o.removeAttribute(h);break;case"capture":case"download":m===!0?o.setAttribute(h,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(h,m):o.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?o.setAttribute(h,m):o.removeAttribute(h);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?o.removeAttribute(h):o.setAttribute(h,m);break;case"popover":Sn("beforetoggle",o),Sn("toggle",o),ws(o,"popover",m);break;case"xlinkActuate":Fr(o,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Fr(o,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Fr(o,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Fr(o,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Fr(o,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Fr(o,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Fr(o,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Fr(o,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Fr(o,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":ws(o,"is",m);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=wl.get(h)||h,ws(o,h,m))}}function R_(o,l,h,m,E,A){switch(h){case"style":cc(o,m,A);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(h=m.__html,h!=null){if(E.children!=null)throw Error(r(60));o.innerHTML=h}}break;case"children":typeof m=="string"?yi(o,m):(typeof m=="number"||typeof m=="bigint")&&yi(o,""+m);break;case"onScroll":m!=null&&Sn("scroll",o);break;case"onScrollEnd":m!=null&&Sn("scrollend",o);break;case"onClick":m!=null&&(o.onclick=so);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ss.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(E=h.endsWith("Capture"),l=h.slice(2,E?h.length-7:void 0),A=o[ir]||null,A=A!=null?A[h]:null,typeof A=="function"&&o.removeEventListener(l,A,E),typeof m=="function")){typeof A!="function"&&A!==null&&(h in o?o[h]=null:o.hasAttribute(h)&&o.removeAttribute(h)),o.addEventListener(l,m,E);break e}h in o?o[h]=m:m===!0?o.setAttribute(h,""):ws(o,h,m)}}}function ks(o,l,h){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Sn("error",o),Sn("load",o);var m=!1,E=!1,A;for(A in h)if(h.hasOwnProperty(A)){var q=h[A];if(q!=null)switch(A){case"src":m=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:_r(o,l,A,q,h,null)}}E&&_r(o,l,"srcSet",h.srcSet,h,null),m&&_r(o,l,"src",h.src,h,null);return;case"input":Sn("invalid",o);var ee=A=q=E=null,_e=null,Fe=null;for(m in h)if(h.hasOwnProperty(m)){var We=h[m];if(We!=null)switch(m){case"name":E=We;break;case"type":q=We;break;case"checked":_e=We;break;case"defaultChecked":Fe=We;break;case"value":A=We;break;case"defaultValue":ee=We;break;case"children":case"dangerouslySetInnerHTML":if(We!=null)throw Error(r(137,l));break;default:_r(o,l,m,We,h,null)}}su(o,A,ee,_e,Fe,q,E,!1);return;case"select":Sn("invalid",o),m=q=A=null;for(E in h)if(h.hasOwnProperty(E)&&(ee=h[E],ee!=null))switch(E){case"value":A=ee;break;case"defaultValue":q=ee;break;case"multiple":m=ee;default:_r(o,l,E,ee,h,null)}l=A,h=q,o.multiple=!!m,l!=null?Gi(o,!!m,l,!1):h!=null&&Gi(o,!!m,h,!0);return;case"textarea":Sn("invalid",o),A=E=m=null;for(q in h)if(h.hasOwnProperty(q)&&(ee=h[q],ee!=null))switch(q){case"value":m=ee;break;case"defaultValue":E=ee;break;case"children":A=ee;break;case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(91));break;default:_r(o,l,q,ee,h,null)}Ko(o,m,E,A);return;case"option":for(_e in h)if(h.hasOwnProperty(_e)&&(m=h[_e],m!=null))switch(_e){case"selected":o.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:_r(o,l,_e,m,h,null)}return;case"dialog":Sn("beforetoggle",o),Sn("toggle",o),Sn("cancel",o),Sn("close",o);break;case"iframe":case"object":Sn("load",o);break;case"video":case"audio":for(m=0;m<fm.length;m++)Sn(fm[m],o);break;case"image":Sn("error",o),Sn("load",o);break;case"details":Sn("toggle",o);break;case"embed":case"source":case"link":Sn("error",o),Sn("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Fe in h)if(h.hasOwnProperty(Fe)&&(m=h[Fe],m!=null))switch(Fe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:_r(o,l,Fe,m,h,null)}return;default:if(xl(l)){for(We in h)h.hasOwnProperty(We)&&(m=h[We],m!==void 0&&R_(o,l,We,m,h,void 0));return}}for(ee in h)h.hasOwnProperty(ee)&&(m=h[ee],m!=null&&_r(o,l,ee,m,h,null))}function FL(o,l,h,m){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,A=null,q=null,ee=null,_e=null,Fe=null,We=null;for(qe in h){var Ze=h[qe];if(h.hasOwnProperty(qe)&&Ze!=null)switch(qe){case"checked":break;case"value":break;case"defaultValue":_e=Ze;default:m.hasOwnProperty(qe)||_r(o,l,qe,null,m,Ze)}}for(var je in m){var qe=m[je];if(Ze=h[je],m.hasOwnProperty(je)&&(qe!=null||Ze!=null))switch(je){case"type":A=qe;break;case"name":E=qe;break;case"checked":Fe=qe;break;case"defaultChecked":We=qe;break;case"value":q=qe;break;case"defaultValue":ee=qe;break;case"children":case"dangerouslySetInnerHTML":if(qe!=null)throw Error(r(137,l));break;default:qe!==Ze&&_r(o,l,je,qe,m,Ze)}}Ba(o,q,ee,_e,Fe,We,A,E);return;case"select":qe=q=ee=je=null;for(A in h)if(_e=h[A],h.hasOwnProperty(A)&&_e!=null)switch(A){case"value":break;case"multiple":qe=_e;default:m.hasOwnProperty(A)||_r(o,l,A,null,m,_e)}for(E in m)if(A=m[E],_e=h[E],m.hasOwnProperty(E)&&(A!=null||_e!=null))switch(E){case"value":je=A;break;case"defaultValue":ee=A;break;case"multiple":q=A;default:A!==_e&&_r(o,l,E,A,m,_e)}l=ee,h=q,m=qe,je!=null?Gi(o,!!h,je,!1):!!m!=!!h&&(l!=null?Gi(o,!!h,l,!0):Gi(o,!!h,h?[]:"",!1));return;case"textarea":qe=je=null;for(ee in h)if(E=h[ee],h.hasOwnProperty(ee)&&E!=null&&!m.hasOwnProperty(ee))switch(ee){case"value":break;case"children":break;default:_r(o,l,ee,null,m,E)}for(q in m)if(E=m[q],A=h[q],m.hasOwnProperty(q)&&(E!=null||A!=null))switch(q){case"value":je=E;break;case"defaultValue":qe=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:E!==A&&_r(o,l,q,E,m,A)}ac(o,je,qe);return;case"option":for(var Ct in h)if(je=h[Ct],h.hasOwnProperty(Ct)&&je!=null&&!m.hasOwnProperty(Ct))switch(Ct){case"selected":o.selected=!1;break;default:_r(o,l,Ct,null,m,je)}for(_e in m)if(je=m[_e],qe=h[_e],m.hasOwnProperty(_e)&&je!==qe&&(je!=null||qe!=null))switch(_e){case"selected":o.selected=je&&typeof je!="function"&&typeof je!="symbol";break;default:_r(o,l,_e,je,m,qe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var on in h)je=h[on],h.hasOwnProperty(on)&&je!=null&&!m.hasOwnProperty(on)&&_r(o,l,on,null,m,je);for(Fe in m)if(je=m[Fe],qe=h[Fe],m.hasOwnProperty(Fe)&&je!==qe&&(je!=null||qe!=null))switch(Fe){case"children":case"dangerouslySetInnerHTML":if(je!=null)throw Error(r(137,l));break;default:_r(o,l,Fe,je,m,qe)}return;default:if(xl(l)){for(var br in h)je=h[br],h.hasOwnProperty(br)&&je!==void 0&&!m.hasOwnProperty(br)&&R_(o,l,br,void 0,m,je);for(We in m)je=m[We],qe=h[We],!m.hasOwnProperty(We)||je===qe||je===void 0&&qe===void 0||R_(o,l,We,je,m,qe);return}}for(var Re in h)je=h[Re],h.hasOwnProperty(Re)&&je!=null&&!m.hasOwnProperty(Re)&&_r(o,l,Re,null,m,je);for(Ze in m)je=m[Ze],qe=h[Ze],!m.hasOwnProperty(Ze)||je===qe||je==null&&qe==null||_r(o,l,Ze,je,m,qe)}function cT(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function UL(){if(typeof performance.getEntriesByType=="function"){for(var o=0,l=0,h=performance.getEntriesByType("resource"),m=0;m<h.length;m++){var E=h[m],A=E.transferSize,q=E.initiatorType,ee=E.duration;if(A&&ee&&cT(q)){for(q=0,ee=E.responseEnd,m+=1;m<h.length;m++){var _e=h[m],Fe=_e.startTime;if(Fe>ee)break;var We=_e.transferSize,Ze=_e.initiatorType;We&&cT(Ze)&&(_e=_e.responseEnd,q+=We*(_e<ee?1:(ee-Fe)/(_e-Fe)))}if(--m,l+=8*(A+q)/(E.duration/1e3),o++,10<o)break}}if(0<o)return l/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var P_=null,k_=null;function X0(o){return o.nodeType===9?o:o.ownerDocument}function uT(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function dT(o,l){if(o===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&l==="foreignObject"?0:o}function D_(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var L_=null;function jL(){var o=window.event;return o&&o.type==="popstate"?o===L_?!1:(L_=o,!0):(L_=null,!1)}var hT=typeof setTimeout=="function"?setTimeout:void 0,VL=typeof clearTimeout=="function"?clearTimeout:void 0,fT=typeof Promise=="function"?Promise:void 0,BL=typeof queueMicrotask=="function"?queueMicrotask:typeof fT<"u"?function(o){return fT.resolve(null).then(o).catch(qL)}:hT;function qL(o){setTimeout(function(){throw o})}function Iu(o){return o==="head"}function pT(o,l){var h=l,m=0;do{var E=h.nextSibling;if(o.removeChild(h),E&&E.nodeType===8)if(h=E.data,h==="/$"||h==="/&"){if(m===0){o.removeChild(E),ff(l);return}m--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")m++;else if(h==="html")mm(o.ownerDocument.documentElement);else if(h==="head"){h=o.ownerDocument.head,mm(h);for(var A=h.firstChild;A;){var q=A.nextSibling,ee=A.nodeName;A[is]||ee==="SCRIPT"||ee==="STYLE"||ee==="LINK"&&A.rel.toLowerCase()==="stylesheet"||h.removeChild(A),A=q}}else h==="body"&&mm(o.ownerDocument.body);h=E}while(h);ff(l)}function mT(o,l){var h=o;o=0;do{var m=h.nextSibling;if(h.nodeType===1?l?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(l?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),m&&m.nodeType===8)if(h=m.data,h==="/$"){if(o===0)break;o--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||o++;h=m}while(h)}function M_(o){var l=o.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var h=l;switch(l=l.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":M_(h),Yo(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}o.removeChild(h)}}function GL(o,l,h,m){for(;o.nodeType===1;){var E=h;if(o.nodeName.toLowerCase()!==l.toLowerCase()){if(!m&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(m){if(!o[is])switch(l){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(A=o.getAttribute("rel"),A==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(A!==E.rel||o.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||o.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||o.getAttribute("title")!==(E.title==null?null:E.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(A=o.getAttribute("src"),(A!==(E.src==null?null:E.src)||o.getAttribute("type")!==(E.type==null?null:E.type)||o.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&A&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(l==="input"&&o.type==="hidden"){var A=E.name==null?null:""+E.name;if(E.type==="hidden"&&o.getAttribute("name")===A)return o}else return o;if(o=ka(o.nextSibling),o===null)break}return null}function HL(o,l,h){if(l==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!h||(o=ka(o.nextSibling),o===null))return null;return o}function gT(o,l){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!l||(o=ka(o.nextSibling),o===null))return null;return o}function O_(o){return o.data==="$?"||o.data==="$~"}function F_(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function zL(o,l){var h=o.ownerDocument;if(o.data==="$~")o._reactRetry=l;else if(o.data!=="$?"||h.readyState!=="loading")l();else{var m=function(){l(),h.removeEventListener("DOMContentLoaded",m)};h.addEventListener("DOMContentLoaded",m),o._reactRetry=m}}function ka(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return o}var U_=null;function yT(o){o=o.nextSibling;for(var l=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"||h==="/&"){if(l===0)return ka(o.nextSibling);l--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||l++}o=o.nextSibling}return null}function vT(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(l===0)return o;l--}else h!=="/$"&&h!=="/&"||l++}o=o.previousSibling}return null}function _T(o,l,h){switch(l=X0(h),o){case"html":if(o=l.documentElement,!o)throw Error(r(452));return o;case"head":if(o=l.head,!o)throw Error(r(453));return o;case"body":if(o=l.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function mm(o){for(var l=o.attributes;l.length;)o.removeAttributeNode(l[0]);Yo(o)}var Da=new Map,bT=new Set;function Z0(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Rc=ve.d;ve.d={f:$L,r:YL,D:WL,C:KL,L:JL,m:QL,X:ZL,S:XL,M:eM};function $L(){var o=Rc.f(),l=H0();return o||l}function YL(o){var l=qi(o);l!==null&&l.tag===5&&l.type==="form"?F5(l):Rc.r(o)}var uf=typeof document>"u"?null:document;function xT(o,l,h){var m=uf;if(m&&typeof l=="string"&&l){var E=Ur(l);E='link[rel="'+o+'"][href="'+E+'"]',typeof h=="string"&&(E+='[crossorigin="'+h+'"]'),bT.has(E)||(bT.add(E),o={rel:o,crossOrigin:h,href:l},m.querySelector(E)===null&&(l=m.createElement("link"),ks(l,"link",o),Cr(l),m.head.appendChild(l)))}}function WL(o){Rc.D(o),xT("dns-prefetch",o,null)}function KL(o,l){Rc.C(o,l),xT("preconnect",o,l)}function JL(o,l,h){Rc.L(o,l,h);var m=uf;if(m&&o&&l){var E='link[rel="preload"][as="'+Ur(l)+'"]';l==="image"&&h&&h.imageSrcSet?(E+='[imagesrcset="'+Ur(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(E+='[imagesizes="'+Ur(h.imageSizes)+'"]')):E+='[href="'+Ur(o)+'"]';var A=E;switch(l){case"style":A=df(o);break;case"script":A=hf(o)}Da.has(A)||(o=g({rel:"preload",href:l==="image"&&h&&h.imageSrcSet?void 0:o,as:l},h),Da.set(A,o),m.querySelector(E)!==null||l==="style"&&m.querySelector(gm(A))||l==="script"&&m.querySelector(ym(A))||(l=m.createElement("link"),ks(l,"link",o),Cr(l),m.head.appendChild(l)))}}function QL(o,l){Rc.m(o,l);var h=uf;if(h&&o){var m=l&&typeof l.as=="string"?l.as:"script",E='link[rel="modulepreload"][as="'+Ur(m)+'"][href="'+Ur(o)+'"]',A=E;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=hf(o)}if(!Da.has(A)&&(o=g({rel:"modulepreload",href:o},l),Da.set(A,o),h.querySelector(E)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(ym(A)))return}m=h.createElement("link"),ks(m,"link",o),Cr(m),h.head.appendChild(m)}}}function XL(o,l,h){Rc.S(o,l,h);var m=uf;if(m&&o){var E=js(m).hoistableStyles,A=df(o);l=l||"default";var q=E.get(A);if(!q){var ee={loading:0,preload:null};if(q=m.querySelector(gm(A)))ee.loading=5;else{o=g({rel:"stylesheet",href:o,"data-precedence":l},h),(h=Da.get(A))&&j_(o,h);var _e=q=m.createElement("link");Cr(_e),ks(_e,"link",o),_e._p=new Promise(function(Fe,We){_e.onload=Fe,_e.onerror=We}),_e.addEventListener("load",function(){ee.loading|=1}),_e.addEventListener("error",function(){ee.loading|=2}),ee.loading|=4,ey(q,l,m)}q={type:"stylesheet",instance:q,count:1,state:ee},E.set(A,q)}}}function ZL(o,l){Rc.X(o,l);var h=uf;if(h&&o){var m=js(h).hoistableScripts,E=hf(o),A=m.get(E);A||(A=h.querySelector(ym(E)),A||(o=g({src:o,async:!0},l),(l=Da.get(E))&&V_(o,l),A=h.createElement("script"),Cr(A),ks(A,"link",o),h.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},m.set(E,A))}}function eM(o,l){Rc.M(o,l);var h=uf;if(h&&o){var m=js(h).hoistableScripts,E=hf(o),A=m.get(E);A||(A=h.querySelector(ym(E)),A||(o=g({src:o,async:!0,type:"module"},l),(l=Da.get(E))&&V_(o,l),A=h.createElement("script"),Cr(A),ks(A,"link",o),h.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},m.set(E,A))}}function wT(o,l,h,m){var E=(E=ge.current)?Z0(E):null;if(!E)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(l=df(h.href),h=js(E).hoistableStyles,m=h.get(l),m||(m={type:"style",instance:null,count:0,state:null},h.set(l,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){o=df(h.href);var A=js(E).hoistableStyles,q=A.get(o);if(q||(E=E.ownerDocument||E,q={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(o,q),(A=E.querySelector(gm(o)))&&!A._p&&(q.instance=A,q.state.loading=5),Da.has(o)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},Da.set(o,h),A||tM(E,o,h,q.state))),l&&m===null)throw Error(r(528,""));return q}if(l&&m!==null)throw Error(r(529,""));return null;case"script":return l=h.async,h=h.src,typeof h=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=hf(h),h=js(E).hoistableScripts,m=h.get(l),m||(m={type:"script",instance:null,count:0,state:null},h.set(l,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function df(o){return'href="'+Ur(o)+'"'}function gm(o){return'link[rel="stylesheet"]['+o+"]"}function ET(o){return g({},o,{"data-precedence":o.precedence,precedence:null})}function tM(o,l,h,m){o.querySelector('link[rel="preload"][as="style"]['+l+"]")?m.loading=1:(l=o.createElement("link"),m.preload=l,l.addEventListener("load",function(){return m.loading|=1}),l.addEventListener("error",function(){return m.loading|=2}),ks(l,"link",h),Cr(l),o.head.appendChild(l))}function hf(o){return'[src="'+Ur(o)+'"]'}function ym(o){return"script[async]"+o}function TT(o,l,h){if(l.count++,l.instance===null)switch(l.type){case"style":var m=o.querySelector('style[data-href~="'+Ur(h.href)+'"]');if(m)return l.instance=m,Cr(m),m;var E=g({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return m=(o.ownerDocument||o).createElement("style"),Cr(m),ks(m,"style",E),ey(m,h.precedence,o),l.instance=m;case"stylesheet":E=df(h.href);var A=o.querySelector(gm(E));if(A)return l.state.loading|=4,l.instance=A,Cr(A),A;m=ET(h),(E=Da.get(E))&&j_(m,E),A=(o.ownerDocument||o).createElement("link"),Cr(A);var q=A;return q._p=new Promise(function(ee,_e){q.onload=ee,q.onerror=_e}),ks(A,"link",m),l.state.loading|=4,ey(A,h.precedence,o),l.instance=A;case"script":return A=hf(h.src),(E=o.querySelector(ym(A)))?(l.instance=E,Cr(E),E):(m=h,(E=Da.get(A))&&(m=g({},h),V_(m,E)),o=o.ownerDocument||o,E=o.createElement("script"),Cr(E),ks(E,"link",m),o.head.appendChild(E),l.instance=E);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(m=l.instance,l.state.loading|=4,ey(m,h.precedence,o));return l.instance}function ey(o,l,h){for(var m=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=m.length?m[m.length-1]:null,A=E,q=0;q<m.length;q++){var ee=m[q];if(ee.dataset.precedence===l)A=ee;else if(A!==E)break}A?A.parentNode.insertBefore(o,A.nextSibling):(l=h.nodeType===9?h.head:h,l.insertBefore(o,l.firstChild))}function j_(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.title==null&&(o.title=l.title)}function V_(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.integrity==null&&(o.integrity=l.integrity)}var ty=null;function AT(o,l,h){if(ty===null){var m=new Map,E=ty=new Map;E.set(h,m)}else E=ty,m=E.get(h),m||(m=new Map,E.set(h,m));if(m.has(o))return m;for(m.set(o,null),h=h.getElementsByTagName(o),E=0;E<h.length;E++){var A=h[E];if(!(A[is]||A[Hn]||o==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var q=A.getAttribute(l)||"";q=o+q;var ee=m.get(q);ee?ee.push(A):m.set(q,[A])}}return m}function NT(o,l,h){o=o.ownerDocument||o,o.head.insertBefore(h,l==="title"?o.querySelector("head > title"):null)}function nM(o,l,h){if(h===1||l.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return o=l.disabled,typeof l.precedence=="string"&&o==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function ST(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function rM(o,l,h,m){if(h.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var E=df(m.href),A=l.querySelector(gm(E));if(A){l=A._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(o.count++,o=ny.bind(o),l.then(o,o)),h.state.loading|=4,h.instance=A,Cr(A);return}A=l.ownerDocument||l,m=ET(m),(E=Da.get(E))&&j_(m,E),A=A.createElement("link"),Cr(A);var q=A;q._p=new Promise(function(ee,_e){q.onload=ee,q.onerror=_e}),ks(A,"link",m),h.instance=A}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(h,l),(l=h.state.preload)&&(h.state.loading&3)===0&&(o.count++,h=ny.bind(o),l.addEventListener("load",h),l.addEventListener("error",h))}}var B_=0;function iM(o,l){return o.stylesheets&&o.count===0&&iy(o,o.stylesheets),0<o.count||0<o.imgCount?function(h){var m=setTimeout(function(){if(o.stylesheets&&iy(o,o.stylesheets),o.unsuspend){var A=o.unsuspend;o.unsuspend=null,A()}},6e4+l);0<o.imgBytes&&B_===0&&(B_=62500*UL());var E=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&iy(o,o.stylesheets),o.unsuspend)){var A=o.unsuspend;o.unsuspend=null,A()}},(o.imgBytes>B_?50:800)+l);return o.unsuspend=h,function(){o.unsuspend=null,clearTimeout(m),clearTimeout(E)}}:null}function ny(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)iy(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var ry=null;function iy(o,l){o.stylesheets=null,o.unsuspend!==null&&(o.count++,ry=new Map,l.forEach(sM,o),ry=null,ny.call(o))}function sM(o,l){if(!(l.state.loading&4)){var h=ry.get(o);if(h)var m=h.get(null);else{h=new Map,ry.set(o,h);for(var E=o.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<E.length;A++){var q=E[A];(q.nodeName==="LINK"||q.getAttribute("media")!=="not all")&&(h.set(q.dataset.precedence,q),m=q)}m&&h.set(null,m)}E=l.instance,q=E.getAttribute("data-precedence"),A=h.get(q)||m,A===m&&h.set(null,E),h.set(q,E),this.count++,m=ny.bind(this),E.addEventListener("load",m),E.addEventListener("error",m),A?A.parentNode.insertBefore(E,A.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(E,o.firstChild)),l.state.loading|=4}}var vm={$$typeof:W,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function oM(o,l,h,m,E,A,q,ee,_e){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gi(0),this.hiddenUpdates=gi(null),this.identifierPrefix=m,this.onUncaughtError=E,this.onCaughtError=A,this.onRecoverableError=q,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_e,this.incompleteTransitions=new Map}function IT(o,l,h,m,E,A,q,ee,_e,Fe,We,Ze){return o=new oM(o,l,h,q,_e,Fe,We,Ze,ee),l=1,A===!0&&(l|=24),A=us(3,null,null,l),o.current=A,A.stateNode=o,l=gu(),l.refCount++,o.pooledCache=l,l.refCount++,A.memoizedState={element:m,isDehydrated:h,cache:l},ft(A),o}function CT(o){return o?(o=Yi,o):Yi}function RT(o,l,h,m,E,A){E=CT(E),m.context===null?m.context=E:m.pendingContext=E,m=sn(l),m.payload={element:h},A=A===void 0?null:A,A!==null&&(m.callback=A),h=gn(o,m,l),h!==null&&(Vo(h,o,l),Qn(h,o,l))}function PT(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<l?h:l}}function q_(o,l){PT(o,l),(o=o.alternate)&&PT(o,l)}function kT(o){if(o.tag===13||o.tag===31){var l=Za(o,67108864);l!==null&&Vo(l,o,67108864),q_(o,67108864)}}function DT(o){if(o.tag===13||o.tag===31){var l=sa();l=er(l);var h=Za(o,l);h!==null&&Vo(h,o,l),q_(o,l)}}var sy=!0;function aM(o,l,h,m){var E=se.T;se.T=null;var A=ve.p;try{ve.p=2,G_(o,l,h,m)}finally{ve.p=A,se.T=E}}function lM(o,l,h,m){var E=se.T;se.T=null;var A=ve.p;try{ve.p=8,G_(o,l,h,m)}finally{ve.p=A,se.T=E}}function G_(o,l,h,m){if(sy){var E=H_(m);if(E===null)C_(o,l,m,oy,h),MT(o,m);else if(uM(E,o,l,h,m))m.stopPropagation();else if(MT(o,m),l&4&&-1<cM.indexOf(o)){for(;E!==null;){var A=qi(E);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var q=Ft(A.pendingLanes);if(q!==0){var ee=A;for(ee.pendingLanes|=2,ee.entangledLanes|=2;q;){var _e=1<<31-dn(q);ee.entanglements[1]|=_e,q&=~_e}jl(A),(Zn&6)===0&&(q0=at()+500,hm(0))}}break;case 31:case 13:ee=Za(A,2),ee!==null&&Vo(ee,A,2),H0(),q_(A,2)}if(A=H_(m),A===null&&C_(o,l,m,oy,h),A===E)break;E=A}E!==null&&m.stopPropagation()}else C_(o,l,m,null,h)}}function H_(o){return o=as(o),z_(o)}var oy=null;function z_(o){if(oy=null,o=bs(o),o!==null){var l=s(o);if(l===null)o=null;else{var h=l.tag;if(h===13){if(o=a(l),o!==null)return o;o=null}else if(h===31){if(o=c(l),o!==null)return o;o=null}else if(h===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null)}}return oy=o,null}function LT(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_t()){case gt:return 2;case mt:return 8;case Yt:case wt:return 32;case nn:return 268435456;default:return 32}default:return 32}}var $_=!1,Cu=null,Ru=null,Pu=null,_m=new Map,bm=new Map,ku=[],cM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function MT(o,l){switch(o){case"focusin":case"focusout":Cu=null;break;case"dragenter":case"dragleave":Ru=null;break;case"mouseover":case"mouseout":Pu=null;break;case"pointerover":case"pointerout":_m.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":bm.delete(l.pointerId)}}function xm(o,l,h,m,E,A){return o===null||o.nativeEvent!==A?(o={blockedOn:l,domEventName:h,eventSystemFlags:m,nativeEvent:A,targetContainers:[E]},l!==null&&(l=qi(l),l!==null&&kT(l)),o):(o.eventSystemFlags|=m,l=o.targetContainers,E!==null&&l.indexOf(E)===-1&&l.push(E),o)}function uM(o,l,h,m,E){switch(l){case"focusin":return Cu=xm(Cu,o,l,h,m,E),!0;case"dragenter":return Ru=xm(Ru,o,l,h,m,E),!0;case"mouseover":return Pu=xm(Pu,o,l,h,m,E),!0;case"pointerover":var A=E.pointerId;return _m.set(A,xm(_m.get(A)||null,o,l,h,m,E)),!0;case"gotpointercapture":return A=E.pointerId,bm.set(A,xm(bm.get(A)||null,o,l,h,m,E)),!0}return!1}function OT(o){var l=bs(o.target);if(l!==null){var h=s(l);if(h!==null){if(l=h.tag,l===13){if(l=a(h),l!==null){o.blockedOn=l,Bi(o.priority,function(){DT(h)});return}}else if(l===31){if(l=c(h),l!==null){o.blockedOn=l,Bi(o.priority,function(){DT(h)});return}}else if(l===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function ay(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var h=H_(o.nativeEvent);if(h===null){h=o.nativeEvent;var m=new h.constructor(h.type,h);Qo=m,h.target.dispatchEvent(m),Qo=null}else return l=qi(h),l!==null&&kT(l),o.blockedOn=h,!1;l.shift()}return!0}function FT(o,l,h){ay(o)&&h.delete(l)}function dM(){$_=!1,Cu!==null&&ay(Cu)&&(Cu=null),Ru!==null&&ay(Ru)&&(Ru=null),Pu!==null&&ay(Pu)&&(Pu=null),_m.forEach(FT),bm.forEach(FT)}function ly(o,l){o.blockedOn===l&&(o.blockedOn=null,$_||($_=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,dM)))}var cy=null;function UT(o){cy!==o&&(cy=o,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){cy===o&&(cy=null);for(var l=0;l<o.length;l+=3){var h=o[l],m=o[l+1],E=o[l+2];if(typeof m!="function"){if(z_(m||h)===null)continue;break}var A=qi(h);A!==null&&(o.splice(l,3),l-=3,H1(A,{pending:!0,data:E,method:h.method,action:m},m,E))}}))}function ff(o){function l(_e){return ly(_e,o)}Cu!==null&&ly(Cu,o),Ru!==null&&ly(Ru,o),Pu!==null&&ly(Pu,o),_m.forEach(l),bm.forEach(l);for(var h=0;h<ku.length;h++){var m=ku[h];m.blockedOn===o&&(m.blockedOn=null)}for(;0<ku.length&&(h=ku[0],h.blockedOn===null);)OT(h),h.blockedOn===null&&ku.shift();if(h=(o.ownerDocument||o).$$reactFormReplay,h!=null)for(m=0;m<h.length;m+=3){var E=h[m],A=h[m+1],q=E[ir]||null;if(typeof A=="function")q||UT(h);else if(q){var ee=null;if(A&&A.hasAttribute("formAction")){if(E=A,q=A[ir]||null)ee=q.formAction;else if(z_(E)!==null)continue}else ee=q.action;typeof ee=="function"?h[m+1]=ee:(h.splice(m,3),m-=3),UT(h)}}}function jT(){function o(A){A.canIntercept&&A.info==="react-transition"&&A.intercept({handler:function(){return new Promise(function(q){return E=q})},focusReset:"manual",scroll:"manual"})}function l(){E!==null&&(E(),E=null),m||setTimeout(h,20)}function h(){if(!m&&!navigation.transition){var A=navigation.currentEntry;A&&A.url!=null&&navigation.navigate(A.url,{state:A.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,E=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(h,100),function(){m=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),E!==null&&(E(),E=null)}}}function Y_(o){this._internalRoot=o}uy.prototype.render=Y_.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(r(409));var h=l.current,m=sa();RT(h,m,o,l,null,null)},uy.prototype.unmount=Y_.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;RT(o.current,2,null,o,null,null),H0(),l[ri]=null}};function uy(o){this._internalRoot=o}uy.prototype.unstable_scheduleHydration=function(o){if(o){var l=ni();o={blockedOn:null,target:o,priority:l};for(var h=0;h<ku.length&&l!==0&&l<ku[h].priority;h++);ku.splice(h,0,o),h===0&&OT(o)}};var VT=e.version;if(VT!=="19.2.1")throw Error(r(527,VT,"19.2.1"));ve.findDOMNode=function(o){var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=d(l),o=o!==null?p(o):null,o=o===null?null:o.stateNode,o};var hM={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:se,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dy.isDisabled&&dy.supportsFiber)try{Rt=dy.inject(hM),Ot=dy}catch{}}return Em.createRoot=function(o,l){if(!i(o))throw Error(r(299));var h=!1,m="",E=Y5,A=W5,q=K5;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(E=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(q=l.onRecoverableError)),l=IT(o,1,!1,null,null,h,m,null,E,A,q,jT),o[ri]=l.current,I_(o),new Y_(l)},Em.hydrateRoot=function(o,l,h){if(!i(o))throw Error(r(299));var m=!1,E="",A=Y5,q=W5,ee=K5,_e=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(E=h.identifierPrefix),h.onUncaughtError!==void 0&&(A=h.onUncaughtError),h.onCaughtError!==void 0&&(q=h.onCaughtError),h.onRecoverableError!==void 0&&(ee=h.onRecoverableError),h.formState!==void 0&&(_e=h.formState)),l=IT(o,1,!0,l,h??null,m,E,_e,A,q,ee,jT),l.context=CT(null),h=l.current,m=sa(),m=er(m),E=sn(m),E.callback=null,gn(h,E,m),h=m,l.current.lanes=h,Gt(l,h),jl(l),o[ri]=l.current,I_(o),new uy(l)},Em.version="19.2.1",Em}var JT;function AM(){if(JT)return J_.exports;JT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),J_.exports=TM(),J_.exports}var NM=AM();const SM=bR(NM);xR();/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pg(){return pg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},pg.apply(this,arguments)}var qu;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(qu||(qu={}));const QT="popstate";function IM(n){n===void 0&&(n={});function e(r,i){let{pathname:s,search:a,hash:c}=r.location;return K2("",{pathname:s,search:a,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:wR(i)}return RM(e,t,null,n)}function ji(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function fx(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function CM(){return Math.random().toString(36).substr(2,8)}function XT(n,e){return{usr:n.state,key:n.key,idx:e}}function K2(n,e,t,r){return t===void 0&&(t=null),pg({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?wp(e):e,{state:t,key:e&&e.key||r||CM()})}function wR(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function wp(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function RM(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,c=qu.Pop,u=null,d=p();d==null&&(d=0,a.replaceState(pg({},a.state,{idx:d}),""));function p(){return(a.state||{idx:null}).idx}function g(){c=qu.Pop;let L=p(),B=L==null?null:L-d;d=L,u&&u({action:c,location:O.location,delta:B})}function _(L,B){c=qu.Push;let K=K2(O.location,L,B);d=p()+1;let W=XT(K,d),J=O.createHref(K);try{a.pushState(W,"",J)}catch(ae){if(ae instanceof DOMException&&ae.name==="DataCloneError")throw ae;i.location.assign(J)}s&&u&&u({action:c,location:O.location,delta:1})}function w(L,B){c=qu.Replace;let K=K2(O.location,L,B);d=p();let W=XT(K,d),J=O.createHref(K);a.replaceState(W,"",J),s&&u&&u({action:c,location:O.location,delta:0})}function P(L){let B=i.location.origin!=="null"?i.location.origin:i.location.href,K=typeof L=="string"?L:wR(L);return K=K.replace(/ $/,"%20"),ji(B,"No window.location.(origin|href) available to create URL for href: "+K),new URL(K,B)}let O={get action(){return c},get location(){return n(i,a)},listen(L){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(QT,g),u=L,()=>{i.removeEventListener(QT,g),u=null}},createHref(L){return e(i,L)},createURL:P,encodeLocation(L){let B=P(L);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:_,replace:w,go(L){return a.go(L)}};return O}var ZT;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(ZT||(ZT={}));function PM(n,e,t){return t===void 0&&(t="/"),kM(n,e,t)}function kM(n,e,t,r){let i=typeof e=="string"?wp(e):e,s=AR(i.pathname||"/",t);if(s==null)return null;let a=ER(n);DM(a);let c=null;for(let u=0;c==null&&u<a.length;++u){let d=zM(s);c=qM(a[u],d)}return c}function ER(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,a,c)=>{let u={relativePath:c===void 0?s.path||"":c,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};u.relativePath.startsWith("/")&&(ji(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=eh([r,u.relativePath]),p=t.concat(u);s.children&&s.children.length>0&&(ji(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),ER(s.children,e,p,d)),!(s.path==null&&!s.index)&&e.push({path:d,score:VM(d,s.index),routesMeta:p})};return n.forEach((s,a)=>{var c;if(s.path===""||!((c=s.path)!=null&&c.includes("?")))i(s,a);else for(let u of TR(s.path))i(s,a,u)}),e}function TR(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=TR(r.join("/")),c=[];return c.push(...a.map(u=>u===""?s:[s,u].join("/"))),i&&c.push(...a),c.map(u=>n.startsWith("/")&&u===""?"/":u)}function DM(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:BM(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const LM=/^:[\w-]+$/,MM=3,OM=2,FM=1,UM=10,jM=-2,eA=n=>n==="*";function VM(n,e){let t=n.split("/"),r=t.length;return t.some(eA)&&(r+=jM),e&&(r+=OM),t.filter(i=>!eA(i)).reduce((i,s)=>i+(LM.test(s)?MM:s===""?FM:UM),r)}function BM(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function qM(n,e,t){let{routesMeta:r}=n,i={},s="/",a=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,p=s==="/"?e:e.slice(s.length)||"/",g=GM({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},p),_=u.route;if(!g)return null;Object.assign(i,g.params),a.push({params:i,pathname:eh([s,g.pathname]),pathnameBase:JM(eh([s,g.pathnameBase])),route:_}),g.pathnameBase!=="/"&&(s=eh([s,g.pathnameBase]))}return a}function GM(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=HM(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((d,p,g)=>{let{paramName:_,isOptional:w}=p;if(_==="*"){let O=c[g]||"";a=s.slice(0,s.length-O.length).replace(/(.)\/+$/,"$1")}const P=c[g];return w&&!P?d[_]=void 0:d[_]=(P||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:a,pattern:n}}function HM(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),fx(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function zM(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return fx(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function AR(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}const $M=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,YM=n=>$M.test(n);function WM(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?wp(n):n,s;if(t)if(YM(t))s=t;else{if(t.includes("//")){let a=t;t=t.replace(/\/\/+/g,"/"),fx(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+t))}t.startsWith("/")?s=tA(t.substring(1),"/"):s=tA(t,e)}else s=e;return{pathname:s,search:QM(r),hash:XM(i)}}function tA(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function e2(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function KM(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function NR(n,e){let t=KM(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function SR(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=wp(n):(i=pg({},n),ji(!i.pathname||!i.pathname.includes("?"),e2("?","pathname","search",i)),ji(!i.pathname||!i.pathname.includes("#"),e2("#","pathname","hash",i)),ji(!i.search||!i.search.includes("#"),e2("#","search","hash",i)));let s=n===""||i.pathname==="",a=s?"/":i.pathname,c;if(a==null)c=t;else{let g=e.length-1;if(!r&&a.startsWith("..")){let _=a.split("/");for(;_[0]==="..";)_.shift(),g-=1;i.pathname=_.join("/")}c=g>=0?e[g]:"/"}let u=WM(i,c),d=a&&a!=="/"&&a.endsWith("/"),p=(s||a===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(d||p)&&(u.pathname+="/"),u}const eh=n=>n.join("/").replace(/\/\/+/g,"/"),JM=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),QM=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,XM=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function ZM(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const IR=["post","put","patch","delete"];new Set(IR);const e8=["get",...IR];new Set(e8);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mg(){return mg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},mg.apply(this,arguments)}const px=Ee.createContext(null),t8=Ee.createContext(null),Hg=Ee.createContext(null),Fv=Ee.createContext(null),dd=Ee.createContext({outlet:null,matches:[],isDataRoute:!1}),CR=Ee.createContext(null);function zg(){return Ee.useContext(Fv)!=null}function $g(){return zg()||ji(!1),Ee.useContext(Fv).location}function RR(n){Ee.useContext(Hg).static||Ee.useLayoutEffect(n)}function Ep(){let{isDataRoute:n}=Ee.useContext(dd);return n?g8():n8()}function n8(){zg()||ji(!1);let n=Ee.useContext(px),{basename:e,future:t,navigator:r}=Ee.useContext(Hg),{matches:i}=Ee.useContext(dd),{pathname:s}=$g(),a=JSON.stringify(NR(i,t.v7_relativeSplatPath)),c=Ee.useRef(!1);return RR(()=>{c.current=!0}),Ee.useCallback(function(d,p){if(p===void 0&&(p={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let g=SR(d,JSON.parse(a),s,p.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:eh([e,g.pathname])),(p.replace?r.replace:r.push)(g,p.state,p)},[e,r,a,s,n])}const r8=Ee.createContext(null);function i8(n){let e=Ee.useContext(dd).outlet;return e&&Ee.createElement(r8.Provider,{value:n},e)}function s8(n,e){return o8(n,e)}function o8(n,e,t,r){zg()||ji(!1);let{navigator:i}=Ee.useContext(Hg),{matches:s}=Ee.useContext(dd),a=s[s.length-1],c=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let d=$g(),p;if(e){var g;let L=typeof e=="string"?wp(e):e;u==="/"||(g=L.pathname)!=null&&g.startsWith(u)||ji(!1),p=L}else p=d;let _=p.pathname||"/",w=_;if(u!=="/"){let L=u.replace(/^\//,"").split("/");w="/"+_.replace(/^\//,"").split("/").slice(L.length).join("/")}let P=PM(n,{pathname:w}),O=d8(P&&P.map(L=>Object.assign({},L,{params:Object.assign({},c,L.params),pathname:eh([u,i.encodeLocation?i.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?u:eh([u,i.encodeLocation?i.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),s,t,r);return e&&O?Ee.createElement(Fv.Provider,{value:{location:mg({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:qu.Pop}},O):O}function a8(){let n=m8(),e=ZM(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Ee.createElement(Ee.Fragment,null,Ee.createElement("h2",null,"Unexpected Application Error!"),Ee.createElement("h3",{style:{fontStyle:"italic"}},e),t?Ee.createElement("pre",{style:i},t):null,null)}const l8=Ee.createElement(a8,null);class c8 extends Ee.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?Ee.createElement(dd.Provider,{value:this.props.routeContext},Ee.createElement(CR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function u8(n){let{routeContext:e,match:t,children:r}=n,i=Ee.useContext(px);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),Ee.createElement(dd.Provider,{value:e},r)}function d8(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,c=(i=t)==null?void 0:i.errors;if(c!=null){let p=a.findIndex(g=>g.route.id&&(c==null?void 0:c[g.route.id])!==void 0);p>=0||ji(!1),a=a.slice(0,Math.min(a.length,p+1))}let u=!1,d=-1;if(t&&r&&r.v7_partialHydration)for(let p=0;p<a.length;p++){let g=a[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=p),g.route.id){let{loaderData:_,errors:w}=t,P=g.route.loader&&_[g.route.id]===void 0&&(!w||w[g.route.id]===void 0);if(g.route.lazy||P){u=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((p,g,_)=>{let w,P=!1,O=null,L=null;t&&(w=c&&g.route.id?c[g.route.id]:void 0,O=g.route.errorElement||l8,u&&(d<0&&_===0?(y8("route-fallback"),P=!0,L=null):d===_&&(P=!0,L=g.route.hydrateFallbackElement||null)));let B=e.concat(a.slice(0,_+1)),K=()=>{let W;return w?W=O:P?W=L:g.route.Component?W=Ee.createElement(g.route.Component,null):g.route.element?W=g.route.element:W=p,Ee.createElement(u8,{match:g,routeContext:{outlet:p,matches:B,isDataRoute:t!=null},children:W})};return t&&(g.route.ErrorBoundary||g.route.errorElement||_===0)?Ee.createElement(c8,{location:t.location,revalidation:t.revalidation,component:O,error:w,children:K(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):K()},null)}var PR=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(PR||{}),kR=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(kR||{});function h8(n){let e=Ee.useContext(px);return e||ji(!1),e}function f8(n){let e=Ee.useContext(t8);return e||ji(!1),e}function p8(n){let e=Ee.useContext(dd);return e||ji(!1),e}function DR(n){let e=p8(),t=e.matches[e.matches.length-1];return t.route.id||ji(!1),t.route.id}function m8(){var n;let e=Ee.useContext(CR),t=f8(),r=DR();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function g8(){let{router:n}=h8(PR.UseNavigateStable),e=DR(kR.UseNavigateStable),t=Ee.useRef(!1);return RR(()=>{t.current=!0}),Ee.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,mg({fromRouteId:e},s)))},[n,e])}const nA={};function y8(n,e,t){nA[n]||(nA[n]=!0)}function v8(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function zm(n){let{to:e,replace:t,state:r,relative:i}=n;zg()||ji(!1);let{future:s,static:a}=Ee.useContext(Hg),{matches:c}=Ee.useContext(dd),{pathname:u}=$g(),d=Ep(),p=SR(e,NR(c,s.v7_relativeSplatPath),u,i==="path"),g=JSON.stringify(p);return Ee.useEffect(()=>d(JSON.parse(g),{replace:t,state:r,relative:i}),[d,g,i,t,r]),null}function LR(n){return i8(n.context)}function Mi(n){ji(!1)}function _8(n){let{basename:e="/",children:t=null,location:r,navigationType:i=qu.Pop,navigator:s,static:a=!1,future:c}=n;zg()&&ji(!1);let u=e.replace(/^\/*/,"/"),d=Ee.useMemo(()=>({basename:u,navigator:s,static:a,future:mg({v7_relativeSplatPath:!1},c)}),[u,c,s,a]);typeof r=="string"&&(r=wp(r));let{pathname:p="/",search:g="",hash:_="",state:w=null,key:P="default"}=r,O=Ee.useMemo(()=>{let L=AR(p,u);return L==null?null:{location:{pathname:L,search:g,hash:_,state:w,key:P},navigationType:i}},[u,p,g,_,w,P,i]);return O==null?null:Ee.createElement(Hg.Provider,{value:d},Ee.createElement(Fv.Provider,{children:t,value:O}))}function b8(n){let{children:e,location:t}=n;return s8(J2(e),t)}new Promise(()=>{});function J2(n,e){e===void 0&&(e=[]);let t=[];return Ee.Children.forEach(n,(r,i)=>{if(!Ee.isValidElement(r))return;let s=[...e,i];if(r.type===Ee.Fragment){t.push.apply(t,J2(r.props.children,s));return}r.type!==Mi&&ji(!1),!r.props.index||!r.props.children||ji(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=J2(r.props.children,s)),t.push(a)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const x8="6";try{window.__reactRouterVersion=x8}catch{}const w8="startTransition",rA=bM[w8];function E8(n){let{basename:e,children:t,future:r,window:i}=n,s=Ee.useRef();s.current==null&&(s.current=IM({window:i,v5Compat:!0}));let a=s.current,[c,u]=Ee.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},p=Ee.useCallback(g=>{d&&rA?rA(()=>u(g)):u(g)},[u,d]);return Ee.useLayoutEffect(()=>a.listen(p),[a,p]),Ee.useEffect(()=>v8(r),[r]),Ee.createElement(_8,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:a,future:r})}var iA;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(iA||(iA={}));var sA;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(sA||(sA={}));const T8=()=>{};var oA={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},A8=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],a=n[t++],c=n[t++],u=((i&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},OR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,c=a?n[i+1]:0,u=i+2<n.length,d=u?n[i+2]:0,p=s>>2,g=(s&3)<<4|c>>4;let _=(c&15)<<2|d>>6,w=d&63;u||(w=64,a||(_=64)),r.push(t[p],t[g],t[_],t[w])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(MR(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):A8(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;const d=i<n.length?t[n.charAt(i)]:64;++i;const g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||c==null||d==null||g==null)throw new N8;const _=s<<2|c>>4;if(r.push(_),d!==64){const w=c<<4&240|d>>2;if(r.push(w),g!==64){const P=d<<6&192|g;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class N8 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const S8=function(n){const e=MR(n);return OR.encodeByteArray(e,!0)},Zy=function(n){return S8(n).replace(/\./g,"")},mx=function(n){try{return OR.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ev(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!I8(t)||(n[t]=ev(n[t],e[t]));return n}function I8(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C8=()=>gx().__FIREBASE_DEFAULTS__,R8=()=>{if(typeof process>"u"||typeof oA>"u")return;const n=oA.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},P8=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&mx(n[1]);return e&&JSON.parse(e)},yx=()=>{try{return T8()||C8()||R8()||P8()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},vx=()=>{var n;return(n=yx())==null?void 0:n.config},k8=n=>{var e;return(e=yx())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tp(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function FR(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L8(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Zy(JSON.stringify(t)),Zy(JSON.stringify(a)),""].join(".")}const $m={};function M8(){const n={prod:[],emulator:[]};for(const e of Object.keys($m))$m[e]?n.emulator.push(e):n.prod.push(e);return n}function O8(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let aA=!1;function UR(n,e){if(typeof window>"u"||typeof document>"u"||!Tp(window.location.host)||$m[n]===e||$m[n]||aA)return;$m[n]=e;function t(_){return`__firebase__banner__${_}`}const r="__firebase__banner",s=M8().prod.length>0;function a(){const _=document.getElementById(r);_&&_.remove()}function c(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function u(_,w){_.setAttribute("width","24"),_.setAttribute("id",w),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function d(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{aA=!0,a()},_}function p(_,w){_.setAttribute("id",w),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function g(){const _=O8(r),w=t("text"),P=document.getElementById(w)||document.createElement("span"),O=t("learnmore"),L=document.getElementById(O)||document.createElement("a"),B=t("preprendIcon"),K=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const W=_.element;c(W),p(L,O);const J=d();u(K,B),W.append(K,P,L,J),document.body.appendChild(W)}s?(P.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function F8(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ei())}function Uv(){var e;const n=(e=yx())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function U8(){return typeof window<"u"||jR()}function jR(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function j8(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jv(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function _x(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function VR(){const n=ei();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function BR(){return!Uv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qR(){return!Uv()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function sh(){try{return typeof indexedDB=="object"}catch{return!1}}function bx(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(t){e(t)}})}function GR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V8="FirebaseError";class Ms extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=V8,Object.setPrototypeOf(this,Ms.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jc.prototype.create)}}class Jc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?B8(s,r):"Error",c=`${this.serviceName}: ${a} (${i}).`;return new Ms(i,c,r)}}function B8(n,e){return n.replace(q8,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const q8=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lA(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function G8(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Zu(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],a=e[i];if(cA(s)&&cA(a)){if(!Zu(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function cA(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Pf(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Om(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function HR(n,e){const t=new H8(n,e);return t.subscribe.bind(t)}class H8{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");z8(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=t2),i.error===void 0&&(i.error=t2),i.complete===void 0&&(i.complete=t2);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function z8(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function t2(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $8=1e3,Y8=2,W8=14400*1e3,K8=.5;function uA(n,e=$8,t=Y8){const r=e*Math.pow(t,n),i=Math.round(K8*r*(Math.random()-.5)*2);return Math.min(W8,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(n){return n&&n._delegate?n._delegate:n}class vo{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J8{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new D8;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(X8(e))try{this.getOrInitializeService({instanceIdentifier:Ud})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ud){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ud){return this.instances.has(e)}getOptions(e=Ud){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);r===c&&a.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Q8(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ud){return this.component?this.component.multipleInstances?e:Ud:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Q8(n){return n===Ud?void 0:n}function X8(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new J8(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx=[];var In;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(In||(In={}));const $R={debug:In.DEBUG,verbose:In.VERBOSE,info:In.INFO,warn:In.WARN,error:In.ERROR,silent:In.SILENT},Z8=In.INFO,eO={[In.DEBUG]:"log",[In.VERBOSE]:"log",[In.INFO]:"info",[In.WARN]:"warn",[In.ERROR]:"error"},tO=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=eO[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Yg{constructor(e){this.name=e,this._logLevel=Z8,this._logHandler=tO,this._userLogHandler=null,xx.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in In))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$R[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,In.DEBUG,...e),this._logHandler(this,In.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,In.VERBOSE,...e),this._logHandler(this,In.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,In.INFO,...e),this._logHandler(this,In.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,In.WARN,...e),this._logHandler(this,In.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,In.ERROR,...e),this._logHandler(this,In.ERROR,...e)}}function nO(n){xx.forEach(e=>{e.setLogLevel(n)})}function rO(n,e){for(const t of xx){let r=null;e&&e.level&&(r=$R[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(i,s,...a)=>{const c=a.map(u=>{if(u==null)return null;if(typeof u=="string")return u;if(typeof u=="number"||typeof u=="boolean")return u.toString();if(u instanceof Error)return u.message;try{return JSON.stringify(u)}catch{return null}}).filter(u=>u).join(" ");s>=(r??i.logLevel)&&n({level:In[s].toLowerCase(),message:c,args:a,type:i.name})}}}const iO=(n,e)=>e.some(t=>n instanceof t);let dA,hA;function sO(){return dA||(dA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oO(){return hA||(hA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const YR=new WeakMap,Q2=new WeakMap,WR=new WeakMap,n2=new WeakMap,wx=new WeakMap;function aO(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(Wu(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&YR.set(t,n)}).catch(()=>{}),wx.set(e,n),e}function lO(n){if(Q2.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});Q2.set(n,e)}let X2={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Q2.get(n);if(e==="objectStoreNames")return n.objectStoreNames||WR.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Wu(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function cO(n){X2=n(X2)}function uO(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(r2(this),e,...t);return WR.set(r,e.sort?e.sort():[e]),Wu(r)}:oO().includes(n)?function(...e){return n.apply(r2(this),e),Wu(YR.get(this))}:function(...e){return Wu(n.apply(r2(this),e))}}function dO(n){return typeof n=="function"?uO(n):(n instanceof IDBTransaction&&lO(n),iO(n,sO())?new Proxy(n,X2):n)}function Wu(n){if(n instanceof IDBRequest)return aO(n);if(n2.has(n))return n2.get(n);const e=dO(n);return e!==n&&(n2.set(n,e),wx.set(e,n)),e}const r2=n=>wx.get(n);function KR(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),c=Wu(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Wu(a.result),u.oldVersion,u.newVersion,Wu(a.transaction),u)}),t&&a.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const hO=["get","getKey","getAll","getAllKeys","count"],fO=["put","add","delete","clear"],i2=new Map;function fA(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(i2.get(e))return i2.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=fO.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||hO.includes(t)))return;const s=async function(a,...c){const u=this.transaction(a,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[t](...c),i&&u.done]))[0]};return i2.set(e,s),s}cO(n=>({...n,get:(e,t,r)=>fA(e,t)||n.get(e,t,r),has:(e,t)=>!!fA(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(mO(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function mO(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const tv="@firebase/app",Z2="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc=new Yg("@firebase/app"),gO="@firebase/app-compat",yO="@firebase/analytics-compat",vO="@firebase/analytics",_O="@firebase/app-check-compat",bO="@firebase/app-check",xO="@firebase/auth",wO="@firebase/auth-compat",EO="@firebase/database",TO="@firebase/data-connect",AO="@firebase/database-compat",NO="@firebase/functions",SO="@firebase/functions-compat",IO="@firebase/installations",CO="@firebase/installations-compat",RO="@firebase/messaging",PO="@firebase/messaging-compat",kO="@firebase/performance",DO="@firebase/performance-compat",LO="@firebase/remote-config",MO="@firebase/remote-config-compat",OO="@firebase/storage",FO="@firebase/storage-compat",UO="@firebase/firestore",jO="@firebase/ai",VO="@firebase/firestore-compat",BO="firebase",qO="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed="[DEFAULT]",GO={[tv]:"fire-core",[gO]:"fire-core-compat",[vO]:"fire-analytics",[yO]:"fire-analytics-compat",[bO]:"fire-app-check",[_O]:"fire-app-check-compat",[xO]:"fire-auth",[wO]:"fire-auth-compat",[EO]:"fire-rtdb",[TO]:"fire-data-connect",[AO]:"fire-rtdb-compat",[NO]:"fire-fn",[SO]:"fire-fn-compat",[IO]:"fire-iid",[CO]:"fire-iid-compat",[RO]:"fire-fcm",[PO]:"fire-fcm-compat",[kO]:"fire-perf",[DO]:"fire-perf-compat",[LO]:"fire-rc",[MO]:"fire-rc-compat",[OO]:"fire-gcs",[FO]:"fire-gcs-compat",[UO]:"fire-fst",[VO]:"fire-fst-compat",[jO]:"fire-vertex","fire-js":"fire-js",[BO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td=new Map,Qf=new Map,Xf=new Map;function gg(n,e){try{n.container.addComponent(e)}catch(t){Bc.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function JR(n,e){n.container.addOrOverwriteComponent(e)}function Fa(n){const e=n.name;if(Xf.has(e))return Bc.debug(`There were multiple attempts to register component ${e}.`),!1;Xf.set(e,n);for(const t of td.values())gg(t,n);for(const t of Qf.values())gg(t,n);return!0}function Vv(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function HO(n,e,t=ed){Vv(n,e).clearInstance(t)}function Ex(n){return n.options!==void 0}function QR(n){return Ex(n)?!1:"authIdToken"in n||"appCheckToken"in n||"releaseOnDeref"in n||"automaticDataCollectionEnabled"in n}function zr(n){return n==null?!1:n.settings!==void 0}function zO(){Xf.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ha=new Jc("app","Firebase",$O);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let XR=class{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new vo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ha.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(n,e){const t=mx(n.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const i=JSON.parse(t).exp*1e3,s=new Date().getTime();i-s<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class YO extends XR{constructor(e,t,r,i){const s=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!0,a={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,a,i);else{const c=e;super(c.options,a,i)}this._serverConfig={automaticDataCollectionEnabled:s,...t},this._serverConfig.authIdToken&&pA(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&pA(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,go(tv,Z2,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Ax(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw ha.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hd=qO;function Tx(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:ed,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw ha.create("bad-app-name",{appName:String(i)});if(t||(t=vx()),!t)throw ha.create("no-options");const s=td.get(i);if(s){if(Zu(t,s.options)&&Zu(r,s.config))return s;throw ha.create("duplicate-app",{appName:i})}const a=new zR(i);for(const u of Xf.values())a.addComponent(u);const c=new XR(t,r,a);return td.set(i,c),c}function WO(n,e={}){if(U8()&&!jR())throw ha.create("invalid-server-app-environment");let t,r=e||{};if(n&&(Ex(n)?t=n.options:QR(n)?r=n:t=n),r.automaticDataCollectionEnabled===void 0&&(r.automaticDataCollectionEnabled=!0),t||(t=vx()),!t)throw ha.create("no-options");const i={...r,...t};i.releaseOnDeref!==void 0&&delete i.releaseOnDeref;const s=p=>[...p].reduce((g,_)=>Math.imul(31,g)+_.charCodeAt(0)|0,0);if(r.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw ha.create("finalization-registry-not-supported",{});const a=""+s(JSON.stringify(i)),c=Qf.get(a);if(c)return c.incRefCount(r.releaseOnDeref),c;const u=new zR(a);for(const p of Xf.values())u.addComponent(p);const d=new YO(t,r,a,u);return Qf.set(a,d),d}function KO(n=ed){const e=td.get(n);if(!e&&n===ed&&vx())return Tx();if(!e)throw ha.create("no-app",{appName:n});return e}function JO(){return Array.from(td.values())}async function Ax(n){let e=!1;const t=n.name;td.has(t)?(e=!0,td.delete(t)):Qf.has(t)&&n.decRefCount()<=0&&(Qf.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function go(n,e,t){let r=GO[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bc.warn(a.join(" "));return}Fa(new vo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function ZR(n,e){if(n!==null&&typeof n!="function")throw ha.create("invalid-log-argument");rO(n,e)}function e4(n){nO(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO="firebase-heartbeat-database",XO=1,yg="firebase-heartbeat-store";let s2=null;function t4(){return s2||(s2=KR(QO,XO,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(yg)}catch(t){console.warn(t)}}}}).catch(n=>{throw ha.create("idb-open",{originalErrorMessage:n.message})})),s2}async function ZO(n){try{const t=(await t4()).transaction(yg),r=await t.objectStore(yg).get(n4(n));return await t.done,r}catch(e){if(e instanceof Ms)Bc.warn(e.message);else{const t=ha.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Bc.warn(t.message)}}}async function mA(n,e){try{const r=(await t4()).transaction(yg,"readwrite");await r.objectStore(yg).put(e,n4(n)),await r.done}catch(t){if(t instanceof Ms)Bc.warn(t.message);else{const r=ha.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Bc.warn(r.message)}}}function n4(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eF=1024,tF=30;class nF{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new iF(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=gA();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>tF){const a=sF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Bc.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=gA(),{heartbeatsToSend:r,unsentEntries:i}=rF(this._heartbeatsCache.heartbeats),s=Zy(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Bc.warn(t),""}}}function gA(){return new Date().toISOString().substring(0,10)}function rF(n,e=eF){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),yA(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),yA(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class iF{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sh()?bx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await ZO(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return mA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return mA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function yA(n){return Zy(JSON.stringify({version:2,heartbeats:n})).length}function sF(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oF(n){Fa(new vo("platform-logger",e=>new pO(e),"PRIVATE")),Fa(new vo("heartbeat",e=>new nF(e),"PRIVATE")),go(tv,Z2,n),go(tv,Z2,"esm2020"),go("fire-js","")}oF("");const aF=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Ms,SDK_VERSION:hd,_DEFAULT_ENTRY_NAME:ed,_addComponent:gg,_addOrOverwriteComponent:JR,_apps:td,_clearComponents:zO,_components:Xf,_getProvider:Vv,_isFirebaseApp:Ex,_isFirebaseServerApp:zr,_isFirebaseServerAppSettings:QR,_registerComponent:Fa,_removeServiceInstance:HO,_serverApps:Qf,deleteApp:Ax,getApp:KO,getApps:JO,initializeApp:Tx,initializeServerApp:WO,onLog:ZR,registerVersion:go,setLogLevel:e4},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lF{constructor(e,t){this._delegate=e,this.firebase=t,gg(e,new vo("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Ax(this._delegate)))}_getService(e,t=ed){var i;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&((i=r.getComponent())==null?void 0:i.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=ed){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){gg(this._delegate,e)}_addOrOverwriteComponent(e){JR(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cF={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},vA=new Jc("app-compat","Firebase",cF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uF(n){const e={},t={__esModule:!0,initializeApp:s,app:i,registerVersion:go,setLogLevel:e4,onLog:ZR,apps:null,SDK_VERSION:hd,INTERNAL:{registerComponent:c,removeApp:r,useAsService:u,modularAPIs:aF}};t.default=t,Object.defineProperty(t,"apps",{get:a});function r(d){delete e[d]}function i(d){if(d=d||ed,!lA(e,d))throw vA.create("no-app",{appName:d});return e[d]}i.App=n;function s(d,p={}){const g=Tx(d,p);if(lA(e,g.name))return e[g.name];const _=new n(g,t);return e[g.name]=_,_}function a(){return Object.keys(e).map(d=>e[d])}function c(d){const p=d.name,g=p.replace("-compat","");if(Fa(d)&&d.type==="PUBLIC"){const _=(w=i())=>{if(typeof w[g]!="function")throw vA.create("invalid-app-argument",{appName:p});return w[g]()};d.serviceProps!==void 0&&ev(_,d.serviceProps),t[g]=_,n.prototype[g]=function(...w){return this._getService.bind(this,p).apply(this,d.multipleInstances?w:[])}}return d.type==="PUBLIC"?t[g]:null}function u(d,p){return p==="serverAuth"?null:p}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r4(){const n=uF(lF);n.INTERNAL={...n.INTERNAL,createFirebaseNamespace:r4,extendNamespace:e,createSubscribe:HR,ErrorFactory:Jc,deepExtend:ev};function e(t){ev(n,t)}return n}const dF=r4();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A=new Yg("@firebase/app-compat"),hF="@firebase/app-compat",fF="0.5.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pF(n){go(hF,fF,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const n=gx();if(n.firebase!==void 0){_A.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&_A.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const an=dF;pF();var mF="firebase",gF="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an.registerVersion(mF,gF,"app-compat");const Tm={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},pf={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yF(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function i4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vF=yF,_F=i4,s4=new Jc("auth","Firebase",i4());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv=new Yg("@firebase/auth");function bF(n,...e){nv.logLevel<=In.WARN&&nv.warn(`Auth (${hd}): ${n}`,...e)}function Cy(n,...e){nv.logLevel<=In.ERROR&&nv.error(`Auth (${hd}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(n,...e){throw Sx(n,...e)}function Zi(n,...e){return Sx(n,...e)}function Nx(n,e,t){const r={..._F(),[e]:t};return new Jc("auth","Firebase",r).create(e,{appName:n.name})}function ys(n){return Nx(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Np(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Fs(n,"argument-error"),Nx(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Sx(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return s4.create(n,...e)}function lt(n,e,...t){if(!n)throw Sx(e,...t)}function Wl(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Cy(e),new Error(e)}function fl(n,e){n||Wl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function Ix(){return bA()==="http:"||bA()==="https:"}function bA(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ix()||jv()||"connection"in navigator)?navigator.onLine:!0}function wF(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,t){this.shortDelay=e,this.longDelay=t,fl(t>e,"Short delay should be less than long delay!"),this.isMobile=F8()||_x()}get(){return xF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(n,e){fl(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TF=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],AF=new Wg(3e4,6e4);function pi(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function mi(n,e,t,r,i={}){return a4(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const c=Ap({key:n.config.apiKey,...a}).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);const d={method:e,headers:u,...s};return j8()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&Tp(n.emulatorConfig.host)&&(d.credentials="include"),o4.fetch()(await l4(n,n.config.apiHost,t,c),d)})}async function a4(n,e,t){n._canInitEmulator=!1;const r={...EF,...e};try{const i=new SF(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Fm(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const c=s.ok?a.errorMessage:a.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fm(n,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Fm(n,"email-already-in-use",a);if(u==="USER_DISABLED")throw Fm(n,"user-disabled",a);const p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Nx(n,p,d);Fs(n,p)}}catch(i){if(i instanceof Ms)throw i;Fs(n,"network-request-failed",{message:String(i)})}}async function Qc(n,e,t,r,i={}){const s=await mi(n,e,t,r,i);return"mfaPendingCredential"in s&&Fs(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function l4(n,e,t,r){const i=`${e}${t}?${r}`,s=n,a=s.config.emulator?Cx(n.config,i):`${n.config.apiScheme}://${i}`;return TF.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function NF(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class SF{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Zi(this.auth,"network-request-failed")),AF.get())})}}function Fm(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Zi(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(n){return n!==void 0&&n.getResponse!==void 0}function wA(n){return n!==void 0&&n.enterprise!==void 0}class c4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return NF(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IF(n){return(await mi(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function u4(n,e){return mi(n,"GET","/v2/recaptchaConfig",pi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CF(n,e){return mi(n,"POST","/v1/accounts:delete",e)}async function RF(n,e){return mi(n,"POST","/v1/accounts:update",e)}async function rv(n,e){return mi(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function PF(n,e=!1){const t=Wt(n),r=await t.getIdToken(e),i=Bv(r);lt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ym(o2(i.auth_time)),issuedAtTime:Ym(o2(i.iat)),expirationTime:Ym(o2(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function o2(n){return Number(n)*1e3}function Bv(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Cy("JWT malformed, contained fewer than 3 sections"),null;try{const i=mx(t);return i?JSON.parse(i):(Cy("Failed to decode base64 JWT payload"),null)}catch(i){return Cy("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function EA(n){const e=Bv(n);return lt(e,"internal-error"),lt(typeof e.exp<"u","internal-error"),lt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ms&&kF(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function kF({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ym(this.lastLoginAt),this.creationTime=Ym(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _g(n){var g;const e=n.auth,t=await n.getIdToken(),r=await qc(n,rv(e,{idToken:t}));lt(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const s=(g=i.providerUserInfo)!=null&&g.length?d4(i.providerUserInfo):[],a=MF(n.providerData,s),c=n.isAnonymous,u=!(n.email&&i.passwordHash)&&!(a!=null&&a.length),d=c?u:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new eb(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(n,p)}async function LF(n){const e=Wt(n);await _g(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function MF(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function d4(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OF(n,e){const t=await a4(n,{},async()=>{const r=Ap({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=await l4(n,i,"/v1/token",`key=${s}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return n.emulatorConfig&&Tp(n.emulatorConfig.host)&&(u.credentials="include"),o4.fetch()(a,u)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function FF(n,e){return mi(n,"POST","/v2/accounts:revokeToken",pi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){lt(e.idToken,"internal-error"),lt(typeof e.idToken<"u","internal-error"),lt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):EA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){lt(e.length!==0,"internal-error");const t=EA(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(lt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await OF(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new Lf;return r&&(lt(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(lt(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(lt(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Lf,this.toJSON())}_performRefresh(){return Wl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(n,e){lt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class cl{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new DF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new eb(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await qc(this,this.stsTokenManager.getToken(this.auth,e));return lt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return PF(this,e)}reload(){return LF(this)}_assign(e){this!==e&&(lt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new cl({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){lt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await _g(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zr(this.auth.app))return Promise.reject(ys(this.auth));const e=await this.getIdToken();return await qc(this,CF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,a=t.photoURL??void 0,c=t.tenantId??void 0,u=t._redirectEventId??void 0,d=t.createdAt??void 0,p=t.lastLoginAt??void 0,{uid:g,emailVerified:_,isAnonymous:w,providerData:P,stsTokenManager:O}=t;lt(g&&O,e,"internal-error");const L=Lf.fromJSON(this.name,O);lt(typeof g=="string",e,"internal-error"),Lu(r,e.name),Lu(i,e.name),lt(typeof _=="boolean",e,"internal-error"),lt(typeof w=="boolean",e,"internal-error"),Lu(s,e.name),Lu(a,e.name),Lu(c,e.name),Lu(u,e.name),Lu(d,e.name),Lu(p,e.name);const B=new cl({uid:g,auth:e,email:i,emailVerified:_,displayName:r,isAnonymous:w,photoURL:a,phoneNumber:s,tenantId:c,stsTokenManager:L,createdAt:d,lastLoginAt:p});return P&&Array.isArray(P)&&(B.providerData=P.map(K=>({...K}))),u&&(B._redirectEventId=u),B}static async _fromIdTokenResponse(e,t,r=!1){const i=new Lf;i.updateFromServerResponse(t);const s=new cl({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await _g(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];lt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?d4(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),c=new Lf;c.updateFromIdToken(r);const u=new cl({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new eb(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=new Map;function ua(n){fl(n instanceof Function,"Expected a class definition");let e=TA.get(n);return e?(fl(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,TA.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}h4.type="NONE";const Zf=h4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(n,e,t){return`firebase:${n}:${e}:${t}`}class Mf{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=th(this.userKey,i.apiKey,s),this.fullPersistenceKey=th("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await rv(this.auth,{idToken:e}).catch(()=>{});return t?cl._fromGetAccountInfoResponse(this.auth,t,e):null}return cl._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Mf(ua(Zf),e,r);const i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=i[0]||ua(Zf);const a=th(r,e.config.apiKey,e.name);let c=null;for(const d of t)try{const p=await d._get(a);if(p){let g;if(typeof p=="string"){const _=await rv(e,{idToken:p}).catch(()=>{});if(!_)break;g=await cl._fromGetAccountInfoResponse(e,_,p)}else g=cl._fromJSON(e,p);d!==s&&(c=g),s=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Mf(s,e,r):(s=u[0],c&&await s._set(a,c.toJSON()),await Promise.all(t.map(async d=>{if(d!==s)try{await d._remove(a)}catch{}})),new Mf(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(g4(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(f4(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(y4(e))return"Blackberry";if(v4(e))return"Webos";if(p4(e))return"Safari";if((e.includes("chrome/")||m4(e))&&!e.includes("edge/"))return"Chrome";if(Kg(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function f4(n=ei()){return/firefox\//i.test(n)}function p4(n=ei()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function m4(n=ei()){return/crios\//i.test(n)}function g4(n=ei()){return/iemobile/i.test(n)}function Kg(n=ei()){return/android/i.test(n)}function y4(n=ei()){return/blackberry/i.test(n)}function v4(n=ei()){return/webos/i.test(n)}function Jg(n=ei()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function UF(n=ei()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function jF(n=ei()){var e;return Jg(n)&&!!((e=window.navigator)!=null&&e.standalone)}function VF(){return VR()&&document.documentMode===10}function _4(n=ei()){return Jg(n)||Kg(n)||v4(n)||y4(n)||/windows phone/i.test(n)||g4(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b4(n,e=[]){let t;switch(n){case"Browser":t=AA(ei());break;case"Worker":t=`${AA(ei())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${hd}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,c)=>{try{const u=e(s);a(u)}catch(u){c(u)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qF(n,e={}){return mi(n,"GET","/v2/passwordPolicy",pi(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GF=6;class HF{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??GF,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new NA(this),this.idTokenSubscription=new NA(this),this.beforeStateQueue=new BF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=s4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ua(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Mf.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await rv(this,{idToken:e}),r=await cl._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(zr(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,c=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===c)&&(u!=null&&u.user)&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return lt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await _g(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zr(this.app))return Promise.reject(ys(this));const t=e?Wt(e):null;return t&&lt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&lt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return zr(this.app)?Promise.reject(ys(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zr(this.app)?Promise.reject(ys(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ua(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await qF(this),t=new HF(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Jc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await FF(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ua(e)||this._popupRedirectResolver;lt(t,this,"argument-error"),this.redirectPersistenceManager=await Mf.create(this,[ua(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(lt(c,this,"internal-error"),c.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const u=e.addObserver(t,r,i);return()=>{a=!0,u()}}else{const u=e.addObserver(t);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return lt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=b4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(zr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&bF(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ti(n){return Wt(n)}class NA{constructor(e){this.auth=e,this.observer=null,this.addObserver=HR(t=>this.observer=t)}get next(){return lt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $F(n){Qg=n}function Rx(n){return Qg.loadJS(n)}function YF(){return Qg.recaptchaV2Script}function WF(){return Qg.recaptchaEnterpriseScript}function KF(){return Qg.gapiScript}function x4(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JF=500,QF=6e4,hy=1e12;class XF{constructor(e){this.auth=e,this.counter=hy,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new t7(e,this.auth.name,t||{})),this.counter++,r}reset(e){var r;const t=e||hy;(r=this._widgets.get(t))==null||r.delete(),this._widgets.delete(t)}getResponse(e){var r;const t=e||hy;return((r=this._widgets.get(t))==null?void 0:r.getResponse())||""}async execute(e){var r;const t=e||hy;return(r=this._widgets.get(t))==null||r.execute(),""}}class ZF{constructor(){this.enterprise=new e7}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class e7{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class t7{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;lt(i,"argument-error",{appName:t}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=n7(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},QF)},JF))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function n7(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const r7="recaptcha-enterprise",Wm="NO_RECAPTCHA";class w4{constructor(e){this.type=r7,this.auth=ti(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,c)=>{u4(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new c4(u);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,a(d.siteKey)}}).catch(u=>{c(u)})})}function i(s,a,c){const u=window.grecaptcha;wA(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(d=>{a(d)}).catch(()=>{a(Wm)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ZF().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{r(this.auth).then(c=>{if(!t&&wA(window.grecaptcha))i(c,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=WF();u.length!==0&&(u+=c),Rx(u).then(()=>{i(c,s,a)}).catch(d=>{a(d)})}}).catch(c=>{a(c)})})}}async function Am(n,e,t,r=!1,i=!1){const s=new w4(n);let a;if(i)a=Wm;else try{a=await s.verify(t)}catch{a=await s.verify(t,!0)}const c={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:a}):Object.assign(c,{captchaResponse:a}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Ku(n,e,t,r,i){var s,a;if(i==="EMAIL_PASSWORD_PROVIDER")if((s=n._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Am(n,e,t,t==="getOobCode");return r(n,c)}else return r(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await Am(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(c)});else if(i==="PHONE_PROVIDER")if((a=n._getRecaptchaConfig())!=null&&a.isProviderEnabled("PHONE_PROVIDER")){const c=await Am(n,e,t);return r(n,c).catch(async u=>{var d;if(((d=n._getRecaptchaConfig())==null?void 0:d.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const p=await Am(n,e,t,!1,!0);return r(n,p)}return Promise.reject(u)})}else{const c=await Am(n,e,t,!1,!0);return r(n,c)}else return Promise.reject(i+" provider is not supported.")}async function i7(n){const e=ti(n),t=await u4(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new c4(t);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new w4(e).verify()}function s7(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(ua);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function o7(n,e,t){const r=ti(n);lt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(t!=null&&t.disableWarnings),s=E4(e),{host:a,port:c}=a7(e),u=c===null?"":`:${c}`,d={url:`${s}//${a}${u}/`},p=Object.freeze({host:a,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){lt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),lt(Zu(d,r.config.emulator)&&Zu(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,Tp(a)?(FR(`${s}//${a}${u}`),UR("Auth",!0)):i||l7()}function E4(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function a7(n){const e=E4(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:SA(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:SA(a)}}}function SA(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function l7(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Wl("not implemented")}_getIdTokenResponse(e){return Wl("not implemented")}_linkToIdToken(e,t){return Wl("not implemented")}_getReauthenticationResolver(e){return Wl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T4(n,e){return mi(n,"POST","/v1/accounts:resetPassword",pi(n,e))}async function c7(n,e){return mi(n,"POST","/v1/accounts:update",e)}async function u7(n,e){return mi(n,"POST","/v1/accounts:signUp",e)}async function d7(n,e){return mi(n,"POST","/v1/accounts:update",pi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h7(n,e){return Qc(n,"POST","/v1/accounts:signInWithPassword",pi(n,e))}async function qv(n,e){return mi(n,"POST","/v1/accounts:sendOobCode",pi(n,e))}async function f7(n,e){return qv(n,e)}async function p7(n,e){return qv(n,e)}async function m7(n,e){return qv(n,e)}async function g7(n,e){return qv(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y7(n,e){return Qc(n,"POST","/v1/accounts:signInWithEmailLink",pi(n,e))}async function v7(n,e){return Qc(n,"POST","/v1/accounts:signInWithEmailLink",pi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg extends Sp{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new bg(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new bg(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ku(e,t,"signInWithPassword",h7,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return y7(e,{email:this._email,oobCode:this._password});default:Fs(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ku(e,r,"signUpPassword",u7,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return v7(e,{idToken:t,email:this._email,oobCode:this._password});default:Fs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uc(n,e){return Qc(n,"POST","/v1/accounts:signInWithIdp",pi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _7="http://localhost";class tc extends Sp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new tc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Fs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=t;if(!r||!i)return null;const a=new tc(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return Uc(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Uc(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Uc(e,t)}buildRequest(){const e={requestUri:_7,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ap(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IA(n,e){return mi(n,"POST","/v1/accounts:sendVerificationCode",pi(n,e))}async function b7(n,e){return Qc(n,"POST","/v1/accounts:signInWithPhoneNumber",pi(n,e))}async function x7(n,e){const t=await Qc(n,"POST","/v1/accounts:signInWithPhoneNumber",pi(n,e));if(t.temporaryProof)throw Fm(n,"account-exists-with-different-credential",t);return t}const w7={USER_NOT_FOUND:"user-not-found"};async function E7(n,e){const t={...e,operation:"REAUTH"};return Qc(n,"POST","/v1/accounts:signInWithPhoneNumber",pi(n,t),w7)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh extends Sp{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new nh({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new nh({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return b7(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return x7(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return E7(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!t&&!i&&!s?null:new nh({verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T7(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function A7(n){const e=Pf(Om(n)).link,t=e?Pf(Om(e)).deep_link_id:null,r=Pf(Om(n)).deep_link_id;return(r?Pf(Om(r)).link:null)||r||t||e||n}class Gv{constructor(e){const t=Pf(Om(e)),r=t.apiKey??null,i=t.oobCode??null,s=T7(t.mode??null);lt(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=A7(e);try{return new Gv(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(){this.providerId=fd.PROVIDER_ID}static credential(e,t){return bg._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Gv.parseLink(t);return lt(r,"argument-error"),bg._fromEmailAndCode(e,r.code,r.tenantId)}}fd.PROVIDER_ID="password";fd.EMAIL_PASSWORD_SIGN_IN_METHOD="password";fd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip extends Xc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Of extends Ip{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return lt("providerId"in t&&"signInMethod"in t,"argument-error"),tc._fromParams(t)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return lt(e.idToken||e.accessToken,"argument-error"),tc._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return Of.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Of.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:a,providerId:c}=e;if(!r&&!i&&!t&&!s||!c)return null;try{return new Of(c)._credential({idToken:t,accessToken:r,nonce:a,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl extends Ip{constructor(){super("facebook.com")}static credential(e){return tc._fromParams({providerId:Hl.PROVIDER_ID,signInMethod:Hl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hl.credentialFromTaggedObject(e)}static credentialFromError(e){return Hl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hl.credential(e.oauthAccessToken)}catch{return null}}}Hl.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hl.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl extends Ip{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return tc._fromParams({providerId:zl.PROVIDER_ID,signInMethod:zl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return zl.credentialFromTaggedObject(e)}static credentialFromError(e){return zl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return zl.credential(t,r)}catch{return null}}}zl.GOOGLE_SIGN_IN_METHOD="google.com";zl.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l extends Ip{constructor(){super("github.com")}static credential(e){return tc._fromParams({providerId:$l.PROVIDER_ID,signInMethod:$l.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $l.credentialFromTaggedObject(e)}static credentialFromError(e){return $l.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $l.credential(e.oauthAccessToken)}catch{return null}}}$l.GITHUB_SIGN_IN_METHOD="github.com";$l.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N7="http://localhost";class ep extends Sp{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return Uc(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Uc(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Uc(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=t;return!r||!i||!s||r!==i?null:new ep(r,s)}static _create(e,t){return new ep(e,t)}buildRequest(){return{requestUri:N7,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S7="saml.";class iv extends Xc{constructor(e){lt(e.startsWith(S7),"argument-error"),super(e)}static credentialFromResult(e){return iv.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return iv.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=ep.fromJSON(e);return lt(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return ep._create(r,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl extends Ip{constructor(){super("twitter.com")}static credential(e,t){return tc._fromParams({providerId:Yl.PROVIDER_ID,signInMethod:Yl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Yl.credentialFromTaggedObject(e)}static credentialFromError(e){return Yl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Yl.credential(t,r)}catch{return null}}}Yl.TWITTER_SIGN_IN_METHOD="twitter.com";Yl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A4(n,e){return Qc(n,"POST","/v1/accounts:signUp",pi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await cl._fromIdTokenResponse(e,r,i),a=CA(r);return new Ua({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=CA(r);return new Ua({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function CA(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I7(n){var i;if(zr(n.app))return Promise.reject(ys(n));const e=ti(n);if(await e._initializationPromise,(i=e.currentUser)!=null&&i.isAnonymous)return new Ua({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await A4(e,{returnSecureToken:!0}),r=await Ua._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv extends Ms{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,sv.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new sv(e,t,r,i)}}function N4(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?sv._fromErrorAndOperation(n,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S4(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C7(n,e){const t=Wt(n);await Hv(!0,t,e);const{providerUserInfo:r}=await RF(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),i=S4(r||[]);return t.providerData=t.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function Px(n,e,t=!1){const r=await qc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ua._forOperation(n,"link",r)}async function Hv(n,e,t){await _g(e);const r=S4(e.providerData),i=n===!1?"provider-already-linked":"no-such-provider";lt(r.has(t)===n,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I4(n,e,t=!1){const{auth:r}=n;if(zr(r.app))return Promise.reject(ys(r));const i="reauthenticate";try{const s=await qc(n,N4(r,i,e,n),t);lt(s.idToken,r,"internal-error");const a=Bv(s.idToken);lt(a,r,"internal-error");const{sub:c}=a;return lt(n.uid===c,r,"user-mismatch"),Ua._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Fs(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C4(n,e,t=!1){if(zr(n.app))return Promise.reject(ys(n));const r="signIn",i=await N4(n,r,e),s=await Ua._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function zv(n,e){return C4(ti(n),e)}async function R4(n,e){const t=Wt(n);return await Hv(!1,t,e.providerId),Px(t,e)}async function P4(n,e){return I4(Wt(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R7(n,e){return Qc(n,"POST","/v1/accounts:signInWithCustomToken",pi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P7(n,e){if(zr(n.app))return Promise.reject(ys(n));const t=ti(n),r=await R7(t,{token:e,returnSecureToken:!0}),i=await Ua._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?kx._fromServerResponse(e,t):"totpInfo"in t?Dx._fromServerResponse(e,t):Fs(e,"internal-error")}}class kx extends Xg{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new kx(t)}}class Dx extends Xg{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Dx(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(n,e,t){var r;lt(((r=t.url)==null?void 0:r.length)>0,n,"invalid-continue-uri"),lt(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),lt(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(lt(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(lt(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lx(n){const e=ti(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function k7(n,e,t){const r=ti(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&$v(r,i,t),await Ku(r,i,"getOobCode",p7,"EMAIL_PASSWORD_PROVIDER")}async function D7(n,e,t){await T4(Wt(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Lx(n),r})}async function L7(n,e){await d7(Wt(n),{oobCode:e})}async function k4(n,e){const t=Wt(n),r=await T4(t,{oobCode:e}),i=r.requestType;switch(lt(i,t,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":lt(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":lt(r.mfaInfo,t,"internal-error");default:lt(r.email,t,"internal-error")}let s=null;return r.mfaInfo&&(s=Xg._fromServerResponse(ti(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function M7(n,e){const{data:t}=await k4(Wt(n),e);return t.email}async function O7(n,e,t){if(zr(n.app))return Promise.reject(ys(n));const r=ti(n),a=await Ku(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",A4,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Lx(n),u}),c=await Ua._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function F7(n,e,t){return zr(n.app)?Promise.reject(ys(n)):zv(Wt(n),fd.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Lx(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U7(n,e,t){const r=ti(n),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(a,c){lt(c.handleCodeInApp,r,"argument-error"),c&&$v(r,a,c)}s(i,t),await Ku(r,i,"getOobCode",m7,"EMAIL_PASSWORD_PROVIDER")}function j7(n,e){const t=Gv.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function V7(n,e,t){if(zr(n.app))return Promise.reject(ys(n));const r=Wt(n),i=fd.credentialWithLink(e,t||vg());return lt(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),zv(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B7(n,e){return mi(n,"POST","/v1/accounts:createAuthUri",pi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q7(n,e){const t=Ix()?vg():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:i}=await B7(Wt(n),r);return i||[]}async function G7(n,e){const t=Wt(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&$v(t.auth,i,e);const{email:s}=await f7(t.auth,i);s!==n.email&&await n.reload()}async function H7(n,e,t){const r=Wt(n),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&$v(r.auth,s,t);const{email:a}=await g7(r.auth,s);a!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z7(n,e){return mi(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $7(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Wt(n),s={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},a=await qc(r,z7(r.auth,s));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const c=r.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function Y7(n,e){const t=Wt(n);return zr(t.auth.app)?Promise.reject(ys(t.auth)):D4(t,e,null)}function W7(n,e){return D4(Wt(n),null,e)}async function D4(n,e,t){const{auth:r}=n,s={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(s.email=e),t&&(s.password=t);const a=await qc(n,c7(r,s));await n._updateTokensIfNecessary(a,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K7(n){var i,s;if(!n)return null;const{providerId:e}=n,t=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},r=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(n!=null&&n.idToken)){const a=(s=(i=Bv(n.idToken))==null?void 0:i.firebase)==null?void 0:s.sign_in_provider;if(a){const c=a!=="anonymous"&&a!=="custom"?a:null;return new Ff(r,c)}}if(!e)return null;switch(e){case"facebook.com":return new J7(r,t);case"github.com":return new Q7(r,t);case"google.com":return new X7(r,t);case"twitter.com":return new Z7(r,t,n.screenName||null);case"custom":case"anonymous":return new Ff(r,null);default:return new Ff(r,e,t)}}class Ff{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class L4 extends Ff{constructor(e,t,r,i){super(e,t,r),this.username=i}}class J7 extends Ff{constructor(e,t){super(e,"facebook.com",t)}}class Q7 extends L4{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class X7 extends Ff{constructor(e,t){super(e,"google.com",t)}}class Z7 extends L4{constructor(e,t,r){super(e,"twitter.com",t,r)}}function eU(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:K7(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new Wd("enroll",e,t)}static _fromMfaPendingCredential(e){return new Wd("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,r;if(e!=null&&e.multiFactorSession){if((t=e.multiFactorSession)!=null&&t.pendingCredential)return Wd._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((r=e.multiFactorSession)!=null&&r.idToken)return Wd._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=ti(e),i=t.customData._serverResponse,s=(i.mfaInfo||[]).map(c=>Xg._fromServerResponse(r,c));lt(i.mfaPendingCredential,r,"internal-error");const a=Wd._fromMfaPendingCredential(i.mfaPendingCredential);return new Mx(a,s,async c=>{const u=await c._process(r,a);delete i.mfaInfo,delete i.mfaPendingCredential;const d={...i,idToken:u.idToken,refreshToken:u.refreshToken};switch(t.operationType){case"signIn":const p=await Ua._fromIdTokenResponse(r,t.operationType,d);return await r._updateCurrentUser(p.user),p;case"reauthenticate":return lt(t.user,r,"internal-error"),Ua._forOperation(t.user,t.operationType,d);default:Fs(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function tU(n,e){var i;const t=Wt(n),r=e;return lt(e.customData.operationType,t,"argument-error"),lt((i=r.customData._serverResponse)==null?void 0:i.mfaPendingCredential,t,"argument-error"),Mx._fromError(t,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(n,e){return mi(n,"POST","/v2/accounts/mfaEnrollment:start",pi(n,e))}function nU(n,e){return mi(n,"POST","/v2/accounts/mfaEnrollment:finalize",pi(n,e))}function rU(n,e){return mi(n,"POST","/v2/accounts/mfaEnrollment:withdraw",pi(n,e))}class Ox{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>Xg._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new Ox(e)}async getSession(){return Wd._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const r=e,i=await this.getSession(),s=await qc(this.user,r._process(this.user.auth,i,t));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await qc(this.user,rU(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==t),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const a2=new WeakMap;function iU(n){const e=Wt(n);return a2.has(e)||a2.set(e,Ox._fromUser(e)),a2.get(e)}const ov="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ov,"1"),this.storage.removeItem(ov),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sU=1e3,oU=10;class O4 extends M4{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_4(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);VF()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,oU):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},sU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}O4.type="LOCAL";const Fx=O4;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4 extends M4{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}F4.type="SESSION";const oh=F4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aU(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Yv(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(a).map(async d=>d(t.origin,s)),u=await aU(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yv.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((c,u)=>{const d=Zg("",20);i.port1.start();const p=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(g){const _=g;if(_.data.eventId===d)switch(_.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(_.data.response);break;default:clearTimeout(p),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(){return window}function cU(n){Fi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(){return typeof Fi().WorkerGlobalScope<"u"&&typeof Fi().importScripts=="function"}async function uU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function dU(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function hU(){return Ux()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4="firebaseLocalStorageDb",fU=1,av="firebaseLocalStorage",j4="fbase_key";class e0{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Wv(n,e){return n.transaction([av],e?"readwrite":"readonly").objectStore(av)}function pU(){const n=indexedDB.deleteDatabase(U4);return new e0(n).toPromise()}function tb(){const n=indexedDB.open(U4,fU);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(av,{keyPath:j4})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(av)?e(r):(r.close(),await pU(),e(await tb()))})})}async function PA(n,e,t){const r=Wv(n,!0).put({[j4]:e,value:t});return new e0(r).toPromise()}async function mU(n,e){const t=Wv(n,!1).get(e),r=await new e0(t).toPromise();return r===void 0?null:r.value}function kA(n,e){const t=Wv(n,!0).delete(e);return new e0(t).toPromise()}const gU=800,yU=3;class V4{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tb(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>yU)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ux()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yv._getInstance(hU()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await uU(),!this.activeServiceWorker)return;this.sender=new lU(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||dU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await tb();return await PA(e,ov,"1"),await kA(e,ov),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>PA(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>mU(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>kA(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Wv(i,!1).getAll();return new e0(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}V4.type="LOCAL";const xg=V4;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(n,e){return mi(n,"POST","/v2/accounts/mfaSignIn:start",pi(n,e))}function vU(n,e){return mi(n,"POST","/v2/accounts/mfaSignIn:finalize",pi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2=x4("rcb"),_U=new Wg(3e4,6e4);class bU{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=Fi().grecaptcha)!=null&&e.render)}load(e,t=""){return lt(xU(t),e,"argument-error"),this.shouldResolveImmediately(t)&&xA(Fi().grecaptcha)?Promise.resolve(Fi().grecaptcha):new Promise((r,i)=>{const s=Fi().setTimeout(()=>{i(Zi(e,"network-request-failed"))},_U.get());Fi()[l2]=()=>{Fi().clearTimeout(s),delete Fi()[l2];const c=Fi().grecaptcha;if(!c||!xA(c)){i(Zi(e,"internal-error"));return}const u=c.render;c.render=(d,p)=>{const g=u(d,p);return this.counter++,g},this.hostLanguage=t,r(c)};const a=`${YF()}?${Ap({onload:l2,render:"explicit",hl:t})}`;Rx(a).catch(()=>{clearTimeout(s),i(Zi(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!((t=Fi().grecaptcha)!=null&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function xU(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class wU{async load(e){return new XF(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km="recaptcha",EU={theme:"light",type:"image"};let TU=class{constructor(e,t,r={...EU}){this.parameters=r,this.type=Km,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ti(e),this.isInvisible=this.parameters.size==="invisible",lt(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof t=="string"?document.getElementById(t):t;lt(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new wU:new bU,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(i=>{const s=a=>{a&&(this.tokenChangeListeners.delete(s),i(a))};this.tokenChangeListeners.add(s),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){lt(!this.parameters.sitekey,this.auth,"argument-error"),lt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),lt(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=Fi()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){lt(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){lt(Ix()&&!Ux(),this.auth,"internal-error"),await AU(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await IF(this.auth);lt(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return lt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function AU(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=nh._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function NU(n,e,t){if(zr(n.app))return Promise.reject(ys(n));const r=ti(n),i=await Kv(r,e,Wt(t));return new jx(i,s=>zv(r,s))}async function SU(n,e,t){const r=Wt(n);await Hv(!1,r,"phone");const i=await Kv(r.auth,e,Wt(t));return new jx(i,s=>R4(r,s))}async function IU(n,e,t){const r=Wt(n);if(zr(r.auth.app))return Promise.reject(ys(r.auth));const i=await Kv(r.auth,e,Wt(t));return new jx(i,s=>P4(r,s))}async function Kv(n,e,t){var r;if(!n._getRecaptchaConfig())try{await i7(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const s=i.session;if("phoneNumber"in i){lt(s.type==="enroll",n,"internal-error");const a={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Ku(n,a,"mfaSmsEnrollment",async(p,g)=>{if(g.phoneEnrollmentInfo.captchaResponse===Wm){lt((t==null?void 0:t.type)===Km,p,"argument-error");const _=await c2(p,g,t);return RA(p,_)}return RA(p,g)},"PHONE_PROVIDER").catch(p=>Promise.reject(p))).phoneSessionInfo.sessionInfo}else{lt(s.type==="signin",n,"internal-error");const a=((r=i.multiFactorHint)==null?void 0:r.uid)||i.multiFactorUid;lt(a,n,"missing-multi-factor-info");const c={mfaPendingCredential:s.credential,mfaEnrollmentId:a,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Ku(n,c,"mfaSmsSignIn",async(g,_)=>{if(_.phoneSignInInfo.captchaResponse===Wm){lt((t==null?void 0:t.type)===Km,g,"argument-error");const w=await c2(g,_,t);return DA(g,w)}return DA(g,_)},"PHONE_PROVIDER").catch(g=>Promise.reject(g))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Ku(n,s,"sendVerificationCode",async(d,p)=>{if(p.captchaResponse===Wm){lt((t==null?void 0:t.type)===Km,d,"argument-error");const g=await c2(d,p,t);return IA(d,g)}return IA(d,p)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).sessionInfo}}finally{t==null||t._reset()}}async function CU(n,e){const t=Wt(n);if(zr(t.auth.app))return Promise.reject(ys(t.auth));await Px(t,e)}async function c2(n,e,t){lt(t.type===Km,n,"argument-error");const r=await t.verify();lt(typeof r=="string",n,"argument-error");const i={...e};if("phoneEnrollmentInfo"in i){const s=i.phoneEnrollmentInfo.phoneNumber,a=i.phoneEnrollmentInfo.captchaResponse,c=i.phoneEnrollmentInfo.clientType,u=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r,captchaResponse:a,clientType:c,recaptchaVersion:u}}),i}else if("phoneSignInInfo"in i){const s=i.phoneSignInInfo.captchaResponse,a=i.phoneSignInInfo.clientType,c=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:s,clientType:a,recaptchaVersion:c}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ah=class Ry{constructor(e){this.providerId=Ry.PROVIDER_ID,this.auth=ti(e)}verifyPhoneNumber(e,t){return Kv(this.auth,e,Wt(t))}static credential(e,t){return nh._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Ry.credentialFromTaggedObject(t)}static credentialFromError(e){return Ry.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?nh._fromTokenResponse(t,r):null}};ah.PROVIDER_ID="phone";ah.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(n,e){return e?ua(e):(lt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx extends Sp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Uc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Uc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Uc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function RU(n){return C4(n.auth,new Vx(n),n.bypassAuthState)}function PU(n){const{auth:e,user:t}=n;return lt(t,e,"internal-error"),I4(t,new Vx(n),n.bypassAuthState)}async function kU(n){const{auth:e,user:t}=n;return lt(t,e,"internal-error"),Px(t,new Vx(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:c}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return RU;case"linkViaPopup":case"linkViaRedirect":return kU;case"reauthViaPopup":case"reauthViaRedirect":return PU;default:Fs(this.auth,"internal-error")}}resolve(e){fl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DU=new Wg(2e3,1e4);async function LU(n,e,t){if(zr(n.app))return Promise.reject(Zi(n,"operation-not-supported-in-this-environment"));const r=ti(n);Np(n,e,Xc);const i=Eh(r,t);return new Lc(r,"signInViaPopup",e,i).executeNotNull()}async function MU(n,e,t){const r=Wt(n);if(zr(r.auth.app))return Promise.reject(Zi(r.auth,"operation-not-supported-in-this-environment"));Np(r.auth,e,Xc);const i=Eh(r.auth,t);return new Lc(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function OU(n,e,t){const r=Wt(n);Np(r.auth,e,Xc);const i=Eh(r.auth,t);return new Lc(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Lc extends B4{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Lc.currentPopupAction&&Lc.currentPopupAction.cancel(),Lc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return lt(e,this.auth,"internal-error"),e}async onExecution(){fl(this.filter.length===1,"Popup operations only handle one event");const e=Zg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Zi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Zi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Lc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,DU.get())};e()}}Lc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FU="pendingRedirect",Jm=new Map;class UU extends B4{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Jm.get(this.auth._key());if(!e){try{const r=await jU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Jm.set(this.auth._key(),e)}return this.bypassAuthState||Jm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jU(n,e){const t=G4(e),r=q4(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}async function Bx(n,e){return q4(n)._set(G4(e),"true")}function VU(){Jm.clear()}function qx(n,e){Jm.set(n._key(),e)}function q4(n){return ua(n._redirectPersistence)}function G4(n){return th(FU,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BU(n,e,t){return qU(n,e,t)}async function qU(n,e,t){if(zr(n.app))return Promise.reject(ys(n));const r=ti(n);Np(n,e,Xc),await r._initializationPromise;const i=Eh(r,t);return await Bx(i,r),i._openRedirect(r,e,"signInViaRedirect")}function GU(n,e,t){return HU(n,e,t)}async function HU(n,e,t){const r=Wt(n);if(Np(r.auth,e,Xc),zr(r.auth.app))return Promise.reject(ys(r.auth));await r.auth._initializationPromise;const i=Eh(r.auth,t);await Bx(i,r.auth);const s=await H4(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function zU(n,e,t){return $U(n,e,t)}async function $U(n,e,t){const r=Wt(n);Np(r.auth,e,Xc),await r.auth._initializationPromise;const i=Eh(r.auth,t);await Hv(!1,r,e.providerId),await Bx(i,r.auth);const s=await H4(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function YU(n,e){return await ti(n)._initializationPromise,Jv(n,e,!1)}async function Jv(n,e,t=!1){if(zr(n.app))return Promise.reject(ys(n));const r=ti(n),i=Eh(r,e),a=await new UU(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}async function H4(n){const e=Zg(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WU=600*1e3;class z4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!KU(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!$4(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(Zi(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=WU&&this.cachedEventUids.clear(),this.cachedEventUids.has(LA(e))}saveEventToCache(e){this.cachedEventUids.add(LA(e)),this.lastProcessedEventTime=Date.now()}}function LA(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function $4({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function KU(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $4(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y4(n,e={}){return mi(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,QU=/^https?/;async function XU(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Y4(n);for(const t of e)try{if(ZU(t))return}catch{}Fs(n,"unauthorized-domain")}function ZU(n){const e=vg(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!QU.test(t))return!1;if(JU.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej=new Wg(3e4,6e4);function MA(){const n=Fi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function tj(n){return new Promise((e,t)=>{var i,s,a;function r(){MA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{MA(),t(Zi(n,"network-request-failed"))},timeout:ej.get()})}if((s=(i=Fi().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((a=Fi().gapi)!=null&&a.load)r();else{const c=x4("iframefcb");return Fi()[c]=()=>{gapi.load?r():t(Zi(n,"network-request-failed"))},Rx(`${KF()}?onload=${c}`).catch(u=>t(u))}}).catch(e=>{throw Py=null,e})}let Py=null;function nj(n){return Py=Py||tj(n),Py}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rj=new Wg(5e3,15e3),ij="__/auth/iframe",sj="emulator/auth/iframe",oj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},aj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lj(n){const e=n.config;lt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Cx(e,sj):`https://${n.config.authDomain}/${ij}`,r={apiKey:e.apiKey,appName:n.name,v:hd},i=aj.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Ap(r).slice(1)}`}async function cj(n){const e=await nj(n),t=Fi().gapi;return lt(t,n,"internal-error"),e.open({where:document.body,url:lj(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oj,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Zi(n,"network-request-failed"),c=Fi().setTimeout(()=>{s(a)},rj.get());function u(){Fi().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dj=500,hj=600,fj="_blank",pj="http://localhost";class OA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mj(n,e,t,r=dj,i=hj){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...uj,width:r.toString(),height:i.toString(),top:s,left:a},d=ei().toLowerCase();t&&(c=m4(d)?fj:t),f4(d)&&(e=e||pj,u.scrollbars="yes");const p=Object.entries(u).reduce((_,[w,P])=>`${_}${w}=${P},`,"");if(jF(d)&&c!=="_self")return gj(e||"",c),new OA(null);const g=window.open(e||"",c,p);lt(g,n,"popup-blocked");try{g.focus()}catch{}return new OA(g)}function gj(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj="__/auth/handler",vj="emulator/auth/handler",_j=encodeURIComponent("fac");async function nb(n,e,t,r,i,s){lt(n.config.authDomain,n,"auth-domain-config-required"),lt(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:hd,eventId:i};if(e instanceof Xc){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",G8(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries(s||{}))a[p]=g}if(e instanceof Ip){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(a.scopes=p.join(","))}n.tenantId&&(a.tid=n.tenantId);const c=a;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const u=await n._getAppCheckToken(),d=u?`#${_j}=${encodeURIComponent(u)}`:"";return`${bj(n)}?${Ap(c).slice(1)}${d}`}function bj({config:n}){return n.emulator?Cx(n,vj):`https://${n.authDomain}/${yj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2="webStorageSupport";class xj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oh,this._completeRedirectFn=Jv,this._overrideRedirectResult=qx}async _openPopup(e,t,r,i){var a;fl((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await nb(e,t,r,vg(),i);return mj(e,s,Zg())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await nb(e,t,r,vg(),i);return cU(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(fl(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await cj(e),r=new z4(e);return t.register("authEvent",i=>(lt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(u2,{type:u2},i=>{var a;const s=(a=i==null?void 0:i[0])==null?void 0:a[u2];s!==void 0&&t(!!s),Fs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=XU(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return _4()||p4()||Jg()}}const wj=xj;class Ej{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return Wl("unexpected MultiFactorSessionType")}}}class Gx extends Ej{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Gx(e)}_finalizeEnroll(e,t,r){return nU(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return vU(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class W4{constructor(){}static assertion(e){return Gx._fromCredential(e)}}W4.FACTOR_ID="phone";var FA="@firebase/auth",UA="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){lt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aj(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Nj(n){Fa(new vo("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;lt(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:b4(n)},d=new zF(r,i,s,u);return s7(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Fa(new vo("auth-internal",e=>{const t=ti(e.getProvider("auth").getImmediate());return(r=>new Tj(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),go(FA,UA,Aj(n)),go(FA,UA,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj=300;k8("authIdTokenMaxAge");function Ij(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}$F({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Zi("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",Ij().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Nj("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lh(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj=2e3;async function Rj(n,e,t){const{BuildInfo:r}=lh();fl(e.sessionId,"AuthEvent did not contain a session ID");const i=await Mj(e.sessionId),s={};return Jg()?s.ibi=r.packageName:Kg()?s.apn=r.packageName:Fs(n,"operation-not-supported-in-this-environment"),r.displayName&&(s.appDisplayName=r.displayName),s.sessionId=i,nb(n,t,e.type,void 0,e.eventId??void 0,s)}async function Pj(n){const{BuildInfo:e}=lh(),t={};Jg()?t.iosBundleId=e.packageName:Kg()?t.androidPackageName=e.packageName:Fs(n,"operation-not-supported-in-this-environment"),await Y4(n,t)}function kj(n){const{cordova:e}=lh();return new Promise(t=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(n):i=e.InAppBrowser.open(n,UF()?"_blank":"_system","location=yes"),t(i)})})}async function Dj(n,e,t){const{cordova:r}=lh();let i=()=>{};try{await new Promise((s,a)=>{let c=null;function u(){var _;s();const g=(_=r.plugins.browsertab)==null?void 0:_.close;typeof g=="function"&&g(),typeof(t==null?void 0:t.close)=="function"&&t.close()}function d(){c||(c=window.setTimeout(()=>{a(Zi(n,"redirect-cancelled-by-user"))},Cj))}function p(){(document==null?void 0:document.visibilityState)==="visible"&&d()}e.addPassiveListener(u),document.addEventListener("resume",d,!1),Kg()&&document.addEventListener("visibilitychange",p,!1),i=()=>{e.removePassiveListener(u),document.removeEventListener("resume",d,!1),document.removeEventListener("visibilitychange",p,!1),c&&window.clearTimeout(c)}})}finally{i()}}function Lj(n){var t,r,i,s,a,c,u,d,p,g;const e=lh();lt(typeof((t=e==null?void 0:e.universalLinks)==null?void 0:t.subscribe)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),lt(typeof((r=e==null?void 0:e.BuildInfo)==null?void 0:r.packageName)<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),lt(typeof((a=(s=(i=e==null?void 0:e.cordova)==null?void 0:i.plugins)==null?void 0:s.browsertab)==null?void 0:a.openUrl)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),lt(typeof((d=(u=(c=e==null?void 0:e.cordova)==null?void 0:c.plugins)==null?void 0:u.browsertab)==null?void 0:d.isAvailable)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),lt(typeof((g=(p=e==null?void 0:e.cordova)==null?void 0:p.InAppBrowser)==null?void 0:g.open)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function Mj(n){const e=Oj(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(i=>i.toString(16).padStart(2,"0")).join("")}function Oj(n){if(fl(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fj=20;class Uj extends z4{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function jj(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:qj(),postBody:null,tenantId:n.tenantId,error:Zi(n,"no-auth-event")}}function Vj(n,e){return rb()._set(ib(n),e)}async function jA(n){const e=await rb()._get(ib(n));return e&&await rb()._remove(ib(n)),e}function Bj(n,e){var r,i;const t=Hj(e);if(t.includes("/__/auth/callback")){const s=ky(t),a=s.firebaseError?Gj(decodeURIComponent(s.firebaseError)):null,c=(i=(r=a==null?void 0:a.code)==null?void 0:r.split("auth/"))==null?void 0:i[1],u=c?Zi(c):null;return u?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:t,postBody:null}}return null}function qj(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<Fj;t++){const r=Math.floor(Math.random()*e.length);n.push(e.charAt(r))}return n.join("")}function rb(){return ua(Fx)}function ib(n){return th("authEvent",n.config.apiKey,n.name)}function Gj(n){try{return JSON.parse(n)}catch{return null}}function Hj(n){const e=ky(n),t=e.link?decodeURIComponent(e.link):void 0,r=ky(t).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return ky(i).link||i||r||t||n}function ky(n){if(!(n!=null&&n.includes("?")))return{};const[e,...t]=n.split("?");return Pf(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zj=500;class $j{constructor(){this._redirectPersistence=oh,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Jv,this._overrideRedirectResult=qx}async _initialize(e){const t=e._key();let r=this.eventManagers.get(t);return r||(r=new Uj(e),this.eventManagers.set(t,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Fs(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,r,i){Lj(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),VU(),await this._originValidation(e);const a=jj(e,r,i);await Vj(e,a);const c=await Rj(e,a,t),u=await kj(c);return Dj(e,s,u)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Pj(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=lh(),a=setTimeout(async()=>{await jA(e),t.onEvent(VA())},zj),c=async p=>{clearTimeout(a);const g=await jA(e);let _=null;g&&(p!=null&&p.url)&&(_=Bj(g,p.url)),t.onEvent(_||VA())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,c);const u=i,d=`${s.packageName.toLowerCase()}://`;lh().handleOpenURL=async p=>{if(p.toLowerCase().startsWith(d)&&c({url:p}),typeof u=="function")try{u(p)}catch(g){console.error(g)}}}}const Yj=$j;function VA(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Zi("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wj(n,e){ti(n)._logFramework(e)}var Kj="@firebase/auth-compat",Jj="0.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj=1e3;function Qm(){var n;return((n=self==null?void 0:self.location)==null?void 0:n.protocol)||null}function Xj(){return Qm()==="http:"||Qm()==="https:"}function K4(n=ei()){return!!((Qm()==="file:"||Qm()==="ionic:"||Qm()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function Zj(){return _x()||Uv()}function eV(){return VR()&&(document==null?void 0:document.documentMode)===11}function tV(n=ei()){return/Edge\/\d+/.test(n)}function nV(n=ei()){return eV()||tV(n)}function J4(){try{const n=self.localStorage,e=Zg();if(n)return n.setItem(e,"1"),n.removeItem(e),nV()?sh():!0}catch{return Hx()&&sh()}return!1}function Hx(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function d2(){return(Xj()||jv()||K4())&&!Zj()&&J4()&&!Hx()}function Q4(){return K4()&&typeof document<"u"}async function rV(){return Q4()?new Promise(n=>{const e=setTimeout(()=>{n(!1)},Qj);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})}):!1}function iV(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca={LOCAL:"local",NONE:"none",SESSION:"session"},Nm=lt,X4="persistence";function sV(n,e){if(Nm(Object.values(ca).includes(e),n,"invalid-persistence-type"),_x()){Nm(e!==ca.SESSION,n,"unsupported-persistence-type");return}if(Uv()){Nm(e===ca.NONE,n,"unsupported-persistence-type");return}if(Hx()){Nm(e===ca.NONE||e===ca.LOCAL&&sh(),n,"unsupported-persistence-type");return}Nm(e===ca.NONE||J4(),n,"unsupported-persistence-type")}async function sb(n){await n._initializationPromise;const e=Z4(),t=th(X4,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistenceType())}function oV(n,e){const t=Z4();if(!t)return[];const r=th(X4,n,e);switch(t.getItem(r)){case ca.NONE:return[Zf];case ca.LOCAL:return[xg,oh];case ca.SESSION:return[oh];default:return[]}}function Z4(){var n;try{return((n=iV())==null?void 0:n.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aV=lt;class Gu{constructor(){this.browserResolver=ua(wj),this.cordovaResolver=ua(Yj),this.underlyingResolver=null,this._redirectPersistence=oh,this._completeRedirectFn=Jv,this._overrideRedirectResult=qx}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,r,i)}async _openRedirect(e,t,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,r,i)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Q4()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return aV(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await rV();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e3(n){return n.unwrap()}function lV(n){return n.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cV(n){return t3(n)}function uV(n,e){var r;const t=(r=e.customData)==null?void 0:r._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new dV(n,tU(n,e))}else if(t){const i=t3(e),s=e;i&&(s.credential=i,s.tenantId=t.tenantId||void 0,s.email=t.email||void 0,s.phoneNumber=t.phoneNumber||void 0)}}function t3(n){const{_tokenResponse:e}=n instanceof Ms?n.customData:n;if(!e)return null;if(!(n instanceof Ms)&&"temporaryProof"in e&&"phoneNumber"in e)return ah.credentialFromResult(n);const t=e.providerId;if(!t||t===Tm.PASSWORD)return null;let r;switch(t){case Tm.GOOGLE:r=zl;break;case Tm.FACEBOOK:r=Hl;break;case Tm.GITHUB:r=$l;break;case Tm.TWITTER:r=Yl;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:a,pendingToken:c,nonce:u}=e;return!s&&!a&&!i&&!c?null:c?t.startsWith("saml.")?ep._create(t,c):tc._fromParams({providerId:t,signInMethod:t,pendingToken:c,idToken:i,accessToken:s}):new Of(t).credential({idToken:i,accessToken:s,rawNonce:u})}return n instanceof Ms?r.credentialFromError(n):r.credentialFromResult(n)}function Bo(n,e){return e.catch(t=>{throw t instanceof Ms&&uV(n,t),t}).then(t=>{const r=t.operationType,i=t.user;return{operationType:r,credential:cV(t),additionalUserInfo:eU(t),user:Qv.getOrCreate(i)}})}async function ob(n,e){const t=await e;return{verificationId:t.verificationId,confirm:r=>Bo(n,t.confirm(r))}}class dV{constructor(e,t){this.resolver=t,this.auth=lV(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Bo(e3(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qv=class Um{constructor(e){this._delegate=e,this.multiFactor=iU(e)}static getOrCreate(e){return Um.USER_MAP.has(e)||Um.USER_MAP.set(e,new Um(e)),Um.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Bo(this.auth,R4(this._delegate,e))}async linkWithPhoneNumber(e,t){return ob(this.auth,SU(this._delegate,e,t))}async linkWithPopup(e){return Bo(this.auth,OU(this._delegate,e,Gu))}async linkWithRedirect(e){return await sb(ti(this.auth)),zU(this._delegate,e,Gu)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Bo(this.auth,P4(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return ob(this.auth,IU(this._delegate,e,t))}reauthenticateWithPopup(e){return Bo(this.auth,MU(this._delegate,e,Gu))}async reauthenticateWithRedirect(e){return await sb(ti(this.auth)),GU(this._delegate,e,Gu)}sendEmailVerification(e){return G7(this._delegate,e)}async unlink(e){return await C7(this._delegate,e),this}updateEmail(e){return Y7(this._delegate,e)}updatePassword(e){return W7(this._delegate,e)}updatePhoneNumber(e){return CU(this._delegate,e)}updateProfile(e){return $7(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return H7(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};Qv.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm=lt;class ab{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Sm(r,"invalid-api-key",{appName:e.name}),Sm(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?Gu:void 0;this._delegate=t.initialize({options:{persistence:hV(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(vF),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Qv.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){o7(this._delegate,e,t)}applyActionCode(e){return L7(this._delegate,e)}checkActionCode(e){return k4(this._delegate,e)}confirmPasswordReset(e,t){return D7(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return Bo(this._delegate,O7(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return q7(this._delegate,e)}isSignInWithEmailLink(e){return j7(this._delegate,e)}async getRedirectResult(){Sm(d2(),this._delegate,"operation-not-supported-in-this-environment");const e=await YU(this._delegate,Gu);return e?Bo(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){Wj(this._delegate,e)}onAuthStateChanged(e,t,r){const{next:i,error:s,complete:a}=BA(e,t,r);return this._delegate.onAuthStateChanged(i,s,a)}onIdTokenChanged(e,t,r){const{next:i,error:s,complete:a}=BA(e,t,r);return this._delegate.onIdTokenChanged(i,s,a)}sendSignInLinkToEmail(e,t){return U7(this._delegate,e,t)}sendPasswordResetEmail(e,t){return k7(this._delegate,e,t||void 0)}async setPersistence(e){sV(this._delegate,e);let t;switch(e){case ca.SESSION:t=oh;break;case ca.LOCAL:t=await ua(xg)._isAvailable()?xg:Fx;break;case ca.NONE:t=Zf;break;default:return Fs("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Bo(this._delegate,I7(this._delegate))}signInWithCredential(e){return Bo(this._delegate,zv(this._delegate,e))}signInWithCustomToken(e){return Bo(this._delegate,P7(this._delegate,e))}signInWithEmailAndPassword(e,t){return Bo(this._delegate,F7(this._delegate,e,t))}signInWithEmailLink(e,t){return Bo(this._delegate,V7(this._delegate,e,t))}signInWithPhoneNumber(e,t){return ob(this._delegate,NU(this._delegate,e,t))}async signInWithPopup(e){return Sm(d2(),this._delegate,"operation-not-supported-in-this-environment"),Bo(this._delegate,LU(this._delegate,e,Gu))}async signInWithRedirect(e){return Sm(d2(),this._delegate,"operation-not-supported-in-this-environment"),await sb(this._delegate),BU(this._delegate,e,Gu)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return M7(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}ab.Persistence=ca;function BA(n,e,t){let r=n;typeof n!="function"&&({next:r,error:e,complete:t}=n);const i=r;return{next:a=>i(a&&Qv.getOrCreate(a)),error:e,complete:t}}function hV(n,e){const t=oV(n,e);if(typeof self<"u"&&!t.includes(xg)&&t.push(xg),typeof window<"u")for(const r of[Fx,oh])t.includes(r)||t.push(r);return t.includes(Zf)||t.push(Zf),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{static credential(e,t){return ah.credential(e,t)}constructor(){this.providerId="phone",this._delegate=new ah(e3(an.auth()))}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}zx.PHONE_SIGN_IN_METHOD=ah.PHONE_SIGN_IN_METHOD;zx.PROVIDER_ID=ah.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fV=lt;class pV{constructor(e,t,r=an.app()){var i;fV((i=r.options)==null?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new TU(r.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV="auth-compat";function gV(n){n.INTERNAL.registerComponent(new vo(mV,e=>{const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new ab(t,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:pf.EMAIL_SIGNIN,PASSWORD_RESET:pf.PASSWORD_RESET,RECOVER_EMAIL:pf.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:pf.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:pf.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:pf.VERIFY_EMAIL}},EmailAuthProvider:fd,FacebookAuthProvider:Hl,GithubAuthProvider:$l,GoogleAuthProvider:zl,OAuthProvider:Of,SAMLAuthProvider:iv,PhoneAuthProvider:zx,PhoneMultiFactorGenerator:W4,RecaptchaVerifier:pV,TwitterAuthProvider:Yl,Auth:ab,AuthCredential:Sp,Error:Ms}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(Kj,Jj)}gV(an);var qA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ju,n3;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(U,C){function N(){}N.prototype=C.prototype,U.F=C.prototype,U.prototype=new N,U.prototype.constructor=U,U.D=function(F,S,k){for(var M=Array(arguments.length-2),Q=2;Q<arguments.length;Q++)M[Q-2]=arguments[Q];return C.prototype[S].apply(F,M)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(U,C,N){N||(N=0);const F=Array(16);if(typeof C=="string")for(var S=0;S<16;++S)F[S]=C.charCodeAt(N++)|C.charCodeAt(N++)<<8|C.charCodeAt(N++)<<16|C.charCodeAt(N++)<<24;else for(S=0;S<16;++S)F[S]=C[N++]|C[N++]<<8|C[N++]<<16|C[N++]<<24;C=U.g[0],N=U.g[1],S=U.g[2];let k=U.g[3],M;M=C+(k^N&(S^k))+F[0]+3614090360&4294967295,C=N+(M<<7&4294967295|M>>>25),M=k+(S^C&(N^S))+F[1]+3905402710&4294967295,k=C+(M<<12&4294967295|M>>>20),M=S+(N^k&(C^N))+F[2]+606105819&4294967295,S=k+(M<<17&4294967295|M>>>15),M=N+(C^S&(k^C))+F[3]+3250441966&4294967295,N=S+(M<<22&4294967295|M>>>10),M=C+(k^N&(S^k))+F[4]+4118548399&4294967295,C=N+(M<<7&4294967295|M>>>25),M=k+(S^C&(N^S))+F[5]+1200080426&4294967295,k=C+(M<<12&4294967295|M>>>20),M=S+(N^k&(C^N))+F[6]+2821735955&4294967295,S=k+(M<<17&4294967295|M>>>15),M=N+(C^S&(k^C))+F[7]+4249261313&4294967295,N=S+(M<<22&4294967295|M>>>10),M=C+(k^N&(S^k))+F[8]+1770035416&4294967295,C=N+(M<<7&4294967295|M>>>25),M=k+(S^C&(N^S))+F[9]+2336552879&4294967295,k=C+(M<<12&4294967295|M>>>20),M=S+(N^k&(C^N))+F[10]+4294925233&4294967295,S=k+(M<<17&4294967295|M>>>15),M=N+(C^S&(k^C))+F[11]+2304563134&4294967295,N=S+(M<<22&4294967295|M>>>10),M=C+(k^N&(S^k))+F[12]+1804603682&4294967295,C=N+(M<<7&4294967295|M>>>25),M=k+(S^C&(N^S))+F[13]+4254626195&4294967295,k=C+(M<<12&4294967295|M>>>20),M=S+(N^k&(C^N))+F[14]+2792965006&4294967295,S=k+(M<<17&4294967295|M>>>15),M=N+(C^S&(k^C))+F[15]+1236535329&4294967295,N=S+(M<<22&4294967295|M>>>10),M=C+(S^k&(N^S))+F[1]+4129170786&4294967295,C=N+(M<<5&4294967295|M>>>27),M=k+(N^S&(C^N))+F[6]+3225465664&4294967295,k=C+(M<<9&4294967295|M>>>23),M=S+(C^N&(k^C))+F[11]+643717713&4294967295,S=k+(M<<14&4294967295|M>>>18),M=N+(k^C&(S^k))+F[0]+3921069994&4294967295,N=S+(M<<20&4294967295|M>>>12),M=C+(S^k&(N^S))+F[5]+3593408605&4294967295,C=N+(M<<5&4294967295|M>>>27),M=k+(N^S&(C^N))+F[10]+38016083&4294967295,k=C+(M<<9&4294967295|M>>>23),M=S+(C^N&(k^C))+F[15]+3634488961&4294967295,S=k+(M<<14&4294967295|M>>>18),M=N+(k^C&(S^k))+F[4]+3889429448&4294967295,N=S+(M<<20&4294967295|M>>>12),M=C+(S^k&(N^S))+F[9]+568446438&4294967295,C=N+(M<<5&4294967295|M>>>27),M=k+(N^S&(C^N))+F[14]+3275163606&4294967295,k=C+(M<<9&4294967295|M>>>23),M=S+(C^N&(k^C))+F[3]+4107603335&4294967295,S=k+(M<<14&4294967295|M>>>18),M=N+(k^C&(S^k))+F[8]+1163531501&4294967295,N=S+(M<<20&4294967295|M>>>12),M=C+(S^k&(N^S))+F[13]+2850285829&4294967295,C=N+(M<<5&4294967295|M>>>27),M=k+(N^S&(C^N))+F[2]+4243563512&4294967295,k=C+(M<<9&4294967295|M>>>23),M=S+(C^N&(k^C))+F[7]+1735328473&4294967295,S=k+(M<<14&4294967295|M>>>18),M=N+(k^C&(S^k))+F[12]+2368359562&4294967295,N=S+(M<<20&4294967295|M>>>12),M=C+(N^S^k)+F[5]+4294588738&4294967295,C=N+(M<<4&4294967295|M>>>28),M=k+(C^N^S)+F[8]+2272392833&4294967295,k=C+(M<<11&4294967295|M>>>21),M=S+(k^C^N)+F[11]+1839030562&4294967295,S=k+(M<<16&4294967295|M>>>16),M=N+(S^k^C)+F[14]+4259657740&4294967295,N=S+(M<<23&4294967295|M>>>9),M=C+(N^S^k)+F[1]+2763975236&4294967295,C=N+(M<<4&4294967295|M>>>28),M=k+(C^N^S)+F[4]+1272893353&4294967295,k=C+(M<<11&4294967295|M>>>21),M=S+(k^C^N)+F[7]+4139469664&4294967295,S=k+(M<<16&4294967295|M>>>16),M=N+(S^k^C)+F[10]+3200236656&4294967295,N=S+(M<<23&4294967295|M>>>9),M=C+(N^S^k)+F[13]+681279174&4294967295,C=N+(M<<4&4294967295|M>>>28),M=k+(C^N^S)+F[0]+3936430074&4294967295,k=C+(M<<11&4294967295|M>>>21),M=S+(k^C^N)+F[3]+3572445317&4294967295,S=k+(M<<16&4294967295|M>>>16),M=N+(S^k^C)+F[6]+76029189&4294967295,N=S+(M<<23&4294967295|M>>>9),M=C+(N^S^k)+F[9]+3654602809&4294967295,C=N+(M<<4&4294967295|M>>>28),M=k+(C^N^S)+F[12]+3873151461&4294967295,k=C+(M<<11&4294967295|M>>>21),M=S+(k^C^N)+F[15]+530742520&4294967295,S=k+(M<<16&4294967295|M>>>16),M=N+(S^k^C)+F[2]+3299628645&4294967295,N=S+(M<<23&4294967295|M>>>9),M=C+(S^(N|~k))+F[0]+4096336452&4294967295,C=N+(M<<6&4294967295|M>>>26),M=k+(N^(C|~S))+F[7]+1126891415&4294967295,k=C+(M<<10&4294967295|M>>>22),M=S+(C^(k|~N))+F[14]+2878612391&4294967295,S=k+(M<<15&4294967295|M>>>17),M=N+(k^(S|~C))+F[5]+4237533241&4294967295,N=S+(M<<21&4294967295|M>>>11),M=C+(S^(N|~k))+F[12]+1700485571&4294967295,C=N+(M<<6&4294967295|M>>>26),M=k+(N^(C|~S))+F[3]+2399980690&4294967295,k=C+(M<<10&4294967295|M>>>22),M=S+(C^(k|~N))+F[10]+4293915773&4294967295,S=k+(M<<15&4294967295|M>>>17),M=N+(k^(S|~C))+F[1]+2240044497&4294967295,N=S+(M<<21&4294967295|M>>>11),M=C+(S^(N|~k))+F[8]+1873313359&4294967295,C=N+(M<<6&4294967295|M>>>26),M=k+(N^(C|~S))+F[15]+4264355552&4294967295,k=C+(M<<10&4294967295|M>>>22),M=S+(C^(k|~N))+F[6]+2734768916&4294967295,S=k+(M<<15&4294967295|M>>>17),M=N+(k^(S|~C))+F[13]+1309151649&4294967295,N=S+(M<<21&4294967295|M>>>11),M=C+(S^(N|~k))+F[4]+4149444226&4294967295,C=N+(M<<6&4294967295|M>>>26),M=k+(N^(C|~S))+F[11]+3174756917&4294967295,k=C+(M<<10&4294967295|M>>>22),M=S+(C^(k|~N))+F[2]+718787259&4294967295,S=k+(M<<15&4294967295|M>>>17),M=N+(k^(S|~C))+F[9]+3951481745&4294967295,U.g[0]=U.g[0]+C&4294967295,U.g[1]=U.g[1]+(S+(M<<21&4294967295|M>>>11))&4294967295,U.g[2]=U.g[2]+S&4294967295,U.g[3]=U.g[3]+k&4294967295}r.prototype.v=function(U,C){C===void 0&&(C=U.length);const N=C-this.blockSize,F=this.C;let S=this.h,k=0;for(;k<C;){if(S==0)for(;k<=N;)i(this,U,k),k+=this.blockSize;if(typeof U=="string"){for(;k<C;)if(F[S++]=U.charCodeAt(k++),S==this.blockSize){i(this,F),S=0;break}}else for(;k<C;)if(F[S++]=U[k++],S==this.blockSize){i(this,F),S=0;break}}this.h=S,this.o+=C},r.prototype.A=function(){var U=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);U[0]=128;for(var C=1;C<U.length-8;++C)U[C]=0;C=this.o*8;for(var N=U.length-8;N<U.length;++N)U[N]=C&255,C/=256;for(this.v(U),U=Array(16),C=0,N=0;N<4;++N)for(let F=0;F<32;F+=8)U[C++]=this.g[N]>>>F&255;return U};function s(U,C){var N=c;return Object.prototype.hasOwnProperty.call(N,U)?N[U]:N[U]=C(U)}function a(U,C){this.h=C;const N=[];let F=!0;for(let S=U.length-1;S>=0;S--){const k=U[S]|0;F&&k==C||(N[S]=k,F=!1)}this.g=N}var c={};function u(U){return-128<=U&&U<128?s(U,function(C){return new a([C|0],C<0?-1:0)}):new a([U|0],U<0?-1:0)}function d(U){if(isNaN(U)||!isFinite(U))return g;if(U<0)return L(d(-U));const C=[];let N=1;for(let F=0;U>=N;F++)C[F]=U/N|0,N*=4294967296;return new a(C,0)}function p(U,C){if(U.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(U.charAt(0)=="-")return L(p(U.substring(1),C));if(U.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=d(Math.pow(C,8));let F=g;for(let k=0;k<U.length;k+=8){var S=Math.min(8,U.length-k);const M=parseInt(U.substring(k,k+S),C);S<8?(S=d(Math.pow(C,S)),F=F.j(S).add(d(M))):(F=F.j(N),F=F.add(d(M)))}return F}var g=u(0),_=u(1),w=u(16777216);n=a.prototype,n.m=function(){if(O(this))return-L(this).m();let U=0,C=1;for(let N=0;N<this.g.length;N++){const F=this.i(N);U+=(F>=0?F:4294967296+F)*C,C*=4294967296}return U},n.toString=function(U){if(U=U||10,U<2||36<U)throw Error("radix out of range: "+U);if(P(this))return"0";if(O(this))return"-"+L(this).toString(U);const C=d(Math.pow(U,6));var N=this;let F="";for(;;){const S=J(N,C).g;N=B(N,S.j(C));let k=((N.g.length>0?N.g[0]:N.h)>>>0).toString(U);if(N=S,P(N))return k+F;for(;k.length<6;)k="0"+k;F=k+F}},n.i=function(U){return U<0?0:U<this.g.length?this.g[U]:this.h};function P(U){if(U.h!=0)return!1;for(let C=0;C<U.g.length;C++)if(U.g[C]!=0)return!1;return!0}function O(U){return U.h==-1}n.l=function(U){return U=B(this,U),O(U)?-1:P(U)?0:1};function L(U){const C=U.g.length,N=[];for(let F=0;F<C;F++)N[F]=~U.g[F];return new a(N,~U.h).add(_)}n.abs=function(){return O(this)?L(this):this},n.add=function(U){const C=Math.max(this.g.length,U.g.length),N=[];let F=0;for(let S=0;S<=C;S++){let k=F+(this.i(S)&65535)+(U.i(S)&65535),M=(k>>>16)+(this.i(S)>>>16)+(U.i(S)>>>16);F=M>>>16,k&=65535,M&=65535,N[S]=M<<16|k}return new a(N,N[N.length-1]&-2147483648?-1:0)};function B(U,C){return U.add(L(C))}n.j=function(U){if(P(this)||P(U))return g;if(O(this))return O(U)?L(this).j(L(U)):L(L(this).j(U));if(O(U))return L(this.j(L(U)));if(this.l(w)<0&&U.l(w)<0)return d(this.m()*U.m());const C=this.g.length+U.g.length,N=[];for(var F=0;F<2*C;F++)N[F]=0;for(F=0;F<this.g.length;F++)for(let S=0;S<U.g.length;S++){const k=this.i(F)>>>16,M=this.i(F)&65535,Q=U.i(S)>>>16,pe=U.i(S)&65535;N[2*F+2*S]+=M*pe,K(N,2*F+2*S),N[2*F+2*S+1]+=k*pe,K(N,2*F+2*S+1),N[2*F+2*S+1]+=M*Q,K(N,2*F+2*S+1),N[2*F+2*S+2]+=k*Q,K(N,2*F+2*S+2)}for(U=0;U<C;U++)N[U]=N[2*U+1]<<16|N[2*U];for(U=C;U<2*C;U++)N[U]=0;return new a(N,0)};function K(U,C){for(;(U[C]&65535)!=U[C];)U[C+1]+=U[C]>>>16,U[C]&=65535,C++}function W(U,C){this.g=U,this.h=C}function J(U,C){if(P(C))throw Error("division by zero");if(P(U))return new W(g,g);if(O(U))return C=J(L(U),C),new W(L(C.g),L(C.h));if(O(C))return C=J(U,L(C)),new W(L(C.g),C.h);if(U.g.length>30){if(O(U)||O(C))throw Error("slowDivide_ only works with positive integers.");for(var N=_,F=C;F.l(U)<=0;)N=ae(N),F=ae(F);var S=le(N,1),k=le(F,1);for(F=le(F,2),N=le(N,2);!P(F);){var M=k.add(F);M.l(U)<=0&&(S=S.add(N),k=M),F=le(F,1),N=le(N,1)}return C=B(U,S.j(C)),new W(S,C)}for(S=g;U.l(C)>=0;){for(N=Math.max(1,Math.floor(U.m()/C.m())),F=Math.ceil(Math.log(N)/Math.LN2),F=F<=48?1:Math.pow(2,F-48),k=d(N),M=k.j(C);O(M)||M.l(U)>0;)N-=F,k=d(N),M=k.j(C);P(k)&&(k=_),S=S.add(k),U=B(U,M)}return new W(S,U)}n.B=function(U){return J(this,U).h},n.and=function(U){const C=Math.max(this.g.length,U.g.length),N=[];for(let F=0;F<C;F++)N[F]=this.i(F)&U.i(F);return new a(N,this.h&U.h)},n.or=function(U){const C=Math.max(this.g.length,U.g.length),N=[];for(let F=0;F<C;F++)N[F]=this.i(F)|U.i(F);return new a(N,this.h|U.h)},n.xor=function(U){const C=Math.max(this.g.length,U.g.length),N=[];for(let F=0;F<C;F++)N[F]=this.i(F)^U.i(F);return new a(N,this.h^U.h)};function ae(U){const C=U.g.length+1,N=[];for(let F=0;F<C;F++)N[F]=U.i(F)<<1|U.i(F-1)>>>31;return new a(N,U.h)}function le(U,C){const N=C>>5;C%=32;const F=U.g.length-N,S=[];for(let k=0;k<F;k++)S[k]=C>0?U.i(k+N)>>>C|U.i(k+N+1)<<32-C:U.i(k+N);return new a(S,U.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,n3=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=p,Ju=a}).apply(typeof qA<"u"?qA:typeof self<"u"?self:typeof window<"u"?window:{});var fy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var r3,jm,i3,Dy,lb,s3,o3,a3;(function(){var n,e=Object.defineProperty;function t(b){b=[typeof globalThis=="object"&&globalThis,b,typeof window=="object"&&window,typeof self=="object"&&self,typeof fy=="object"&&fy];for(var D=0;D<b.length;++D){var G=b[D];if(G&&G.Math==Math)return G}throw Error("Cannot find global object")}var r=t(this);function i(b,D){if(D)e:{var G=r;b=b.split(".");for(var ie=0;ie<b.length-1;ie++){var Pe=b[ie];if(!(Pe in G))break e;G=G[Pe]}b=b[b.length-1],ie=G[b],D=D(ie),D!=ie&&D!=null&&e(G,b,{configurable:!0,writable:!0,value:D})}}i("Symbol.dispose",function(b){return b||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(b){return b||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(b){return b||function(D){var G=[],ie;for(ie in D)Object.prototype.hasOwnProperty.call(D,ie)&&G.push([ie,D[ie]]);return G}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function c(b){var D=typeof b;return D=="object"&&b!=null||D=="function"}function u(b,D,G){return b.call.apply(b.bind,arguments)}function d(b,D,G){return d=u,d.apply(null,arguments)}function p(b,D){var G=Array.prototype.slice.call(arguments,1);return function(){var ie=G.slice();return ie.push.apply(ie,arguments),b.apply(this,ie)}}function g(b,D){function G(){}G.prototype=D.prototype,b.Z=D.prototype,b.prototype=new G,b.prototype.constructor=b,b.Ob=function(ie,Pe,Ue){for(var ct=Array(arguments.length-2),ln=2;ln<arguments.length;ln++)ct[ln-2]=arguments[ln];return D.prototype[Pe].apply(ie,ct)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?b=>b&&AsyncContext.Snapshot.wrap(b):b=>b;function w(b){const D=b.length;if(D>0){const G=Array(D);for(let ie=0;ie<D;ie++)G[ie]=b[ie];return G}return[]}function P(b,D){for(let ie=1;ie<arguments.length;ie++){const Pe=arguments[ie];var G=typeof Pe;if(G=G!="object"?G:Pe?Array.isArray(Pe)?"array":G:"null",G=="array"||G=="object"&&typeof Pe.length=="number"){G=b.length||0;const Ue=Pe.length||0;b.length=G+Ue;for(let ct=0;ct<Ue;ct++)b[G+ct]=Pe[ct]}else b.push(Pe)}}class O{constructor(D,G){this.i=D,this.j=G,this.h=0,this.g=null}get(){let D;return this.h>0?(this.h--,D=this.g,this.g=D.next,D.next=null):D=this.i(),D}}function L(b){a.setTimeout(()=>{throw b},0)}function B(){var b=U;let D=null;return b.g&&(D=b.g,b.g=b.g.next,b.g||(b.h=null),D.next=null),D}class K{constructor(){this.h=this.g=null}add(D,G){const ie=W.get();ie.set(D,G),this.h?this.h.next=ie:this.g=ie,this.h=ie}}var W=new O(()=>new J,b=>b.reset());class J{constructor(){this.next=this.g=this.h=null}set(D,G){this.h=D,this.g=G,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,le=!1,U=new K,C=()=>{const b=Promise.resolve(void 0);ae=()=>{b.then(N)}};function N(){for(var b;b=B();){try{b.h.call(b.g)}catch(G){L(G)}var D=W;D.j(b),D.h<100&&(D.h++,b.next=D.g,D.g=b)}le=!1}function F(){this.u=this.u,this.C=this.C}F.prototype.u=!1,F.prototype.dispose=function(){this.u||(this.u=!0,this.N())},F.prototype[Symbol.dispose]=function(){this.dispose()},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function S(b,D){this.type=b,this.g=this.target=D,this.defaultPrevented=!1}S.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var b=!1,D=Object.defineProperty({},"passive",{get:function(){b=!0}});try{const G=()=>{};a.addEventListener("test",G,D),a.removeEventListener("test",G,D)}catch{}return b})();function M(b){return/^[\s\xa0]*$/.test(b)}function Q(b,D){S.call(this,b?b.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,b&&this.init(b,D)}g(Q,S),Q.prototype.init=function(b,D){const G=this.type=b.type,ie=b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:null;this.target=b.target||b.srcElement,this.g=D,D=b.relatedTarget,D||(G=="mouseover"?D=b.fromElement:G=="mouseout"&&(D=b.toElement)),this.relatedTarget=D,ie?(this.clientX=ie.clientX!==void 0?ie.clientX:ie.pageX,this.clientY=ie.clientY!==void 0?ie.clientY:ie.pageY,this.screenX=ie.screenX||0,this.screenY=ie.screenY||0):(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0),this.button=b.button,this.key=b.key||"",this.ctrlKey=b.ctrlKey,this.altKey=b.altKey,this.shiftKey=b.shiftKey,this.metaKey=b.metaKey,this.pointerId=b.pointerId||0,this.pointerType=b.pointerType,this.state=b.state,this.i=b,b.defaultPrevented&&Q.Z.h.call(this)},Q.prototype.h=function(){Q.Z.h.call(this);const b=this.i;b.preventDefault?b.preventDefault():b.returnValue=!1};var pe="closure_listenable_"+(Math.random()*1e6|0),se=0;function ve(b,D,G,ie,Pe){this.listener=b,this.proxy=null,this.src=D,this.type=G,this.capture=!!ie,this.ha=Pe,this.key=++se,this.da=this.fa=!1}function me(b){b.da=!0,b.listener=null,b.proxy=null,b.src=null,b.ha=null}function Se(b,D,G){for(const ie in b)D.call(G,b[ie],ie,b)}function Ve(b,D){for(const G in b)D.call(void 0,b[G],G,b)}function ne(b){const D={};for(const G in b)D[G]=b[G];return D}const H="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function te(b,D){let G,ie;for(let Pe=1;Pe<arguments.length;Pe++){ie=arguments[Pe];for(G in ie)b[G]=ie[G];for(let Ue=0;Ue<H.length;Ue++)G=H[Ue],Object.prototype.hasOwnProperty.call(ie,G)&&(b[G]=ie[G])}}function Y(b){this.src=b,this.g={},this.h=0}Y.prototype.add=function(b,D,G,ie,Pe){const Ue=b.toString();b=this.g[Ue],b||(b=this.g[Ue]=[],this.h++);const ct=ge(b,D,ie,Pe);return ct>-1?(D=b[ct],G||(D.fa=!1)):(D=new ve(D,this.src,Ue,!!ie,Pe),D.fa=G,b.push(D)),D};function fe(b,D){const G=D.type;if(G in b.g){var ie=b.g[G],Pe=Array.prototype.indexOf.call(ie,D,void 0),Ue;(Ue=Pe>=0)&&Array.prototype.splice.call(ie,Pe,1),Ue&&(me(D),b.g[G].length==0&&(delete b.g[G],b.h--))}}function ge(b,D,G,ie){for(let Pe=0;Pe<b.length;++Pe){const Ue=b[Pe];if(!Ue.da&&Ue.listener==D&&Ue.capture==!!G&&Ue.ha==ie)return Pe}return-1}var xe="closure_lm_"+(Math.random()*1e6|0),we={};function Ie(b,D,G,ie,Pe){if(Array.isArray(D)){for(let Ue=0;Ue<D.length;Ue++)Ie(b,D[Ue],G,ie,Pe);return null}return G=Mt(G),b&&b[pe]?b.J(D,G,c(ie)?!!ie.capture:!1,Pe):Ge(b,D,G,!1,ie,Pe)}function Ge(b,D,G,ie,Pe,Ue){if(!D)throw Error("Invalid event type");const ct=c(Pe)?!!Pe.capture:!!Pe;let ln=ht(b);if(ln||(b[xe]=ln=new Y(b)),G=ln.add(D,G,ie,ct,Ue),G.proxy)return G;if(ie=Qe(),G.proxy=ie,ie.src=b,ie.listener=G,b.addEventListener)k||(Pe=ct),Pe===void 0&&(Pe=!1),b.addEventListener(D.toString(),ie,Pe);else if(b.attachEvent)b.attachEvent(vt(D.toString()),ie);else if(b.addListener&&b.removeListener)b.addListener(ie);else throw Error("addEventListener and attachEvent are unavailable.");return G}function Qe(){function b(G){return D.call(b.src,b.listener,G)}const D=ce;return b}function it(b,D,G,ie,Pe){if(Array.isArray(D))for(var Ue=0;Ue<D.length;Ue++)it(b,D[Ue],G,ie,Pe);else ie=c(ie)?!!ie.capture:!!ie,G=Mt(G),b&&b[pe]?(b=b.i,Ue=String(D).toString(),Ue in b.g&&(D=b.g[Ue],G=ge(D,G,ie,Pe),G>-1&&(me(D[G]),Array.prototype.splice.call(D,G,1),D.length==0&&(delete b.g[Ue],b.h--)))):b&&(b=ht(b))&&(D=b.g[D.toString()],b=-1,D&&(b=ge(D,G,ie,Pe)),(G=b>-1?D[b]:null)&&dt(G))}function dt(b){if(typeof b!="number"&&b&&!b.da){var D=b.src;if(D&&D[pe])fe(D.i,b);else{var G=b.type,ie=b.proxy;D.removeEventListener?D.removeEventListener(G,ie,b.capture):D.detachEvent?D.detachEvent(vt(G),ie):D.addListener&&D.removeListener&&D.removeListener(ie),(G=ht(D))?(fe(G,b),G.h==0&&(G.src=null,D[xe]=null)):me(b)}}}function vt(b){return b in we?we[b]:we[b]="on"+b}function ce(b,D){if(b.da)b=!0;else{D=new Q(D,this);const G=b.listener,ie=b.ha||b.src;b.fa&&dt(b),b=G.call(ie,D)}return b}function ht(b){return b=b[xe],b instanceof Y?b:null}var Bt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Mt(b){return typeof b=="function"?b:(b[Bt]||(b[Bt]=function(D){return b.handleEvent(D)}),b[Bt])}function Ke(){F.call(this),this.i=new Y(this),this.M=this,this.G=null}g(Ke,F),Ke.prototype[pe]=!0,Ke.prototype.removeEventListener=function(b,D,G,ie){it(this,b,D,G,ie)};function bt(b,D){var G,ie=b.G;if(ie)for(G=[];ie;ie=ie.G)G.push(ie);if(b=b.M,ie=D.type||D,typeof D=="string")D=new S(D,b);else if(D instanceof S)D.target=D.target||b;else{var Pe=D;D=new S(ie,b),te(D,Pe)}Pe=!0;let Ue,ct;if(G)for(ct=G.length-1;ct>=0;ct--)Ue=D.g=G[ct],Pe=ye(Ue,ie,!0,D)&&Pe;if(Ue=D.g=b,Pe=ye(Ue,ie,!0,D)&&Pe,Pe=ye(Ue,ie,!1,D)&&Pe,G)for(ct=0;ct<G.length;ct++)Ue=D.g=G[ct],Pe=ye(Ue,ie,!1,D)&&Pe}Ke.prototype.N=function(){if(Ke.Z.N.call(this),this.i){var b=this.i;for(const D in b.g){const G=b.g[D];for(let ie=0;ie<G.length;ie++)me(G[ie]);delete b.g[D],b.h--}}this.G=null},Ke.prototype.J=function(b,D,G,ie){return this.i.add(String(b),D,!1,G,ie)},Ke.prototype.K=function(b,D,G,ie){return this.i.add(String(b),D,!0,G,ie)};function ye(b,D,G,ie){if(D=b.i.g[String(D)],!D)return!0;D=D.concat();let Pe=!0;for(let Ue=0;Ue<D.length;++Ue){const ct=D[Ue];if(ct&&!ct.da&&ct.capture==G){const ln=ct.listener,mr=ct.ha||ct.src;ct.fa&&fe(b.i,ct),Pe=ln.call(mr,ie)!==!1&&Pe}}return Pe&&!ie.defaultPrevented}function He(b,D){if(typeof b!="function")if(b&&typeof b.handleEvent=="function")b=d(b.handleEvent,b);else throw Error("Invalid listener argument");return Number(D)>2147483647?-1:a.setTimeout(b,D||0)}function rt(b){b.g=He(()=>{b.g=null,b.i&&(b.i=!1,rt(b))},b.l);const D=b.h;b.h=null,b.m.apply(null,D)}class at extends F{constructor(D,G){super(),this.m=D,this.l=G,this.h=null,this.i=!1,this.g=null}j(D){this.h=arguments,this.g?this.i=!0:rt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _t(b){F.call(this),this.h=b,this.g={}}g(_t,F);var gt=[];function mt(b){Se(b.g,function(D,G){this.g.hasOwnProperty(G)&&dt(D)},b),b.g={}}_t.prototype.N=function(){_t.Z.N.call(this),mt(this)},_t.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yt=a.JSON.stringify,wt=a.JSON.parse,nn=class{stringify(b){return a.JSON.stringify(b,void 0)}parse(b){return a.JSON.parse(b,void 0)}};function St(){}function rr(){}var Rt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ot(){S.call(this,"d")}g(Ot,S);function rn(){S.call(this,"c")}g(rn,S);var dn={},qt=null;function Vn(){return qt=qt||new Ke}dn.Ia="serverreachability";function en(b){S.call(this,dn.Ia,b)}g(en,S);function tn(b){const D=Vn();bt(D,new en(D))}dn.STAT_EVENT="statevent";function Gn(b,D){S.call(this,dn.STAT_EVENT,b),this.stat=D}g(Gn,S);function jt(b){const D=Vn();bt(D,new Gn(D,b))}dn.Ja="timingevent";function Ft(b,D){S.call(this,dn.Ja,b),this.size=D}g(Ft,S);function vn(b,D){if(typeof b!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){b()},D)}function Vi(){this.g=!0}Vi.prototype.ua=function(){this.g=!1};function Si(b,D,G,ie,Pe,Ue){b.info(function(){if(b.g)if(Ue){var ct="",ln=Ue.split("&");for(let bn=0;bn<ln.length;bn++){var mr=ln[bn].split("=");if(mr.length>1){const $n=mr[0];mr=mr[1];const Pi=$n.split("_");ct=Pi.length>=2&&Pi[1]=="type"?ct+($n+"="+mr+"&"):ct+($n+"=redacted&")}}}else ct=null;else ct=Ue;return"XMLHTTP REQ ("+ie+") [attempt "+Pe+"]: "+D+`
`+G+`
`+ct})}function bo(b,D,G,ie,Pe,Ue,ct){b.info(function(){return"XMLHTTP RESP ("+ie+") [ attempt "+Pe+"]: "+D+`
`+G+`
`+Ue+" "+ct})}function gi(b,D,G,ie){b.info(function(){return"XMLHTTP TEXT ("+D+"): "+$o(b,G)+(ie?" "+ie:"")})}function Gt(b,D){b.info(function(){return"TIMEOUT: "+D})}Vi.prototype.info=function(){};function $o(b,D){if(!b.g)return D;if(!D)return null;try{const Ue=JSON.parse(D);if(Ue){for(b=0;b<Ue.length;b++)if(Array.isArray(Ue[b])){var G=Ue[b];if(!(G.length<2)){var ie=G[1];if(Array.isArray(ie)&&!(ie.length<1)){var Pe=ie[0];if(Pe!="noop"&&Pe!="stop"&&Pe!="close")for(let ct=1;ct<ie.length;ct++)ie[ct]=""}}}}return Yt(Ue)}catch{return D}}var _s={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ts={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ns;function er(){}g(er,St),er.prototype.g=function(){return new XMLHttpRequest},ns=new er;function fr(b){return encodeURIComponent(String(b))}function ni(b){var D=1;b=b.split(":");const G=[];for(;D>0&&b.length;)G.push(b.shift()),D--;return b.length&&G.push(b.join(":")),G}function Bi(b,D,G,ie){this.j=b,this.i=D,this.l=G,this.S=ie||1,this.V=new _t(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ii}function Ii(){this.i=null,this.g="",this.h=!1}var Hn={},ir={};function ri(b,D,G){b.M=1,b.A=ga(Fr(D)),b.u=G,b.R=!0,rs(b,null)}function rs(b,D){b.F=Date.now(),is(b),b.B=Fr(b.A);var G=b.B,ie=b.S;Array.isArray(ie)||(ie=[String(ie)]),xl(G.i,"t",ie),b.C=0,G=b.j.L,b.h=new Ii,b.g=Nt(b.j,G?D:null,!b.u),b.P>0&&(b.O=new at(d(b.Y,b,b.g),b.P)),D=b.V,G=b.g,ie=b.ba;var Pe="readystatechange";Array.isArray(Pe)||(Pe&&(gt[0]=Pe.toString()),Pe=gt);for(let Ue=0;Ue<Pe.length;Ue++){const ct=Ie(G,Pe[Ue],ie||D.handleEvent,!1,D.h||D);if(!ct)break;D.g[ct.key]=ct}D=b.J?ne(b.J):{},b.u?(b.v||(b.v="POST"),D["Content-Type"]="application/x-www-form-urlencoded",b.g.ea(b.B,b.v,b.u,D)):(b.v="GET",b.g.ea(b.B,b.v,null,D)),tn(),Si(b.i,b.v,b.B,b.l,b.S,b.u)}Bi.prototype.ba=function(b){b=b.target;const D=this.O;D&&As(b)==3?D.j():this.Y(b)},Bi.prototype.Y=function(b){try{if(b==this.g)e:{const ln=As(this.g),mr=this.g.ya(),bn=this.g.ca();if(!(ln<3)&&(ln!=3||this.g&&(this.h.h||this.g.la()||Kr(this.g)))){this.K||ln!=4||mr==7||(mr==8||bn<=0?tn(3):tn(2)),bs(this);var D=this.g.ca();this.X=D;var G=Us(this);if(this.o=D==200,bo(this.i,this.v,this.B,this.l,this.S,ln,D),this.o){if(this.U&&!this.L){t:{if(this.g){var ie,Pe=this.g;if((ie=Pe.g?Pe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(ie)){var Ue=ie;break t}}Ue=null}if(b=Ue)gi(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,js(this,b);else{this.o=!1,this.m=3,jt(12),xs(this),qi(this);break e}}if(this.R){b=!0;let $n;for(;!this.K&&this.C<G.length;)if($n=ro(this,G),$n==ir){ln==4&&(this.m=4,jt(14),b=!1),gi(this.i,this.l,null,"[Incomplete Response]");break}else if($n==Hn){this.m=4,jt(15),gi(this.i,this.l,G,"[Invalid Chunk]"),b=!1;break}else gi(this.i,this.l,$n,null),js(this,$n);if(ma(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ln!=4||G.length!=0||this.h.h||(this.m=1,jt(16),b=!1),this.o=this.o&&b,!b)gi(this.i,this.l,G,"[Invalid Chunked Response]"),xs(this),qi(this);else if(G.length>0&&!this.W){this.W=!0;var ct=this.j;ct.g==this&&ct.aa&&!ct.P&&(ct.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),Al(ct),ct.P=!0,jt(11))}}else gi(this.i,this.l,G,null),js(this,G);ln==4&&xs(this),this.o&&!this.K&&(ln==4?de(this.j,this):(this.o=!1,is(this)))}else xo(this.g),D==400&&G.indexOf("Unknown SID")>0?(this.m=3,jt(12)):(this.m=0,jt(13)),xs(this),qi(this)}}}catch{}finally{}};function Us(b){if(!ma(b))return b.g.la();const D=Kr(b.g);if(D==="")return"";let G="";const ie=D.length,Pe=As(b.g)==4;if(!b.h.i){if(typeof TextDecoder>"u")return xs(b),qi(b),"";b.h.i=new a.TextDecoder}for(let Ue=0;Ue<ie;Ue++)b.h.h=!0,G+=b.h.i.decode(D[Ue],{stream:!(Pe&&Ue==ie-1)});return D.length=0,b.h.g+=G,b.C=0,b.h.g}function ma(b){return b.g?b.v=="GET"&&b.M!=2&&b.j.Aa:!1}function ro(b,D){var G=b.C,ie=D.indexOf(`
`,G);return ie==-1?ir:(G=Number(D.substring(G,ie)),isNaN(G)?Hn:(ie+=1,ie+G>D.length?ir:(D=D.slice(ie,ie+G),b.C=ie+G,D)))}Bi.prototype.cancel=function(){this.K=!0,xs(this)};function is(b){b.T=Date.now()+b.H,Yo(b,b.H)}function Yo(b,D){if(b.D!=null)throw Error("WatchDog timer not null");b.D=vn(d(b.aa,b),D)}function bs(b){b.D&&(a.clearTimeout(b.D),b.D=null)}Bi.prototype.aa=function(){this.D=null;const b=Date.now();b-this.T>=0?(Gt(this.i,this.B),this.M!=2&&(tn(),jt(17)),xs(this),this.m=2,qi(this)):Yo(this,this.T-b)};function qi(b){b.j.I==0||b.K||de(b.j,b)}function xs(b){bs(b);var D=b.O;D&&typeof D.dispose=="function"&&D.dispose(),b.O=null,mt(b.V),b.g&&(D=b.g,b.g=null,D.abort(),D.dispose())}function js(b,D){try{var G=b.j;if(G.I!=0&&(G.g==b||io(G.h,b))){if(!b.L&&io(G.h,b)&&G.I==3){try{var ie=G.Ba.g.parse(D)}catch{ie=null}if(Array.isArray(ie)&&ie.length==3){var Pe=ie;if(Pe[0]==0){e:if(!G.v){if(G.g)if(G.g.F+3e3<b.F)z(G),Eo(G);else break e;ao(G),jt(18)}}else G.xa=Pe[1],0<G.xa-G.K&&Pe[2]<37500&&G.F&&G.A==0&&!G.C&&(G.C=vn(d(G.Va,G),6e3));Vs(G.h)<=1&&G.ta&&(G.ta=void 0)}else Ce(G,11)}else if((b.L||G.g==b)&&z(G),!M(D))for(Pe=G.Ba.g.parse(D),D=0;D<Pe.length;D++){let bn=Pe[D];const $n=bn[0];if(!($n<=G.K))if(G.K=$n,bn=bn[1],G.I==2)if(bn[0]=="c"){G.M=bn[1],G.ba=bn[2];const Pi=bn[3];Pi!=null&&(G.ka=Pi,G.j.info("VER="+G.ka));const Hi=bn[4];Hi!=null&&(G.za=Hi,G.j.info("SVER="+G.za));const sr=bn[5];sr!=null&&typeof sr=="number"&&sr>0&&(ie=1.5*sr,G.O=ie,G.j.info("backChannelRequestTimeoutMs_="+ie)),ie=G;const zi=b.g;if(zi){const lo=zi.g?zi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(lo){var Ue=ie.h;Ue.g||lo.indexOf("spdy")==-1&&lo.indexOf("quic")==-1&&lo.indexOf("h2")==-1||(Ue.j=Ue.l,Ue.g=new Set,Ue.h&&(Va(Ue,Ue.h),Ue.h=null))}if(ie.G){const xa=zi.g?zi.g.getResponseHeader("X-HTTP-Session-Id"):null;xa&&(ie.wa=xa,Rn(ie.J,ie.G,xa))}}G.I=3,G.l&&G.l.ra(),G.aa&&(G.T=Date.now()-b.F,G.j.info("Handshake RTT: "+G.T+"ms")),ie=G;var ct=b;if(ie.na=tt(ie,ie.L?ie.ba:null,ie.W),ct.L){_l(ie.h,ct);var ln=ct,mr=ie.O;mr&&(ln.H=mr),ln.D&&(bs(ln),is(ln)),ie.g=ct}else dc(ie);G.i.length>0&&qs(G)}else bn[0]!="stop"&&bn[0]!="close"||Ce(G,7);else G.I==3&&(bn[0]=="stop"||bn[0]=="close"?bn[0]=="stop"?Ce(G,7):ba(G):bn[0]!="noop"&&G.l&&G.l.qa(bn),G.A=0)}}tn(4)}catch{}}var Cr=class{constructor(b,D){this.g=b,this.map=D}};function vl(b){this.l=b||10,a.PerformanceNavigationTiming?(b=a.performance.getEntriesByType("navigation"),b=b.length>0&&(b[0].nextHopProtocol=="hq"||b[0].nextHopProtocol=="h2")):b=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=b?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ss(b){return b.h?!0:b.g?b.g.size>=b.j:!1}function Vs(b){return b.h?1:b.g?b.g.size:0}function io(b,D){return b.h?b.h==D:b.g?b.g.has(D):!1}function Va(b,D){b.g?b.g.add(D):b.h=D}function _l(b,D){b.h&&b.h==D?b.h=null:b.g&&b.g.has(D)&&b.g.delete(D)}vl.prototype.cancel=function(){if(this.i=bl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const b of this.g.values())b.cancel();this.g.clear()}};function bl(b){if(b.h!=null)return b.i.concat(b.h.G);if(b.g!=null&&b.g.size!==0){let D=b.i;for(const G of b.g.values())D=D.concat(G.G);return D}return w(b.i)}var sc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ws(b,D){if(b){b=b.split("&");for(let G=0;G<b.length;G++){const ie=b[G].indexOf("=");let Pe,Ue=null;ie>=0?(Pe=b[G].substring(0,ie),Ue=b[G].substring(ie+1)):Pe=b[G],D(Pe,Ue?decodeURIComponent(Ue.replace(/\+/g," ")):"")}}}function Ci(b){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let D;b instanceof Ci?(this.l=b.l,wn(this,b.j),this.o=b.o,this.g=b.g,Wo(this,b.u),this.h=b.h,Bs(this,wl(b.i)),this.m=b.m):b&&(D=String(b).match(sc))?(this.l=!1,wn(this,D[1]||"",!0),this.o=Wr(D[2]||""),this.g=Wr(D[3]||"",!0),Wo(this,D[4]),this.h=Wr(D[5]||"",!0),Bs(this,D[6]||"",!0),this.m=Wr(D[7]||"")):(this.l=!1,this.i=new Ko(null,this.l))}Ci.prototype.toString=function(){const b=[];var D=this.j;D&&b.push(wr(D,Ba,!0),":");var G=this.g;return(G||D=="file")&&(b.push("//"),(D=this.o)&&b.push(wr(D,Ba,!0),"@"),b.push(fr(G).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),G=this.u,G!=null&&b.push(":",String(G))),(G=this.h)&&(this.g&&G.charAt(0)!="/"&&b.push("/"),b.push(wr(G,G.charAt(0)=="/"?oc:su,!0))),(G=this.i.toString())&&b.push("?",G),(G=this.m)&&b.push("#",wr(G,ac)),b.join("")},Ci.prototype.resolve=function(b){const D=Fr(this);let G=!!b.j;G?wn(D,b.j):G=!!b.o,G?D.o=b.o:G=!!b.g,G?D.g=b.g:G=b.u!=null;var ie=b.h;if(G)Wo(D,b.u);else if(G=!!b.h){if(ie.charAt(0)!="/")if(this.g&&!this.h)ie="/"+ie;else{var Pe=D.h.lastIndexOf("/");Pe!=-1&&(ie=D.h.slice(0,Pe+1)+ie)}if(Pe=ie,Pe==".."||Pe==".")ie="";else if(Pe.indexOf("./")!=-1||Pe.indexOf("/.")!=-1){ie=Pe.lastIndexOf("/",0)==0,Pe=Pe.split("/");const Ue=[];for(let ct=0;ct<Pe.length;){const ln=Pe[ct++];ln=="."?ie&&ct==Pe.length&&Ue.push(""):ln==".."?((Ue.length>1||Ue.length==1&&Ue[0]!="")&&Ue.pop(),ie&&ct==Pe.length&&Ue.push("")):(Ue.push(ln),ie=!0)}ie=Ue.join("/")}else ie=Pe}return G?D.h=ie:G=b.i.toString()!=="",G?Bs(D,wl(b.i)):G=!!b.m,G&&(D.m=b.m),D};function Fr(b){return new Ci(b)}function wn(b,D,G){b.j=G?Wr(D,!0):D,b.j&&(b.j=b.j.replace(/:$/,""))}function Wo(b,D){if(D){if(D=Number(D),isNaN(D)||D<0)throw Error("Bad port number "+D);b.u=D}else b.u=null}function Bs(b,D,G){D instanceof Ko?(b.i=D,os(b.i,b.l)):(G||(D=wr(D,Gi)),b.i=new Ko(D,b.l))}function Rn(b,D,G){b.i.set(D,G)}function ga(b){return Rn(b,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),b}function Wr(b,D){return b?D?decodeURI(b.replace(/%25/g,"%2525")):decodeURIComponent(b):""}function wr(b,D,G){return typeof b=="string"?(b=encodeURI(b).replace(D,Ur),G&&(b=b.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b):null}function Ur(b){return b=b.charCodeAt(0),"%"+(b>>4&15).toString(16)+(b&15).toString(16)}var Ba=/[#\/\?@]/g,su=/[#\?:]/g,oc=/[#\?]/g,Gi=/[#\?@]/g,ac=/#/g;function Ko(b,D){this.h=this.g=null,this.i=b||null,this.j=!!D}function yi(b){b.g||(b.g=new Map,b.h=0,b.i&&ws(b.i,function(D,G){b.add(decodeURIComponent(D.replace(/\+/g," ")),G)}))}n=Ko.prototype,n.add=function(b,D){yi(this),this.i=null,b=Jo(this,b);let G=this.g.get(b);return G||this.g.set(b,G=[]),G.push(D),this.h+=1,this};function ya(b,D){yi(b),D=Jo(b,D),b.g.has(D)&&(b.i=null,b.h-=b.g.get(D).length,b.g.delete(D))}function lc(b,D){return yi(b),D=Jo(b,D),b.g.has(D)}n.forEach=function(b,D){yi(this),this.g.forEach(function(G,ie){G.forEach(function(Pe){b.call(D,Pe,ie,this)},this)},this)};function cc(b,D){yi(b);let G=[];if(typeof D=="string")lc(b,D)&&(G=G.concat(b.g.get(Jo(b,D))));else for(b=Array.from(b.g.values()),D=0;D<b.length;D++)G=G.concat(b[D]);return G}n.set=function(b,D){return yi(this),this.i=null,b=Jo(this,b),lc(this,b)&&(this.h-=this.g.get(b).length),this.g.set(b,[D]),this.h+=1,this},n.get=function(b,D){return b?(b=cc(this,b),b.length>0?String(b[0]):D):D};function xl(b,D,G){ya(b,D),G.length>0&&(b.i=null,b.g.set(Jo(b,D),w(G)),b.h+=G.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const b=[],D=Array.from(this.g.keys());for(let ie=0;ie<D.length;ie++){var G=D[ie];const Pe=fr(G);G=cc(this,G);for(let Ue=0;Ue<G.length;Ue++){let ct=Pe;G[Ue]!==""&&(ct+="="+fr(G[Ue])),b.push(ct)}}return this.i=b.join("&")};function wl(b){const D=new Ko;return D.i=b.i,b.g&&(D.g=new Map(b.g),D.h=b.h),D}function Jo(b,D){return D=String(D),b.j&&(D=D.toLowerCase()),D}function os(b,D){D&&!b.j&&(yi(b),b.i=null,b.g.forEach(function(G,ie){const Pe=ie.toLowerCase();ie!=Pe&&(ya(this,ie),xl(this,Pe,G))},b)),b.j=D}function so(b,D){const G=new Vi;if(a.Image){const ie=new Image;ie.onload=p(as,G,"TestLoadImage: loaded",!0,D,ie),ie.onerror=p(as,G,"TestLoadImage: error",!1,D,ie),ie.onabort=p(as,G,"TestLoadImage: abort",!1,D,ie),ie.ontimeout=p(as,G,"TestLoadImage: timeout",!1,D,ie),a.setTimeout(function(){ie.ontimeout&&ie.ontimeout()},1e4),ie.src=b}else D(!1)}function Qo(b,D){const G=new Vi,ie=new AbortController,Pe=setTimeout(()=>{ie.abort(),as(G,"TestPingServer: timeout",!1,D)},1e4);fetch(b,{signal:ie.signal}).then(Ue=>{clearTimeout(Pe),Ue.ok?as(G,"TestPingServer: ok",!0,D):as(G,"TestPingServer: server error",!1,D)}).catch(()=>{clearTimeout(Pe),as(G,"TestPingServer: error",!1,D)})}function as(b,D,G,ie,Pe){try{Pe&&(Pe.onload=null,Pe.onerror=null,Pe.onabort=null,Pe.ontimeout=null),ie(G)}catch{}}function va(){this.g=new nn}function Kt(b){this.i=b.Sb||null,this.h=b.ab||!1}g(Kt,St),Kt.prototype.g=function(){return new qa(this.i,this.h)};function qa(b,D){Ke.call(this),this.H=b,this.o=D,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(qa,Ke),n=qa.prototype,n.open=function(b,D){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=b,this.D=D,this.readyState=1,vi(this)},n.send=function(b){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const D={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};b&&(D.body=b),(this.H||a).fetch(new Request(this.D,D)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,_a(this)),this.readyState=0},n.Pa=function(b){if(this.g&&(this.l=b,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=b.headers,this.readyState=2,vi(this)),this.g&&(this.readyState=3,vi(this),this.g)))if(this.responseType==="arraybuffer")b.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in b){if(this.j=b.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;El(this)}else b.text().then(this.Oa.bind(this),this.ga.bind(this))};function El(b){b.j.read().then(b.Ma.bind(b)).catch(b.ga.bind(b))}n.Ma=function(b){if(this.g){if(this.o&&b.value)this.response.push(b.value);else if(!this.o){var D=b.value?b.value:new Uint8Array(0);(D=this.B.decode(D,{stream:!b.done}))&&(this.response=this.responseText+=D)}b.done?_a(this):vi(this),this.readyState==3&&El(this)}},n.Oa=function(b){this.g&&(this.response=this.responseText=b,_a(this))},n.Na=function(b){this.g&&(this.response=b,_a(this))},n.ga=function(){this.g&&_a(this)};function _a(b){b.readyState=4,b.l=null,b.j=null,b.B=null,vi(b)}n.setRequestHeader=function(b,D){this.A.append(b,D)},n.getResponseHeader=function(b){return this.h&&this.h.get(b.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const b=[],D=this.h.entries();for(var G=D.next();!G.done;)G=G.value,b.push(G[0]+": "+G[1]),G=D.next();return b.join(`\r
`)};function vi(b){b.onreadystatechange&&b.onreadystatechange.call(b)}Object.defineProperty(qa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(b){this.m=b?"include":"same-origin"}});function ii(b){let D="";return Se(b,function(G,ie){D+=ie,D+=":",D+=G,D+=`\r
`}),D}function Ga(b,D,G){e:{for(ie in G){var ie=!1;break e}ie=!0}ie||(G=ii(G),typeof b=="string"?G!=null&&fr(G):Rn(b,D,G))}function zn(b){Ke.call(this),this.headers=new Map,this.L=b||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(zn,Ke);var Es=/^https?$/i,Ha=["POST","PUT"];n=zn.prototype,n.Fa=function(b){this.H=b},n.ea=function(b,D,G,ie){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+b);D=D?D.toUpperCase():"GET",this.D=b,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ns.g(),this.g.onreadystatechange=_(d(this.Ca,this));try{this.B=!0,this.g.open(D,String(b),!0),this.B=!1}catch(Ue){oo(this,Ue);return}if(b=G||"",G=new Map(this.headers),ie)if(Object.getPrototypeOf(ie)===Object.prototype)for(var Pe in ie)G.set(Pe,ie[Pe]);else if(typeof ie.keys=="function"&&typeof ie.get=="function")for(const Ue of ie.keys())G.set(Ue,ie.get(Ue));else throw Error("Unknown input type for opt_headers: "+String(ie));ie=Array.from(G.keys()).find(Ue=>Ue.toLowerCase()=="content-type"),Pe=a.FormData&&b instanceof a.FormData,!(Array.prototype.indexOf.call(Ha,D,void 0)>=0)||ie||Pe||G.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ue,ct]of G)this.g.setRequestHeader(Ue,ct);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(b),this.v=!1}catch(Ue){oo(this,Ue)}};function oo(b,D){b.h=!1,b.g&&(b.j=!0,b.g.abort(),b.j=!1),b.l=D,b.o=5,uc(b),Xo(b)}function uc(b){b.A||(b.A=!0,bt(b,"complete"),bt(b,"error"))}n.abort=function(b){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=b||7,bt(this,"complete"),bt(this,"abort"),Xo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xo(this,!0)),zn.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ts(this):this.Xa())},n.Xa=function(){Ts(this)};function Ts(b){if(b.h&&typeof s<"u"){if(b.v&&As(b)==4)setTimeout(b.Ca.bind(b),0);else if(bt(b,"readystatechange"),As(b)==4){b.h=!1;try{const Ue=b.ca();e:switch(Ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var D=!0;break e;default:D=!1}var G;if(!(G=D)){var ie;if(ie=Ue===0){let ct=String(b.D).match(sc)[1]||null;!ct&&a.self&&a.self.location&&(ct=a.self.location.protocol.slice(0,-1)),ie=!Es.test(ct?ct.toLowerCase():"")}G=ie}if(G)bt(b,"complete"),bt(b,"success");else{b.o=6;try{var Pe=As(b)>2?b.g.statusText:""}catch{Pe=""}b.l=Pe+" ["+b.ca()+"]",uc(b)}}finally{Xo(b)}}}}function Xo(b,D){if(b.g){b.m&&(clearTimeout(b.m),b.m=null);const G=b.g;b.g=null,D||bt(b,"ready");try{G.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function As(b){return b.g?b.g.readyState:0}n.ca=function(){try{return As(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(b){if(this.g){var D=this.g.responseText;return b&&D.indexOf(b)==0&&(D=D.substring(b.length)),wt(D)}};function Kr(b){try{if(!b.g)return null;if("response"in b.g)return b.g.response;switch(b.F){case"":case"text":return b.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in b.g)return b.g.mozResponseArrayBuffer}return null}catch{return null}}function xo(b){const D={};b=(b.g&&As(b)>=2&&b.g.getAllResponseHeaders()||"").split(`\r
`);for(let ie=0;ie<b.length;ie++){if(M(b[ie]))continue;var G=ni(b[ie]);const Pe=G[0];if(G=G[1],typeof G!="string")continue;G=G.trim();const Ue=D[Pe]||[];D[Pe]=Ue,Ue.push(G)}Ve(D,function(ie){return ie.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ri(b,D,G){return G&&G.internalChannelParams&&G.internalChannelParams[b]||D}function wo(b){this.za=0,this.i=[],this.j=new Vi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ri("failFast",!1,b),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ri("baseRetryDelayMs",5e3,b),this.Za=Ri("retryDelaySeedMs",1e4,b),this.Ta=Ri("forwardChannelMaxRetries",2,b),this.va=Ri("forwardChannelRequestTimeoutMs",2e4,b),this.ma=b&&b.xmlHttpFactory||void 0,this.Ua=b&&b.Rb||void 0,this.Aa=b&&b.useFetchStreams||!1,this.O=void 0,this.L=b&&b.supportsCrossDomainXhr||!1,this.M="",this.h=new vl(b&&b.concurrentRequestLimit),this.Ba=new va,this.S=b&&b.fastHandshake||!1,this.R=b&&b.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=b&&b.Pb||!1,b&&b.ua&&this.j.ua(),b&&b.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&b&&b.detectBufferingProxy||!1,this.ia=void 0,b&&b.longPollingTimeout&&b.longPollingTimeout>0&&(this.ia=b.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=wo.prototype,n.ka=8,n.I=1,n.connect=function(b,D,G,ie){jt(0),this.W=b,this.H=D||{},G&&ie!==void 0&&(this.H.OSID=G,this.H.OAID=ie),this.F=this.X,this.J=tt(this,null,this.W),qs(this)};function ba(b){if(To(b),b.I==3){var D=b.V++,G=Fr(b.J);if(Rn(G,"SID",b.M),Rn(G,"RID",D),Rn(G,"TYPE","terminate"),Ns(b,G),D=new Bi(b,b.j,D),D.M=2,D.A=ga(Fr(G)),G=!1,a.navigator&&a.navigator.sendBeacon)try{G=a.navigator.sendBeacon(D.A.toString(),"")}catch{}!G&&a.Image&&(new Image().src=D.A,G=!0),G||(D.g=Nt(D.j,null),D.g.ea(D.A)),D.F=Date.now(),is(D)}Ye(b)}function Eo(b){b.g&&(Al(b),b.g.cancel(),b.g=null)}function To(b){Eo(b),b.v&&(a.clearTimeout(b.v),b.v=null),z(b),b.h.cancel(),b.m&&(typeof b.m=="number"&&a.clearTimeout(b.m),b.m=null)}function qs(b){if(!ss(b.h)&&!b.m){b.m=!0;var D=b.Ea;ae||C(),le||(ae(),le=!0),U.add(D,b),b.D=0}}function za(b,D){return Vs(b.h)>=b.h.j-(b.m?1:0)?!1:b.m?(b.i=D.G.concat(b.i),!0):b.I==1||b.I==2||b.D>=(b.Sa?0:b.Ta)?!1:(b.m=vn(d(b.Ea,b,D),be(b,b.D)),b.D++,!0)}n.Ea=function(b){if(this.m)if(this.m=null,this.I==1){if(!b){this.V=Math.floor(Math.random()*1e5),b=this.V++;const Pe=new Bi(this,this.j,b);let Ue=this.o;if(this.U&&(Ue?(Ue=ne(Ue),te(Ue,this.U)):Ue=this.U),this.u!==null||this.R||(Pe.J=Ue,Ue=null),this.S)e:{for(var D=0,G=0;G<this.i.length;G++){t:{var ie=this.i[G];if("__data__"in ie.map&&(ie=ie.map.__data__,typeof ie=="string")){ie=ie.length;break t}ie=void 0}if(ie===void 0)break;if(D+=ie,D>4096){D=G;break e}if(D===4096||G===this.i.length-1){D=G+1;break e}}D=1e3}else D=1e3;D=Ao(this,Pe,D),G=Fr(this.J),Rn(G,"RID",b),Rn(G,"CVER",22),this.G&&Rn(G,"X-HTTP-Session-Id",this.G),Ns(this,G),Ue&&(this.R?D="headers="+fr(ii(Ue))+"&"+D:this.u&&Ga(G,this.u,Ue)),Va(this.h,Pe),this.Ra&&Rn(G,"TYPE","init"),this.S?(Rn(G,"$req",D),Rn(G,"SID","null"),Pe.U=!0,ri(Pe,G,null)):ri(Pe,G,D),this.I=2}}else this.I==3&&(b?Tl(this,b):this.i.length==0||ss(this.h)||Tl(this))};function Tl(b,D){var G;D?G=D.l:G=b.V++;const ie=Fr(b.J);Rn(ie,"SID",b.M),Rn(ie,"RID",G),Rn(ie,"AID",b.K),Ns(b,ie),b.u&&b.o&&Ga(ie,b.u,b.o),G=new Bi(b,b.j,G,b.D+1),b.u===null&&(G.J=b.o),D&&(b.i=D.G.concat(b.i)),D=Ao(b,G,1e3),G.H=Math.round(b.va*.5)+Math.round(b.va*.5*Math.random()),Va(b.h,G),ri(G,ie,D)}function Ns(b,D){b.H&&Se(b.H,function(G,ie){Rn(D,ie,G)}),b.l&&Se({},function(G,ie){Rn(D,ie,G)})}function Ao(b,D,G){G=Math.min(b.i.length,G);const ie=b.l?d(b.l.Ka,b.l,b):null;e:{var Pe=b.i;let ln=-1;for(;;){const mr=["count="+G];ln==-1?G>0?(ln=Pe[0].g,mr.push("ofs="+ln)):ln=0:mr.push("ofs="+ln);let bn=!0;for(let $n=0;$n<G;$n++){var Ue=Pe[$n].g;const Pi=Pe[$n].map;if(Ue-=ln,Ue<0)ln=Math.max(0,Pe[$n].g-100),bn=!1;else try{Ue="req"+Ue+"_"||"";try{var ct=Pi instanceof Map?Pi:Object.entries(Pi);for(const[Hi,sr]of ct){let zi=sr;c(sr)&&(zi=Yt(sr)),mr.push(Ue+Hi+"="+encodeURIComponent(zi))}}catch(Hi){throw mr.push(Ue+"type="+encodeURIComponent("_badmap")),Hi}}catch{ie&&ie(Pi)}}if(bn){ct=mr.join("&");break e}}ct=void 0}return b=b.i.splice(0,G),D.G=b,ct}function dc(b){if(!b.g&&!b.v){b.Y=1;var D=b.Da;ae||C(),le||(ae(),le=!0),U.add(D,b),b.A=0}}function ao(b){return b.g||b.v||b.A>=3?!1:(b.Y++,b.v=vn(d(b.Da,b),be(b,b.A)),b.A++,!0)}n.Da=function(){if(this.v=null,I(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var b=4*this.T;this.j.info("BP detection timer enabled: "+b),this.B=vn(d(this.Wa,this),b)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,jt(10),Eo(this),I(this))};function Al(b){b.B!=null&&(a.clearTimeout(b.B),b.B=null)}function I(b){b.g=new Bi(b,b.j,"rpc",b.Y),b.u===null&&(b.g.J=b.o),b.g.P=0;var D=Fr(b.na);Rn(D,"RID","rpc"),Rn(D,"SID",b.M),Rn(D,"AID",b.K),Rn(D,"CI",b.F?"0":"1"),!b.F&&b.ia&&Rn(D,"TO",b.ia),Rn(D,"TYPE","xmlhttp"),Ns(b,D),b.u&&b.o&&Ga(D,b.u,b.o),b.O&&(b.g.H=b.O);var G=b.g;b=b.ba,G.M=1,G.A=ga(Fr(D)),G.u=null,G.R=!0,rs(G,b)}n.Va=function(){this.C!=null&&(this.C=null,Eo(this),ao(this),jt(19))};function z(b){b.C!=null&&(a.clearTimeout(b.C),b.C=null)}function de(b,D){var G=null;if(b.g==D){z(b),Al(b),b.g=null;var ie=2}else if(io(b.h,D))G=D.G,_l(b.h,D),ie=1;else return;if(b.I!=0){if(D.o)if(ie==1){G=D.u?D.u.length:0,D=Date.now()-D.F;var Pe=b.D;ie=Vn(),bt(ie,new Ft(ie,G)),qs(b)}else dc(b);else if(Pe=D.m,Pe==3||Pe==0&&D.X>0||!(ie==1&&za(b,D)||ie==2&&ao(b)))switch(G&&G.length>0&&(D=b.h,D.i=D.i.concat(G)),Pe){case 1:Ce(b,5);break;case 4:Ce(b,10);break;case 3:Ce(b,6);break;default:Ce(b,2)}}}function be(b,D){let G=b.Qa+Math.floor(Math.random()*b.Za);return b.isActive()||(G*=2),G*D}function Ce(b,D){if(b.j.info("Error code "+D),D==2){var G=d(b.bb,b),ie=b.Ua;const Pe=!ie;ie=new Ci(ie||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||wn(ie,"https"),ga(ie),Pe?so(ie.toString(),G):Qo(ie.toString(),G)}else jt(2);b.I=0,b.l&&b.l.pa(D),Ye(b),To(b)}n.bb=function(b){b?(this.j.info("Successfully pinged google.com"),jt(2)):(this.j.info("Failed to ping google.com"),jt(1))};function Ye(b){if(b.I=0,b.ja=[],b.l){const D=bl(b.h);(D.length!=0||b.i.length!=0)&&(P(b.ja,D),P(b.ja,b.i),b.h.i.length=0,w(b.i),b.i.length=0),b.l.oa()}}function tt(b,D,G){var ie=G instanceof Ci?Fr(G):new Ci(G);if(ie.g!="")D&&(ie.g=D+"."+ie.g),Wo(ie,ie.u);else{var Pe=a.location;ie=Pe.protocol,D=D?D+"."+Pe.hostname:Pe.hostname,Pe=+Pe.port;const Ue=new Ci(null);ie&&wn(Ue,ie),D&&(Ue.g=D),Pe&&Wo(Ue,Pe),G&&(Ue.h=G),ie=Ue}return G=b.G,D=b.wa,G&&D&&Rn(ie,G,D),Rn(ie,"VER",b.ka),Ns(b,ie),ie}function Nt(b,D,G){if(D&&!b.L)throw Error("Can't create secondary domain capable XhrIo object.");return D=b.Aa&&!b.ma?new zn(new Kt({ab:G})):new zn(b.ma),D.Fa(b.L),D}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Pt(){}n=Pt.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Qt(){}Qt.prototype.g=function(b,D){return new Ht(b,D)};function Ht(b,D){Ke.call(this),this.g=new wo(D),this.l=b,this.h=D&&D.messageUrlParams||null,b=D&&D.messageHeaders||null,D&&D.clientProtocolHeaderRequired&&(b?b["X-Client-Protocol"]="webchannel":b={"X-Client-Protocol":"webchannel"}),this.g.o=b,b=D&&D.initMessageHeaders||null,D&&D.messageContentType&&(b?b["X-WebChannel-Content-Type"]=D.messageContentType:b={"X-WebChannel-Content-Type":D.messageContentType}),D&&D.sa&&(b?b["X-WebChannel-Client-Profile"]=D.sa:b={"X-WebChannel-Client-Profile":D.sa}),this.g.U=b,(b=D&&D.Qb)&&!M(b)&&(this.g.u=b),this.A=D&&D.supportsCrossDomainXhr||!1,this.v=D&&D.sendRawJson||!1,(D=D&&D.httpSessionIdParam)&&!M(D)&&(this.g.G=D,b=this.h,b!==null&&D in b&&(b=this.h,D in b&&delete b[D])),this.j=new tr(this)}g(Ht,Ke),Ht.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){ba(this.g)},Ht.prototype.o=function(b){var D=this.g;if(typeof b=="string"){var G={};G.__data__=b,b=G}else this.v&&(G={},G.__data__=Yt(b),b=G);D.i.push(new Cr(D.Ya++,b)),D.I==3&&qs(D)},Ht.prototype.N=function(){this.g.l=null,delete this.j,ba(this.g),delete this.g,Ht.Z.N.call(this)};function En(b){Ot.call(this),b.__headers__&&(this.headers=b.__headers__,this.statusCode=b.__status__,delete b.__headers__,delete b.__status__);var D=b.__sm__;if(D){e:{for(const G in D){b=G;break e}b=void 0}(this.i=b)&&(b=this.i,D=D!==null&&b in D?D[b]:void 0),this.data=D}else this.data=b}g(En,Ot);function pr(){rn.call(this),this.status=1}g(pr,rn);function tr(b){this.g=b}g(tr,Pt),tr.prototype.ra=function(){bt(this.g,"a")},tr.prototype.qa=function(b){bt(this.g,new En(b))},tr.prototype.pa=function(b){bt(this.g,new pr)},tr.prototype.oa=function(){bt(this.g,"b")},Qt.prototype.createWebChannel=Qt.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,a3=function(){return new Qt},o3=function(){return Vn()},s3=dn,lb={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},_s.NO_ERROR=0,_s.TIMEOUT=8,_s.HTTP_ERROR=6,Dy=_s,ts.COMPLETE="complete",i3=ts,rr.EventType=Rt,Rt.OPEN="a",Rt.CLOSE="b",Rt.ERROR="c",Rt.MESSAGE="d",Ke.prototype.listen=Ke.prototype.J,jm=rr,zn.prototype.listenOnce=zn.prototype.K,zn.prototype.getLastError=zn.prototype.Ha,zn.prototype.getLastErrorCode=zn.prototype.ya,zn.prototype.getStatus=zn.prototype.ca,zn.prototype.getResponseJson=zn.prototype.La,zn.prototype.getResponseText=zn.prototype.la,zn.prototype.send=zn.prototype.ea,zn.prototype.setWithCredentials=zn.prototype.Fa,r3=zn}).apply(typeof fy<"u"?fy:typeof self<"u"?self:typeof window<"u"?window:{});const GA="@firebase/firestore",HA="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ms=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ms.UNAUTHENTICATED=new ms(null),ms.GOOGLE_CREDENTIALS=new ms("google-credentials-uid"),ms.FIRST_PARTY=new ms("first-party-uid"),ms.MOCK_USER=new ms("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cp="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nd=new Yg("@firebase/firestore");function Tf(){return nd.logLevel}function yV(n){nd.setLogLevel(n)}function st(n,...e){if(nd.logLevel<=In.DEBUG){const t=e.map($x);nd.debug(`Firestore (${Cp}): ${n}`,...t)}}function Ti(n,...e){if(nd.logLevel<=In.ERROR){const t=e.map($x);nd.error(`Firestore (${Cp}): ${n}`,...t)}}function nc(n,...e){if(nd.logLevel<=In.WARN){const t=e.map($x);nd.warn(`Firestore (${Cp}): ${n}`,...t)}}function $x(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,l3(n,r,t)}function l3(n,e,t){let r=`FIRESTORE (${Cp}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ti(r),new Error(r)}function Lt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||l3(e,i,r)}function vV(n,e){n||Et(57014,e)}function yt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class nt extends Ms{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _V{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ms.UNAUTHENTICATED)))}shutdown(){}}class bV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class xV{constructor(e){this.t=e,this.currentUser=ms.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Lt(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve();let s=new Os;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Os,e.enqueueRetryable((()=>i(this.currentUser)))};const a=()=>{const u=s;e.enqueueRetryable((async()=>{await u.promise,await i(this.currentUser)}))},c=u=>{st("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((u=>c(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(st("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Os)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(st("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Lt(typeof r.accessToken=="string",31837,{l:r}),new c3(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Lt(e===null||typeof e=="string",2055,{h:e}),new ms(e)}}class wV{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=ms.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class EV{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new wV(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(ms.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class zA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TV{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Lt(this.o===void 0,3512);const r=s=>{s.error!=null&&st("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,st("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const i=s=>{st("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):st("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new zA(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Lt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new zA(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AV(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=AV(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function hn(n,e){return n<e?-1:n>e?1:0}function cb(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),s=e.charAt(r);if(i!==s)return h2(i)===h2(s)?hn(i,s):h2(i)?1:-1}return hn(n.length,e.length)}const NV=55296,SV=57343;function h2(n){const e=n.charCodeAt(0);return e>=NV&&e<=SV}function tp(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}function u3(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A="__name__";class ql{constructor(e,t,r){t===void 0?t=0:t>e.length&&Et(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Et(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ql.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ql?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=ql.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return hn(e.length,t.length)}static compareSegments(e,t){const r=ql.isNumericId(e),i=ql.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?ql.extractNumericId(e).compare(ql.extractNumericId(t)):cb(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ju.fromString(e.substring(4,e.length-2))}}class Cn extends ql{construct(e,t,r){return new Cn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new nt(Be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new Cn(t)}static emptyPath(){return new Cn([])}}const IV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $r extends ql{construct(e,t,r){return new $r(e,t,r)}static isValidIdentifier(e){return IV.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$r.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$A}static keyField(){return new $r([$A])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new nt(Be.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new nt(Be.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new nt(Be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(a=!a,i++):c!=="."||a?(r+=c,i++):(s(),i++)}if(s(),a)throw new nt(Be.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $r(t)}static emptyPath(){return new $r([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.path=e}static fromPath(e){return new pt(Cn.fromString(e))}static fromName(e){return new pt(Cn.fromString(e).popFirst(5))}static empty(){return new pt(Cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Cn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Cn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pt(new Cn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(n,e,t){if(!t)throw new nt(Be.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function d3(n,e,t,r){if(e===!0&&r===!0)throw new nt(Be.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function YA(n){if(!pt.isDocumentKey(n))throw new nt(Be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function WA(n){if(pt.isDocumentKey(n))throw new nt(Be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function h3(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Xv(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Et(12329,{type:typeof n})}function Kn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new nt(Be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Xv(n);throw new nt(Be.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function f3(n,e){if(e<=0)throw new nt(Be.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(n,e){const t={typeString:n};return e&&(t.value=e),t}function t0(n,e){if(!h3(n))throw new nt(Be.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const a=n[r];if(i&&typeof a!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new nt(Be.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=-62135596800,JA=1e6;class nr{static now(){return nr.fromMillis(Date.now())}static fromDate(e){return nr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*JA);return new nr(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new nt(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new nt(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<KA)throw new nt(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new nt(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/JA}_compareTo(e){return this.seconds===e.seconds?hn(this.nanoseconds,e.nanoseconds):hn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(t0(e,nr._jsonSchema))return new nr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-KA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nr._jsonSchemaVersion="firestore/timestamp/1.0",nr._jsonSchema={type:Ui("string",nr._jsonSchemaVersion),seconds:Ui("number"),nanoseconds:Ui("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{static fromTimestamp(e){return new Vt(e)}static min(){return new Vt(new nr(0,0))}static max(){return new Vt(new nr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np=-1;class lv{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function ub(n){return n.fields.find((e=>e.kind===2))}function jd(n){return n.fields.filter((e=>e.kind!==2))}lv.UNKNOWN_ID=-1;class Ly{constructor(e,t){this.fieldPath=e,this.kind=t}}class wg{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new wg(0,pa.min())}}function p3(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Vt.fromTimestamp(r===1e9?new nr(t+1,0):new nr(t,r));return new pa(i,pt.empty(),e)}function m3(n){return new pa(n.readTime,n.key,np)}class pa{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new pa(Vt.min(),pt.empty(),np)}static max(){return new pa(Vt.max(),pt.empty(),np)}}function Kx(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=pt.comparator(n.documentKey,e.documentKey),t!==0?t:hn(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class y3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pd(n){if(n.code!==Be.FAILED_PRECONDITION||n.message!==g3)throw n;st("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Et(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Le(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Le?t:Le.resolve(t)}catch(t){return Le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Le.reject(t)}static resolve(e){return new Le(((t,r)=>{t(e)}))}static reject(e){return new Le(((t,r)=>{r(e)}))}static waitFor(e){return new Le(((t,r)=>{let i=0,s=0,a=!1;e.forEach((c=>{++i,c.next((()=>{++s,a&&s===i&&t()}),(u=>r(u)))})),a=!0,s===i&&t()}))}static or(e){let t=Le.resolve(!1);for(const r of e)t=t.next((i=>i?Le.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,s)=>{r.push(t.call(this,i,s))})),this.waitFor(r)}static mapArray(e,t){return new Le(((r,i)=>{const s=e.length,a=new Array(s);let c=0;for(let u=0;u<s;u++){const d=u;t(e[d]).next((p=>{a[d]=p,++c,c===s&&r(a)}),(p=>i(p)))}}))}static doWhile(e,t){return new Le(((r,i)=>{const s=()=>{e()===!0?t().next((()=>{s()}),i):r()};s()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="SimpleDb";class Zv{static open(e,t,r,i){try{return new Zv(t,e.transaction(i,r))}catch(s){throw new Xm(t,s)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Os,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Xm(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=Jx(r.target.error);this.S.reject(new Xm(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(st(la,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new RV(t)}}class Xl{static delete(e){return st(la,"Removing database:",e),qd(gx().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!sh())return!1;if(Xl.F())return!0;const e=ei(),t=Xl.M(e),r=0<t&&t<10,i=v3(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Xl.M(ei())===12.2&&Ti("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(st(la,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;t(a)},i.onblocked=()=>{r(new Xm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?r(new nt(Be.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new nt(Be.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new Xm(e,a))},i.onupgradeneeded=s=>{st(la,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.N.k(a,i.transaction,s.oldVersion,this.version).next((()=>{st(la,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const s=t==="readonly";let a=0;for(;;){++a;try{this.db=await this.L(e);const c=Zv.open(this.db,e,s?"readonly":"readwrite",r),u=i(c).next((d=>(c.C(),d))).catch((d=>(c.abort(d),Le.reject(d)))).toPromise();return u.catch((()=>{})),await c.D,u}catch(c){const u=c,d=u.name!=="FirebaseError"&&a<3;if(st(la,"Transaction failed with error:",u.message,"Retrying:",d),this.close(),!d)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}function v3(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class CV{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return qd(this.U.delete())}}class Xm extends nt{constructor(e,t){super(Be.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function md(n){return n.name==="IndexedDbTransactionError"}class RV{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(st(la,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(st(la,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),qd(r)}add(e){return st(la,"ADD",this.store.name,e,e),qd(this.store.add(e))}get(e){return qd(this.store.get(e)).next((t=>(t===void 0&&(t=null),st(la,"GET",this.store.name,e,t),t)))}delete(e){return st(la,"DELETE",this.store.name,e),qd(this.store.delete(e))}count(){return st(la,"COUNT",this.store.name),qd(this.store.count())}J(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new Le(((a,c)=>{s.onerror=u=>{c(u.target.error)},s.onsuccess=u=>{a(u.target.result)}}))}{const s=this.cursor(r),a=[];return this.H(s,((c,u)=>{a.push(u)})).next((()=>a))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new Le(((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}}))}Z(e,t){st(la,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,((s,a,c)=>c.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}te(e){const t=this.cursor({});return new Le(((r,i)=>{t.onerror=s=>{const a=Jx(s.target.error);i(a)},t.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next((c=>{c?a.continue():r()})):r()}}))}H(e,t){const r=[];return new Le(((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const c=a.target.result;if(!c)return void i();const u=new CV(c),d=t(c.primaryKey,c.value,u);if(d instanceof Le){const p=d.catch((g=>(u.done(),Le.reject(g))));r.push(p)}u.isDone?i():u.G===null?c.continue():c.continue(u.G)}})).next((()=>Le.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function qd(n){return new Le(((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=Jx(r.target.error);t(i)}}))}let QA=!1;function Jx(n){const e=Xl.M(ei());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new nt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return QA||(QA=!0,setTimeout((()=>{throw r}),0)),r}}return n}const Zm="IndexBackfiller";class PV{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){st(Zm,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();st(Zm,`Documents written: ${t}`)}catch(t){md(t)?st(Zm,"Ignoring IndexedDB error during index backfill: ",t):await pd(t)}await this.re(6e4)}))}}class kV{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let i=t,s=!0;return Le.doWhile((()=>s===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((a=>{if(a!==null&&!r.has(a))return st(Zm,`Processing collection: ${a}`),this.oe(e,a,i).next((c=>{i-=c,r.add(a)}));s=!1})))).next((()=>t-i))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next((s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next((()=>this._e(i,s))).next((c=>(st(Zm,`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c)))).next((()=>a.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((i,s)=>{const a=m3(s);Kx(a,r)>0&&(r=a)})),new pa(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}qo.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu=-1;function n0(n){return n==null}function Eg(n){return n===0&&1/n==-1/0}function _3(n){return typeof n=="number"&&Number.isInteger(n)&&!Eg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="";function to(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=XA(e)),e=DV(n.get(t),e);return XA(e)}function DV(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case cv:t+="";break;default:t+=s}}return t}function XA(n){return n+cv+""}function Kl(n){const e=n.length;if(Lt(e>=2,64408,{path:n}),e===2)return Lt(n.charAt(0)===cv&&n.charAt(1)==="",56145,{path:n}),Cn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const a=n.indexOf(cv,s);switch((a<0||a>t)&&Et(50515,{path:n}),n.charAt(a+1)){case"":const c=n.substring(s,a);let u;i.length===0?u=c:(i+=c,u=i,i=""),r.push(u);break;case"":i+=n.substring(s,a),i+="\0";break;case"":i+=n.substring(s,a+1);break;default:Et(61167,{path:n})}s=a+2}return new Cn(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd="remoteDocuments",r0="owner",mf="owner",Tg="mutationQueues",LV="userId",ll="mutations",ZA="batchId",Kd="userMutationsIndex",eN=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function My(n,e){return[n,to(e)]}function b3(n,e,t){return[n,to(e),t]}const MV={},rp="documentMutations",uv="remoteDocumentsV14",OV=["prefixPath","collectionGroup","readTime","documentId"],Oy="documentKeyIndex",FV=["prefixPath","collectionGroup","documentId"],x3="collectionGroupIndex",UV=["collectionGroup","readTime","prefixPath","documentId"],Ag="remoteDocumentGlobal",db="remoteDocumentGlobalKey",ip="targets",w3="queryTargetsIndex",jV=["canonicalId","targetId"],sp="targetDocuments",VV=["targetId","path"],Qx="documentTargetsIndex",BV=["path","targetId"],dv="targetGlobalKey",rh="targetGlobal",Ng="collectionParents",qV=["collectionId","parent"],op="clientMetadata",GV="clientId",e1="bundles",HV="bundleId",t1="namedQueries",zV="name",Xx="indexConfiguration",$V="indexId",hb="collectionGroupIndex",YV="collectionGroup",eg="indexState",WV=["indexId","uid"],E3="sequenceNumberIndex",KV=["uid","sequenceNumber"],tg="indexEntries",JV=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],T3="documentKeyIndex",QV=["indexId","uid","orderedDocumentKey"],n1="documentOverlays",XV=["userId","collectionPath","documentId"],fb="collectionPathOverlayIndex",ZV=["userId","collectionPath","largestBatchId"],A3="collectionGroupOverlayIndex",eB=["userId","collectionGroup","largestBatchId"],Zx="globals",tB="name",N3=[Tg,ll,rp,Vd,ip,r0,rh,sp,op,Ag,Ng,e1,t1],nB=[...N3,n1],S3=[Tg,ll,rp,uv,ip,r0,rh,sp,op,Ag,Ng,e1,t1,n1],I3=S3,ew=[...I3,Xx,eg,tg],rB=ew,C3=[...ew,Zx],iB=C3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb extends y3{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function es(n,e){const t=yt(n);return Xl.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function gd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function R3(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,t){this.comparator=e,this.root=t||Ds.EMPTY}insert(e,t){return new Ir(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ds.BLACK,null,null))}remove(e){return new Ir(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ds.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new py(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new py(this.root,e,this.comparator,!1)}getReverseIterator(){return new py(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new py(this.root,e,this.comparator,!0)}}class py{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ds{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Ds.RED,this.left=i??Ds.EMPTY,this.right=s??Ds.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Ds(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ds.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Ds.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ds.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ds.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Et(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Et(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Et(27949);return e+(this.isRed()?0:1)}}Ds.EMPTY=null,Ds.RED=!0,Ds.BLACK=!1;Ds.EMPTY=new class{constructor(){this.size=0}get key(){throw Et(57766)}get value(){throw Et(16141)}get color(){throw Et(16727)}get left(){throw Et(29726)}get right(){throw Et(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new Ds(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this.comparator=e,this.data=new Ir(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new nN(this.data.getIterator())}getIteratorFrom(e){return new nN(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof hr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new hr(this.comparator);return t.data=e,t}}class nN{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function gf(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e){this.fields=e,e.sort($r.comparator)}static empty(){return new Go([])}unionWith(e){let t=new hr($r.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Go(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return tp(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sB(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new P3("Invalid base64 string: "+s):s}})(e);return new fi(t)}static fromUint8Array(e){const t=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(e);return new fi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return hn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fi.EMPTY_BYTE_STRING=new fi("");const oB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gc(n){if(Lt(!!n,39018),typeof n=="string"){let e=0;const t=oB.exec(n);if(Lt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Hr(n.seconds),nanos:Hr(n.nanos)}}function Hr(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Hc(n){return typeof n=="string"?fi.fromBase64String(n):fi.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k3="server_timestamp",D3="__type__",L3="__previous_value__",M3="__local_write_time__";function r1(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[D3])==null?void 0:r.stringValue)===k3}function i1(n){const e=n.mapValue.fields[L3];return r1(e)?i1(e):e}function Sg(n){const e=Gc(n.mapValue.fields[M3].timestampValue);return new nr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aB{constructor(e,t,r,i,s,a,c,u,d,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=p}}const mb="(default)";class rd{constructor(e,t){this.projectId=e,this.database=t||mb}static empty(){return new rd("","")}get isDefaultDatabase(){return this.database===mb}isEqual(e){return e instanceof rd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw="__type__",O3="__max__",Hu={mapValue:{fields:{__type__:{stringValue:O3}}}},nw="__vector__",ap="value",Fy={nullValue:"NULL_VALUE"};function id(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?r1(n)?4:F3(n)?9007199254740991:s1(n)?10:11:Et(28295,{value:n})}function rc(n,e){if(n===e)return!0;const t=id(n);if(t!==id(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Sg(n).isEqual(Sg(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Gc(i.timestampValue),c=Gc(s.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return Hc(i.bytesValue).isEqual(Hc(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return Hr(i.geoPointValue.latitude)===Hr(s.geoPointValue.latitude)&&Hr(i.geoPointValue.longitude)===Hr(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return Hr(i.integerValue)===Hr(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Hr(i.doubleValue),c=Hr(s.doubleValue);return a===c?Eg(a)===Eg(c):isNaN(a)&&isNaN(c)}return!1})(n,e);case 9:return tp(n.arrayValue.values||[],e.arrayValue.values||[],rc);case 10:case 11:return(function(i,s){const a=i.mapValue.fields||{},c=s.mapValue.fields||{};if(tN(a)!==tN(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!rc(a[u],c[u])))return!1;return!0})(n,e);default:return Et(52216,{left:n})}}function Ig(n,e){return(n.values||[]).find((t=>rc(t,e)))!==void 0}function sd(n,e){if(n===e)return 0;const t=id(n),r=id(e);if(t!==r)return hn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return hn(n.booleanValue,e.booleanValue);case 2:return(function(s,a){const c=Hr(s.integerValue||s.doubleValue),u=Hr(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(n,e);case 3:return rN(n.timestampValue,e.timestampValue);case 4:return rN(Sg(n),Sg(e));case 5:return cb(n.stringValue,e.stringValue);case 6:return(function(s,a){const c=Hc(s),u=Hc(a);return c.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(s,a){const c=s.split("/"),u=a.split("/");for(let d=0;d<c.length&&d<u.length;d++){const p=hn(c[d],u[d]);if(p!==0)return p}return hn(c.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,a){const c=hn(Hr(s.latitude),Hr(a.latitude));return c!==0?c:hn(Hr(s.longitude),Hr(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return iN(n.arrayValue,e.arrayValue);case 10:return(function(s,a){var _,w,P,O;const c=s.fields||{},u=a.fields||{},d=(_=c[ap])==null?void 0:_.arrayValue,p=(w=u[ap])==null?void 0:w.arrayValue,g=hn(((P=d==null?void 0:d.values)==null?void 0:P.length)||0,((O=p==null?void 0:p.values)==null?void 0:O.length)||0);return g!==0?g:iN(d,p)})(n.mapValue,e.mapValue);case 11:return(function(s,a){if(s===Hu.mapValue&&a===Hu.mapValue)return 0;if(s===Hu.mapValue)return 1;if(a===Hu.mapValue)return-1;const c=s.fields||{},u=Object.keys(c),d=a.fields||{},p=Object.keys(d);u.sort(),p.sort();for(let g=0;g<u.length&&g<p.length;++g){const _=cb(u[g],p[g]);if(_!==0)return _;const w=sd(c[u[g]],d[p[g]]);if(w!==0)return w}return hn(u.length,p.length)})(n.mapValue,e.mapValue);default:throw Et(23264,{he:t})}}function rN(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return hn(n,e);const t=Gc(n),r=Gc(e),i=hn(t.seconds,r.seconds);return i!==0?i:hn(t.nanos,r.nanos)}function iN(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=sd(t[i],r[i]);if(s)return s}return hn(t.length,r.length)}function lp(n){return gb(n)}function gb(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Gc(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Hc(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return pt.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=gb(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${gb(t.fields[a])}`;return i+"}"})(n.mapValue):Et(61005,{value:n})}function Uy(n){switch(id(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=i1(n);return e?16+Uy(e):16;case 5:return 2*n.stringValue.length;case 6:return Hc(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,s)=>i+Uy(s)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return gd(r.fields,((s,a)=>{i+=s.length+Uy(a)})),i})(n.mapValue);default:throw Et(13486,{value:n})}}function ch(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function yb(n){return!!n&&"integerValue"in n}function Cg(n){return!!n&&"arrayValue"in n}function sN(n){return!!n&&"nullValue"in n}function oN(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function jy(n){return!!n&&"mapValue"in n}function s1(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[tw])==null?void 0:r.stringValue)===nw}function ng(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return gd(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=ng(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ng(n.arrayValue.values[t]);return e}return{...n}}function F3(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===O3}const U3={mapValue:{fields:{[tw]:{stringValue:nw},[ap]:{arrayValue:{}}}}};function lB(n){return"nullValue"in n?Fy:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ch(rd.empty(),pt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?s1(n)?U3:{mapValue:{}}:Et(35942,{value:n})}function cB(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ch(rd.empty(),pt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?U3:"mapValue"in n?s1(n)?{mapValue:{}}:Hu:Et(61959,{value:n})}function aN(n,e){const t=sd(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function lN(n,e){const t=sd(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e){this.value=e}static empty(){return new Ls({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!jy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ng(t)}setAll(e){let t=$r.emptyPath(),r={},i=[];e.forEach(((a,c)=>{if(!t.isImmediateParentOf(c)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=c.popLast()}a?r[c.lastSegment()]=ng(a):i.push(c.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());jy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return rc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];jy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){gd(t,((i,s)=>e[i]=s));for(const i of r)delete e[i]}clone(){return new Ls(ng(this.value))}}function j3(n){const e=[];return gd(n.fields,((t,r)=>{const i=new $r([t]);if(jy(r)){const s=j3(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)})),new Go(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e,t,r,i,s,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Mr(e,0,Vt.min(),Vt.min(),Vt.min(),Ls.empty(),0)}static newFoundDocument(e,t,r,i){return new Mr(e,1,t,Vt.min(),r,i,0)}static newNoDocument(e,t){return new Mr(e,2,t,Vt.min(),Vt.min(),Ls.empty(),0)}static newUnknownDocument(e,t){return new Mr(e,3,t,Vt.min(),Vt.min(),Ls.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Vt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ls.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ls.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Vt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Mr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,t){this.position=e,this.inclusive=t}}function cN(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],a=n.position[i];if(s.field.isKeyField()?r=pt.comparator(pt.fromName(a.referenceValue),t.key):r=sd(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function uN(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!rc(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e,t="asc"){this.field=e,this.dir=t}}function uB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{}class Dn extends V3{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new dB(e,t,r):t==="array-contains"?new pB(e,r):t==="in"?new $3(e,r):t==="not-in"?new mB(e,r):t==="array-contains-any"?new gB(e,r):new Dn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new hB(e,r):new fB(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(sd(t,this.value)):t!==null&&id(this.value)===id(t)&&this.matchesComparison(sd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Et(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class dr extends V3{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new dr(e,t)}matches(e){return cp(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function cp(n){return n.op==="and"}function vb(n){return n.op==="or"}function rw(n){return B3(n)&&cp(n)}function B3(n){for(const e of n.filters)if(e instanceof dr)return!1;return!0}function _b(n){if(n instanceof Dn)return n.field.canonicalString()+n.op.toString()+lp(n.value);if(rw(n))return n.filters.map((e=>_b(e))).join(",");{const e=n.filters.map((t=>_b(t))).join(",");return`${n.op}(${e})`}}function q3(n,e){return n instanceof Dn?(function(r,i){return i instanceof Dn&&r.op===i.op&&r.field.isEqual(i.field)&&rc(r.value,i.value)})(n,e):n instanceof dr?(function(r,i){return i instanceof dr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,a,c)=>s&&q3(a,i.filters[c])),!0):!1})(n,e):void Et(19439)}function G3(n,e){const t=n.filters.concat(e);return dr.create(t,n.op)}function H3(n){return n instanceof Dn?(function(t){return`${t.field.canonicalString()} ${t.op} ${lp(t.value)}`})(n):n instanceof dr?(function(t){return t.op.toString()+" {"+t.getFilters().map(H3).join(" ,")+"}"})(n):"Filter"}class dB extends Dn{constructor(e,t,r){super(e,t,r),this.key=pt.fromName(r.referenceValue)}matches(e){const t=pt.comparator(e.key,this.key);return this.matchesComparison(t)}}class hB extends Dn{constructor(e,t){super(e,"in",t),this.keys=z3("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class fB extends Dn{constructor(e,t){super(e,"not-in",t),this.keys=z3("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function z3(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>pt.fromName(r.referenceValue)))}class pB extends Dn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Cg(t)&&Ig(t.arrayValue,this.value)}}class $3 extends Dn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ig(this.value.arrayValue,t)}}class mB extends Dn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ig(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ig(this.value.arrayValue,t)}}class gB extends Dn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Cg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Ig(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yB{constructor(e,t=null,r=[],i=[],s=null,a=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=c,this.Te=null}}function bb(n,e=null,t=[],r=[],i=null,s=null,a=null){return new yB(n,e,t,r,i,s,a)}function uh(n){const e=yt(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>_b(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),n0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>lp(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>lp(r))).join(",")),e.Te=t}return e.Te}function i0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!uB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!q3(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!uN(n.startAt,e.startAt)&&uN(n.endAt,e.endAt)}function hv(n){return pt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function fv(n,e){return n.filters.filter((t=>t instanceof Dn&&t.field.isEqual(e)))}function dN(n,e,t){let r=Fy,i=!0;for(const s of fv(n,e)){let a=Fy,c=!0;switch(s.op){case"<":case"<=":a=lB(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,c=!1;break;case"!=":case"not-in":a=Fy}aN({value:r,inclusive:i},{value:a,inclusive:c})<0&&(r=a,i=c)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];aN({value:r,inclusive:i},{value:a,inclusive:t.inclusive})<0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}function hN(n,e,t){let r=Hu,i=!0;for(const s of fv(n,e)){let a=Hu,c=!0;switch(s.op){case">=":case">":a=cB(s.value),c=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,c=!1;break;case"!=":case"not-in":a=Hu}lN({value:r,inclusive:i},{value:a,inclusive:c})>0&&(r=a,i=c)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];lN({value:r,inclusive:i},{value:a,inclusive:t.inclusive})>0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,t=null,r=[],i=[],s=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Y3(n,e,t,r,i,s,a,c){return new Zc(n,e,t,r,i,s,a,c)}function Rp(n){return new Zc(n)}function fN(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function iw(n){return n.collectionGroup!==null}function Uf(n){const e=yt(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new hr($r.comparator);return a.filters.forEach((u=>{u.getFlattenedFilters().forEach((d=>{d.isInequality()&&(c=c.add(d.field))}))})),c})(e).forEach((s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Rg(s,r))})),t.has($r.keyField().canonicalString())||e.Ie.push(new Rg($r.keyField(),r))}return e.Ie}function yo(n){const e=yt(n);return e.Ee||(e.Ee=vB(e,Uf(n))),e.Ee}function vB(n,e){if(n.limitType==="F")return bb(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new Rg(i.field,s)}));const t=n.endAt?new od(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new od(n.startAt.position,n.startAt.inclusive):null;return bb(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function xb(n,e){const t=n.filters.concat([e]);return new Zc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function pv(n,e,t){return new Zc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function s0(n,e){return i0(yo(n),yo(e))&&n.limitType===e.limitType}function W3(n){return`${uh(yo(n))}|lt:${n.limitType}`}function Af(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>H3(i))).join(", ")}]`),n0(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>lp(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>lp(i))).join(",")),`Target(${r})`})(yo(n))}; limitType=${n.limitType})`}function o0(n,e){return e.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):pt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(const s of Uf(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(a,c,u){const d=cN(a,c,u);return a.inclusive?d<=0:d<0})(r.startAt,Uf(r),i)||r.endAt&&!(function(a,c,u){const d=cN(a,c,u);return a.inclusive?d>=0:d>0})(r.endAt,Uf(r),i))})(n,e)}function K3(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function J3(n){return(e,t)=>{let r=!1;for(const i of Uf(n)){const s=_B(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function _B(n,e,t){const r=n.field.isKeyField()?pt.comparator(e.key,t.key):(function(s,a,c){const u=a.data.field(s),d=c.data.field(s);return u!==null&&d!==null?sd(u,d):Et(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Et(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){gd(this.inner,((t,r)=>{for(const[i,s]of r)e(i,s)}))}isEmpty(){return R3(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bB=new Ir(pt.comparator);function Ho(){return bB}const Q3=new Ir(pt.comparator);function Vm(...n){let e=Q3;for(const t of n)e=e.insert(t.key,t);return e}function X3(n){let e=Q3;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Jl(){return rg()}function Z3(){return rg()}function rg(){return new eu((n=>n.toString()),((n,e)=>n.isEqual(e)))}const xB=new Ir(pt.comparator),wB=new hr(pt.comparator);function yn(...n){let e=wB;for(const t of n)e=e.add(t);return e}const EB=new hr(hn);function sw(){return EB}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eg(e)?"-0":e}}function eP(n){return{integerValue:""+n}}function tP(n,e){return _3(e)?eP(e):ow(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(){this._=void 0}}function TB(n,e,t){return n instanceof up?(function(i,s){const a={fields:{[D3]:{stringValue:k3},[M3]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&r1(s)&&(s=i1(s)),s&&(a.fields[L3]=s),{mapValue:a}})(t,e):n instanceof dh?rP(n,e):n instanceof hh?iP(n,e):(function(i,s){const a=nP(i,s),c=pN(a)+pN(i.Ae);return yb(a)&&yb(i.Ae)?eP(c):ow(i.serializer,c)})(n,e)}function AB(n,e,t){return n instanceof dh?rP(n,e):n instanceof hh?iP(n,e):t}function nP(n,e){return n instanceof dp?(function(r){return yb(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class up extends o1{}class dh extends o1{constructor(e){super(),this.elements=e}}function rP(n,e){const t=sP(e);for(const r of n.elements)t.some((i=>rc(i,r)))||t.push(r);return{arrayValue:{values:t}}}class hh extends o1{constructor(e){super(),this.elements=e}}function iP(n,e){let t=sP(e);for(const r of n.elements)t=t.filter((i=>!rc(i,r)));return{arrayValue:{values:t}}}class dp extends o1{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function pN(n){return Hr(n.integerValue||n.doubleValue)}function sP(n){return Cg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e,t){this.field=e,this.transform=t}}function NB(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof dh&&i instanceof dh||r instanceof hh&&i instanceof hh?tp(r.elements,i.elements,rc):r instanceof dp&&i instanceof dp?rc(r.Ae,i.Ae):r instanceof up&&i instanceof up})(n.transform,e.transform)}class SB{constructor(e,t){this.version=e,this.transformResults=t}}class Yr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Yr}static exists(e){return new Yr(void 0,e)}static updateTime(e){return new Yr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vy(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class a1{}function oP(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new kp(n.key,Yr.none()):new Pp(n.key,n.data,Yr.none());{const t=n.data,r=Ls.empty();let i=new hr($r.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new tu(n.key,r,new Go(i.toArray()),Yr.none())}}function IB(n,e,t){n instanceof Pp?(function(i,s,a){const c=i.value.clone(),u=gN(i.fieldTransforms,s,a.transformResults);c.setAll(u),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()})(n,e,t):n instanceof tu?(function(i,s,a){if(!Vy(i.precondition,s))return void s.convertToUnknownDocument(a.version);const c=gN(i.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(aP(i)),u.setAll(c),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(n,e,t):(function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function ig(n,e,t,r){return n instanceof Pp?(function(s,a,c,u){if(!Vy(s.precondition,a))return c;const d=s.value.clone(),p=yN(s.fieldTransforms,u,a);return d.setAll(p),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null})(n,e,t,r):n instanceof tu?(function(s,a,c,u){if(!Vy(s.precondition,a))return c;const d=yN(s.fieldTransforms,u,a),p=a.data;return p.setAll(aP(s)),p.setAll(d),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((g=>g.field)))})(n,e,t,r):(function(s,a,c){return Vy(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c})(n,e,t)}function CB(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=nP(r.transform,i||null);s!=null&&(t===null&&(t=Ls.empty()),t.set(r.field,s))}return t||null}function mN(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&tp(r,i,((s,a)=>NB(s,a)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Pp extends a1{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class tu extends a1{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function aP(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function gN(n,e,t){const r=new Map;Lt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const s=n[i],a=s.transform,c=e.data.field(s.field);r.set(s.field,AB(a,c,t[i]))}return r}function yN(n,e,t){const r=new Map;for(const i of n){const s=i.transform,a=t.data.field(i.field);r.set(i.field,TB(s,a,e))}return r}class kp extends a1{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class aw extends a1{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&IB(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ig(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ig(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Z3();return this.mutations.forEach((i=>{const s=e.get(i.key),a=s.overlayedDocument;let c=this.applyToLocalView(a,s.mutatedFields);c=t.has(i.key)?null:c;const u=oP(a,c);u!==null&&r.set(i.key,u),a.isValidDocument()||a.convertToNoDocument(Vt.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),yn())}isEqual(e){return this.batchId===e.batchId&&tp(this.mutations,e.mutations,((t,r)=>mN(t,r)))&&tp(this.baseMutations,e.baseMutations,((t,r)=>mN(t,r)))}}class cw{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Lt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return xB})();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new cw(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oi,jn;function lP(n){switch(n){case Be.OK:return Et(64938);case Be.CANCELLED:case Be.UNKNOWN:case Be.DEADLINE_EXCEEDED:case Be.RESOURCE_EXHAUSTED:case Be.INTERNAL:case Be.UNAVAILABLE:case Be.UNAUTHENTICATED:return!1;case Be.INVALID_ARGUMENT:case Be.NOT_FOUND:case Be.ALREADY_EXISTS:case Be.PERMISSION_DENIED:case Be.FAILED_PRECONDITION:case Be.ABORTED:case Be.OUT_OF_RANGE:case Be.UNIMPLEMENTED:case Be.DATA_LOSS:return!0;default:return Et(15467,{code:n})}}function cP(n){if(n===void 0)return Ti("GRPC error has no .code"),Be.UNKNOWN;switch(n){case Oi.OK:return Be.OK;case Oi.CANCELLED:return Be.CANCELLED;case Oi.UNKNOWN:return Be.UNKNOWN;case Oi.DEADLINE_EXCEEDED:return Be.DEADLINE_EXCEEDED;case Oi.RESOURCE_EXHAUSTED:return Be.RESOURCE_EXHAUSTED;case Oi.INTERNAL:return Be.INTERNAL;case Oi.UNAVAILABLE:return Be.UNAVAILABLE;case Oi.UNAUTHENTICATED:return Be.UNAUTHENTICATED;case Oi.INVALID_ARGUMENT:return Be.INVALID_ARGUMENT;case Oi.NOT_FOUND:return Be.NOT_FOUND;case Oi.ALREADY_EXISTS:return Be.ALREADY_EXISTS;case Oi.PERMISSION_DENIED:return Be.PERMISSION_DENIED;case Oi.FAILED_PRECONDITION:return Be.FAILED_PRECONDITION;case Oi.ABORTED:return Be.ABORTED;case Oi.OUT_OF_RANGE:return Be.OUT_OF_RANGE;case Oi.UNIMPLEMENTED:return Be.UNIMPLEMENTED;case Oi.DATA_LOSS:return Be.DATA_LOSS;default:return Et(39323,{code:n})}}(jn=Oi||(Oi={}))[jn.OK=0]="OK",jn[jn.CANCELLED=1]="CANCELLED",jn[jn.UNKNOWN=2]="UNKNOWN",jn[jn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jn[jn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jn[jn.NOT_FOUND=5]="NOT_FOUND",jn[jn.ALREADY_EXISTS=6]="ALREADY_EXISTS",jn[jn.PERMISSION_DENIED=7]="PERMISSION_DENIED",jn[jn.UNAUTHENTICATED=16]="UNAUTHENTICATED",jn[jn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jn[jn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jn[jn.ABORTED=10]="ABORTED",jn[jn.OUT_OF_RANGE=11]="OUT_OF_RANGE",jn[jn.UNIMPLEMENTED=12]="UNIMPLEMENTED",jn[jn.INTERNAL=13]="INTERNAL",jn[jn.UNAVAILABLE=14]="UNAVAILABLE",jn[jn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PB=new Ju([4294967295,4294967295],0);function vN(n){const e=uP().encode(n),t=new n3;return t.update(e),new Uint8Array(t.digest())}function _N(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ju([t,r],0),new Ju([i,s],0)]}class dw{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Bm(`Invalid padding: ${t}`);if(r<0)throw new Bm(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Bm(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Bm(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ju.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Ju.fromNumber(r)));return i.compare(PB)===1&&(i=new Ju([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=vN(e),[r,i]=_N(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);if(!this.we(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new dw(s,i,t);return r.forEach((c=>a.insert(c))),a}insert(e){if(this.ge===0)return;const t=vN(e),[r,i]=_N(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);this.Se(a)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Bm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,c0.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new l0(Vt.min(),i,new Ir(hn),Ho(),yn())}}class c0{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new c0(r,t,yn(),yn(),yn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class dP{constructor(e,t){this.targetId=e,this.Ce=t}}class hP{constructor(e,t,r=fi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class bN{constructor(){this.ve=0,this.Fe=xN(),this.Me=fi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=yn(),t=yn(),r=yn();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Et(38017,{changeType:s})}})),new c0(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=xN()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Lt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class kB{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ho(),this.Je=my(),this.He=my(),this.Ye=new Ir(hn)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Et(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const s=i.target;if(hv(s))if(r===0){const a=new pt(s.path);this.et(t,a,Mr.newNoDocument(a,Vt.min()))}else Lt(r===1,20013,{expectedCount:r});else{const a=this._t(t);if(a!==r){const c=this.ut(e),u=c?this.ct(c,e,a):1;if(u!==0){this.it(t);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,d)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let a,c;try{a=Hc(r).toUint8Array()}catch(u){if(u instanceof P3)return nc("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new dw(a,i,s)}catch(u){return nc(u instanceof Bm?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((s=>{const a=this.Ge.ht(),c=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.et(t,s,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((s,a)=>{const c=this.ot(a);if(c){if(s.current&&hv(c.target)){const u=new pt(c.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,Mr.newNoDocument(u,e))}s.Be&&(t.set(a,s.ke()),s.qe())}}));let r=yn();this.He.forEach(((s,a)=>{let c=!0;a.forEachWhile((u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(s))})),this.je.forEach(((s,a)=>a.setReadTime(e)));const i=new l0(e,t,this.Ye,this.je,r);return this.je=Ho(),this.Je=my(),this.He=my(),this.Ye=new Ir(hn),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new bN,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new hr(hn),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new hr(hn),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||st("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new bN),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function my(){return new Ir(pt.comparator)}function xN(){return new Ir(pt.comparator)}const DB={asc:"ASCENDING",desc:"DESCENDING"},LB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MB={and:"AND",or:"OR"};class OB{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function wb(n,e){return n.useProto3Json||n0(e)?e:{value:e}}function hp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fP(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function FB(n,e){return hp(n,e.toTimestamp())}function Ai(n){return Lt(!!n,49232),Vt.fromTimestamp((function(t){const r=Gc(t);return new nr(r.seconds,r.nanos)})(n))}function hw(n,e){return Eb(n,e).canonicalString()}function Eb(n,e){const t=(function(i){return new Cn(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function pP(n){const e=Cn.fromString(n);return Lt(TP(e),10190,{key:e.toString()}),e}function Pg(n,e){return hw(n.databaseId,e.path)}function Zl(n,e){const t=pP(e);if(t.get(1)!==n.databaseId.projectId)throw new nt(Be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new nt(Be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new pt(yP(t))}function mP(n,e){return hw(n.databaseId,e)}function gP(n){const e=pP(n);return e.length===4?Cn.emptyPath():yP(e)}function Tb(n){return new Cn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function yP(n){return Lt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function wN(n,e,t){return{name:Pg(n,e),fields:t.value.mapValue.fields}}function vP(n,e,t){const r=Zl(n,e.name),i=Ai(e.updateTime),s=e.createTime?Ai(e.createTime):Vt.min(),a=new Ls({mapValue:{fields:e.fields}}),c=Mr.newFoundDocument(r,i,s,a);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function UB(n,e){return"found"in e?(function(r,i){Lt(!!i.found,43571),i.found.name,i.found.updateTime;const s=Zl(r,i.found.name),a=Ai(i.found.updateTime),c=i.found.createTime?Ai(i.found.createTime):Vt.min(),u=new Ls({mapValue:{fields:i.found.fields}});return Mr.newFoundDocument(s,a,c,u)})(n,e):"missing"in e?(function(r,i){Lt(!!i.missing,3894),Lt(!!i.readTime,22933);const s=Zl(r,i.missing),a=Ai(i.readTime);return Mr.newNoDocument(s,a)})(n,e):Et(7234,{result:e})}function jB(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Et(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(d,p){return d.useProto3Json?(Lt(p===void 0||typeof p=="string",58123),fi.fromBase64String(p||"")):(Lt(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),fi.fromUint8Array(p||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&(function(d){const p=d.code===void 0?Be.UNKNOWN:cP(d.code);return new nt(p,d.message||"")})(a);t=new hP(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Zl(n,r.document.name),s=Ai(r.document.updateTime),a=r.document.createTime?Ai(r.document.createTime):Vt.min(),c=new Ls({mapValue:{fields:r.document.fields}}),u=Mr.newFoundDocument(i,s,a,c),d=r.targetIds||[],p=r.removedTargetIds||[];t=new By(d,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Zl(n,r.document),s=r.readTime?Ai(r.readTime):Vt.min(),a=Mr.newNoDocument(i,s),c=r.removedTargetIds||[];t=new By([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Zl(n,r.document),s=r.removedTargetIds||[];t=new By([],s,i,null)}else{if(!("filter"in e))return Et(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new RB(i,s),c=r.targetId;t=new dP(c,a)}}return t}function kg(n,e){let t;if(e instanceof Pp)t={update:wN(n,e.key,e.value)};else if(e instanceof kp)t={delete:Pg(n,e.key)};else if(e instanceof tu)t={update:wN(n,e.key,e.data),updateMask:zB(e.fieldMask)};else{if(!(e instanceof aw))return Et(16599,{Vt:e.type});t={verify:Pg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(s,a){const c=a.transform;if(c instanceof up)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof dh)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof hh)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof dp)return{fieldPath:a.field.canonicalString(),increment:c.Ae};throw Et(20930,{transform:a.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:FB(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Et(27497)})(n,e.precondition)),t}function Ab(n,e){const t=e.currentDocument?(function(s){return s.updateTime!==void 0?Yr.updateTime(Ai(s.updateTime)):s.exists!==void 0?Yr.exists(s.exists):Yr.none()})(e.currentDocument):Yr.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(a,c){let u=null;if("setToServerValue"in c)Lt(c.setToServerValue==="REQUEST_TIME",16630,{proto:c}),u=new up;else if("appendMissingElements"in c){const p=c.appendMissingElements.values||[];u=new dh(p)}else if("removeAllFromArray"in c){const p=c.removeAllFromArray.values||[];u=new hh(p)}else"increment"in c?u=new dp(a,c.increment):Et(16584,{proto:c});const d=$r.fromServerFormat(c.fieldPath);return new a0(d,u)})(n,i))):[];if(e.update){e.update.name;const i=Zl(n,e.update.name),s=new Ls({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=(function(u){const d=u.fieldPaths||[];return new Go(d.map((p=>$r.fromServerFormat(p))))})(e.updateMask);return new tu(i,s,a,t,r)}return new Pp(i,s,t,r)}if(e.delete){const i=Zl(n,e.delete);return new kp(i,t)}if(e.verify){const i=Zl(n,e.verify);return new aw(i,t)}return Et(1463,{proto:e})}function VB(n,e){return n&&n.length>0?(Lt(e!==void 0,14353),n.map((t=>(function(i,s){let a=i.updateTime?Ai(i.updateTime):Ai(s);return a.isEqual(Vt.min())&&(a=Ai(s)),new SB(a,i.transformResults||[])})(t,e)))):[]}function _P(n,e){return{documents:[mP(n,e.path)]}}function bP(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=mP(n,i);const s=(function(d){if(d.length!==0)return EP(dr.create(d,"and"))})(e.filters);s&&(t.structuredQuery.where=s);const a=(function(d){if(d.length!==0)return d.map((p=>(function(_){return{field:Nf(_.field),direction:qB(_.dir)}})(p)))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=wb(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:t,parent:i}}function xP(n){let e=gP(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Lt(r===1,65062);const p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];t.where&&(s=(function(g){const _=wP(g);return _ instanceof dr&&rw(_)?_.getFilters():[_]})(t.where));let a=[];t.orderBy&&(a=(function(g){return g.map((_=>(function(P){return new Rg(Sf(P.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(_)))})(t.orderBy));let c=null;t.limit&&(c=(function(g){let _;return _=typeof g=="object"?g.value:g,n0(_)?null:_})(t.limit));let u=null;t.startAt&&(u=(function(g){const _=!!g.before,w=g.values||[];return new od(w,_)})(t.startAt));let d=null;return t.endAt&&(d=(function(g){const _=!g.before,w=g.values||[];return new od(w,_)})(t.endAt)),Y3(e,i,a,s,c,"F",u,d)}function BB(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Et(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function wP(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Sf(t.unaryFilter.field);return Dn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Sf(t.unaryFilter.field);return Dn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Sf(t.unaryFilter.field);return Dn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Sf(t.unaryFilter.field);return Dn.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Et(61313);default:return Et(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Dn.create(Sf(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Et(58110);default:return Et(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return dr.create(t.compositeFilter.filters.map((r=>wP(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Et(1026)}})(t.compositeFilter.op))})(n):Et(30097,{filter:n})}function qB(n){return DB[n]}function GB(n){return LB[n]}function HB(n){return MB[n]}function Nf(n){return{fieldPath:n.canonicalString()}}function Sf(n){return $r.fromServerFormat(n.fieldPath)}function EP(n){return n instanceof Dn?(function(t){if(t.op==="=="){if(oN(t.value))return{unaryFilter:{field:Nf(t.field),op:"IS_NAN"}};if(sN(t.value))return{unaryFilter:{field:Nf(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(oN(t.value))return{unaryFilter:{field:Nf(t.field),op:"IS_NOT_NAN"}};if(sN(t.value))return{unaryFilter:{field:Nf(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nf(t.field),op:GB(t.op),value:t.value}}})(n):n instanceof dr?(function(t){const r=t.getFilters().map((i=>EP(i)));return r.length===1?r[0]:{compositeFilter:{op:HB(t.op),filters:r}}})(n):Et(54877,{filter:n})}function zB(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function TP(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,t,r,i,s=Vt.min(),a=Vt.min(),c=fi.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Mc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Mc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Mc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Mc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e){this.yt=e}}function $B(n,e){let t;if(e.document)t=vP(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=pt.fromSegments(e.noDocument.path),i=ph(e.noDocument.readTime);t=Mr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Et(56709);{const r=pt.fromSegments(e.unknownDocument.path),i=ph(e.unknownDocument.version);t=Mr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime((function(i){const s=new nr(i[0],i[1]);return Vt.fromTimestamp(s)})(e.readTime)),t}function EN(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:mv(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(s,a){return{name:Pg(s,a.key),fields:a.data.value.mapValue.fields,updateTime:hp(s,a.version.toTimestamp()),createTime:hp(s,a.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:fh(e.version)};else{if(!e.isUnknownDocument())return Et(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:fh(e.version)}}return r}function mv(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function fh(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ph(n){const e=new nr(n.seconds,n.nanoseconds);return Vt.fromTimestamp(e)}function Gd(n,e){const t=(e.baseMutations||[]).map((s=>Ab(n.yt,s)));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const c=e.mutations[s+1];a.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map((s=>Ab(n.yt,s))),i=nr.fromMillis(e.localWriteTimeMs);return new lw(e.batchId,i,t,r)}function qm(n){const e=ph(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?ph(n.lastLimboFreeSnapshotVersion):Vt.min();let r;return r=(function(s){return s.documents!==void 0})(n.query)?(function(s){const a=s.documents.length;return Lt(a===1,1966,{count:a}),yo(Rp(gP(s.documents[0])))})(n.query):(function(s){return yo(xP(s))})(n.query),new Mc(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,fi.fromBase64String(n.resumeToken))}function NP(n,e){const t=fh(e.snapshotVersion),r=fh(e.lastLimboFreeSnapshotVersion);let i;i=hv(e.target)?_P(n.yt,e.target):bP(n.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:uh(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function fw(n){const e=xP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?pv(e,e.limit,"L"):e}function f2(n,e){return new uw(e.largestBatchId,Ab(n.yt,e.overlayMutation))}function TN(n,e){const t=e.path.lastSegment();return[n,to(e.path.popLast()),t]}function AN(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:fh(r.readTime),documentKey:to(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YB{getBundleMetadata(e,t){return NN(e).get(t).next((r=>{if(r)return(function(s){return{id:s.bundleId,createTime:ph(s.createTime),version:s.version}})(r)}))}saveBundleMetadata(e,t){return NN(e).put((function(i){return{bundleId:i.id,createTime:fh(Ai(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return SN(e).get(t).next((r=>{if(r)return(function(s){return{name:s.name,query:fw(s.bundledQuery),readTime:ph(s.readTime)}})(r)}))}saveNamedQuery(e,t){return SN(e).put((function(i){return{name:i.name,readTime:fh(Ai(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function NN(n){return es(n,e1)}function SN(n){return es(n,t1)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new l1(e,r)}getOverlay(e,t){return Im(e).get(TN(this.userId,t)).next((r=>r?f2(this.serializer,r):null))}getOverlays(e,t){const r=Jl();return Le.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){const i=[];return r.forEach(((s,a)=>{const c=new uw(t,a);i.push(this.St(e,c))})),Le.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach((a=>i.add(to(a.getCollectionPath()))));const s=[];return i.forEach((a=>{const c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push(Im(e).Z(fb,c))})),Le.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Jl(),s=to(t),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Im(e).J(fb,a).next((c=>{for(const u of c){const d=f2(this.serializer,u);i.set(d.getKey(),d)}return i}))}getOverlaysForCollectionGroup(e,t,r,i){const s=Jl();let a;const c=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Im(e).ee({index:A3,range:c},((u,d,p)=>{const g=f2(this.serializer,d);s.size()<i||g.largestBatchId===a?(s.set(g.getKey(),g),a=g.largestBatchId):p.done()})).next((()=>s))}St(e,t){return Im(e).put((function(i,s,a){const[c,u,d]=TN(s,a.mutation.key);return{userId:s,collectionPath:u,documentId:d,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:kg(i.yt,a.mutation)}})(this.serializer,this.userId,t))}}function Im(n){return es(n,n1)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WB{bt(e){return es(e,Zx)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t==null?void 0:t.value;return r?fi.fromUint8Array(r):fi.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Hr(e.integerValue));else if("doubleValue"in e){const r=Hr(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Eg(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Gc(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Hc(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?F3(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):s1(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Et(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){var a,c;const r=e.fields||{};this.Ft(t,53);const i=ap,s=((c=(a=r[i].arrayValue)==null?void 0:a.values)==null?void 0:c.length)||0;this.Ft(t,15),t.Mt(Hr(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),pt.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Hd.Kt=new Hd;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf=255;function KB(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function IN(n){const e=64-(function(r){let i=0;for(let s=0;s<8;++s){const a=KB(255&r[s]);if(i+=a,a!==8)break}return i})(n);return Math.ceil(e/8)}class JB{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),r=IN(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),r=IN(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(yf),this.sn(255)}_n(){this.an(yf),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===yf?(this.sn(yf),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===yf?(this.an(yf),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class QB{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class XB{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Cm{constructor(){this.cn=new JB,this.ln=new QB(this.cn),this.hn=new XB(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,t,r,i){this.Tn=e,this.In=t,this.En=r,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new zd(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:qy(this.En),directionalValue:qy(this.dn),orderedDocumentKey:qy(t),documentKey:r.path.toArray()}}Vn(e,t,r){const i=this.Rn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function Mu(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=CN(n.En,e.En),t!==0?t:(t=CN(n.dn,e.dn),t!==0?t:pt.comparator(n.In,e.In)))}function CN(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function qy(n){return qR()?(function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r})(n):n}function RN(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(n)}class PN{constructor(e){this.mn=new hr(((t,r)=>$r.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(Lt(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=ub(e);if(t!==void 0&&!this.wn(t))return!1;const r=jd(e);let i=new Set,s=0,a=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const c=this.mn.getIterator().getNext();if(!i.has(c.field.canonicalString())){const u=r[s];if(!this.Sn(c,u)||!this.bn(this.fn[a++],u))return!1}++s}for(;s<r.length;++s){const c=r[s];if(a>=this.fn.length||!this.bn(this.fn[a++],c))return!1}return!0}Dn(){if(this.pn)return null;let e=new hr($r.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Ly(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Ly(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Ly(r.field,r.dir==="asc"?0:1)));return new lv(lv.UNKNOWN_ID,this.collectionId,t,wg.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(n){var t,r;if(Lt(n instanceof Dn||n instanceof dr,20012),n instanceof Dn){if(n instanceof $3){const i=((r=(t=n.value.arrayValue)==null?void 0:t.values)==null?void 0:r.map((s=>Dn.create(n.field,"==",s))))||[];return dr.create(i,"or")}return n}const e=n.filters.map((i=>SP(i)));return dr.create(e,n.op)}function ZB(n){if(n.getFilters().length===0)return[];const e=Ib(SP(n));return Lt(IP(e),7391),Nb(e)||Sb(e)?[e]:e.getFilters()}function Nb(n){return n instanceof Dn}function Sb(n){return n instanceof dr&&rw(n)}function IP(n){return Nb(n)||Sb(n)||(function(t){if(t instanceof dr&&vb(t)){for(const r of t.getFilters())if(!Nb(r)&&!Sb(r))return!1;return!0}return!1})(n)}function Ib(n){if(Lt(n instanceof Dn||n instanceof dr,34018),n instanceof Dn)return n;if(n.filters.length===1)return Ib(n.filters[0]);const e=n.filters.map((r=>Ib(r)));let t=dr.create(e,n.op);return t=gv(t),IP(t)?t:(Lt(t instanceof dr,64498),Lt(cp(t),40251),Lt(t.filters.length>1,57927),t.filters.reduce(((r,i)=>pw(r,i))))}function pw(n,e){let t;return Lt(n instanceof Dn||n instanceof dr,38388),Lt(e instanceof Dn||e instanceof dr,25473),t=n instanceof Dn?e instanceof Dn?(function(i,s){return dr.create([i,s],"and")})(n,e):kN(n,e):e instanceof Dn?kN(e,n):(function(i,s){if(Lt(i.filters.length>0&&s.filters.length>0,48005),cp(i)&&cp(s))return G3(i,s.getFilters());const a=vb(i)?i:s,c=vb(i)?s:i,u=a.filters.map((d=>pw(d,c)));return dr.create(u,"or")})(n,e),gv(t)}function kN(n,e){if(cp(e))return G3(e,n.getFilters());{const t=e.filters.map((r=>pw(n,r)));return dr.create(t,"or")}}function gv(n){if(Lt(n instanceof Dn||n instanceof dr,11850),n instanceof Dn)return n;const e=n.getFilters();if(e.length===1)return gv(e[0]);if(B3(n))return n;const t=e.map((i=>gv(i))),r=[];return t.forEach((i=>{i instanceof Dn?r.push(i):i instanceof dr&&(i.op===n.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:dr.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9{constructor(){this.Cn=new mw}addToCollectionParentIndex(e,t){return this.Cn.add(t),Le.resolve()}getCollectionParents(e,t){return Le.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Le.resolve()}deleteFieldIndex(e,t){return Le.resolve()}deleteAllFieldIndexes(e){return Le.resolve()}createTargetIndexes(e,t){return Le.resolve()}getDocumentsMatchingTarget(e,t){return Le.resolve(null)}getIndexType(e,t){return Le.resolve(0)}getFieldIndexes(e,t){return Le.resolve([])}getNextCollectionGroupToUpdate(e){return Le.resolve(null)}getMinOffset(e,t){return Le.resolve(pa.min())}getMinOffsetFromCollectionGroup(e,t){return Le.resolve(pa.min())}updateCollectionGroup(e,t,r){return Le.resolve()}updateIndexEntries(e,t){return Le.resolve()}}class mw{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new hr(Cn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new hr(Cn.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN="IndexedDbIndexManager",gy=new Uint8Array(0);class t9{constructor(e,t){this.databaseId=t,this.vn=new mw,this.Fn=new eu((r=>uh(r)),((r,i)=>i0(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const s={collectionId:r,parent:to(i)};return LN(e).put(s)}return Le.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[u3(t),""],!1,!0);return LN(e).J(i).next((s=>{for(const a of s){if(a.collectionId!==t)break;r.push(Kl(a.parent))}return r}))}addFieldIndex(e,t){const r=Rm(e),i=(function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map((u=>[u.fieldPath.canonicalString(),u.kind]))}})(t);delete i.indexId;const s=r.add(i);if(t.indexState){const a=_f(e);return s.next((c=>{a.put(AN(c,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return s.next()}deleteFieldIndex(e,t){const r=Rm(e),i=_f(e),s=vf(e);return r.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Rm(e),r=vf(e),i=_f(e);return t.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,t){return Le.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const s=new PN(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))))}getDocumentsMatchingTarget(e,t){const r=vf(e);let i=!0;const s=new Map;return Le.forEach(this.Mn(t),(a=>this.xn(e,a).next((c=>{i&&(i=!!c),s.set(a,c)})))).next((()=>{if(i){let a=yn();const c=[];return Le.forEach(s,((u,d)=>{st(DN,`Using index ${(function(W){return`id=${W.indexId}|cg=${W.collectionGroup}|f=${W.fields.map((J=>`${J.fieldPath}:${J.kind}`)).join(",")}`})(u)} to execute ${uh(t)}`);const p=(function(W,J){const ae=ub(J);if(ae===void 0)return null;for(const le of fv(W,ae.fieldPath))switch(le.op){case"array-contains-any":return le.value.arrayValue.values||[];case"array-contains":return[le.value]}return null})(d,u),g=(function(W,J){const ae=new Map;for(const le of jd(J))for(const U of fv(W,le.fieldPath))switch(U.op){case"==":case"in":ae.set(le.fieldPath.canonicalString(),U.value);break;case"not-in":case"!=":return ae.set(le.fieldPath.canonicalString(),U.value),Array.from(ae.values())}return null})(d,u),_=(function(W,J){const ae=[];let le=!0;for(const U of jd(J)){const C=U.kind===0?dN(W,U.fieldPath,W.startAt):hN(W,U.fieldPath,W.startAt);ae.push(C.value),le&&(le=C.inclusive)}return new od(ae,le)})(d,u),w=(function(W,J){const ae=[];let le=!0;for(const U of jd(J)){const C=U.kind===0?hN(W,U.fieldPath,W.endAt):dN(W,U.fieldPath,W.endAt);ae.push(C.value),le&&(le=C.inclusive)}return new od(ae,le)})(d,u),P=this.On(u,d,_),O=this.On(u,d,w),L=this.Nn(u,d,g),B=this.Bn(u.indexId,p,P,_.inclusive,O,w.inclusive,L);return Le.forEach(B,(K=>r.Y(K,t.limit).next((W=>{W.forEach((J=>{const ae=pt.fromSegments(J.documentKey);a.has(ae)||(a=a.add(ae),c.push(ae))}))}))))})).next((()=>c))}return Le.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=ZB(dr.create(e.filters,"and")).map((r=>bb(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,i,s,a,c){const u=(t!=null?t.length:1)*Math.max(r.length,s.length),d=u/(t!=null?t.length:1),p=[];for(let g=0;g<u;++g){const _=t?this.Ln(t[g/d]):gy,w=this.kn(e,_,r[g%d],i),P=this.qn(e,_,s[g%d],a),O=c.map((L=>this.kn(e,_,L,!0)));p.push(...this.createRange(w,P,O))}return p}kn(e,t,r,i){const s=new zd(e,pt.empty(),t,r);return i?s:s.An()}qn(e,t,r,i){const s=new zd(e,pt.empty(),t,r);return i?s.An():s}xn(e,t){const r=new PN(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((s=>{let a=null;for(const c of s)r.yn(c)&&(!a||c.fields.length>a.fields.length)&&(a=c);return a}))}getIndexType(e,t){let r=2;const i=this.Mn(t);return Le.forEach(i,(s=>this.xn(e,s).next((a=>{a?r!==0&&a.fields.length<(function(u){let d=new hr($r.comparator),p=!1;for(const g of u.filters)for(const _ of g.getFlattenedFilters())_.field.isKeyField()||(_.op==="array-contains"||_.op==="array-contains-any"?p=!0:d=d.add(_.field));for(const g of u.orderBy)g.field.isKeyField()||(d=d.add(g.field));return d.size+(p?1:0)})(s)&&(r=1):r=0})))).next((()=>(function(a){return a.limit!==null})(t)&&i.length>1&&r===2?1:r))}Qn(e,t){const r=new Cm;for(const i of jd(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const a=r.Pn(i.kind);Hd.Kt.Dt(s,a)}return r.un()}Ln(e){const t=new Cm;return Hd.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new Cm;return Hd.Kt.Dt(ch(this.databaseId,t),r.Pn((function(s){const a=jd(s);return a.length===0?0:a[a.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let i=[];i.push(new Cm);let s=0;for(const a of jd(e)){const c=r[s++];for(const u of i)if(this.Un(t,a.fieldPath)&&Cg(c))i=this.Kn(i,a,c);else{const d=u.Pn(a.kind);Hd.Kt.Dt(c,d)}}return this.Wn(i)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const i=[...e],s=[];for(const a of r.arrayValue.values||[])for(const c of i){const u=new Cm;u.seed(c.un()),Hd.Kt.Dt(a,u.Pn(t.kind)),s.push(u)}return s}Un(e,t){return!!e.filters.find((r=>r instanceof Dn&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Rm(e),i=_f(e);return(t?r.J(hb,IDBKeyRange.bound(t,t)):r.J()).next((s=>{const a=[];return Le.forEach(s,(c=>i.get([c.indexId,this.uid]).next((u=>{a.push((function(p,g){const _=g?new wg(g.sequenceNumber,new pa(ph(g.readTime),new pt(Kl(g.documentKey)),g.largestBatchId)):wg.empty(),w=p.fields.map((([P,O])=>new Ly($r.fromServerFormat(P),O)));return new lv(p.indexId,p.collectionGroup,w,_)})(c,u))})))).next((()=>a))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:hn(r.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const i=Rm(e),s=_f(e);return this.Gn(e).next((a=>i.J(hb,IDBKeyRange.bound(t,t)).next((c=>Le.forEach(c,(u=>s.put(AN(u.indexId,this.uid,a,r))))))))}updateIndexEntries(e,t){const r=new Map;return Le.forEach(t,((i,s)=>{const a=r.get(i.collectionGroup);return(a?Le.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next((c=>(r.set(i.collectionGroup,c),Le.forEach(c,(u=>this.zn(e,i,u).next((d=>{const p=this.jn(s,u);return d.isEqual(p)?Le.resolve():this.Jn(e,s,u,d,p)})))))))}))}Hn(e,t,r,i){return vf(e).put(i.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,i){return vf(e).delete(i.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const i=vf(e);let s=new hr(Mu);return i.ee({index:T3,range:IDBKeyRange.only([r.indexId,this.uid,qy(this.$n(r,t))])},((a,c)=>{s=s.add(new zd(r.indexId,t,RN(c.arrayValue),RN(c.directionalValue)))})).next((()=>s))}jn(e,t){let r=new hr(Mu);const i=this.Qn(t,e);if(i==null)return r;const s=ub(t);if(s!=null){const a=e.data.field(s.fieldPath);if(Cg(a))for(const c of a.arrayValue.values||[])r=r.add(new zd(t.indexId,e.key,this.Ln(c),i))}else r=r.add(new zd(t.indexId,e.key,gy,i));return r}Jn(e,t,r,i,s){st(DN,"Updating index entries for document '%s'",t.key);const a=[];return(function(u,d,p,g,_){const w=u.getIterator(),P=d.getIterator();let O=gf(w),L=gf(P);for(;O||L;){let B=!1,K=!1;if(O&&L){const W=p(O,L);W<0?K=!0:W>0&&(B=!0)}else O!=null?K=!0:B=!0;B?(g(L),L=gf(P)):K?(_(O),O=gf(w)):(O=gf(w),L=gf(P))}})(i,s,Mu,(c=>{a.push(this.Hn(e,t,r,c))}),(c=>{a.push(this.Yn(e,t,r,c))})),Le.waitFor(a)}Gn(e){let t=1;return _f(e).ee({index:E3,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,s)=>{s.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((a,c)=>Mu(a,c))).filter(((a,c,u)=>!c||Mu(a,u[c-1])!==0));const i=[];i.push(e);for(const a of r){const c=Mu(a,e),u=Mu(a,t);if(c===0)i[0]=e.An();else if(c>0&&u<0)i.push(a),i.push(a.An());else if(u>0)break}i.push(t);const s=[];for(let a=0;a<i.length;a+=2){if(this.Zn(i[a],i[a+1]))return[];const c=i[a].Vn(this.uid,gy,pt.empty()),u=i[a+1].Vn(this.uid,gy,pt.empty());s.push(IDBKeyRange.bound(c,u))}return s}Zn(e,t){return Mu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(MN)}getMinOffset(e,t){return Le.mapArray(this.Mn(t),(r=>this.xn(e,r).next((i=>i||Et(44426))))).next(MN)}}function LN(n){return es(n,Ng)}function vf(n){return es(n,tg)}function Rm(n){return es(n,Xx)}function _f(n){return es(n,eg)}function MN(n){Lt(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Kx(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new pa(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},CP=41943040;class Xs{static withCacheSize(e){return new Xs(e,Xs.DEFAULT_COLLECTION_PERCENTILE,Xs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RP(n,e,t){const r=n.store(ll),i=n.store(rp),s=[],a=IDBKeyRange.only(t.batchId);let c=0;const u=r.ee({range:a},((p,g,_)=>(c++,_.delete())));s.push(u.next((()=>{Lt(c===1,47070,{batchId:t.batchId})})));const d=[];for(const p of t.mutations){const g=b3(e,p.key.path,t.batchId);s.push(i.delete(g)),d.push(p.key)}return Le.waitFor(s).next((()=>d))}function yv(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Et(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xs.DEFAULT_COLLECTION_PERCENTILE=10,Xs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xs.DEFAULT=new Xs(CP,Xs.DEFAULT_COLLECTION_PERCENTILE,Xs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xs.DISABLED=new Xs(-1,0,0);class c1{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,t,r,i){Lt(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new c1(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ou(e).ee({index:Kd,range:r},((i,s,a)=>{t=!1,a.done()})).next((()=>t))}addMutationBatch(e,t,r,i){const s=If(e),a=Ou(e);return a.add({}).next((c=>{Lt(typeof c=="number",49019);const u=new lw(c,t,r,i),d=(function(w,P,O){const L=O.baseMutations.map((K=>kg(w.yt,K))),B=O.mutations.map((K=>kg(w.yt,K)));return{userId:P,batchId:O.batchId,localWriteTimeMs:O.localWriteTime.toMillis(),baseMutations:L,mutations:B}})(this.serializer,this.userId,u),p=[];let g=new hr(((_,w)=>hn(_.canonicalString(),w.canonicalString())));for(const _ of i){const w=b3(this.userId,_.key.path,c);g=g.add(_.key.path.popLast()),p.push(a.put(d)),p.push(s.put(w,MV))}return g.forEach((_=>{p.push(this.indexManager.addToCollectionParentIndex(e,_))})),e.addOnCommittedListener((()=>{this.Xn[c]=u.keys()})),Le.waitFor(p).next((()=>u))}))}lookupMutationBatch(e,t){return Ou(e).get(t).next((r=>r?(Lt(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),Gd(this.serializer,r)):null))}er(e,t){return this.Xn[t]?Le.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const i=r.keys();return this.Xn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Ou(e).ee({index:Kd,range:i},((a,c,u)=>{c.userId===this.userId&&(Lt(c.batchId>=r,47524,{tr:r}),s=Gd(this.serializer,c)),u.done()})).next((()=>s))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Qu;return Ou(e).ee({index:Kd,range:t,reverse:!0},((i,s,a)=>{r=s.batchId,a.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Qu],[this.userId,Number.POSITIVE_INFINITY]);return Ou(e).J(Kd,t).next((r=>r.map((i=>Gd(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=My(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return If(e).ee({range:i},((a,c,u)=>{const[d,p,g]=a,_=Kl(p);if(d===this.userId&&t.path.isEqual(_))return Ou(e).get(g).next((w=>{if(!w)throw Et(61480,{nr:a,batchId:g});Lt(w.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:w.userId,batchId:g}),s.push(Gd(this.serializer,w))}));u.done()})).next((()=>s))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new hr(hn);const i=[];return t.forEach((s=>{const a=My(this.userId,s.path),c=IDBKeyRange.lowerBound(a),u=If(e).ee({range:c},((d,p,g)=>{const[_,w,P]=d,O=Kl(w);_===this.userId&&s.path.isEqual(O)?r=r.add(P):g.done()}));i.push(u)})),Le.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=My(this.userId,r),a=IDBKeyRange.lowerBound(s);let c=new hr(hn);return If(e).ee({range:a},((u,d,p)=>{const[g,_,w]=u,P=Kl(_);g===this.userId&&r.isPrefixOf(P)?P.length===i&&(c=c.add(w)):p.done()})).next((()=>this.rr(e,c)))}rr(e,t){const r=[],i=[];return t.forEach((s=>{i.push(Ou(e).get(s).next((a=>{if(a===null)throw Et(35274,{batchId:s});Lt(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:s}),r.push(Gd(this.serializer,a))})))})),Le.waitFor(i).next((()=>r))}removeMutationBatch(e,t){return RP(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),Le.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Le.resolve();const r=IDBKeyRange.lowerBound((function(a){return[a]})(this.userId)),i=[];return If(e).ee({range:r},((s,a,c)=>{if(s[0]===this.userId){const u=Kl(s[1]);i.push(u)}else c.done()})).next((()=>{Lt(i.length===0,56720,{sr:i.map((s=>s.canonicalString()))})}))}))}containsKey(e,t){return PP(e,this.userId,t)}_r(e){return kP(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Qu,lastStreamToken:""}))}}function PP(n,e,t){const r=My(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return If(n).ee({range:s,X:!0},((c,u,d)=>{const[p,g,_]=c;p===e&&g===i&&(a=!0),d.done()})).next((()=>a))}function Ou(n){return es(n,ll)}function If(n){return es(n,rp)}function kP(n){return es(n,Tg)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new mh(0)}static cr(){return new mh(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new mh(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Vt.fromTimestamp(new nr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>bf(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(Lt(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let i=0;const s=[];return bf(e).ee(((a,c)=>{const u=qm(c);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,s.push(this.removeTargetData(e,u)))})).next((()=>Le.waitFor(s))).next((()=>i))}forEachTarget(e,t){return bf(e).ee(((r,i)=>{const s=qm(i);t(s)}))}lr(e){return FN(e).get(dv).next((t=>(Lt(t!==null,2888),t)))}hr(e,t){return FN(e).put(dv,t)}Pr(e,t){return bf(e).put(NP(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=uh(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return bf(e).ee({range:i,index:w3},((a,c,u)=>{const d=qm(c);i0(t,d.target)&&(s=d,u.done())})).next((()=>s))}addMatchingKeys(e,t,r){const i=[],s=Bu(e);return t.forEach((a=>{const c=to(a.path);i.push(s.put({targetId:r,path:c})),i.push(this.referenceDelegate.addReference(e,r,a))})),Le.waitFor(i)}removeMatchingKeys(e,t,r){const i=Bu(e);return Le.forEach(t,(s=>{const a=to(s.path);return Le.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(e,r,s)])}))}removeMatchingKeysForTargetId(e,t){const r=Bu(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Bu(e);let s=yn();return i.ee({range:r,X:!0},((a,c,u)=>{const d=Kl(a[1]),p=new pt(d);s=s.add(p)})).next((()=>s))}containsKey(e,t){const r=to(t.path),i=IDBKeyRange.bound([r],[u3(r)],!1,!0);let s=0;return Bu(e).ee({index:Qx,X:!0,range:i},(([a,c],u,d)=>{a!==0&&(s++,d.done())})).next((()=>s>0))}At(e,t){return bf(e).get(t).next((r=>r?qm(r):null))}}function bf(n){return es(n,ip)}function FN(n){return es(n,rh)}function Bu(n){return es(n,sp)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN="LruGarbageCollector",r9=1048576;function jN([n,e],[t,r]){const i=hn(n,t);return i===0?hn(e,r):i}class i9{constructor(e){this.Ir=e,this.buffer=new hr(jN),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();jN(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class DP{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){st(UN,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){md(t)?st(UN,"Ignoring IndexedDB error during garbage collection: ",t):await pd(t)}await this.Vr(3e5)}))}}class s9{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return Le.resolve(qo.ce);const r=new i9(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(st("LruGarbageCollector","Garbage collection skipped; disabled"),Le.resolve(ON)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(st("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ON):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,a,c,u,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(st("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,a=Date.now(),this.nthSequenceNumber(e,i)))).next((g=>(r=g,c=Date.now(),this.removeTargets(e,r,t)))).next((g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(d=Date.now(),Tf()<=In.DEBUG&&st("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${i} in `+(c-a)+`ms
	Removed ${s} targets in `+(u-c)+`ms
	Removed ${g} documents in `+(d-u)+`ms
Total Duration: ${d-p}ms`),Le.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g}))))}}function LP(n,e){return new s9(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9{constructor(e,t){this.db=e,this.garbageCollector=LP(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,i)=>t(i)))}addReference(e,t,r){return yy(e,r)}removeReference(e,t,r){return yy(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return yy(e,t)}br(e,t){return(function(i,s){let a=!1;return kP(i).te((c=>PP(i,c,s).next((u=>(u&&(a=!0),Le.resolve(!u)))))).next((()=>a))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,((a,c)=>{if(c<=t){const u=this.br(e,a).next((d=>{if(!d)return s++,r.getEntry(e,a).next((()=>(r.removeEntry(a,Vt.min()),Bu(e).delete((function(g){return[0,to(g.path)]})(a)))))}));i.push(u)}})).next((()=>Le.waitFor(i))).next((()=>r.apply(e))).next((()=>s))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return yy(e,t)}Sr(e,t){const r=Bu(e);let i,s=qo.ce;return r.ee({index:Qx},(([a,c],{path:u,sequenceNumber:d})=>{a===0?(s!==qo.ce&&t(new pt(Kl(i)),s),s=d,i=u):s=qo.ce})).next((()=>{s!==qo.ce&&t(new pt(Kl(i)),s)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function yy(n,e){return Bu(n).put((function(r,i){return{targetId:0,path:to(r.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(){this.changes=new eu((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Mr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?Le.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a9{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Fd(e).put(r)}removeEntry(e,t,r){return Fd(e).delete((function(s,a){const c=s.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],mv(a),c[c.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=Mr.newInvalidDocument(t);return Fd(e).ee({index:Oy,range:IDBKeyRange.only(Pm(t))},((i,s)=>{r=this.Cr(t,s)})).next((()=>r))}vr(e,t){let r={size:0,document:Mr.newInvalidDocument(t)};return Fd(e).ee({index:Oy,range:IDBKeyRange.only(Pm(t))},((i,s)=>{r={document:this.Cr(t,s),size:yv(s)}})).next((()=>r))}getEntries(e,t){let r=Ho();return this.Fr(e,t,((i,s)=>{const a=this.Cr(i,s);r=r.insert(i,a)})).next((()=>r))}Mr(e,t){let r=Ho(),i=new Ir(pt.comparator);return this.Fr(e,t,((s,a)=>{const c=this.Cr(s,a);r=r.insert(s,c),i=i.insert(s,yv(a))})).next((()=>({documents:r,Or:i})))}Fr(e,t,r){if(t.isEmpty())return Le.resolve();let i=new hr(qN);t.forEach((u=>i=i.add(u)));const s=IDBKeyRange.bound(Pm(i.first()),Pm(i.last())),a=i.getIterator();let c=a.getNext();return Fd(e).ee({index:Oy,range:s},((u,d,p)=>{const g=pt.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;c&&qN(c,g)<0;)r(c,null),c=a.getNext();c&&c.isEqual(g)&&(r(c,d),c=a.hasNext()?a.getNext():null),c?p.j(Pm(c)):p.done()})).next((()=>{for(;c;)r(c,null),c=a.hasNext()?a.getNext():null}))}getDocumentsMatchingQuery(e,t,r,i,s){const a=t.path,c=[a.popLast().toArray(),a.lastSegment(),mv(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Fd(e).J(IDBKeyRange.bound(c,u,!0)).next((d=>{s==null||s.incrementDocumentReadCount(d.length);let p=Ho();for(const g of d){const _=this.Cr(pt.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);_.isFoundDocument()&&(o0(t,_)||i.has(_.key))&&(p=p.insert(_.key,_))}return p}))}getAllFromCollectionGroup(e,t,r,i){let s=Ho();const a=BN(t,r),c=BN(t,pa.max());return Fd(e).ee({index:x3,range:IDBKeyRange.bound(a,c,!0)},((u,d,p)=>{const g=this.Cr(pt.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);s=s.insert(g.key,g),s.size===i&&p.done()})).next((()=>s))}newChangeBuffer(e){return new l9(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return VN(e).get(db).next((t=>(Lt(!!t,20021),t)))}Dr(e,t){return VN(e).put(db,t)}Cr(e,t){if(t){const r=$B(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Vt.min())))return r}return Mr.newInvalidDocument(e)}}function OP(n){return new a9(n)}class l9 extends MP{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new eu((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const t=[];let r=0,i=new hr(((s,a)=>hn(s.canonicalString(),a.canonicalString())));return this.changes.forEach(((s,a)=>{const c=this.Br.get(s);if(t.push(this.Nr.removeEntry(e,s,c.readTime)),a.isValidDocument()){const u=EN(this.Nr.serializer,a);i=i.add(s.path.popLast());const d=yv(u);r+=d-c.size,t.push(this.Nr.addEntry(e,s,u))}else if(r-=c.size,this.trackRemovals){const u=EN(this.Nr.serializer,a.convertToNoDocument(Vt.min()));t.push(this.Nr.addEntry(e,s,u))}})),i.forEach((s=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))})),t.push(this.Nr.updateMetadata(e,r)),Le.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:i})=>(i.forEach(((s,a)=>{this.Br.set(s,{size:a,readTime:r.get(s).readTime})})),r)))}}function VN(n){return es(n,Ag)}function Fd(n){return es(n,uv)}function Pm(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function BN(n,e){const t=e.documentKey.path.toArray();return[n,mv(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function qN(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=hn(t[s],r[s]),i)return i;return i=hn(t.length,r.length),i||(i=hn(t[t.length-2],r[r.length-2]),i||hn(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c9{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&ig(r.mutation,i,Go.empty(),nr.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,yn()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=yn()){const i=Jl();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((s=>{let a=Vm();return s.forEach(((c,u)=>{a=a.insert(c,u.overlayedDocument)})),a}))))}getOverlayedDocuments(e,t){const r=Jl();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,yn())))}populateOverlays(e,t,r){const i=[];return r.forEach((s=>{t.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((a,c)=>{t.set(a,c)}))}))}computeViews(e,t,r,i){let s=Ho();const a=rg(),c=(function(){return rg()})();return t.forEach(((u,d)=>{const p=r.get(d.key);i.has(d.key)&&(p===void 0||p.mutation instanceof tu)?s=s.insert(d.key,d):p!==void 0?(a.set(d.key,p.mutation.getFieldMask()),ig(p.mutation,d,p.mutation.getFieldMask(),nr.now())):a.set(d.key,Go.empty())})),this.recalculateAndSaveOverlays(e,s).next((u=>(u.forEach(((d,p)=>a.set(d,p))),t.forEach(((d,p)=>c.set(d,new c9(p,a.get(d)??null)))),c)))}recalculateAndSaveOverlays(e,t){const r=rg();let i=new Ir(((a,c)=>a-c)),s=yn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((a=>{for(const c of a)c.keys().forEach((u=>{const d=t.get(u);if(d===null)return;let p=r.get(u)||Go.empty();p=c.applyToLocalView(d,p),r.set(u,p);const g=(i.get(c.batchId)||yn()).add(u);i=i.insert(c.batchId,g)}))})).next((()=>{const a=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,p=u.value,g=Z3();p.forEach((_=>{if(!s.has(_)){const w=oP(t.get(_),r.get(_));w!==null&&g.set(_,w),s=s.add(_)}})),a.push(this.documentOverlayCache.saveOverlays(e,d,g))}return Le.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(a){return pt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):iw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):Le.resolve(Jl());let c=np,u=s;return a.next((d=>Le.forEach(d,((p,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),s.get(p)?Le.resolve():this.remoteDocumentCache.getEntry(e,p).next((_=>{u=u.insert(p,_)}))))).next((()=>this.populateOverlays(e,d,s))).next((()=>this.computeViews(e,u,d,yn()))).next((p=>({batchId:c,changes:X3(p)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pt(t)).next((r=>{let i=Vm();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let a=Vm();return this.indexManager.getCollectionParents(e,s).next((c=>Le.forEach(c,(u=>{const d=(function(g,_){return new Zc(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next((p=>{p.forEach(((g,_)=>{a=a.insert(g,_)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i)))).next((a=>{s.forEach(((u,d)=>{const p=d.getKey();a.get(p)===null&&(a=a.insert(p,Mr.newInvalidDocument(p)))}));let c=Vm();return a.forEach(((u,d)=>{const p=s.get(u);p!==void 0&&ig(p.mutation,d,Go.empty(),nr.now()),o0(t,d)&&(c=c.insert(u,d))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u9{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Le.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Ai(i.createTime)}})(t)),Le.resolve()}getNamedQuery(e,t){return Le.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:fw(i.bundledQuery),readTime:Ai(i.readTime)}})(t)),Le.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d9{constructor(){this.overlays=new Ir(pt.comparator),this.qr=new Map}getOverlay(e,t){return Le.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Jl();return Le.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,s)=>{this.St(e,t,s)})),Le.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(r)),Le.resolve()}getOverlaysForCollection(e,t,r){const i=Jl(),s=t.length+1,a=new pt(t.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Le.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ir(((d,p)=>d-p));const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let p=s.get(d.largestBatchId);p===null&&(p=Jl(),s=s.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const c=Jl(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((d,p)=>c.set(d,p))),!(c.size()>=i)););return Le.resolve(c)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new uw(t,r));let s=this.qr.get(t);s===void 0&&(s=yn(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9{constructor(){this.sessionToken=fi.EMPTY_BYTE_STRING}getSessionToken(e){return Le.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Le.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(){this.Qr=new hr(ps.$r),this.Ur=new hr(ps.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new ps(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new ps(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new pt(new Cn([])),r=new ps(t,e),i=new ps(t,e+1),s=[];return this.Ur.forEachInRange([r,i],(a=>{this.Gr(a),s.push(a.key)})),s}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new pt(new Cn([])),r=new ps(t,e),i=new ps(t,e+1);let s=yn();return this.Ur.forEachInRange([r,i],(a=>{s=s.add(a.key)})),s}containsKey(e){const t=new ps(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class ps{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return pt.comparator(e.key,t.key)||hn(e.Yr,t.Yr)}static Kr(e,t){return hn(e.Yr,t.Yr)||pt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f9{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new hr(ps.$r)}checkEmpty(e){return Le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new lw(s,t,r,i);this.mutationQueue.push(a);for(const c of i)this.Zr=this.Zr.add(new ps(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return Le.resolve(a)}lookupMutationBatch(e,t){return Le.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),s=i<0?0:i;return Le.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Le.resolve(this.mutationQueue.length===0?Qu:this.tr-1)}getAllMutationBatches(e){return Le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ps(t,0),i=new ps(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],(a=>{const c=this.Xr(a.Yr);s.push(c)})),Le.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new hr(hn);return t.forEach((i=>{const s=new ps(i,0),a=new ps(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],(c=>{r=r.add(c.Yr)}))})),Le.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;pt.isDocumentKey(s)||(s=s.child(""));const a=new ps(new pt(s),0);let c=new hr(hn);return this.Zr.forEachWhile((u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.Yr)),!0)}),a),Le.resolve(this.ti(c))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Lt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Le.forEach(t.mutations,(i=>{const s=new ps(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new ps(t,0),i=this.Zr.firstAfterOrEqual(r);return Le.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Le.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p9{constructor(e){this.ri=e,this.docs=(function(){return new Ir(pt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Le.resolve(r?r.document.mutableCopy():Mr.newInvalidDocument(t))}getEntries(e,t){let r=Ho();return t.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Mr.newInvalidDocument(i))})),Le.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Ho();const a=t.path,c=new pt(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:p}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||Kx(m3(p),r)<=0||(i.has(p.key)||o0(t,p))&&(s=s.insert(p.key,p.mutableCopy()))}return Le.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Et(9500)}ii(e,t){return Le.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new m9(this)}getSize(e){return Le.resolve(this.size)}}class m9 extends MP{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),Le.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g9{constructor(e){this.persistence=e,this.si=new eu((t=>uh(t)),i0),this.lastRemoteSnapshotVersion=Vt.min(),this.highestTargetId=0,this.oi=0,this._i=new gw,this.targetCount=0,this.ai=mh.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),Le.resolve()}getLastRemoteSnapshotVersion(e){return Le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Le.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),Le.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new mh(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Le.resolve()}updateTargetData(e,t){return this.Pr(t),Le.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Le.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.si.forEach(((a,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)})),Le.waitFor(s).next((()=>i))}getTargetCount(e){return Le.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return Le.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),Le.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach((a=>{s.push(i.markPotentiallyOrphaned(e,a))})),Le.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Le.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return Le.resolve(r)}containsKey(e,t){return Le.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e,t){this.ui={},this.overlays={},this.ci=new qo(0),this.li=!1,this.li=!0,this.hi=new h9,this.referenceDelegate=e(this),this.Pi=new g9(this),this.indexManager=new e9,this.remoteDocumentCache=(function(i){return new p9(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new AP(t),this.Ii=new u9(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new d9,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new f9(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){st("MemoryPersistence","Starting transaction:",e);const i=new y9(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((s=>this.referenceDelegate.di(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ai(e,t){return Le.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class y9 extends y3{constructor(e){super(),this.currentSequenceNumber=e}}class u1{constructor(e){this.persistence=e,this.Ri=new gw,this.Vi=null}static mi(e){return new u1(e)}get fi(){if(this.Vi)return this.Vi;throw Et(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),Le.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),Le.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Le.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((s=>this.fi.add(s.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Le.forEach(this.fi,(r=>{const i=pt.fromPath(r);return this.gi(e,i).next((s=>{s||t.removeEntry(i,Vt.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return Le.or([()=>Le.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class vv{constructor(e,t){this.persistence=e,this.pi=new eu((r=>to(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=LP(this,t)}static mi(e,t){return new vv(e,t)}Ei(){}di(e){return Le.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return Le.forEach(this.pi,((r,i)=>this.br(e,r,i).next((s=>s?Le.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,(a=>this.br(e,a,t).next((c=>{c||(r++,s.removeEntry(a,Vt.min()))})))).next((()=>s.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Le.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),Le.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),Le.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Le.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Uy(e.data.value)),t}br(e,t,r){return Le.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return Le.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v9{constructor(e){this.serializer=e}k(e,t,r,i){const s=new Zv("createOrUpgrade",t);r<1&&i>=1&&((function(u){u.createObjectStore(r0)})(e),(function(u){u.createObjectStore(Tg,{keyPath:LV}),u.createObjectStore(ll,{keyPath:ZA,autoIncrement:!0}).createIndex(Kd,eN,{unique:!0}),u.createObjectStore(rp)})(e),GN(e),(function(u){u.createObjectStore(Vd)})(e));let a=Le.resolve();return r<3&&i>=3&&(r!==0&&((function(u){u.deleteObjectStore(sp),u.deleteObjectStore(ip),u.deleteObjectStore(rh)})(e),GN(e)),a=a.next((()=>(function(u){const d=u.store(rh),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Vt.min().toTimestamp(),targetCount:0};return d.put(dv,p)})(s)))),r<4&&i>=4&&(r!==0&&(a=a.next((()=>(function(u,d){return d.store(ll).J().next((g=>{u.deleteObjectStore(ll),u.createObjectStore(ll,{keyPath:ZA,autoIncrement:!0}).createIndex(Kd,eN,{unique:!0});const _=d.store(ll),w=g.map((P=>_.put(P)));return Le.waitFor(w)}))})(e,s)))),a=a.next((()=>{(function(u){u.createObjectStore(op,{keyPath:GV})})(e)}))),r<5&&i>=5&&(a=a.next((()=>this.yi(s)))),r<6&&i>=6&&(a=a.next((()=>((function(u){u.createObjectStore(Ag)})(e),this.wi(s))))),r<7&&i>=7&&(a=a.next((()=>this.Si(s)))),r<8&&i>=8&&(a=a.next((()=>this.bi(e,s)))),r<9&&i>=9&&(a=a.next((()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(a=a.next((()=>this.Di(s)))),r<11&&i>=11&&(a=a.next((()=>{(function(u){u.createObjectStore(e1,{keyPath:HV})})(e),(function(u){u.createObjectStore(t1,{keyPath:zV})})(e)}))),r<12&&i>=12&&(a=a.next((()=>{(function(u){const d=u.createObjectStore(n1,{keyPath:XV});d.createIndex(fb,ZV,{unique:!1}),d.createIndex(A3,eB,{unique:!1})})(e)}))),r<13&&i>=13&&(a=a.next((()=>(function(u){const d=u.createObjectStore(uv,{keyPath:OV});d.createIndex(Oy,FV),d.createIndex(x3,UV)})(e))).next((()=>this.Ci(e,s))).next((()=>e.deleteObjectStore(Vd)))),r<14&&i>=14&&(a=a.next((()=>this.Fi(e,s)))),r<15&&i>=15&&(a=a.next((()=>(function(u){u.createObjectStore(Xx,{keyPath:$V,autoIncrement:!0}).createIndex(hb,YV,{unique:!1}),u.createObjectStore(eg,{keyPath:WV}).createIndex(E3,KV,{unique:!1}),u.createObjectStore(tg,{keyPath:JV}).createIndex(T3,QV,{unique:!1})})(e)))),r<16&&i>=16&&(a=a.next((()=>{t.objectStore(eg).clear()})).next((()=>{t.objectStore(tg).clear()}))),r<17&&i>=17&&(a=a.next((()=>{(function(u){u.createObjectStore(Zx,{keyPath:tB})})(e)}))),r<18&&i>=18&&qR()&&(a=a.next((()=>{t.objectStore(eg).clear()})).next((()=>{t.objectStore(tg).clear()}))),a}wi(e){let t=0;return e.store(Vd).ee(((r,i)=>{t+=yv(i)})).next((()=>{const r={byteSize:t};return e.store(Ag).put(db,r)}))}yi(e){const t=e.store(Tg),r=e.store(ll);return t.J().next((i=>Le.forEach(i,(s=>{const a=IDBKeyRange.bound([s.userId,Qu],[s.userId,s.lastAcknowledgedBatchId]);return r.J(Kd,a).next((c=>Le.forEach(c,(u=>{Lt(u.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:u.batchId});const d=Gd(this.serializer,u);return RP(e,s.userId,d).next((()=>{}))}))))}))))}Si(e){const t=e.store(sp),r=e.store(Vd);return e.store(rh).get(dv).next((i=>{const s=[];return r.ee(((a,c)=>{const u=new Cn(a),d=(function(g){return[0,to(g)]})(u);s.push(t.get(d).next((p=>p?Le.resolve():(g=>t.put({targetId:0,path:to(g),sequenceNumber:i.highestListenSequenceNumber}))(u))))})).next((()=>Le.waitFor(s)))}))}bi(e,t){e.createObjectStore(Ng,{keyPath:qV});const r=t.store(Ng),i=new mw,s=a=>{if(i.add(a)){const c=a.lastSegment(),u=a.popLast();return r.put({collectionId:c,parent:to(u)})}};return t.store(Vd).ee({X:!0},((a,c)=>{const u=new Cn(a);return s(u.popLast())})).next((()=>t.store(rp).ee({X:!0},(([a,c,u],d)=>{const p=Kl(c);return s(p.popLast())}))))}Di(e){const t=e.store(ip);return t.ee(((r,i)=>{const s=qm(i),a=NP(this.serializer,s);return t.put(a)}))}Ci(e,t){const r=t.store(Vd),i=[];return r.ee(((s,a)=>{const c=t.store(uv),u=(function(g){return g.document?new pt(Cn.fromString(g.document.name).popFirst(5)):g.noDocument?pt.fromSegments(g.noDocument.path):g.unknownDocument?pt.fromSegments(g.unknownDocument.path):Et(36783)})(a).path.toArray(),d={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(c.put(d))})).next((()=>Le.waitFor(i)))}Fi(e,t){const r=t.store(ll),i=OP(this.serializer),s=new yw(u1.mi,this.serializer.yt);return r.J().next((a=>{const c=new Map;return a.forEach((u=>{let d=c.get(u.userId)??yn();Gd(this.serializer,u).keys().forEach((p=>d=d.add(p))),c.set(u.userId,d)})),Le.forEach(c,((u,d)=>{const p=new ms(d),g=l1.wt(this.serializer,p),_=s.getIndexManager(p),w=c1.wt(p,this.serializer,_,s.referenceDelegate);return new FP(i,w,g,_).recalculateAndSaveOverlaysForDocumentKeys(new pb(t,qo.ce),u).next()}))}))}}function GN(n){n.createObjectStore(sp,{keyPath:VV}).createIndex(Qx,BV,{unique:!0}),n.createObjectStore(ip,{keyPath:"targetId"}).createIndex(w3,jV,{unique:!0}),n.createObjectStore(rh)}const Fu="IndexedDbPersistence",p2=18e5,m2=5e3,g2="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",UP="main";class vw{constructor(e,t,r,i,s,a,c,u,d,p,g=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=s,this.window=a,this.document=c,this.xi=d,this.Oi=p,this.Ni=g,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=_=>Promise.resolve(),!vw.v())throw new nt(Be.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new o9(this,i),this.$i=t+UP,this.serializer=new AP(u),this.Ui=new Xl(this.$i,this.Ni,new v9(this.serializer)),this.hi=new WB,this.Pi=new n9(this.referenceDelegate,this.serializer),this.remoteDocumentCache=OP(this.serializer),this.Ii=new YB,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,p===!1&&Ti(Fu,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new nt(Be.FAILED_PRECONDITION,g2);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new qo(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>vy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(md(e))return st(Fu,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return st(Fu,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return km(e).get(mf).next((t=>Le.resolve(this.es(t))))}ts(e){return vy(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,p2)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=es(t,op);return r.J().next((i=>{const s=this.ss(i,p2),a=i.filter((c=>s.indexOf(c)===-1));return Le.forEach(a,(c=>r.delete(c.clientId))).next((()=>a))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?Le.resolve(!0):km(e).get(mf).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,m2)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new nt(Be.FAILED_PRECONDITION,g2);return!1}}return!(!this.networkEnabled||!this.inForeground)||vy(e).J().next((r=>this.ss(r,m2).find((i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,c=this.networkEnabled===i.networkEnabled;if(s||a&&c)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&st(Fu,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[r0,op],(e=>{const t=new pb(e,qo.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>vy(e).J().next((t=>this.ss(t,p2).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return c1.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new t9(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return l1.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){st(Fu,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=(function(u){return u===18?iB:u===17?C3:u===16?rB:u===15?ew:u===14?I3:u===13?S3:u===12?nB:u===11?N3:void Et(60245)})(this.Ni);let a;return this.Ui.runTransaction(e,i,s,(c=>(a=new pb(c,this.ci?this.ci.next():qo.ce),t==="readwrite-primary"?this.Hi(a).next((u=>!!u||this.Yi(a))).next((u=>{if(!u)throw Ti(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new nt(Be.FAILED_PRECONDITION,g3);return r(a)})).next((u=>this.Xi(a).next((()=>u)))):this.Is(a).next((()=>r(a)))))).then((c=>(a.raiseOnCommittedEvent(),c)))}Is(e){return km(e).get(mf).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,m2)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new nt(Be.FAILED_PRECONDITION,g2)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return km(e).put(mf,t)}static v(){return Xl.v()}Zi(e){const t=km(e);return t.get(mf).next((r=>this.es(r)?(st(Fu,"Releasing primary lease."),t.delete(mf)):Le.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Ti(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;BR()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const r=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return st(Fu,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ti(Fu,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Ti("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function km(n){return es(n,r0)}function vy(n){return es(n,op)}function _w(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=yn(),i=yn();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new bw(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _9{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return BR()?8:v3(ei())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ys(e,t).next((a=>{s.result=a})).next((()=>{if(!s.result)return this.ws(e,t,i,r).next((a=>{s.result=a}))})).next((()=>{if(s.result)return;const a=new _9;return this.Ss(e,t,a).next((c=>{if(s.result=c,this.Vs)return this.bs(e,t,a,c.size)}))})).next((()=>s.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(Tf()<=In.DEBUG&&st("QueryEngine","SDK will not create cache indexes for query:",Af(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Le.resolve()):(Tf()<=In.DEBUG&&st("QueryEngine","Query:",Af(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Tf()<=In.DEBUG&&st("QueryEngine","The SDK decides to create cache indexes for query:",Af(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yo(t))):Le.resolve())}ys(e,t){if(fN(t))return Le.resolve(null);let r=yo(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=pv(t,null,"F"),r=yo(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const a=yn(...s);return this.ps.getDocuments(e,a).next((c=>this.indexManager.getMinOffset(e,r).next((u=>{const d=this.Ds(t,c);return this.Cs(t,d,a,u.readTime)?this.ys(e,pv(t,null,"F")):this.vs(e,d,t,u)}))))})))))}ws(e,t,r,i){return fN(t)||i.isEqual(Vt.min())?Le.resolve(null):this.ps.getDocuments(e,r).next((s=>{const a=this.Ds(t,s);return this.Cs(t,a,r,i)?Le.resolve(null):(Tf()<=In.DEBUG&&st("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Af(t)),this.vs(e,a,t,p3(i,np)).next((c=>c)))}))}Ds(e,t){let r=new hr(J3(e));return t.forEach(((i,s)=>{o0(e,s)&&(r=r.add(s))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return Tf()<=In.DEBUG&&st("QueryEngine","Using full collection scan to execute query:",Af(t)),this.ps.getDocumentsMatchingQuery(e,t,pa.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((s=>(t.forEach((a=>{s=s.insert(a.key,a)})),s)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw="LocalStore",b9=3e8;class x9{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Ir(hn),this.xs=new eu((s=>uh(s)),i0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new FP(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function VP(n,e,t,r){return new x9(n,e,t,r)}async function BP(n,e){const t=yt(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((s=>{const a=[],c=[];let u=yn();for(const d of i){a.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}for(const d of s){c.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}return t.localDocuments.getDocuments(r,u).next((d=>({Ls:d,removedBatchIds:a,addedBatchIds:c})))}))}))}function w9(n,e){const t=yt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),s=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,u,d,p){const g=d.batch,_=g.keys();let w=Le.resolve();return _.forEach((P=>{w=w.next((()=>p.getEntry(u,P))).next((O=>{const L=d.docVersions.get(P);Lt(L!==null,48541),O.version.compareTo(L)<0&&(g.applyToRemoteDocument(O,d),O.isValidDocument()&&(O.setReadTime(d.commitVersion),p.addEntry(O)))}))})),w.next((()=>c.mutationQueue.removeMutationBatch(u,g)))})(t,r,e,s).next((()=>s.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=yn();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function qP(n){const e=yt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function E9(n,e){const t=yt(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const a=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const c=[];e.targetChanges.forEach(((p,g)=>{const _=i.get(g);if(!_)return;c.push(t.Pi.removeMatchingKeys(s,p.removedDocuments,g).next((()=>t.Pi.addMatchingKeys(s,p.addedDocuments,g))));let w=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?w=w.withResumeToken(fi.EMPTY_BYTE_STRING,Vt.min()).withLastLimboFreeSnapshotVersion(Vt.min()):p.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(p.resumeToken,r)),i=i.insert(g,w),(function(O,L,B){return O.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=b9?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(_,w,p)&&c.push(t.Pi.updateTargetData(s,w))}));let u=Ho(),d=yn();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,p))})),c.push(GP(s,a,e.documentUpdates).next((p=>{u=p.ks,d=p.qs}))),!r.isEqual(Vt.min())){const p=t.Pi.getLastRemoteSnapshotVersion(s).next((g=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r)));c.push(p)}return Le.waitFor(c).next((()=>a.apply(s))).next((()=>t.localDocuments.getLocalViewOfDocuments(s,u,d))).next((()=>u))})).then((s=>(t.Ms=i,s)))}function GP(n,e,t){let r=yn(),i=yn();return t.forEach((s=>r=r.add(s))),e.getEntries(n,r).next((s=>{let a=Ho();return t.forEach(((c,u)=>{const d=s.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Vt.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):st(xw,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)})),{ks:a,qs:i}}))}function T9(n,e){const t=yt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Qu),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function fp(n,e){const t=yt(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((s=>s?(i=s,Le.resolve(i)):t.Pi.allocateTargetId(r).next((a=>(i=new Mc(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function pp(n,e,t){const r=yt(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,(a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!md(a))throw a;st(xw,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function _v(n,e,t){const r=yt(n);let i=Vt.min(),s=yn();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(u,d,p){const g=yt(u),_=g.xs.get(p);return _!==void 0?Le.resolve(g.Ms.get(_)):g.Pi.getTargetData(d,p)})(r,a,yo(e)).next((c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,c.targetId).next((u=>{s=u}))})).next((()=>r.Fs.getDocumentsMatchingQuery(a,e,t?i:Vt.min(),t?s:yn()))).next((c=>($P(r,K3(e),c),{documents:c,Qs:s})))))}function HP(n,e){const t=yt(n),r=yt(t.Pi),i=t.Ms.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",(s=>r.At(s,e).next((a=>a?a.target:null))))}function zP(n,e){const t=yt(n),r=t.Os.get(e)||Vt.min();return t.persistence.runTransaction("Get new document changes","readonly",(i=>t.Ns.getAllFromCollectionGroup(i,e,p3(r,np),Number.MAX_SAFE_INTEGER))).then((i=>($P(t,e,i),i)))}function $P(n,e,t){let r=n.Os.get(e)||Vt.min();t.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),n.Os.set(e,r)}async function A9(n,e,t,r){const i=yt(n);let s=yn(),a=Ho();for(const d of t){const p=e.$s(d.metadata.name);d.document&&(s=s.add(p));const g=e.Us(d);g.setReadTime(e.Ks(d.metadata.readTime)),a=a.insert(p,g)}const c=i.Ns.newChangeBuffer({trackRemovals:!0}),u=await fp(i,(function(p){return yo(Rp(Cn.fromString(`__bundle__/docs/${p}`)))})(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(d=>GP(d,c,a).next((p=>(c.apply(d),p))).next((p=>i.Pi.removeMatchingKeysForTargetId(d,u.targetId).next((()=>i.Pi.addMatchingKeys(d,s,u.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(d,p.ks,p.qs))).next((()=>p.ks))))))}async function N9(n,e,t=yn()){const r=await fp(n,yo(fw(e.bundledQuery))),i=yt(n);return i.persistence.runTransaction("Save named query","readwrite",(s=>{const a=Ai(e.readTime);if(r.snapshotVersion.compareTo(a)>=0)return i.Ii.saveNamedQuery(s,e);const c=r.withResumeToken(fi.EMPTY_BYTE_STRING,a);return i.Ms=i.Ms.insert(c.targetId,c),i.Pi.updateTargetData(s,c).next((()=>i.Pi.removeMatchingKeysForTargetId(s,r.targetId))).next((()=>i.Pi.addMatchingKeys(s,t,r.targetId))).next((()=>i.Ii.saveNamedQuery(s,e)))}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP="firestore_clients";function HN(n,e){return`${YP}_${n}_${e}`}const WP="firestore_mutations";function zN(n,e,t){let r=`${WP}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const KP="firestore_targets";function y2(n,e){return`${KP}_${n}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gl="SharedClientState";class bv{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ws(e,t,r){const i=JSON.parse(r);let s,a=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(s=new nt(i.error.code,i.error.message))),a?new bv(e,t,i.state,s):(Ti(Gl,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sg{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ws(e,t){const r=JSON.parse(t);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new nt(r.error.code,r.error.message))),s?new sg(e,r.state,i):(Ti(Gl,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xv{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const r=JSON.parse(t);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=sw();for(let a=0;i&&a<r.activeTargetIds.length;++a)i=_3(r.activeTargetIds[a]),s=s.add(r.activeTargetIds[a]);return i?new xv(e,s):(Ti(Gl,`Failed to parse client data for instance '${e}': ${t}`),null)}}class ww{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new ww(t.clientId,t.onlineState):(Ti(Gl,`Failed to parse online state: ${e}`),null)}}class Cb{constructor(){this.activeTargetIds=sw()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class v2{constructor(e,t,r,i,s){this.window=e,this.Mi=t,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Ir(hn),this.started=!1,this.Xs=[];const a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=HN(this.persistenceKey,this.Js),this.no=(function(u){return`firestore_sequence_number_${u}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Cb),this.ro=new RegExp(`^${YP}_${a}_([^_]*)$`),this.io=new RegExp(`^${WP}_${a}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${KP}_${a}_(\\d+)$`),this.oo=(function(u){return`firestore_online_state_${u}`})(this.persistenceKey),this._o=(function(u){return`firestore_bundle_loaded_v2_${u}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(HN(this.persistenceKey,r));if(i){const s=xv.Ws(r,i);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const r=this.uo(t);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,r){this.ho(e,t,r),this.Po(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(y2(this.persistenceKey,e));if(i){const s=sg.Ws(e,i);s&&(r=s.state)}}return t&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(y2(this.persistenceKey,e))}updateQueryState(e,t,r){this.Io(e,t,r)}handleUserChange(e,t,r){t.forEach((i=>{this.Po(i)})),this.currentUser=e,r.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return st(Gl,"READ",e,t),t}setItem(e,t){st(Gl,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){st(Gl,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(st(Gl,"EVENT",t.key,t.newValue),t.key===this.eo)return void Ti("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const r=this.Ro(t.key);return this.Vo(r,null)}{const r=this.mo(t.key,t.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(this.so.test(t.key)){if(t.newValue!==null){const r=this.yo(t.key,t.newValue);if(r)return this.wo(r)}}else if(t.key===this.oo){if(t.newValue!==null){const r=this.uo(t.newValue);if(r)return this.co(r)}}else if(t.key===this.no){const r=(function(s){let a=qo.ce;if(s!=null)try{const c=JSON.parse(s);Lt(typeof c=="number",30636,{So:s}),a=c}catch(c){Ti(Gl,"Failed to read sequence number from WebStorage",c)}return a})(t.newValue);r!==qo.ce&&this.sequenceNumberHandler(r)}else if(t.key===this._o){const r=this.bo(t.newValue);await Promise.all(r.map((i=>this.syncEngine.Do(i))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,r){const i=new bv(this.currentUser,e,t,r),s=zN(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Gs())}Po(e){const t=zN(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,r){const i=y2(this.persistenceKey,e),s=new sg(e,t,r);this.setItem(i,s.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const r=this.Ro(e);return xv.Ws(r,t)}fo(e,t){const r=this.io.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return bv.Ws(new ms(s),i,t)}yo(e,t){const r=this.so.exec(e),i=Number(r[1]);return sg.Ws(i,t)}uo(e){return ww.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);st(Gl,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const r=t?this.Zs.insert(e,t):this.Zs.remove(e),i=this.lo(this.Zs),s=this.lo(r),a=[],c=[];return s.forEach((u=>{i.has(u)||a.push(u)})),i.forEach((u=>{s.has(u)||c.push(u)})),this.syncEngine.Fo(a,c).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=sw();return e.forEach(((r,i)=>{t=t.unionWith(i.activeTargetIds)})),t}}class JP{constructor(){this.Mo=new Cb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Cb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S9{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N="ConnectivityMonitor";class YN{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){st($N,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){st($N,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _y=null;function Rb(){return _y===null?_y=(function(){return 268435456+Math.round(2147483648*Math.random())})():_y++,"0x"+_y.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2="RestConnection",I9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class C9{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===mb?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){const a=Rb(),c=this.zo(e,t.toUriEncodedString());st(_2,`Sending RPC '${e}' ${a}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,s);const{host:d}=new URL(c),p=Tp(d);return this.Jo(e,c,u,r,p).then((g=>(st(_2,`Received RPC '${e}' ${a}: `,g),g)),(g=>{throw nc(_2,`RPC '${e}' ${a} failed with error: `,g,"url: ",c,"request:",r),g}))}Ho(e,t,r,i,s,a){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Cp})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,s)=>e[s]=i)),r&&r.headers.forEach(((i,s)=>e[s]=i))}zo(e,t){const r=I9[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R9{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s="WebChannelConnection";class P9 extends C9{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){const a=Rb();return new Promise(((c,u)=>{const d=new r3;d.setWithCredentials(!0),d.listenOnce(i3.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case Dy.NO_ERROR:const g=d.getResponseJson();st($s,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),c(g);break;case Dy.TIMEOUT:st($s,`RPC '${e}' ${a} timed out`),u(new nt(Be.DEADLINE_EXCEEDED,"Request time out"));break;case Dy.HTTP_ERROR:const _=d.getStatus();if(st($s,`RPC '${e}' ${a} failed with status:`,_,"response text:",d.getResponseText()),_>0){let w=d.getResponseJson();Array.isArray(w)&&(w=w[0]);const P=w==null?void 0:w.error;if(P&&P.status&&P.message){const O=(function(B){const K=B.toLowerCase().replace(/_/g,"-");return Object.values(Be).indexOf(K)>=0?K:Be.UNKNOWN})(P.status);u(new nt(O,P.message))}else u(new nt(Be.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new nt(Be.UNAVAILABLE,"Connection failed."));break;default:Et(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{st($s,`RPC '${e}' ${a} completed.`)}}));const p=JSON.stringify(i);st($s,`RPC '${e}' ${a} sending request:`,i),d.send(t,"POST",p,r,15)}))}T_(e,t,r){const i=Rb(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=a3(),c=o3(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const p=s.join("");st($s,`Creating RPC '${e}' stream ${i}: ${p}`,u);const g=a.createWebChannel(p,u);this.I_(g);let _=!1,w=!1;const P=new R9({Yo:L=>{w?st($s,`Not sending because RPC '${e}' stream ${i} is closed:`,L):(_||(st($s,`Opening RPC '${e}' stream ${i} transport.`),g.open(),_=!0),st($s,`RPC '${e}' stream ${i} sending:`,L),g.send(L))},Zo:()=>g.close()}),O=(L,B,K)=>{L.listen(B,(W=>{try{K(W)}catch(J){setTimeout((()=>{throw J}),0)}}))};return O(g,jm.EventType.OPEN,(()=>{w||(st($s,`RPC '${e}' stream ${i} transport opened.`),P.o_())})),O(g,jm.EventType.CLOSE,(()=>{w||(w=!0,st($s,`RPC '${e}' stream ${i} transport closed`),P.a_(),this.E_(g))})),O(g,jm.EventType.ERROR,(L=>{w||(w=!0,nc($s,`RPC '${e}' stream ${i} transport errored. Name:`,L.name,"Message:",L.message),P.a_(new nt(Be.UNAVAILABLE,"The operation could not be completed")))})),O(g,jm.EventType.MESSAGE,(L=>{var B;if(!w){const K=L.data[0];Lt(!!K,16349);const W=K,J=(W==null?void 0:W.error)||((B=W[0])==null?void 0:B.error);if(J){st($s,`RPC '${e}' stream ${i} received error:`,J);const ae=J.status;let le=(function(N){const F=Oi[N];if(F!==void 0)return cP(F)})(ae),U=J.message;le===void 0&&(le=Be.INTERNAL,U="Unknown error status: "+ae+" with message "+J.message),w=!0,P.a_(new nt(le,U)),g.close()}else st($s,`RPC '${e}' stream ${i} received:`,K),P.u_(K)}})),O(c,s3.STAT_EVENT,(L=>{L.stat===lb.PROXY?st($s,`RPC '${e}' stream ${i} detected buffering proxy`):L.stat===lb.NOPROXY&&st($s,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{P.__()}),0),P}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QP(){return typeof window<"u"?window:null}function Gy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(n){return new OB(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&st("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN="PersistentStream";class XP{constructor(e,t,r,i,s,a,c,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ew(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Be.RESOURCE_EXHAUSTED?(Ti(t.toString()),Ti("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new nt(Be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return st(WN,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(st(WN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class k9 extends XP{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=jB(this.serializer,e),r=(function(s){if(!("targetChange"in s))return Vt.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Vt.min():a.readTime?Ai(a.readTime):Vt.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Tb(this.serializer),t.addTarget=(function(s,a){let c;const u=a.target;if(c=hv(u)?{documents:_P(s,u)}:{query:bP(s,u).ft},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=fP(s,a.resumeToken);const d=wb(s,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(Vt.min())>0){c.readTime=hp(s,a.snapshotVersion.toTimestamp());const d=wb(s,a.expectedCount);d!==null&&(c.expectedCount=d)}return c})(this.serializer,e);const r=BB(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Tb(this.serializer),t.removeTarget=e,this.q_(t)}}class D9 extends XP{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Lt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Lt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Lt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=VB(e.writeResults,e.commitTime),r=Ai(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Tb(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>kg(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L9{}class M9 extends L9{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new nt(Be.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Go(e,Eb(t,r),i,s,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new nt(Be.UNKNOWN,s.toString())}))}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Ho(e,Eb(t,r),i,a,c,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new nt(Be.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class O9{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ti(t),this.aa=!1):st("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh="RemoteStore";class F9{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((a=>{r.enqueueAndForget((async()=>{yd(this)&&(st(gh,"Restarting streams for network reachability change."),await(async function(u){const d=yt(u);d.Ea.add(4),await Dp(d),d.Ra.set("Unknown"),d.Ea.delete(4),await d0(d)})(this))}))})),this.Ra=new O9(r,i)}}async function d0(n){if(yd(n))for(const e of n.da)await e(!0)}async function Dp(n){for(const e of n.da)await e(!1)}function d1(n,e){const t=yt(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Nw(t)?Aw(t):Mp(t).O_()&&Tw(t,e))}function mp(n,e){const t=yt(n),r=Mp(t);t.Ia.delete(e),r.O_()&&ZP(t,e),t.Ia.size===0&&(r.O_()?r.L_():yd(t)&&t.Ra.set("Unknown"))}function Tw(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Vt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Mp(n).Y_(e)}function ZP(n,e){n.Va.Ue(e),Mp(n).Z_(e)}function Aw(n){n.Va=new kB({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Mp(n).start(),n.Ra.ua()}function Nw(n){return yd(n)&&!Mp(n).x_()&&n.Ia.size>0}function yd(n){return yt(n).Ea.size===0}function ek(n){n.Va=void 0}async function U9(n){n.Ra.set("Online")}async function j9(n){n.Ia.forEach(((e,t)=>{Tw(n,e)}))}async function V9(n,e){ek(n),Nw(n)?(n.Ra.ha(e),Aw(n)):n.Ra.set("Unknown")}async function B9(n,e,t){if(n.Ra.set("Online"),e instanceof hP&&e.state===2&&e.cause)try{await(async function(i,s){const a=s.cause;for(const c of s.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,a),i.Ia.delete(c),i.Va.removeTarget(c))})(n,e)}catch(r){st(gh,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await wv(n,r)}else if(e instanceof By?n.Va.Ze(e):e instanceof dP?n.Va.st(e):n.Va.tt(e),!t.isEqual(Vt.min()))try{const r=await qP(n.localStore);t.compareTo(r)>=0&&await(function(s,a){const c=s.Va.Tt(a);return c.targetChanges.forEach(((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const p=s.Ia.get(d);p&&s.Ia.set(d,p.withResumeToken(u.resumeToken,a))}})),c.targetMismatches.forEach(((u,d)=>{const p=s.Ia.get(u);if(!p)return;s.Ia.set(u,p.withResumeToken(fi.EMPTY_BYTE_STRING,p.snapshotVersion)),ZP(s,u);const g=new Mc(p.target,u,d,p.sequenceNumber);Tw(s,g)})),s.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(r){st(gh,"Failed to raise snapshot:",r),await wv(n,r)}}async function wv(n,e,t){if(!md(e))throw e;n.Ea.add(1),await Dp(n),n.Ra.set("Offline"),t||(t=()=>qP(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{st(gh,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await d0(n)}))}function tk(n,e){return e().catch((t=>wv(n,t,e)))}async function Lp(n){const e=yt(n),t=ad(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Qu;for(;q9(e);)try{const i=await T9(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,G9(e,i)}catch(i){await wv(e,i)}nk(e)&&rk(e)}function q9(n){return yd(n)&&n.Ta.length<10}function G9(n,e){n.Ta.push(e);const t=ad(n);t.O_()&&t.X_&&t.ea(e.mutations)}function nk(n){return yd(n)&&!ad(n).x_()&&n.Ta.length>0}function rk(n){ad(n).start()}async function H9(n){ad(n).ra()}async function z9(n){const e=ad(n);for(const t of n.Ta)e.ea(t.mutations)}async function $9(n,e,t){const r=n.Ta.shift(),i=cw.from(r,e,t);await tk(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await Lp(n)}async function Y9(n,e){e&&ad(n).X_&&await(async function(r,i){if((function(a){return lP(a)&&a!==Be.ABORTED})(i.code)){const s=r.Ta.shift();ad(r).B_(),await tk(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),await Lp(r)}})(n,e),nk(n)&&rk(n)}async function KN(n,e){const t=yt(n);t.asyncQueue.verifyOperationInProgress(),st(gh,"RemoteStore received new credentials");const r=yd(t);t.Ea.add(3),await Dp(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await d0(t)}async function Pb(n,e){const t=yt(n);e?(t.Ea.delete(2),await d0(t)):e||(t.Ea.add(2),await Dp(t),t.Ra.set("Unknown"))}function Mp(n){return n.ma||(n.ma=(function(t,r,i){const s=yt(t);return s.sa(),new k9(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:U9.bind(null,n),t_:j9.bind(null,n),r_:V9.bind(null,n),H_:B9.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Nw(n)?Aw(n):n.Ra.set("Unknown")):(await n.ma.stop(),ek(n))}))),n.ma}function ad(n){return n.fa||(n.fa=(function(t,r,i){const s=yt(t);return s.sa(),new D9(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:H9.bind(null,n),r_:Y9.bind(null,n),ta:z9.bind(null,n),na:$9.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Lp(n)):(await n.fa.stop(),n.Ta.length>0&&(st(gh,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Os,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,c=new Sw(e,t,a,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new nt(Be.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Op(n,e){if(Ti("AsyncQueue",`${e}: ${n}`),md(n))return new nt(Be.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{static emptySet(e){return new jf(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||pt.comparator(t.key,r.key):(t,r)=>pt.comparator(t.key,r.key),this.keyedMap=Vm(),this.sortedSet=new Ir(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof jf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new jf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(){this.ga=new Ir(pt.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Et(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class gp{constructor(e,t,r,i,s,a,c,u,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){const a=[];return t.forEach((c=>{a.push({type:0,doc:c})})),new gp(e,t,jf.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&s0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W9{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class K9{constructor(){this.queries=QN(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=yt(t),s=i.queries;i.queries=QN(),s.forEach(((a,c)=>{for(const u of c.Sa)u.onError(r)}))})(this,new nt(Be.ABORTED,"Firestore shutting down"))}}function QN(){return new eu((n=>W3(n)),s0)}async function Iw(n,e){const t=yt(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new W9,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const c=Op(a,`Initialization of query '${Af(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&Rw(t)}async function Cw(n,e){const t=yt(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function J9(n,e){const t=yt(n);let r=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const c of a.Sa)c.Fa(i)&&(r=!0);a.wa=i}}r&&Rw(t)}function Q9(n,e,t){const r=yt(n),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(t);r.queries.delete(e)}function Rw(n){n.Ca.forEach((e=>{e.next()}))}var kb,XN;(XN=kb||(kb={})).Ma="default",XN.Cache="cache";class Pw{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new gp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=gp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==kb.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X9{constructor(e,t){this.Qa=e,this.byteLength=t}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e){this.serializer=e}$s(e){return Zl(this.serializer,e)}Us(e){return e.metadata.exists?vP(this.serializer,e.document,!1):Mr.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return Ai(e)}}class Z9{constructor(e,t){this.Ua=e,this.serializer=t,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=ik(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++t;const r=Cn.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,{...this.progress}):null}za(e){const t=new Map,r=new ZN(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.$s(i.metadata.name);for(const a of i.metadata.queries){const c=(t.get(a)||yn()).add(s);t.set(a,c)}}return t}async ja(e){const t=await A9(e,new ZN(this.serializer),this.Wa,this.Ua.id),r=this.za(this.documents);for(const i of this.Ka)await N9(e,i,r.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:t}}}function ik(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e){this.key=e}}class ok{constructor(e){this.key=e}}class ak{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=yn(),this.mutatedKeys=yn(),this.eu=J3(e),this.tu=new jf(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new JN,i=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((p,g)=>{const _=i.get(p),w=o0(this.query,g)?g:null,P=!!_&&this.mutatedKeys.has(_.key),O=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let L=!1;_&&w?_.data.isEqual(w.data)?P!==O&&(r.track({type:3,doc:w}),L=!0):this.su(_,w)||(r.track({type:2,doc:w}),L=!0,(u&&this.eu(w,u)>0||d&&this.eu(w,d)<0)&&(c=!0)):!_&&w?(r.track({type:0,doc:w}),L=!0):_&&!w&&(r.track({type:1,doc:_}),L=!0,(u||d)&&(c=!0)),L&&(w?(a=a.add(w),s=O?s.add(p):s.delete(p)):(a=a.delete(p),s=s.delete(p)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{tu:a,iu:r,Cs:c,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort(((p,g)=>(function(w,P){const O=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Et(20277,{Rt:L})}};return O(w)-O(P)})(p.type,g.type)||this.eu(p.doc,g.doc))),this.ou(r),i=i??!1;const c=t&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,d=u!==this.Za;return this.Za=u,a.length!==0||d?{snapshot:new gp(this.query,e.tu,s,a,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new JN,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=yn(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new ok(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new sk(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=yn();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return gp.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const vd="SyncEngine";class eq{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class tq{constructor(e){this.key=e,this.hu=!1}}class nq{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new eu((c=>W3(c)),s0),this.Iu=new Map,this.Eu=new Set,this.du=new Ir(pt.comparator),this.Au=new Map,this.Ru=new gw,this.Vu={},this.mu=new Map,this.fu=mh.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function rq(n,e,t=!0){const r=h1(n);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await lk(r,e,t,!0),i}async function iq(n,e){const t=h1(n);await lk(t,e,!0,!1)}async function lk(n,e,t,r){const i=await fp(n.localStore,yo(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t);let c;return r&&(c=await kw(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&d1(n.remoteStore,i),c}async function kw(n,e,t,r,i){n.pu=(g,_,w)=>(async function(O,L,B,K){let W=L.view.ru(B);W.Cs&&(W=await _v(O.localStore,L.query,!1).then((({documents:U})=>L.view.ru(U,W))));const J=K&&K.targetChanges.get(L.targetId),ae=K&&K.targetMismatches.get(L.targetId)!=null,le=L.view.applyChanges(W,O.isPrimaryClient,J,ae);return Db(O,L.targetId,le.au),le.snapshot})(n,g,_,w);const s=await _v(n.localStore,e,!0),a=new ak(e,s.Qs),c=a.ru(s.documents),u=c0.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=a.applyChanges(c,n.isPrimaryClient,u);Db(n,t,d.au);const p=new eq(e,t,a);return n.Tu.set(e,p),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),d.snapshot}async function sq(n,e,t){const r=yt(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter((a=>!s0(a,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await pp(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&mp(r.remoteStore,i.targetId),yp(r,i.targetId)})).catch(pd)):(yp(r,i.targetId),await pp(r.localStore,i.targetId,!0))}async function oq(n,e){const t=yt(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),mp(t.remoteStore,r.targetId))}async function aq(n,e,t){const r=Ow(n);try{const i=await(function(a,c){const u=yt(a),d=nr.now(),p=c.reduce(((w,P)=>w.add(P.key)),yn());let g,_;return u.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let P=Ho(),O=yn();return u.Ns.getEntries(w,p).next((L=>{P=L,P.forEach(((B,K)=>{K.isValidDocument()||(O=O.add(B))}))})).next((()=>u.localDocuments.getOverlayedDocuments(w,P))).next((L=>{g=L;const B=[];for(const K of c){const W=CB(K,g.get(K.key).overlayedDocument);W!=null&&B.push(new tu(K.key,W,j3(W.value.mapValue),Yr.exists(!0)))}return u.mutationQueue.addMutationBatch(w,d,B,c)})).next((L=>{_=L;const B=L.applyToLocalDocumentSet(g,O);return u.documentOverlayCache.saveOverlays(w,L.batchId,B)}))})).then((()=>({batchId:_.batchId,changes:X3(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(a,c,u){let d=a.Vu[a.currentUser.toKey()];d||(d=new Ir(hn)),d=d.insert(c,u),a.Vu[a.currentUser.toKey()]=d})(r,i.batchId,t),await nu(r,i.changes),await Lp(r.remoteStore)}catch(i){const s=Op(i,"Failed to persist write");t.reject(s)}}async function ck(n,e){const t=yt(n);try{const r=await E9(t.localStore,e);e.targetChanges.forEach(((i,s)=>{const a=t.Au.get(s);a&&(Lt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?Lt(a.hu,14607):i.removedDocuments.size>0&&(Lt(a.hu,42227),a.hu=!1))})),await nu(t,r,e)}catch(r){await pd(r)}}function eS(n,e,t){const r=yt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((s,a)=>{const c=a.view.va(e);c.snapshot&&i.push(c.snapshot)})),(function(a,c){const u=yt(a);u.onlineState=c;let d=!1;u.queries.forEach(((p,g)=>{for(const _ of g.Sa)_.va(c)&&(d=!0)})),d&&Rw(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function lq(n,e,t){const r=yt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),s=i&&i.key;if(s){let a=new Ir(pt.comparator);a=a.insert(s,Mr.newNoDocument(s,Vt.min()));const c=yn().add(s),u=new l0(Vt.min(),new Map,new Ir(hn),a,c);await ck(r,u),r.du=r.du.remove(s),r.Au.delete(e),Mw(r)}else await pp(r.localStore,e,!1).then((()=>yp(r,e,t))).catch(pd)}async function cq(n,e){const t=yt(n),r=e.batch.batchId;try{const i=await w9(t.localStore,e);Lw(t,r,null),Dw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await nu(t,i)}catch(i){await pd(i)}}async function uq(n,e,t){const r=yt(n);try{const i=await(function(a,c){const u=yt(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let p;return u.mutationQueue.lookupMutationBatch(d,c).next((g=>(Lt(g!==null,37113),p=g.keys(),u.mutationQueue.removeMutationBatch(d,g)))).next((()=>u.mutationQueue.performConsistencyCheck(d))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(d,p,c))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p))).next((()=>u.localDocuments.getDocuments(d,p)))}))})(r.localStore,e);Lw(r,e,t),Dw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await nu(r,i)}catch(i){await pd(i)}}async function dq(n,e){const t=yt(n);yd(t.remoteStore)||st(vd,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(a){const c=yt(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(u=>c.mutationQueue.getHighestUnacknowledgedBatchId(u)))})(t.localStore);if(r===Qu)return void e.resolve();const i=t.mu.get(r)||[];i.push(e),t.mu.set(r,i)}catch(r){const i=Op(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function Dw(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Lw(n,e,t){const r=yt(n);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function yp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||uk(n,r)}))}function uk(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(mp(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Mw(n))}function Db(n,e,t){for(const r of t)r instanceof sk?(n.Ru.addReference(r.key,e),hq(n,r)):r instanceof ok?(st(vd,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||uk(n,r.key)):Et(19791,{wu:r})}function hq(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(st(vd,"New document in limbo: "+t),n.Eu.add(r),Mw(n))}function Mw(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new pt(Cn.fromString(e)),r=n.fu.next();n.Au.set(r,new tq(t)),n.du=n.du.insert(t,r),d1(n.remoteStore,new Mc(yo(Rp(t.path)),r,"TargetPurposeLimboResolution",qo.ce))}}async function nu(n,e,t){const r=yt(n),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,u)=>{a.push(r.pu(u,e,t).then((d=>{var p;if((d||t)&&r.isPrimaryClient){const g=d?!d.fromCache:(p=t==null?void 0:t.targetChanges.get(u.targetId))==null?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(d){i.push(d);const g=bw.As(u.targetId,d);s.push(g)}})))})),await Promise.all(a),r.Pu.H_(i),await(async function(u,d){const p=yt(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>Le.forEach(d,(_=>Le.forEach(_.Es,(w=>p.persistence.referenceDelegate.addReference(g,_.targetId,w))).next((()=>Le.forEach(_.ds,(w=>p.persistence.referenceDelegate.removeReference(g,_.targetId,w)))))))))}catch(g){if(!md(g))throw g;st(xw,"Failed to update sequence numbers: "+g)}for(const g of d){const _=g.targetId;if(!g.fromCache){const w=p.Ms.get(_),P=w.snapshotVersion,O=w.withLastLimboFreeSnapshotVersion(P);p.Ms=p.Ms.insert(_,O)}}})(r.localStore,s))}async function fq(n,e){const t=yt(n);if(!t.currentUser.isEqual(e)){st(vd,"User change. New user:",e.toKey());const r=await BP(t.localStore,e);t.currentUser=e,(function(s,a){s.mu.forEach((c=>{c.forEach((u=>{u.reject(new nt(Be.CANCELLED,a))}))})),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await nu(t,r.Ls)}}function pq(n,e){const t=yt(n),r=t.Au.get(e);if(r&&r.hu)return yn().add(r.key);{let i=yn();const s=t.Iu.get(e);if(!s)return i;for(const a of s){const c=t.Tu.get(a);i=i.unionWith(c.view.nu)}return i}}async function mq(n,e){const t=yt(n),r=await _v(t.localStore,e.query,!0),i=e.view.cu(r);return t.isPrimaryClient&&Db(t,e.targetId,i.au),i}async function gq(n,e){const t=yt(n);return zP(t.localStore,e).then((r=>nu(t,r)))}async function yq(n,e,t,r){const i=yt(n),s=await(function(c,u){const d=yt(c),p=yt(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",(g=>p.er(g,u).next((_=>_?d.localDocuments.getDocuments(g,_):Le.resolve(null)))))})(i.localStore,e);s!==null?(t==="pending"?await Lp(i.remoteStore):t==="acknowledged"||t==="rejected"?(Lw(i,e,r||null),Dw(i,e),(function(c,u){yt(yt(c).mutationQueue).ir(u)})(i.localStore,e)):Et(6720,"Unknown batchState",{Su:t}),await nu(i,s)):st(vd,"Cannot apply mutation batch with id: "+e)}async function vq(n,e){const t=yt(n);if(h1(t),Ow(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),i=await tS(t,r.toArray());t.gu=!0,await Pb(t.remoteStore,!0);for(const s of i)d1(t.remoteStore,s)}else if(e===!1&&t.gu!==!1){const r=[];let i=Promise.resolve();t.Iu.forEach(((s,a)=>{t.sharedClientState.isLocalQueryTarget(a)?r.push(a):i=i.then((()=>(yp(t,a),pp(t.localStore,a,!0)))),mp(t.remoteStore,a)})),await i,await tS(t,r),(function(a){const c=yt(a);c.Au.forEach(((u,d)=>{mp(c.remoteStore,d)})),c.Ru.Jr(),c.Au=new Map,c.du=new Ir(pt.comparator)})(t),t.gu=!1,await Pb(t.remoteStore,!1)}}async function tS(n,e,t){const r=yt(n),i=[],s=[];for(const a of e){let c;const u=r.Iu.get(a);if(u&&u.length!==0){c=await fp(r.localStore,yo(u[0]));for(const d of u){const p=r.Tu.get(d),g=await mq(r,p);g.snapshot&&s.push(g.snapshot)}}else{const d=await HP(r.localStore,a);c=await fp(r.localStore,d),await kw(r,dk(d),a,!1,c.resumeToken)}i.push(c)}return r.Pu.H_(s),i}function dk(n){return Y3(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function _q(n){return(function(t){return yt(yt(t).persistence).Ts()})(yt(n).localStore)}async function bq(n,e,t,r){const i=yt(n);if(i.gu)return void st(vd,"Ignoring unexpected query state notification.");const s=i.Iu.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const a=await zP(i.localStore,K3(s[0])),c=l0.createSynthesizedRemoteEventForCurrentChange(e,t==="current",fi.EMPTY_BYTE_STRING);await nu(i,a,c);break}case"rejected":await pp(i.localStore,e,!0),yp(i,e,r);break;default:Et(64155,t)}}async function xq(n,e,t){const r=h1(n);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){st(vd,"Adding an already active target "+i);continue}const s=await HP(r.localStore,i),a=await fp(r.localStore,s);await kw(r,dk(s),a.targetId,!1,a.resumeToken),d1(r.remoteStore,a)}for(const i of t)r.Iu.has(i)&&await pp(r.localStore,i,!1).then((()=>{mp(r.remoteStore,i),yp(r,i)})).catch(pd)}}function h1(n){const e=yt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ck.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lq.bind(null,e),e.Pu.H_=J9.bind(null,e.eventManager),e.Pu.yu=Q9.bind(null,e.eventManager),e}function Ow(n){const e=yt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uq.bind(null,e),e}function wq(n,e,t){const r=yt(n);(async function(s,a,c){try{const u=await a.getMetadata();if(await(function(w,P){const O=yt(w),L=Ai(P.createTime);return O.persistence.runTransaction("hasNewerBundle","readonly",(B=>O.Ii.getBundleMetadata(B,P.id))).then((B=>!!B&&B.createTime.compareTo(L)>=0))})(s.localStore,u))return await a.close(),c._completeWith((function(w){return{taskState:"Success",documentsLoaded:w.totalDocuments,bytesLoaded:w.totalBytes,totalDocuments:w.totalDocuments,totalBytes:w.totalBytes}})(u)),Promise.resolve(new Set);c._updateProgress(ik(u));const d=new Z9(u,a.serializer);let p=await a.bu();for(;p;){const _=await d.Ga(p);_&&c._updateProgress(_),p=await a.bu()}const g=await d.ja(s.localStore);return await nu(s,g.Ha,void 0),await(function(w,P){const O=yt(w);return O.persistence.runTransaction("Save bundle","readwrite",(L=>O.Ii.saveBundleMetadata(L,P)))})(s.localStore,u),c._completeWith(g.progress),Promise.resolve(g.Ja)}catch(u){return nc(vd,`Loading bundle failed with ${u}`),c._failWith(u),Promise.resolve(new Set)}})(r,e,t).then((i=>{r.sharedClientState.notifyBundleLoaded(i)}))}class Dg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=u0(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return VP(this.persistence,new jP,e.initialUser,this.serializer)}Cu(e){return new yw(u1.mi,this.serializer)}Du(e){return new JP}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Dg.provider={build:()=>new Dg};class Eq extends Dg{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Lt(this.persistence.referenceDelegate instanceof vv,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new DP(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Xs.withCacheSize(this.cacheSizeBytes):Xs.DEFAULT;return new yw((r=>vv.mi(r,t)),this.serializer)}}class hk extends Dg{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Ow(this.xu.syncEngine),await Lp(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return VP(this.persistence,new jP,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new DP(r,e.asyncQueue,t)}Mu(e,t){const r=new kV(t,this.persistence);return new PV(e.asyncQueue,r)}Cu(e){const t=_w(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Xs.withCacheSize(this.cacheSizeBytes):Xs.DEFAULT;return new vw(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,QP(),Gy(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new JP}}class Tq extends hk{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof v2&&(this.sharedClientState.syncEngine={Co:yq.bind(null,t),vo:bq.bind(null,t),Fo:xq.bind(null,t),Ts:_q.bind(null,t),Do:gq.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await vq(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const t=QP();if(!v2.v(t))throw new nt(Be.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=_w(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new v2(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Lg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>eS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=fq.bind(null,this.syncEngine),await Pb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new K9})()}createDatastore(e){const t=u0(e.databaseInfo.databaseId),r=(function(s){return new P9(s)})(e.databaseInfo);return(function(s,a,c,u){return new M9(s,a,c,u)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,s,a,c){return new F9(r,i,s,a,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>eS(this.syncEngine,t,0)),(function(){return YN.v()?new YN:new S9})())}createSyncEngine(e,t){return(function(i,s,a,c,u,d,p){const g=new nq(i,s,a,c,u,d);return p&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(i){const s=yt(i);st(gh,"RemoteStore shutting down."),s.Ea.add(5),await Dp(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Lg.provider={build:()=>new Lg};function nS(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ti("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aq{constructor(e,t){this.Bu=e,this.serializer=t,this.metadata=new Os,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((r=>{r&&r.$a()?this.metadata.resolve(r.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Qa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const t=this.Lu.decode(e),r=Number(t);isNaN(r)&&this.Qu(`length string (${t}) is not valid number`);const i=await this.$u(r);return new X9(JSON.parse(i),e.length+r)}Uu(){return this.buffer.findIndex((e=>e===123))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const t=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nq{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new nt(Be.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(i,s){const a=yt(i),c={documents:s.map((g=>Pg(a.serializer,g)))},u=await a.Ho("BatchGetDocuments",a.serializer.databaseId,Cn.emptyPath(),c,s.length),d=new Map;u.forEach((g=>{const _=UB(a.serializer,g);d.set(_.key.toString(),_)}));const p=[];return s.forEach((g=>{const _=d.get(g.toString());Lt(!!_,55234,{key:g}),p.push(_)})),p})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new kp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const i=pt.fromPath(r);this.mutations.push(new aw(i,this.precondition(i)))})),await(async function(r,i){const s=yt(r),a={writes:i.map((c=>kg(s.serializer,c)))};await s.Go("Commit",s.serializer.databaseId,Cn.emptyPath(),a)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Et(50498,{Gu:e.constructor.name});t=Vt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new nt(Be.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Vt.min())?Yr.exists(!1):Yr.updateTime(t):Yr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Vt.min()))throw new nt(Be.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Yr.updateTime(t)}return Yr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sq{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.zu=r.maxAttempts,this.M_=new Ew(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new Nq(this.datastore),t=this.Hu(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((i=>{this.Yu(i)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const t=this.updateFunction(e);return!n0(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!lP(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ld="FirestoreClient";class Iq{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ms.UNAUTHENTICATED,this.clientId=Yx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async a=>{st(ld,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(st(ld,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Os;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Op(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function b2(n,e){n.asyncQueue.verifyOperationInProgress(),st(ld,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await BP(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function rS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Fw(n);st(ld,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>KN(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>KN(e.remoteStore,i))),n._onlineComponents=e}async function Fw(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){st(ld,"Using user provided OfflineComponentProvider");try{await b2(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Be.FAILED_PRECONDITION||i.code===Be.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;nc("Error using user provided cache. Falling back to memory cache: "+t),await b2(n,new Dg)}}else st(ld,"Using default OfflineComponentProvider"),await b2(n,new Eq(void 0));return n._offlineComponents}async function p1(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(st(ld,"Using user provided OnlineComponentProvider"),await rS(n,n._uninitializedComponentsProvider._online)):(st(ld,"Using default OnlineComponentProvider"),await rS(n,new Lg))),n._onlineComponents}function fk(n){return Fw(n).then((e=>e.persistence))}function Uw(n){return Fw(n).then((e=>e.localStore))}function pk(n){return p1(n).then((e=>e.remoteStore))}function jw(n){return p1(n).then((e=>e.syncEngine))}function Cq(n){return p1(n).then((e=>e.datastore))}async function vp(n){const e=await p1(n),t=e.eventManager;return t.onListen=rq.bind(null,e.syncEngine),t.onUnlisten=sq.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=iq.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=oq.bind(null,e.syncEngine),t}function Rq(n){return n.asyncQueue.enqueue((async()=>{const e=await fk(n),t=await pk(n);return e.setNetworkEnabled(!0),(function(i){const s=yt(i);return s.Ea.delete(0),d0(s)})(t)}))}function Pq(n){return n.asyncQueue.enqueue((async()=>{const e=await fk(n),t=await pk(n);return e.setNetworkEnabled(!1),(async function(i){const s=yt(i);s.Ea.add(0),await Dp(s),s.Ra.set("Offline")})(t)}))}function kq(n,e){const t=new Os;return n.asyncQueue.enqueueAndForget((async()=>(async function(i,s,a){try{const c=await(function(d,p){const g=yt(d);return g.persistence.runTransaction("read document","readonly",(_=>g.localDocuments.getDocument(_,p)))})(i,s);c.isFoundDocument()?a.resolve(c):c.isNoDocument()?a.resolve(null):a.reject(new nt(Be.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const u=Op(c,`Failed to get document '${s} from cache`);a.reject(u)}})(await Uw(n),e,t))),t.promise}function mk(n,e,t={}){const r=new Os;return n.asyncQueue.enqueueAndForget((async()=>(function(s,a,c,u,d){const p=new f1({next:_=>{p.Nu(),a.enqueueAndForget((()=>Cw(s,g)));const w=_.docs.has(c);!w&&_.fromCache?d.reject(new nt(Be.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&_.fromCache&&u&&u.source==="server"?d.reject(new nt(Be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new Pw(Rp(c.path),p,{includeMetadataChanges:!0,qa:!0});return Iw(s,g)})(await vp(n),n.asyncQueue,e,t,r))),r.promise}function Dq(n,e){const t=new Os;return n.asyncQueue.enqueueAndForget((async()=>(async function(i,s,a){try{const c=await _v(i,s,!0),u=new ak(s,c.Qs),d=u.ru(c.documents),p=u.applyChanges(d,!1);a.resolve(p.snapshot)}catch(c){const u=Op(c,`Failed to execute query '${s} against cache`);a.reject(u)}})(await Uw(n),e,t))),t.promise}function gk(n,e,t={}){const r=new Os;return n.asyncQueue.enqueueAndForget((async()=>(function(s,a,c,u,d){const p=new f1({next:_=>{p.Nu(),a.enqueueAndForget((()=>Cw(s,g))),_.fromCache&&u.source==="server"?d.reject(new nt(Be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new Pw(c,p,{includeMetadataChanges:!0,qa:!0});return Iw(s,g)})(await vp(n),n.asyncQueue,e,t,r))),r.promise}function Lq(n,e){const t=new f1(e);return n.asyncQueue.enqueueAndForget((async()=>(function(i,s){yt(i).Ca.add(s),s.next()})(await vp(n),t))),()=>{t.Nu(),n.asyncQueue.enqueueAndForget((async()=>(function(i,s){yt(i).Ca.delete(s)})(await vp(n),t)))}}function Mq(n,e,t,r){const i=(function(a,c){let u;return u=typeof a=="string"?uP().encode(a):a,(function(p,g){return new Aq(p,g)})((function(p,g){if(p instanceof Uint8Array)return nS(p,g);if(p instanceof ArrayBuffer)return nS(new Uint8Array(p),g);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(u),c)})(t,u0(e));n.asyncQueue.enqueueAndForget((async()=>{wq(await jw(n),i,r)}))}function Oq(n,e){return n.asyncQueue.enqueue((async()=>(function(r,i){const s=yt(r);return s.persistence.runTransaction("Get named query","readonly",(a=>s.Ii.getNamedQuery(a,i)))})(await Uw(n),e)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk="firestore.googleapis.com",sS=!0;class oS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new nt(Be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=vk,this.ssl=sS}else this.host=e.host,this.ssl=e.ssl??sS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=CP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<r9)throw new nt(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}d3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yk(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new nt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new nt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new nt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class h0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new nt(Be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new nt(Be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new _V;switch(r.type){case"firstParty":return new EV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new nt(Be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=iS.get(t);r&&(st("ComponentProvider","Removing Datastore"),iS.delete(t),r.terminate())})(this),Promise.resolve()}}function Fq(n,e,t,r={}){var d;n=Kn(n,h0);const i=Tp(e),s=n._getSettings(),a={...s,emulatorOptions:n._getEmulatorOptions()},c=`${e}:${t}`;i&&(FR(`https://${c}`),UR("Firestore",!0)),s.host!==vk&&s.host!==c&&nc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:c,ssl:i,emulatorOptions:r};if(!Zu(u,a)&&(n._setSettings(u),r.mockUserToken)){let p,g;if(typeof r.mockUserToken=="string")p=r.mockUserToken,g=ms.MOCK_USER;else{p=L8(r.mockUserToken,(d=n._app)==null?void 0:d.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new nt(Be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new ms(_)}n._authCredentials=new bV(new c3(p,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _o=class _k{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new _k(this.firestore,e,this._query)}},Sr=class Gm{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gm(this.firestore,e,this._key)}toJSON(){return{type:Gm._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(t0(t,Gm._jsonSchema))return new Gm(e,r||null,new pt(Cn.fromString(t.referencePath)))}};Sr._jsonSchemaVersion="firestore/documentReference/1.0",Sr._jsonSchema={type:Ui("string",Sr._jsonSchemaVersion),referencePath:Ui("string")};let Xu=class bk extends _o{constructor(e,t,r){super(e,t,Rp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Sr(this.firestore,null,new pt(e))}withConverter(e){return new bk(this.firestore,e,this._path)}};function xk(n,e,...t){if(n=Wt(n),Wx("collection","path",e),n instanceof h0){const r=Cn.fromString(e,...t);return WA(r),new Xu(n,null,r)}{if(!(n instanceof Sr||n instanceof Xu))throw new nt(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Cn.fromString(e,...t));return WA(r),new Xu(n.firestore,null,r)}}function Uq(n,e){if(n=Kn(n,h0),Wx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new nt(Be.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new _o(n,null,(function(r){return new Zc(Cn.emptyPath(),r)})(e))}function Ev(n,e,...t){if(n=Wt(n),arguments.length===1&&(e=Yx.newId()),Wx("doc","path",e),n instanceof h0){const r=Cn.fromString(e,...t);return YA(r),new Sr(n,null,new pt(r))}{if(!(n instanceof Sr||n instanceof Xu))throw new nt(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Cn.fromString(e,...t));return YA(r),new Sr(n.firestore,n instanceof Xu?n.converter:null,new pt(r))}}function wk(n,e){return n=Wt(n),e=Wt(e),(n instanceof Sr||n instanceof Xu)&&(e instanceof Sr||e instanceof Xu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Ek(n,e){return n=Wt(n),e=Wt(e),n instanceof _o&&e instanceof _o&&n.firestore===e.firestore&&s0(n._query,e._query)&&n.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS="AsyncQueue";class lS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ew(this,"async_queue_retry"),this._c=()=>{const r=Gy();r&&st(aS,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Gy();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Gy();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Os;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!md(e))throw e;st(aS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ti("INTERNAL UNHANDLED ERROR: ",cS(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=Sw.createAndSchedule(this,e,t,r,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&Et(47125,{Pc:cS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function cS(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(n,["next","error","complete"])}class jq{constructor(){this._progressObserver={},this._taskCompletionResolver=new Os,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vq=-1;let Ni=class extends h0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new lS,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new lS(e),this._firestoreClient=void 0,await e}}};function no(n){if(n._terminated)throw new nt(Be.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Tk(n),n._firestoreClient}function Tk(n){var r,i,s;const e=n._freezeSettings(),t=(function(c,u,d,p){return new aB(c,u,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,yk(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Iq(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}})(n._componentsProvider))}function Bq(n,e){nc("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return Ak(n,Lg.provider,{build:r=>new hk(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function qq(n){nc("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();Ak(n,Lg.provider,{build:t=>new Tq(t,e.cacheSizeBytes)})}function Ak(n,e,t){if((n=Kn(n,Ni))._firestoreClient||n._terminated)throw new nt(Be.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new nt(Be.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},Tk(n)}function Gq(n){if(n._initialized&&!n._terminated)throw new nt(Be.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Os;return n._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!Xl.v())return Promise.resolve();const i=r+UP;await Xl.delete(i)})(_w(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function Hq(n){return(function(t){const r=new Os;return t.asyncQueue.enqueueAndForget((async()=>dq(await jw(t),r))),r.promise})(no(n=Kn(n,Ni)))}function zq(n){return Rq(no(n=Kn(n,Ni)))}function $q(n){return Pq(no(n=Kn(n,Ni)))}function Yq(n,e){const t=no(n=Kn(n,Ni)),r=new jq;return Mq(t,n._databaseId,e,r),r}function Wq(n,e){return Oq(no(n=Kn(n,Ni)),e).then((t=>t?new _o(n,null,t.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zs(fi.fromBase64String(e))}catch(t){throw new nt(Be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Zs(fi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Zs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(t0(e,Zs._jsonSchema))return Zs.fromBase64String(e.bytes)}}Zs._jsonSchemaVersion="firestore/bytes/1.0",Zs._jsonSchema={type:Ui("string",Zs._jsonSchemaVersion),bytes:Ui("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cd=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new nt(Be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $r(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Th=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new nt(Be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new nt(Be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return hn(this._lat,e._lat)||hn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ul._jsonSchemaVersion}}static fromJSON(e){if(t0(e,ul._jsonSchema))return new ul(e.latitude,e.longitude)}}ul._jsonSchemaVersion="firestore/geoPoint/1.0",ul._jsonSchema={type:Ui("string",ul._jsonSchemaVersion),latitude:Ui("number"),longitude:Ui("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ec._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(t0(e,ec._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ec(e.vectorValues);throw new nt(Be.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ec._jsonSchemaVersion="firestore/vectorValue/1.0",ec._jsonSchema={type:Ui("string",ec._jsonSchemaVersion),vectorValues:Ui("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kq=/^__.*__$/;class Jq{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new tu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pp(e,this.data,t,this.fieldTransforms)}}class Nk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new tu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Sk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Et(40011,{Ac:n})}}class m1{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new m1({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Tv(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Sk(this.Ac)&&Kq.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Qq{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||u0(e)}Cc(e,t,r,i=!1){return new m1({Ac:e,methodName:t,Dc:r,path:$r.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ah(n){const e=n._freezeSettings(),t=u0(n._databaseId);return new Qq(n._databaseId,!!e.ignoreUndefinedProperties,t)}function g1(n,e,t,r,i,s={}){const a=n.Cc(s.merge||s.mergeFields?2:0,e,t,i);$w("Data must be an object, but it was:",a,r);const c=Rk(r,a);let u,d;if(s.merge)u=new Go(a.fieldMask),d=a.fieldTransforms;else if(s.mergeFields){const p=[];for(const g of s.mergeFields){const _=Mb(e,g,t);if(!a.contains(_))throw new nt(Be.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);kk(p,_)||p.push(_)}u=new Go(p),d=a.fieldTransforms.filter((g=>u.covers(g.field)))}else u=null,d=a.fieldTransforms;return new Jq(new Ls(c),u,d)}class f0 extends Th{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof f0}}function Ik(n,e,t){return new m1({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Vw extends Th{_toFieldTransform(e){return new a0(e.path,new up)}isEqual(e){return e instanceof Vw}}class Bw extends Th{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=Ik(this,e,!0),r=this.vc.map((s=>Nh(s,t))),i=new dh(r);return new a0(e.path,i)}isEqual(e){return e instanceof Bw&&Zu(this.vc,e.vc)}}class qw extends Th{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=Ik(this,e,!0),r=this.vc.map((s=>Nh(s,t))),i=new hh(r);return new a0(e.path,i)}isEqual(e){return e instanceof qw&&Zu(this.vc,e.vc)}}class Gw extends Th{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new dp(e.serializer,tP(e.serializer,this.Fc));return new a0(e.path,t)}isEqual(e){return e instanceof Gw&&this.Fc===e.Fc}}function Hw(n,e,t,r){const i=n.Cc(1,e,t);$w("Data must be an object, but it was:",i,r);const s=[],a=Ls.empty();gd(r,((u,d)=>{const p=Yw(e,u,t);d=Wt(d);const g=i.yc(p);if(d instanceof f0)s.push(p);else{const _=Nh(d,g);_!=null&&(s.push(p),a.set(p,_))}}));const c=new Go(s);return new Nk(a,c,i.fieldTransforms)}function zw(n,e,t,r,i,s){const a=n.Cc(1,e,t),c=[Mb(e,r,t)],u=[i];if(s.length%2!=0)throw new nt(Be.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)c.push(Mb(e,s[_])),u.push(s[_+1]);const d=[],p=Ls.empty();for(let _=c.length-1;_>=0;--_)if(!kk(d,c[_])){const w=c[_];let P=u[_];P=Wt(P);const O=a.yc(w);if(P instanceof f0)d.push(w);else{const L=Nh(P,O);L!=null&&(d.push(w),p.set(w,L))}}const g=new Go(d);return new Nk(p,g,a.fieldTransforms)}function Ck(n,e,t,r=!1){return Nh(t,n.Cc(r?4:3,e))}function Nh(n,e){if(Pk(n=Wt(n)))return $w("Unsupported field value:",e,n),Rk(n,e);if(n instanceof Th)return(function(r,i){if(!Sk(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const s=[];let a=0;for(const c of r){let u=Nh(c,i.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=Wt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return tP(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=nr.fromDate(r);return{timestampValue:hp(i.serializer,s)}}if(r instanceof nr){const s=new nr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:hp(i.serializer,s)}}if(r instanceof ul)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Zs)return{bytesValue:fP(i.serializer,r._byteString)};if(r instanceof Sr){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:hw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ec)return(function(a,c){return{mapValue:{fields:{[tw]:{stringValue:nw},[ap]:{arrayValue:{values:a.toArray().map((d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return ow(c.serializer,d)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Xv(r)}`)})(n,e)}function Rk(n,e){const t={};return R3(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gd(n,((r,i)=>{const s=Nh(i,e.mc(r));s!=null&&(t[r]=s)})),{mapValue:{fields:t}}}function Pk(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof nr||n instanceof ul||n instanceof Zs||n instanceof Sr||n instanceof Th||n instanceof ec)}function $w(n,e,t){if(!Pk(t)||!h3(t)){const r=Xv(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function Mb(n,e,t){if((e=Wt(e))instanceof cd)return e._internalPath;if(typeof e=="string")return Yw(n,e);throw Tv("Field path arguments must be of type string or ",n,!1,void 0,t)}const Xq=new RegExp("[~\\*/\\[\\]]");function Yw(n,e,t){if(e.search(Xq)>=0)throw Tv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new cd(...e.split("."))._internalPath}catch{throw Tv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Tv(n,e,t,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${r}`),a&&(u+=` in document ${i}`),u+=")"),new nt(Be.INVALID_ARGUMENT,c+n+u)}function kk(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Sr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Zq(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(y1("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Zq extends Mg{data(){return super.data()}}function y1(n,e){return typeof e=="string"?Yw(n,e):e instanceof cd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new nt(Be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ww{}class p0 extends Ww{}function Uu(n,e,...t){let r=[];e instanceof Ww&&r.push(e),r=r.concat(t),(function(s){const a=s.filter((u=>u instanceof Kw)).length,c=s.filter((u=>u instanceof v1)).length;if(a>1||a>0&&c>0)throw new nt(Be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class v1 extends p0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new v1(e,t,r)}_apply(e){const t=this._parse(e);return Mk(e._query,t),new _o(e.firestore,e.converter,xb(e._query,t))}_parse(e){const t=Ah(e.firestore);return(function(s,a,c,u,d,p,g){let _;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new nt(Be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){dS(g,p);const P=[];for(const O of g)P.push(uS(u,s,O));_={arrayValue:{values:P}}}else _=uS(u,s,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||dS(g,p),_=Ck(c,a,g,p==="in"||p==="not-in");return Dn.create(d,p,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function eG(n,e,t){const r=e,i=y1("where",n);return v1._create(i,r,t)}class Kw extends Ww{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Kw(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:dr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let a=i;const c=s.getFlattenedFilters();for(const u of c)Mk(a,u),a=xb(a,u)})(e._query,t),new _o(e.firestore,e.converter,xb(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Jw extends p0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Jw(e,t)}_apply(e){const t=(function(i,s,a){if(i.startAt!==null)throw new nt(Be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new nt(Be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Rg(s,a)})(e._query,this._field,this._direction);return new _o(e.firestore,e.converter,(function(i,s){const a=i.explicitOrderBy.concat([s]);return new Zc(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function tG(n,e="asc"){const t=e,r=y1("orderBy",n);return Jw._create(r,t)}class _1 extends p0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new _1(e,t,r)}_apply(e){return new _o(e.firestore,e.converter,pv(e._query,this._limit,this._limitType))}}function nG(n){return f3("limit",n),_1._create("limit",n,"F")}function rG(n){return f3("limitToLast",n),_1._create("limitToLast",n,"L")}class b1 extends p0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new b1(e,t,r)}_apply(e){const t=Lk(e,this.type,this._docOrFields,this._inclusive);return new _o(e.firestore,e.converter,(function(i,s){return new Zc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)})(e._query,t))}}function iG(...n){return b1._create("startAt",n,!0)}function sG(...n){return b1._create("startAfter",n,!1)}class x1 extends p0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new x1(e,t,r)}_apply(e){const t=Lk(e,this.type,this._docOrFields,this._inclusive);return new _o(e.firestore,e.converter,(function(i,s){return new Zc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)})(e._query,t))}}function oG(...n){return x1._create("endBefore",n,!1)}function aG(...n){return x1._create("endAt",n,!0)}function Lk(n,e,t,r){if(t[0]=Wt(t[0]),t[0]instanceof Mg)return(function(s,a,c,u,d){if(!u)throw new nt(Be.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const p=[];for(const g of Uf(s))if(g.field.isKeyField())p.push(ch(a,u.key));else{const _=u.data.field(g.field);if(r1(_))throw new nt(Be.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(_===null){const w=g.field.canonicalString();throw new nt(Be.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${w}' (used as the orderBy) does not exist.`)}p.push(_)}return new od(p,d)})(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Ah(n.firestore);return(function(a,c,u,d,p,g){const _=a.explicitOrderBy;if(p.length>_.length)throw new nt(Be.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const w=[];for(let P=0;P<p.length;P++){const O=p[P];if(_[P].field.isKeyField()){if(typeof O!="string")throw new nt(Be.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof O}`);if(!iw(a)&&O.indexOf("/")!==-1)throw new nt(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${O}' contains a slash.`);const L=a.path.child(Cn.fromString(O));if(!pt.isDocumentKey(L))throw new nt(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${L}' is not because it contains an odd number of segments.`);const B=new pt(L);w.push(ch(c,B))}else{const L=Ck(u,d,O);w.push(L)}}return new od(w,g)})(n._query,n.firestore._databaseId,i,e,t,r)}}function uS(n,e,t){if(typeof(t=Wt(t))=="string"){if(t==="")throw new nt(Be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iw(e)&&t.indexOf("/")!==-1)throw new nt(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Cn.fromString(t));if(!pt.isDocumentKey(r))throw new nt(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ch(n,new pt(r))}if(t instanceof Sr)return ch(n,t._key);throw new nt(Be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xv(t)}.`)}function dS(n,e){if(!Array.isArray(n)||n.length===0)throw new nt(Be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Mk(n,e){const t=(function(i,s){for(const a of i)for(const c of a.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new nt(Be.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new nt(Be.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Qw{convertValue(e,t="none"){switch(id(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Hr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Hc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Et(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return gd(e,((i,s)=>{r[i]=this.convertValue(s,t)})),r}convertVectorValue(e){var r,i,s;const t=(s=(i=(r=e.fields)==null?void 0:r[ap].arrayValue)==null?void 0:i.values)==null?void 0:s.map((a=>Hr(a.doubleValue)));return new ec(t)}convertGeoPoint(e){return new ul(Hr(e.latitude),Hr(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=i1(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Sg(e));default:return null}}convertTimestamp(e){const t=Gc(e);return new nr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Cn.fromString(e);Lt(TP(r),9688,{name:e});const i=new rd(r.get(1),r.get(3)),s=new pt(r.popFirst(5));return i.isEqual(t)||Ti(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class lG extends Qw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Sr(this.firestore,null,t)}}class Jd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Ma=class Ok extends Mg{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new og(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(y1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new nt(Be.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ok._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Ma._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ma._jsonSchema={type:Ui("string",Ma._jsonSchemaVersion),bundleSource:Ui("string","DocumentSnapshot"),bundleName:Ui("string"),bundle:Ui("string")};let og=class extends Ma{data(e={}){return super.data(e)}},dl=class Fk{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Jd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new og(this._firestore,this._userDataWriter,r.key,r,new Jd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new nt(Be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map((c=>{const u=new og(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Jd(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}}))}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((c=>s||c.type!==3)).map((c=>{const u=new og(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Jd(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,p=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),p=a.indexOf(c.doc.key)),{type:cG(c.type),doc:u,oldIndex:d,newIndex:p}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new nt(Be.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fk._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Yx.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function cG(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Et(61501,{type:n})}}function Uk(n,e){return n instanceof Ma&&e instanceof Ma?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof dl&&e instanceof dl&&n._firestore===e._firestore&&Ek(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uG(n){n=Kn(n,Sr);const e=Kn(n.firestore,Ni);return mk(no(e),n._key).then((t=>Xw(e,n,t)))}dl._jsonSchemaVersion="firestore/querySnapshot/1.0",dl._jsonSchema={type:Ui("string",dl._jsonSchemaVersion),bundleSource:Ui("string","QuerySnapshot"),bundleName:Ui("string"),bundle:Ui("string")};class Sh extends Qw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Sr(this.firestore,null,t)}}function dG(n){n=Kn(n,Sr);const e=Kn(n.firestore,Ni),t=no(e),r=new Sh(e);return kq(t,n._key).then((i=>new Ma(e,r,n._key,i,new Jd(i!==null&&i.hasLocalMutations,!0),n.converter)))}function hG(n){n=Kn(n,Sr);const e=Kn(n.firestore,Ni);return mk(no(e),n._key,{source:"server"}).then((t=>Xw(e,n,t)))}function fG(n){n=Kn(n,_o);const e=Kn(n.firestore,Ni),t=no(e),r=new Sh(e);return Dk(n._query),gk(t,n._query).then((i=>new dl(e,r,n,i)))}function pG(n){n=Kn(n,_o);const e=Kn(n.firestore,Ni),t=no(e),r=new Sh(e);return Dq(t,n._query).then((i=>new dl(e,r,n,i)))}function mG(n){n=Kn(n,_o);const e=Kn(n.firestore,Ni),t=no(e),r=new Sh(e);return gk(t,n._query,{source:"server"}).then((i=>new dl(e,r,n,i)))}function hS(n,e,t){n=Kn(n,Sr);const r=Kn(n.firestore,Ni),i=w1(n.converter,e,t);return m0(r,[g1(Ah(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Yr.none())])}function fS(n,e,t,...r){n=Kn(n,Sr);const i=Kn(n.firestore,Ni),s=Ah(i);let a;return a=typeof(e=Wt(e))=="string"||e instanceof cd?zw(s,"updateDoc",n._key,e,t,r):Hw(s,"updateDoc",n._key,e),m0(i,[a.toMutation(n._key,Yr.exists(!0))])}function gG(n){return m0(Kn(n.firestore,Ni),[new kp(n._key,Yr.none())])}function yG(n,e){const t=Kn(n.firestore,Ni),r=Ev(n),i=w1(n.converter,e);return m0(t,[g1(Ah(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Yr.exists(!1))]).then((()=>r))}function jk(n,...e){var u,d,p;n=Wt(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Lb(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Lb(e[r])){const g=e[r];e[r]=(u=g.next)==null?void 0:u.bind(g),e[r+1]=(d=g.error)==null?void 0:d.bind(g),e[r+2]=(p=g.complete)==null?void 0:p.bind(g)}let s,a,c;if(n instanceof Sr)a=Kn(n.firestore,Ni),c=Rp(n._key.path),s={next:g=>{e[r]&&e[r](Xw(a,n,g))},error:e[r+1],complete:e[r+2]};else{const g=Kn(n,_o);a=Kn(g.firestore,Ni),c=g._query;const _=new Sh(a);s={next:w=>{e[r]&&e[r](new dl(a,_,g,w))},error:e[r+1],complete:e[r+2]},Dk(n._query)}return(function(_,w,P,O){const L=new f1(O),B=new Pw(w,L,P);return _.asyncQueue.enqueueAndForget((async()=>Iw(await vp(_),B))),()=>{L.Nu(),_.asyncQueue.enqueueAndForget((async()=>Cw(await vp(_),B)))}})(no(a),c,i,s)}function vG(n,e){return Lq(no(n=Kn(n,Ni)),Lb(e)?e:{next:e})}function m0(n,e){return(function(r,i){const s=new Os;return r.asyncQueue.enqueueAndForget((async()=>aq(await jw(r),i,s))),s.promise})(no(n),e)}function Xw(n,e,t){const r=t.docs.get(e._key),i=new Sh(n);return new Ma(n,i,e._key,r,new Jd(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _G={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bG=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ah(e)}set(e,t,r){this._verifyNotCommitted();const i=zu(e,this._firestore),s=w1(i.converter,t,r),a=g1(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,Yr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=zu(e,this._firestore);let a;return a=typeof(t=Wt(t))=="string"||t instanceof cd?zw(this._dataReader,"WriteBatch.update",s._key,t,r,i):Hw(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(a.toMutation(s._key,Yr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=zu(e,this._firestore);return this._mutations=this._mutations.concat(new kp(t._key,Yr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new nt(Be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function zu(n,e){if((n=Wt(n)).firestore!==e)throw new nt(Be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xG{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ah(e)}get(e){const t=zu(e,this._firestore),r=new lG(this._firestore);return this._transaction.lookup([t._key]).then((i=>{if(!i||i.length!==1)return Et(24041);const s=i[0];if(s.isFoundDocument())return new Mg(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new Mg(this._firestore,r,t._key,null,t.converter);throw Et(18433,{doc:s})}))}set(e,t,r){const i=zu(e,this._firestore),s=w1(i.converter,t,r),a=g1(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,a),this}update(e,t,r,...i){const s=zu(e,this._firestore);let a;return a=typeof(t=Wt(t))=="string"||t instanceof cd?zw(this._dataReader,"Transaction.update",s._key,t,r,i):Hw(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,a),this}delete(e){const t=zu(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wG=class extends xG{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=zu(e,this._firestore),r=new Sh(this._firestore);return super.get(e).then((i=>new Ma(this._firestore,r,t._key,i._document,new Jd(!1,!1),t.converter)))}};function EG(n,e,t){n=Kn(n,Ni);const r={..._G,...t};return(function(s){if(s.maxAttempts<1)throw new nt(Be.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(s,a,c){const u=new Os;return s.asyncQueue.enqueueAndForget((async()=>{const d=await Cq(s);new Sq(s.asyncQueue,d,c,a,u).ju()})),u.promise})(no(n),(i=>e(new wG(n,i))),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TG(){return new f0("deleteField")}function AG(){return new Vw("serverTimestamp")}function NG(...n){return new Bw("arrayUnion",n)}function SG(...n){return new qw("arrayRemove",n)}function IG(n){return new Gw("increment",n)}(function(e,t=!0){(function(i){Cp=i})(hd),Fa(new vo("firestore",((r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),c=new Ni(new xV(r.getProvider("auth-internal")),new TV(a,r.getProvider("app-check-internal")),(function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new nt(Be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rd(d.options.projectId,p)})(a,i),a);return s={useFetchStreams:t,...s},c._setSettings(s),c}),"PUBLIC").setMultipleInstances(!0)),go(GA,HA,e),go(GA,HA,"esm2020")})();const CG="@firebase/firestore-compat",RG="0.4.2";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new nt("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(){if(typeof Uint8Array>"u")throw new nt("unimplemented","Uint8Arrays are not available in this environment.")}function mS(){if(!sB())throw new nt("unimplemented","Blobs are unavailable in Firestore in this environment.")}let Vk=class Ob{constructor(e){this._delegate=e}static fromBase64String(e){return mS(),new Ob(Zs.fromBase64String(e))}static fromUint8Array(e){return pS(),new Ob(Zs.fromUint8Array(e))}toBase64(){return mS(),this._delegate.toBase64()}toUint8Array(){return pS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(n){return PG(n,["next","error","complete"])}function PG(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kG{enableIndexedDbPersistence(e,t){return Bq(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return qq(e._delegate)}clearIndexedDbPersistence(e){return Gq(e._delegate)}}class Bk{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof rd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&nc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...t,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){Fq(this._delegate,e,t,r)}enableNetwork(){return zq(this._delegate)}disableNetwork(){return $q(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,d3("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Hq(this._delegate)}onSnapshotsInSync(e){return vG(this._delegate,e)}get app(){if(!this._appCompat)throw new nt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new _p(this,xk(this._delegate,e))}catch(t){throw mo(t,"collection()","Firestore.collection()")}}doc(e){try{return new La(this,Ev(this._delegate,e))}catch(t){throw mo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new po(this,Uq(this._delegate,e))}catch(t){throw mo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return EG(this._delegate,t=>e(new qk(this,t)))}batch(){return no(this._delegate),new Gk(new bG(this._delegate,e=>m0(this._delegate,e)))}loadBundle(e){return Yq(this._delegate,e)}namedQuery(e){return Wq(this._delegate,e).then(t=>t?new po(this,t):null)}}class E1 extends Qw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vk(new Zs(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return La.forKey(t,this.firestore,null)}}function DG(n){yV(n)}class qk{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new E1(e)}get(e){const t=Qd(e);return this._delegate.get(t).then(r=>new Og(this._firestore,new Ma(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Qd(e);return r?(Zw("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Qd(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Qd(e);return this._delegate.delete(t),this}}class Gk{constructor(e){this._delegate=e}set(e,t,r){const i=Qd(e);return r?(Zw("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Qd(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Qd(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class yh{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new og(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Fg(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=yh.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new yh(e,new E1(e),t),i.set(t,s)),s}}yh.INSTANCES=new WeakMap;class La{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new E1(e)}static forPath(e,t,r){if(e.length%2!==0)throw new nt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new La(t,new Sr(t._delegate,r,new pt(e)))}static forKey(e,t,r){return new La(t,new Sr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new _p(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new _p(this.firestore,xk(this._delegate,e))}catch(t){throw mo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Wt(e),e instanceof Sr?wk(this._delegate,e):!1}set(e,t){t=Zw("DocumentReference.set",t);try{return t?hS(this._delegate,e,t):hS(this._delegate,e)}catch(r){throw mo(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?fS(this._delegate,e):fS(this._delegate,e,t,...r)}catch(i){throw mo(i,"updateDoc()","DocumentReference.update()")}}delete(){return gG(this._delegate)}onSnapshot(...e){const t=Hk(e),r=zk(e,i=>new Og(this.firestore,new Ma(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return jk(this._delegate,t,r)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=dG(this._delegate):(e==null?void 0:e.source)==="server"?t=hG(this._delegate):t=uG(this._delegate),t.then(r=>new Og(this.firestore,new Ma(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new La(this.firestore,e?this._delegate.withConverter(yh.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function mo(n,e,t){return n.message=n.message.replace(e,t),n}function Hk(n){for(const e of n)if(typeof e=="object"&&!Fb(e))return e;return{}}function zk(n,e){var r,i;let t;return Fb(n[0])?t=n[0]:Fb(n[1])?t=n[1]:typeof n[0]=="function"?t={next:n[0],error:n[1],complete:n[2]}:t={next:n[1],error:n[2],complete:n[3]},{next:s=>{t.next&&t.next(e(s))},error:(r=t.error)==null?void 0:r.bind(t),complete:(i=t.complete)==null?void 0:i.bind(t)}}class Og{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new La(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Uk(this._delegate,e._delegate)}}class Fg extends Og{data(e){const t=this._delegate.data(e);return this._delegate._converter||vV(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}}class po{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new E1(e)}where(e,t,r){try{return new po(this.firestore,Uu(this._delegate,eG(e,t,r)))}catch(i){throw mo(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new po(this.firestore,Uu(this._delegate,tG(e,t)))}catch(r){throw mo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new po(this.firestore,Uu(this._delegate,nG(e)))}catch(t){throw mo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new po(this.firestore,Uu(this._delegate,rG(e)))}catch(t){throw mo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new po(this.firestore,Uu(this._delegate,iG(...e)))}catch(t){throw mo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new po(this.firestore,Uu(this._delegate,sG(...e)))}catch(t){throw mo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new po(this.firestore,Uu(this._delegate,oG(...e)))}catch(t){throw mo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new po(this.firestore,Uu(this._delegate,aG(...e)))}catch(t){throw mo(t,"endAt()","Query.endAt()")}}isEqual(e){return Ek(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=pG(this._delegate):(e==null?void 0:e.source)==="server"?t=mG(this._delegate):t=fG(this._delegate),t.then(r=>new Ub(this.firestore,new dl(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Hk(e),r=zk(e,i=>new Ub(this.firestore,new dl(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return jk(this._delegate,t,r)}withConverter(e){return new po(this.firestore,e?this._delegate.withConverter(yh.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class LG{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Fg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ub{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new po(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Fg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new LG(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Fg(this._firestore,r))})}isEqual(e){return Uk(this._delegate,e._delegate)}}class _p extends po{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new La(this.firestore,e):null}doc(e){try{return e===void 0?new La(this.firestore,Ev(this._delegate)):new La(this.firestore,Ev(this._delegate,e))}catch(t){throw mo(t,"doc()","CollectionReference.doc()")}}add(e){return yG(this._delegate,e).then(t=>new La(this.firestore,t))}isEqual(e){return wk(this._delegate,e._delegate)}withConverter(e){return new _p(this.firestore,e?this._delegate.withConverter(yh.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Qd(n){return Kn(n,Sr)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(...e){this._delegate=new cd(...e)}static documentId(){return new e5($r.keyField().canonicalString())}isEqual(e){return e=Wt(e),e instanceof cd?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{static serverTimestamp(){const e=AG();return e._methodName="FieldValue.serverTimestamp",new $d(e)}static delete(){const e=TG();return e._methodName="FieldValue.delete",new $d(e)}static arrayUnion(...e){const t=NG(...e);return t._methodName="FieldValue.arrayUnion",new $d(t)}static arrayRemove(...e){const t=SG(...e);return t._methodName="FieldValue.arrayRemove",new $d(t)}static increment(e){const t=IG(e);return t._methodName="FieldValue.increment",new $d(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MG={Firestore:Bk,GeoPoint:ul,Timestamp:nr,Blob:Vk,Transaction:qk,WriteBatch:Gk,DocumentReference:La,DocumentSnapshot:Og,Query:po,QueryDocumentSnapshot:Fg,QuerySnapshot:Ub,CollectionReference:_p,FieldPath:e5,FieldValue:$d,setLogLevel:DG,CACHE_SIZE_UNLIMITED:Vq};function OG(n,e){n.INTERNAL.registerComponent(new vo("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps({...MG}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FG(n){OG(n,(e,t)=>new Bk(e,t,new kG)),n.registerVersion(CG,RG)}FG(an);const $k="@firebase/installations",t5="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk=1e4,Wk=`w:${t5}`,Kk="FIS_v2",UG="https://firebaseinstallations.googleapis.com/v1",jG=3600*1e3,VG="installations",BG="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qG={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},vh=new Jc(VG,BG,qG);function Jk(n){return n instanceof Ms&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qk({projectId:n}){return`${UG}/projects/${n}/installations`}function Xk(n){return{token:n.token,requestStatus:2,expiresIn:HG(n.expiresIn),creationTime:Date.now()}}async function Zk(n,e){const r=(await e.json()).error;return vh.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function e6({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function GG(n,{refreshToken:e}){const t=e6(n);return t.append("Authorization",zG(e)),t}async function t6(n){const e=await n();return e.status>=500&&e.status<600?n():e}function HG(n){return Number(n.replace("s","000"))}function zG(n){return`${Kk} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $G({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=Qk(n),i=e6(n),s=e.getImmediate({optional:!0});if(s){const d=await s.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const a={fid:t,authVersion:Kk,appId:n.appId,sdkVersion:Wk},c={method:"POST",headers:i,body:JSON.stringify(a)},u=await t6(()=>fetch(r,c));if(u.ok){const d=await u.json();return{fid:d.fid||t,registrationStatus:2,refreshToken:d.refreshToken,authToken:Xk(d.authToken)}}else throw await Zk("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n6(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YG(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WG=/^[cdef][\w-]{21}$/,jb="";function KG(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=JG(n);return WG.test(t)?t:jb}catch{return jb}}function JG(n){return YG(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6=new Map;function i6(n,e){const t=T1(n);s6(t,e),QG(t,e)}function s6(n,e){const t=r6.get(n);if(t)for(const r of t)r(e)}function QG(n,e){const t=XG();t&&t.postMessage({key:n,fid:e}),ZG()}let Xd=null;function XG(){return!Xd&&"BroadcastChannel"in self&&(Xd=new BroadcastChannel("[Firebase] FID Change"),Xd.onmessage=n=>{s6(n.data.key,n.data.fid)}),Xd}function ZG(){r6.size===0&&Xd&&(Xd.close(),Xd=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eH="firebase-installations-database",tH=1,_h="firebase-installations-store";let x2=null;function n5(){return x2||(x2=KR(eH,tH,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(_h)}}})),x2}async function Av(n,e){const t=T1(n),i=(await n5()).transaction(_h,"readwrite"),s=i.objectStore(_h),a=await s.get(t);return await s.put(e,t),await i.done,(!a||a.fid!==e.fid)&&i6(n,e.fid),e}async function o6(n){const e=T1(n),r=(await n5()).transaction(_h,"readwrite");await r.objectStore(_h).delete(e),await r.done}async function A1(n,e){const t=T1(n),i=(await n5()).transaction(_h,"readwrite"),s=i.objectStore(_h),a=await s.get(t),c=e(a);return c===void 0?await s.delete(t):await s.put(c,t),await i.done,c&&(!a||a.fid!==c.fid)&&i6(n,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r5(n){let e;const t=await A1(n.appConfig,r=>{const i=nH(r),s=rH(n,i);return e=s.registrationPromise,s.installationEntry});return t.fid===jb?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function nH(n){const e=n||{fid:KG(),registrationStatus:0};return a6(e)}function rH(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(vh.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=iH(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:sH(n)}:{installationEntry:e}}async function iH(n,e){try{const t=await $G(n,e);return Av(n.appConfig,t)}catch(t){throw Jk(t)&&t.customData.serverCode===409?await o6(n.appConfig):await Av(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function sH(n){let e=await gS(n.appConfig);for(;e.registrationStatus===1;)await n6(100),e=await gS(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await r5(n);return r||t}return e}function gS(n){return A1(n,e=>{if(!e)throw vh.create("installation-not-found");return a6(e)})}function a6(n){return oH(n)?{fid:n.fid,registrationStatus:0}:n}function oH(n){return n.registrationStatus===1&&n.registrationTime+Yk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aH({appConfig:n,heartbeatServiceProvider:e},t){const r=lH(n,t),i=GG(n,t),s=e.getImmediate({optional:!0});if(s){const d=await s.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const a={installation:{sdkVersion:Wk,appId:n.appId}},c={method:"POST",headers:i,body:JSON.stringify(a)},u=await t6(()=>fetch(r,c));if(u.ok){const d=await u.json();return Xk(d)}else throw await Zk("Generate Auth Token",u)}function lH(n,{fid:e}){return`${Qk(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i5(n,e=!1){let t;const r=await A1(n.appConfig,s=>{if(!l6(s))throw vh.create("not-registered");const a=s.authToken;if(!e&&dH(a))return s;if(a.requestStatus===1)return t=cH(n,e),s;{if(!navigator.onLine)throw vh.create("app-offline");const c=fH(s);return t=uH(n,c),c}});return t?await t:r.authToken}async function cH(n,e){let t=await yS(n.appConfig);for(;t.authToken.requestStatus===1;)await n6(100),t=await yS(n.appConfig);const r=t.authToken;return r.requestStatus===0?i5(n,e):r}function yS(n){return A1(n,e=>{if(!l6(e))throw vh.create("not-registered");const t=e.authToken;return pH(t)?{...e,authToken:{requestStatus:0}}:e})}async function uH(n,e){try{const t=await aH(n,e),r={...e,authToken:t};return await Av(n.appConfig,r),t}catch(t){if(Jk(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await o6(n.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Av(n.appConfig,r)}throw t}}function l6(n){return n!==void 0&&n.registrationStatus===2}function dH(n){return n.requestStatus===2&&!hH(n)}function hH(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+jG}function fH(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function pH(n){return n.requestStatus===1&&n.requestTime+Yk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mH(n){const e=n,{installationEntry:t,registrationPromise:r}=await r5(e);return r?r.catch(console.error):i5(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gH(n,e=!1){const t=n;return await yH(t),(await i5(t,e)).token}async function yH(n){const{registrationPromise:e}=await r5(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vH(n){if(!n||!n.options)throw w2("App Configuration");if(!n.name)throw w2("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw w2(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function w2(n){return vh.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6="installations",_H="installations-internal",bH=n=>{const e=n.getProvider("app").getImmediate(),t=vH(e),r=Vv(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},xH=n=>{const e=n.getProvider("app").getImmediate(),t=Vv(e,c6).getImmediate();return{getId:()=>mH(t),getToken:i=>gH(t,i)}};function wH(){Fa(new vo(c6,bH,"PUBLIC")),Fa(new vo(_H,xH,"PRIVATE"))}wH();go($k,t5);go($k,t5,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="analytics",EH="firebase_id",TH="origin",AH=60*1e3,NH="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",s5="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=new Yg("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SH={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},fa=new Jc("analytics","Analytics",SH);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IH(n){if(!n.startsWith(s5)){const e=fa.create("invalid-gtag-resource",{gtagURL:n});return vs.warn(e.message),""}return n}function u6(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function CH(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function RH(n,e){const t=CH("firebase-js-sdk-policy",{createScriptURL:IH}),r=document.createElement("script"),i=`${s5}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function PH(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function kH(n,e,t,r,i,s){const a=r[i];try{if(a)await e[a];else{const u=(await u6(t)).find(d=>d.measurementId===i);u&&await e[u.appId]}}catch(c){vs.error(c)}n("config",i,s)}async function DH(n,e,t,r,i){try{let s=[];if(i&&i.send_to){let a=i.send_to;Array.isArray(a)||(a=[a]);const c=await u6(t);for(const u of a){const d=c.find(g=>g.measurementId===u),p=d&&e[d.appId];if(p)s.push(p);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),n("event",r,i||{})}catch(s){vs.error(s)}}function LH(n,e,t,r){async function i(s,...a){try{if(s==="event"){const[c,u]=a;await DH(n,e,t,c,u)}else if(s==="config"){const[c,u]=a;await kH(n,e,t,r,c,u)}else if(s==="consent"){const[c,u]=a;n("consent",c,u)}else if(s==="get"){const[c,u,d]=a;n("get",c,u,d)}else if(s==="set"){const[c]=a;n("set",c)}else n(s,...a)}catch(c){vs.error(c)}}return i}function MH(n,e,t,r,i){let s=function(...a){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=LH(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}function OH(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(s5)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FH=30,UH=1e3;class jH{constructor(e={},t=UH){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const d6=new jH;function VH(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function BH(n){var a;const{appId:e,apiKey:t}=n,r={method:"GET",headers:VH(t)},i=NH.replace("{app-id}",e),s=await fetch(i,r);if(s.status!==200&&s.status!==304){let c="";try{const u=await s.json();(a=u.error)!=null&&a.message&&(c=u.error.message)}catch{}throw fa.create("config-fetch-failed",{httpStatus:s.status,responseMessage:c})}return s.json()}async function qH(n,e=d6,t){const{appId:r,apiKey:i,measurementId:s}=n.options;if(!r)throw fa.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw fa.create("no-api-key")}const a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new zH;return setTimeout(async()=>{c.abort()},AH),h6({appId:r,apiKey:i,measurementId:s},a,c,e)}async function h6(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=d6){var c;const{appId:s,measurementId:a}=n;try{await GH(r,e)}catch(u){if(a)return vs.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:s,measurementId:a};throw u}try{const u=await BH(n);return i.deleteThrottleMetadata(s),u}catch(u){const d=u;if(!HH(d)){if(i.deleteThrottleMetadata(s),a)return vs.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:s,measurementId:a};throw u}const p=Number((c=d==null?void 0:d.customData)==null?void 0:c.httpStatus)===503?uA(t,i.intervalMillis,FH):uA(t,i.intervalMillis),g={throttleEndTimeMillis:Date.now()+p,backoffCount:t+1};return i.setThrottleMetadata(s,g),vs.debug(`Calling attemptFetch again in ${p} millis`),h6(n,g,r,i)}}function GH(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(fa.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function HH(n){if(!(n instanceof Ms)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class zH{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function $H(n,e,t,r,i){if(i&&i.global){n("event",t,r);return}else{const s=await e,a={...r,send_to:s};n("event",t,a)}}async function YH(n,e,t,r){if(r&&r.global)return n("set",{screen_name:t}),Promise.resolve();{const i=await e;n("config",i,{update:!0,screen_name:t})}}async function WH(n,e,t,r){if(r&&r.global)return n("set",{user_id:t}),Promise.resolve();{const i=await e;n("config",i,{update:!0,user_id:t})}}async function KH(n,e,t,r){if(r&&r.global){const i={};for(const s of Object.keys(t))i[`user_properties.${s}`]=t[s];return n("set",i),Promise.resolve()}else{const i=await e;n("config",i,{update:!0,user_properties:t})}}async function JH(n,e){const t=await n;window[`ga-disable-${t}`]=!e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QH(){if(sh())try{await bx()}catch(n){return vs.warn(fa.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return vs.warn(fa.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function XH(n,e,t,r,i,s,a){const c=qH(n);c.then(_=>{t[_.measurementId]=_.appId,n.options.measurementId&&_.measurementId!==n.options.measurementId&&vs.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${_.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_=>vs.error(_)),e.push(c);const u=QH().then(_=>{if(_)return r.getId()}),[d,p]=await Promise.all([c,u]);OH(s)||RH(s,d.measurementId),i("js",new Date);const g=(a==null?void 0:a.config)??{};return g[TH]="firebase",g.update=!0,p!=null&&(g[EH]=p),i("config",d.measurementId,g),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZH=class{constructor(e){this.app=e}_delete(){return delete jc[this.app.options.appId],Promise.resolve()}},jc={},_S=[];const bS={};let Hy="dataLayer",f6="gtag",xS,g0,Vb=!1;function ez(n){if(Vb)throw fa.create("already-initialized");n.dataLayerName&&(Hy=n.dataLayerName),n.gtagName&&(f6=n.gtagName)}function tz(){const n=[];if(jv()&&n.push("This is a browser extension environment."),GR()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=fa.create("invalid-analytics-context",{errorInfo:e});vs.warn(t.message)}}function nz(n,e,t){tz();const r=n.options.appId;if(!r)throw fa.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)vs.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw fa.create("no-api-key");if(jc[r]!=null)throw fa.create("already-exists",{id:r});if(!Vb){PH(Hy);const{wrappedGtag:s,gtagCore:a}=MH(jc,_S,bS,Hy,f6);g0=s,xS=a,Vb=!0}return jc[r]=XH(n,_S,bS,e,xS,Hy,t),new ZH(n)}async function rz(){if(jv()||!GR()||!sh())return!1;try{return await bx()}catch{return!1}}function iz(n,e,t){n=Wt(n),YH(g0,jc[n.app.options.appId],e,t).catch(r=>vs.error(r))}function sz(n,e,t){n=Wt(n),WH(g0,jc[n.app.options.appId],e,t).catch(r=>vs.error(r))}function p6(n,e,t){n=Wt(n),KH(g0,jc[n.app.options.appId],e,t).catch(r=>vs.error(r))}function oz(n,e){n=Wt(n),JH(jc[n.app.options.appId],e).catch(t=>vs.error(t))}function m6(n,e,t,r){n=Wt(n),$H(g0,jc[n.app.options.appId],e,t,r).catch(i=>vs.error(i))}const wS="@firebase/analytics",ES="0.10.19";function az(){Fa(new vo(vS,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return nz(r,i,t)},"PUBLIC")),Fa(new vo("analytics-internal",n,"PRIVATE")),go(wS,ES),go(wS,ES,"esm2020");function n(e){try{const t=e.getProvider(vS).getImmediate();return{logEvent:(r,i,s)=>m6(t,r,i,s),setUserProperties:(r,i)=>p6(t,r,i)}}catch(t){throw fa.create("interop-component-reg-failed",{reason:t})}}}az();const lz="@firebase/analytics-compat",cz="0.2.25";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(e,t){this.app=e,this._delegate=t}logEvent(e,t,r){m6(this._delegate,e,t,r)}setCurrentScreen(e,t){iz(this._delegate,e,t)}setUserId(e,t){sz(this._delegate,e,t)}setUserProperties(e,t){p6(this._delegate,e,t)}setAnalyticsCollectionEnabled(e){oz(this._delegate,e)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bb;(function(n){n.ADD_SHIPPING_INFO="add_shipping_info",n.ADD_PAYMENT_INFO="add_payment_info",n.ADD_TO_CART="add_to_cart",n.ADD_TO_WISHLIST="add_to_wishlist",n.BEGIN_CHECKOUT="begin_checkout",n.CHECKOUT_PROGRESS="checkout_progress",n.EXCEPTION="exception",n.GENERATE_LEAD="generate_lead",n.LOGIN="login",n.PAGE_VIEW="page_view",n.PURCHASE="purchase",n.REFUND="refund",n.REMOVE_FROM_CART="remove_from_cart",n.SCREEN_VIEW="screen_view",n.SEARCH="search",n.SELECT_CONTENT="select_content",n.SELECT_ITEM="select_item",n.SELECT_PROMOTION="select_promotion",n.SET_CHECKOUT_OPTION="set_checkout_option",n.SHARE="share",n.SIGN_UP="sign_up",n.TIMING_COMPLETE="timing_complete",n.VIEW_CART="view_cart",n.VIEW_ITEM="view_item",n.VIEW_ITEM_LIST="view_item_list",n.VIEW_PROMOTION="view_promotion",n.VIEW_SEARCH_RESULTS="view_search_results"})(Bb||(Bb={}));/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uz=n=>{const e=n.getProvider("app-compat").getImmediate(),t=n.getProvider("analytics").getImmediate();return new g6(e,t)};function dz(){const n={Analytics:g6,settings:ez,isSupported:rz,EventName:Bb};an.INTERNAL.registerComponent(new vo("analytics-compat",uz,"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}dz();an.registerVersion(lz,cz);const hz={apiKey:"AIzaSyCPOpbMFudxzh39jrwJ5ATtYNpGiH5Oqkk",authDomain:"labman-e07d2.firebaseapp.com",projectId:"labman-e07d2",storageBucket:"labman-e07d2.firebasestorage.app",messagingSenderId:"843086697564",appId:"1:843086697564:web:c4549ab625e350d6538299",measurementId:"G-86EX8W8S4M"};an.apps.length||an.initializeApp(hz);an.app();if(typeof window<"u")try{an.analytics()}catch{console.warn("Firebase Analytics not supported in this environment")}const ut=an.firestore(),xr=an.auth();try{ut.settings({cacheSizeBytes:an.firestore.CACHE_SIZE_UNLIMITED,ignoreUndefinedProperties:!0})}catch{console.log("Firestore settings already applied")}const fz="modulepreload",pz=function(n){return"/labman/"+n},TS={},E2=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let a=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));i=a(t.map(d=>{if(d=pz(d),d in TS)return;TS[d]=!0;const p=d.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const _=document.createElement("link");if(_.rel=p?"stylesheet":fz,p||(_.as="script"),_.crossOrigin="",_.href=d,u&&_.setAttribute("nonce",u),document.head.appendChild(_),p)return new Promise((w,P)=>{_.addEventListener("load",w),_.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return i.then(a=>{for(const c of a||[])c.status==="rejected"&&s(c.reason);return e().catch(s)})};function ur(n){"@babel/helpers - typeof";return ur=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ur(n)}var pl=Uint8Array,da=Uint16Array,o5=Int32Array,a5=new pl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),l5=new pl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),AS=new pl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),y6=function(n,e){for(var t=new da(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new o5(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return{b:t,r:i}},v6=y6(a5,2),mz=v6.b,qb=v6.r;mz[28]=258,qb[258]=28;var gz=y6(l5,0),NS=gz.r,Gb=new da(32768);for(var Or=0;Or<32768;++Or){var ju=(Or&43690)>>1|(Or&21845)<<1;ju=(ju&52428)>>2|(ju&13107)<<2,ju=(ju&61680)>>4|(ju&3855)<<4,Gb[Or]=((ju&65280)>>8|(ju&255)<<8)>>1}var ag=(function(n,e,t){for(var r=n.length,i=0,s=new da(e);i<r;++i)n[i]&&++s[n[i]-1];var a=new da(e);for(i=1;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;var c;if(t){c=new da(1<<e);var u=15-e;for(i=0;i<r;++i)if(n[i])for(var d=i<<4|n[i],p=e-n[i],g=a[n[i]-1]++<<p,_=g|(1<<p)-1;g<=_;++g)c[Gb[g]>>u]=d}else for(c=new da(r),i=0;i<r;++i)n[i]&&(c[i]=Gb[a[n[i]-1]++]>>15-n[i]);return c}),bh=new pl(288);for(var Or=0;Or<144;++Or)bh[Or]=8;for(var Or=144;Or<256;++Or)bh[Or]=9;for(var Or=256;Or<280;++Or)bh[Or]=7;for(var Or=280;Or<288;++Or)bh[Or]=8;var Nv=new pl(32);for(var Or=0;Or<32;++Or)Nv[Or]=5;var yz=ag(bh,9,0),vz=ag(Nv,5,0),_6=function(n){return(n+7)/8|0},_z=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new pl(n.subarray(e,t))},Pc=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},Dm=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},T2=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,s=t.slice();if(!i)return{t:x6,l:0};if(i==1){var a=new pl(t[0].s+1);return a[t[0].s]=1,{t:a,l:1}}t.sort(function(ae,le){return ae.f-le.f}),t.push({s:-1,f:25001});var c=t[0],u=t[1],d=0,p=1,g=2;for(t[0]={s:-1,f:c.f+u.f,l:c,r:u};p!=i-1;)c=t[t[d].f<t[g].f?d++:g++],u=t[d!=p&&t[d].f<t[g].f?d++:g++],t[p++]={s:-1,f:c.f+u.f,l:c,r:u};for(var _=s[0].s,r=1;r<i;++r)s[r].s>_&&(_=s[r].s);var w=new da(_+1),P=Hb(t[p-1],w,0);if(P>e){var r=0,O=0,L=P-e,B=1<<L;for(s.sort(function(le,U){return w[U.s]-w[le.s]||le.f-U.f});r<i;++r){var K=s[r].s;if(w[K]>e)O+=B-(1<<P-w[K]),w[K]=e;else break}for(O>>=L;O>0;){var W=s[r].s;w[W]<e?O-=1<<e-w[W]++-1:++r}for(;r>=0&&O;--r){var J=s[r].s;w[J]==e&&(--w[J],++O)}P=e}return{t:new pl(w),l:P}},Hb=function(n,e,t){return n.s==-1?Math.max(Hb(n.l,e,t+1),Hb(n.r,e,t+1)):e[n.s]=t},SS=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new da(++e),r=0,i=n[0],s=1,a=function(u){t[r++]=u},c=1;c<=e;++c)if(n[c]==i&&c!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=n[c]}return{c:t.subarray(0,r),n:e}},Lm=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},b6=function(n,e,t){var r=t.length,i=_6(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var s=0;s<r;++s)n[i+s+4]=t[s];return(i+4+r)*8},IS=function(n,e,t,r,i,s,a,c,u,d,p){Pc(e,p++,t),++i[256];for(var g=T2(i,15),_=g.t,w=g.l,P=T2(s,15),O=P.t,L=P.l,B=SS(_),K=B.c,W=B.n,J=SS(O),ae=J.c,le=J.n,U=new da(19),C=0;C<K.length;++C)++U[K[C]&31];for(var C=0;C<ae.length;++C)++U[ae[C]&31];for(var N=T2(U,7),F=N.t,S=N.l,k=19;k>4&&!F[AS[k-1]];--k);var M=d+5<<3,Q=Lm(i,bh)+Lm(s,Nv)+a,pe=Lm(i,_)+Lm(s,O)+a+14+3*k+Lm(U,F)+2*U[16]+3*U[17]+7*U[18];if(u>=0&&M<=Q&&M<=pe)return b6(e,p,n.subarray(u,u+d));var se,ve,me,Se;if(Pc(e,p,1+(pe<Q)),p+=2,pe<Q){se=ag(_,w,0),ve=_,me=ag(O,L,0),Se=O;var Ve=ag(F,S,0);Pc(e,p,W-257),Pc(e,p+5,le-1),Pc(e,p+10,k-4),p+=14;for(var C=0;C<k;++C)Pc(e,p+3*C,F[AS[C]]);p+=3*k;for(var ne=[K,ae],H=0;H<2;++H)for(var te=ne[H],C=0;C<te.length;++C){var Y=te[C]&31;Pc(e,p,Ve[Y]),p+=F[Y],Y>15&&(Pc(e,p,te[C]>>5&127),p+=te[C]>>12)}}else se=yz,ve=bh,me=vz,Se=Nv;for(var C=0;C<c;++C){var fe=r[C];if(fe>255){var Y=fe>>18&31;Dm(e,p,se[Y+257]),p+=ve[Y+257],Y>7&&(Pc(e,p,fe>>23&31),p+=a5[Y]);var ge=fe&31;Dm(e,p,me[ge]),p+=Se[ge],ge>3&&(Dm(e,p,fe>>5&8191),p+=l5[ge])}else Dm(e,p,se[fe]),p+=ve[fe]}return Dm(e,p,se[256]),p+ve[256]},bz=new o5([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),x6=new pl(0),xz=function(n,e,t,r,i,s){var a=s.z||n.length,c=new pl(r+a+5*(1+Math.ceil(a/7e3))+i),u=c.subarray(r,c.length-i),d=s.l,p=(s.r||0)&7;if(e){p&&(u[0]=s.r>>3);for(var g=bz[e-1],_=g>>13,w=g&8191,P=(1<<t)-1,O=s.p||new da(32768),L=s.h||new da(P+1),B=Math.ceil(t/3),K=2*B,W=function(vt){return(n[vt]^n[vt+1]<<B^n[vt+2]<<K)&P},J=new o5(25e3),ae=new da(288),le=new da(32),U=0,C=0,N=s.i||0,F=0,S=s.w||0,k=0;N+2<a;++N){var M=W(N),Q=N&32767,pe=L[M];if(O[Q]=pe,L[M]=Q,S<=N){var se=a-N;if((U>7e3||F>24576)&&(se>423||!d)){p=IS(n,u,0,J,ae,le,C,F,k,N-k,p),F=U=C=0,k=N;for(var ve=0;ve<286;++ve)ae[ve]=0;for(var ve=0;ve<30;++ve)le[ve]=0}var me=2,Se=0,Ve=w,ne=Q-pe&32767;if(se>2&&M==W(N-ne))for(var H=Math.min(_,se)-1,te=Math.min(32767,N),Y=Math.min(258,se);ne<=te&&--Ve&&Q!=pe;){if(n[N+me]==n[N+me-ne]){for(var fe=0;fe<Y&&n[N+fe]==n[N+fe-ne];++fe);if(fe>me){if(me=fe,Se=ne,fe>H)break;for(var ge=Math.min(ne,fe-2),xe=0,ve=0;ve<ge;++ve){var we=N-ne+ve&32767,Ie=O[we],Ge=we-Ie&32767;Ge>xe&&(xe=Ge,pe=we)}}}Q=pe,pe=O[Q],ne+=Q-pe&32767}if(Se){J[F++]=268435456|qb[me]<<18|NS[Se];var Qe=qb[me]&31,it=NS[Se]&31;C+=a5[Qe]+l5[it],++ae[257+Qe],++le[it],S=N+me,++U}else J[F++]=n[N],++ae[n[N]]}}for(N=Math.max(N,S);N<a;++N)J[F++]=n[N],++ae[n[N]];p=IS(n,u,d,J,ae,le,C,F,k,N-k,p),d||(s.r=p&7|u[p/8|0]<<3,p-=7,s.h=L,s.p=O,s.i=N,s.w=S)}else{for(var N=s.w||0;N<a+d;N+=65535){var dt=N+65535;dt>=a&&(u[p/8|0]=d,dt=a),p=b6(u,p+1,n.subarray(N,dt))}s.i=a}return _z(c,0,r+_6(p)+i)},w6=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,s=t.length|0,a=0;a!=s;){for(var c=Math.min(a+2655,s);a<c;++a)i+=r+=t[a];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},wz=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),a=new pl(s.length+n.length);a.set(s),a.set(n,s.length),n=a,i.w=s.length}return xz(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)},E6=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},Ez=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=w6();i.p(e.dictionary),E6(n,2,i.d())}};function zb(n,e){e||(e={});var t=w6();t.p(n);var r=wz(n,e,e.dictionary?6:2,4);return Ez(r,e),E6(r,r.length-4,t.d()),r}var Tz=typeof TextDecoder<"u"&&new TextDecoder,Az=0;try{Tz.decode(x6,{stream:!0}),Az=1}catch{}function Nz(n){if(Array.isArray(n))return n}function Sz(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,a,c=[],u=!0,d=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(u=(r=s.call(t)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(p){d=!0,i=p}finally{try{if(!u&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(d)throw i}}return c}}function CS(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function Iz(n,e){if(n){if(typeof n=="string")return CS(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?CS(n,e):void 0}}function Cz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RS(n,e){return Nz(n)||Sz(n,e)||Iz(n,e)||Cz()}function PS(n,e="utf8"){return new TextDecoder(e).decode(n)}const Rz=new TextEncoder;function Pz(n){return Rz.encode(n)}const kz=1024*8,Dz=(()=>{const n=new Uint8Array(4),e=new Uint32Array(n.buffer);return!((e[0]=1)&n[0])})(),A2={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class c5{constructor(e=kz,t={}){cr(this,"buffer");cr(this,"byteLength");cr(this,"byteOffset");cr(this,"length");cr(this,"offset");cr(this,"lastWrittenByte");cr(this,"littleEndian");cr(this,"_data");cr(this,"_mark");cr(this,"_marks");let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const i=t.offset?t.offset>>>0:0,s=e.byteLength-i;let a=i;(ArrayBuffer.isView(e)||e instanceof c5)&&(e.byteLength!==e.buffer.byteLength&&(a=e.byteOffset+i),e=e.buffer),r?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=a,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,a,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=(this.offset+e)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const r=A2[t].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,s=this.buffer.slice(i,i+r);if(this.littleEndian===Dz&&t!=="uint8"&&t!=="int8"){const c=new Uint8Array(this.buffer.slice(i,i+r));c.reverse();const u=new A2[t](c.buffer);return this.offset+=r,u.reverse(),u}const a=new A2[t](s);return this.offset+=r,a}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let r=0;r<e;r++)t+=this.readChar();return t}readUtf8(e=1){return PS(this.readBytes(e))}decodeText(e=1,t="utf8"){return PS(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(Pz(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Fp(n){let e=n.length;for(;--e>=0;)n[e]=0}const Lz=3,Mz=258,T6=29,Oz=256,Fz=Oz+1+T6,A6=30,Uz=512,jz=new Array((Fz+2)*2);Fp(jz);const Vz=new Array(A6*2);Fp(Vz);const Bz=new Array(Uz);Fp(Bz);const qz=new Array(Mz-Lz+1);Fp(qz);const Gz=new Array(T6);Fp(Gz);const Hz=new Array(A6);Fp(Hz);const zz=(n,e,t,r)=>{let i=n&65535|0,s=n>>>16&65535|0,a=0;for(;t!==0;){a=t>2e3?2e3:t,t-=a;do i=i+e[r++]|0,s=s+i|0;while(--a);i%=65521,s%=65521}return i|s<<16|0};var $b=zz;const $z=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var r=0;r<8;r++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},Yz=new Uint32Array($z()),Wz=(n,e,t,r)=>{const i=Yz,s=r+t;n^=-1;for(let a=r;a<s;a++)n=n>>>8^i[(n^e[a])&255];return n^-1};var Vl=Wz,Yb={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},N6={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const Kz=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var Jz=function(n){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const r in t)Kz(t,r)&&(n[r]=t[r])}}return n},Qz=n=>{let e=0;for(let r=0,i=n.length;r<i;r++)e+=n[r].length;const t=new Uint8Array(e);for(let r=0,i=0,s=n.length;r<s;r++){let a=n[r];t.set(a,i),i+=a.length}return t},S6={assign:Jz,flattenChunks:Qz};let I6=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{I6=!1}const Ug=new Uint8Array(256);for(let n=0;n<256;n++)Ug[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;Ug[254]=Ug[254]=1;var Xz=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,r,i,s,a=n.length,c=0;for(i=0;i<a;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<a&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),c+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(c),s=0,i=0;s<c;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<a&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),t<128?e[s++]=t:t<2048?(e[s++]=192|t>>>6,e[s++]=128|t&63):t<65536?(e[s++]=224|t>>>12,e[s++]=128|t>>>6&63,e[s++]=128|t&63):(e[s++]=240|t>>>18,e[s++]=128|t>>>12&63,e[s++]=128|t>>>6&63,e[s++]=128|t&63);return e};const Zz=(n,e)=>{if(e<65534&&n.subarray&&I6)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let r=0;r<e;r++)t+=String.fromCharCode(n[r]);return t};var e$=(n,e)=>{const t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let r,i;const s=new Array(t*2);for(i=0,r=0;r<t;){let a=n[r++];if(a<128){s[i++]=a;continue}let c=Ug[a];if(c>4){s[i++]=65533,r+=c-1;continue}for(a&=c===2?31:c===3?15:7;c>1&&r<t;)a=a<<6|n[r++]&63,c--;if(c>1){s[i++]=65533;continue}a<65536?s[i++]=a:(a-=65536,s[i++]=55296|a>>10&1023,s[i++]=56320|a&1023)}return Zz(s,i)},t$=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+Ug[n[t]]>e?t:e},Wb={string2buf:Xz,buf2string:e$,utf8border:t$};function n$(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var r$=n$;const by=16209,i$=16191;var s$=function(e,t){let r,i,s,a,c,u,d,p,g,_,w,P,O,L,B,K,W,J,ae,le,U,C,N,F;const S=e.state;r=e.next_in,N=e.input,i=r+(e.avail_in-5),s=e.next_out,F=e.output,a=s-(t-e.avail_out),c=s+(e.avail_out-257),u=S.dmax,d=S.wsize,p=S.whave,g=S.wnext,_=S.window,w=S.hold,P=S.bits,O=S.lencode,L=S.distcode,B=(1<<S.lenbits)-1,K=(1<<S.distbits)-1;e:do{P<15&&(w+=N[r++]<<P,P+=8,w+=N[r++]<<P,P+=8),W=O[w&B];t:for(;;){if(J=W>>>24,w>>>=J,P-=J,J=W>>>16&255,J===0)F[s++]=W&65535;else if(J&16){ae=W&65535,J&=15,J&&(P<J&&(w+=N[r++]<<P,P+=8),ae+=w&(1<<J)-1,w>>>=J,P-=J),P<15&&(w+=N[r++]<<P,P+=8,w+=N[r++]<<P,P+=8),W=L[w&K];n:for(;;){if(J=W>>>24,w>>>=J,P-=J,J=W>>>16&255,J&16){if(le=W&65535,J&=15,P<J&&(w+=N[r++]<<P,P+=8,P<J&&(w+=N[r++]<<P,P+=8)),le+=w&(1<<J)-1,le>u){e.msg="invalid distance too far back",S.mode=by;break e}if(w>>>=J,P-=J,J=s-a,le>J){if(J=le-J,J>p&&S.sane){e.msg="invalid distance too far back",S.mode=by;break e}if(U=0,C=_,g===0){if(U+=d-J,J<ae){ae-=J;do F[s++]=_[U++];while(--J);U=s-le,C=F}}else if(g<J){if(U+=d+g-J,J-=g,J<ae){ae-=J;do F[s++]=_[U++];while(--J);if(U=0,g<ae){J=g,ae-=J;do F[s++]=_[U++];while(--J);U=s-le,C=F}}}else if(U+=g-J,J<ae){ae-=J;do F[s++]=_[U++];while(--J);U=s-le,C=F}for(;ae>2;)F[s++]=C[U++],F[s++]=C[U++],F[s++]=C[U++],ae-=3;ae&&(F[s++]=C[U++],ae>1&&(F[s++]=C[U++]))}else{U=s-le;do F[s++]=F[U++],F[s++]=F[U++],F[s++]=F[U++],ae-=3;while(ae>2);ae&&(F[s++]=F[U++],ae>1&&(F[s++]=F[U++]))}}else if((J&64)===0){W=L[(W&65535)+(w&(1<<J)-1)];continue n}else{e.msg="invalid distance code",S.mode=by;break e}break}}else if((J&64)===0){W=O[(W&65535)+(w&(1<<J)-1)];continue t}else if(J&32){S.mode=i$;break e}else{e.msg="invalid literal/length code",S.mode=by;break e}break}}while(r<i&&s<c);ae=P>>3,r-=ae,P-=ae<<3,w&=(1<<P)-1,e.next_in=r,e.next_out=s,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=s<c?257+(c-s):257-(s-c),S.hold=w,S.bits=P};const xf=15,kS=852,DS=592,LS=0,N2=1,MS=2,o$=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),a$=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),l$=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),c$=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),u$=(n,e,t,r,i,s,a,c)=>{const u=c.bits;let d=0,p=0,g=0,_=0,w=0,P=0,O=0,L=0,B=0,K=0,W,J,ae,le,U,C=null,N;const F=new Uint16Array(xf+1),S=new Uint16Array(xf+1);let k=null,M,Q,pe;for(d=0;d<=xf;d++)F[d]=0;for(p=0;p<r;p++)F[e[t+p]]++;for(w=u,_=xf;_>=1&&F[_]===0;_--);if(w>_&&(w=_),_===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,c.bits=1,0;for(g=1;g<_&&F[g]===0;g++);for(w<g&&(w=g),L=1,d=1;d<=xf;d++)if(L<<=1,L-=F[d],L<0)return-1;if(L>0&&(n===LS||_!==1))return-1;for(S[1]=0,d=1;d<xf;d++)S[d+1]=S[d]+F[d];for(p=0;p<r;p++)e[t+p]!==0&&(a[S[e[t+p]]++]=p);if(n===LS?(C=k=a,N=20):n===N2?(C=o$,k=a$,N=257):(C=l$,k=c$,N=0),K=0,p=0,d=g,U=s,P=w,O=0,ae=-1,B=1<<w,le=B-1,n===N2&&B>kS||n===MS&&B>DS)return 1;for(;;){M=d-O,a[p]+1<N?(Q=0,pe=a[p]):a[p]>=N?(Q=k[a[p]-N],pe=C[a[p]-N]):(Q=96,pe=0),W=1<<d-O,J=1<<P,g=J;do J-=W,i[U+(K>>O)+J]=M<<24|Q<<16|pe|0;while(J!==0);for(W=1<<d-1;K&W;)W>>=1;if(W!==0?(K&=W-1,K+=W):K=0,p++,--F[d]===0){if(d===_)break;d=e[t+a[p]]}if(d>w&&(K&le)!==ae){for(O===0&&(O=w),U+=g,P=d-O,L=1<<P;P+O<_&&(L-=F[P+O],!(L<=0));)P++,L<<=1;if(B+=1<<P,n===N2&&B>kS||n===MS&&B>DS)return 1;ae=K&le,i[ae]=w<<24|P<<16|U-s|0}}return K!==0&&(i[U+K]=d-O<<24|64<<16|0),c.bits=w,0};var lg=u$;const d$=0,C6=1,R6=2,{Z_FINISH:OS,Z_BLOCK:h$,Z_TREES:xy,Z_OK:xh,Z_STREAM_END:f$,Z_NEED_DICT:p$,Z_STREAM_ERROR:ja,Z_DATA_ERROR:P6,Z_MEM_ERROR:k6,Z_BUF_ERROR:m$,Z_DEFLATED:FS}=N6,N1=16180,US=16181,jS=16182,VS=16183,BS=16184,qS=16185,GS=16186,HS=16187,zS=16188,$S=16189,Sv=16190,kc=16191,S2=16192,YS=16193,I2=16194,WS=16195,KS=16196,JS=16197,QS=16198,wy=16199,Ey=16200,XS=16201,ZS=16202,eI=16203,tI=16204,nI=16205,C2=16206,rI=16207,iI=16208,Gr=16209,D6=16210,L6=16211,g$=852,y$=592,v$=15,_$=v$,sI=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function b$(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ih=n=>{if(!n)return 1;const e=n.state;return!e||e.strm!==n||e.mode<N1||e.mode>L6?1:0},M6=n=>{if(Ih(n))return ja;const e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=N1,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(g$),e.distcode=e.distdyn=new Int32Array(y$),e.sane=1,e.back=-1,xh},O6=n=>{if(Ih(n))return ja;const e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,M6(n)},F6=(n,e)=>{let t;if(Ih(n))return ja;const r=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?ja:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=t,r.wbits=e,O6(n))},U6=(n,e)=>{if(!n)return ja;const t=new b$;n.state=t,t.strm=n,t.window=null,t.mode=N1;const r=F6(n,e);return r!==xh&&(n.state=null),r},x$=n=>U6(n,_$);let oI=!0,R2,P2;const w$=n=>{if(oI){R2=new Int32Array(512),P2=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(lg(C6,n.lens,0,288,R2,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;lg(R6,n.lens,0,32,P2,0,n.work,{bits:5}),oI=!1}n.lencode=R2,n.lenbits=9,n.distcode=P2,n.distbits=5},j6=(n,e,t,r)=>{let i;const s=n.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(e.subarray(t-s.wsize,t),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(e.subarray(t-r,t-r+i),s.wnext),r-=i,r?(s.window.set(e.subarray(t-r,t),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},E$=(n,e)=>{let t,r,i,s,a,c,u,d,p,g,_,w,P,O,L=0,B,K,W,J,ae,le,U,C;const N=new Uint8Array(4);let F,S;const k=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ih(n)||!n.output||!n.input&&n.avail_in!==0)return ja;t=n.state,t.mode===kc&&(t.mode=S2),a=n.next_out,i=n.output,u=n.avail_out,s=n.next_in,r=n.input,c=n.avail_in,d=t.hold,p=t.bits,g=c,_=u,C=xh;e:for(;;)switch(t.mode){case N1:if(t.wrap===0){t.mode=S2;break}for(;p<16;){if(c===0)break e;c--,d+=r[s++]<<p,p+=8}if(t.wrap&2&&d===35615){t.wbits===0&&(t.wbits=15),t.check=0,N[0]=d&255,N[1]=d>>>8&255,t.check=Vl(t.check,N,2,0),d=0,p=0,t.mode=US;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((d&255)<<8)+(d>>8))%31){n.msg="incorrect header check",t.mode=Gr;break}if((d&15)!==FS){n.msg="unknown compression method",t.mode=Gr;break}if(d>>>=4,p-=4,U=(d&15)+8,t.wbits===0&&(t.wbits=U),U>15||U>t.wbits){n.msg="invalid window size",t.mode=Gr;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=d&512?$S:kc,d=0,p=0;break;case US:for(;p<16;){if(c===0)break e;c--,d+=r[s++]<<p,p+=8}if(t.flags=d,(t.flags&255)!==FS){n.msg="unknown compression method",t.mode=Gr;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=Gr;break}t.head&&(t.head.text=d>>8&1),t.flags&512&&t.wrap&4&&(N[0]=d&255,N[1]=d>>>8&255,t.check=Vl(t.check,N,2,0)),d=0,p=0,t.mode=jS;case jS:for(;p<32;){if(c===0)break e;c--,d+=r[s++]<<p,p+=8}t.head&&(t.head.time=d),t.flags&512&&t.wrap&4&&(N[0]=d&255,N[1]=d>>>8&255,N[2]=d>>>16&255,N[3]=d>>>24&255,t.check=Vl(t.check,N,4,0)),d=0,p=0,t.mode=VS;case VS:for(;p<16;){if(c===0)break e;c--,d+=r[s++]<<p,p+=8}t.head&&(t.head.xflags=d&255,t.head.os=d>>8),t.flags&512&&t.wrap&4&&(N[0]=d&255,N[1]=d>>>8&255,t.check=Vl(t.check,N,2,0)),d=0,p=0,t.mode=BS;case BS:if(t.flags&1024){for(;p<16;){if(c===0)break e;c--,d+=r[s++]<<p,p+=8}t.length=d,t.head&&(t.head.extra_len=d),t.flags&512&&t.wrap&4&&(N[0]=d&255,N[1]=d>>>8&255,t.check=Vl(t.check,N,2,0)),d=0,p=0}else t.head&&(t.head.extra=null);t.mode=qS;case qS:if(t.flags&1024&&(w=t.length,w>c&&(w=c),w&&(t.head&&(U=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(r.subarray(s,s+w),U)),t.flags&512&&t.wrap&4&&(t.check=Vl(t.check,r,w,s)),c-=w,s+=w,t.length-=w),t.length))break e;t.length=0,t.mode=GS;case GS:if(t.flags&2048){if(c===0)break e;w=0;do U=r[s+w++],t.head&&U&&t.length<65536&&(t.head.name+=String.fromCharCode(U));while(U&&w<c);if(t.flags&512&&t.wrap&4&&(t.check=Vl(t.check,r,w,s)),c-=w,s+=w,U)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=HS;case HS:if(t.flags&4096){if(c===0)break e;w=0;do U=r[s+w++],t.head&&U&&t.length<65536&&(t.head.comment+=String.fromCharCode(U));while(U&&w<c);if(t.flags&512&&t.wrap&4&&(t.check=Vl(t.check,r,w,s)),c-=w,s+=w,U)break e}else t.head&&(t.head.comment=null);t.mode=zS;case zS:if(t.flags&512){for(;p<16;){if(c===0)break e;c--,d+=r[s++]<<p,p+=8}if(t.wrap&4&&d!==(t.check&65535)){n.msg="header crc mismatch",t.mode=Gr;break}d=0,p=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=kc;break;case $S:for(;p<32;){if(c===0)break e;c--,d+=r[s++]<<p,p+=8}n.adler=t.check=sI(d),d=0,p=0,t.mode=Sv;case Sv:if(t.havedict===0)return n.next_out=a,n.avail_out=u,n.next_in=s,n.avail_in=c,t.hold=d,t.bits=p,p$;n.adler=t.check=1,t.mode=kc;case kc:if(e===h$||e===xy)break e;case S2:if(t.last){d>>>=p&7,p-=p&7,t.mode=C2;break}for(;p<3;){if(c===0)break e;c--,d+=r[s++]<<p,p+=8}switch(t.last=d&1,d>>>=1,p-=1,d&3){case 0:t.mode=YS;break;case 1:if(w$(t),t.mode=wy,e===xy){d>>>=2,p-=2;break e}break;case 2:t.mode=KS;break;case 3:n.msg="invalid block type",t.mode=Gr}d>>>=2,p-=2;break;case YS:for(d>>>=p&7,p-=p&7;p<32;){if(c===0)break e;c--,d+=r[s++]<<p,p+=8}if((d&65535)!==(d>>>16^65535)){n.msg="invalid stored block lengths",t.mode=Gr;break}if(t.length=d&65535,d=0,p=0,t.mode=I2,e===xy)break e;case I2:t.mode=WS;case WS:if(w=t.length,w){if(w>c&&(w=c),w>u&&(w=u),w===0)break e;i.set(r.subarray(s,s+w),a),c-=w,s+=w,u-=w,a+=w,t.length-=w;break}t.mode=kc;break;case KS:for(;p<14;){if(c===0)break e;c--,d+=r[s++]<<p,p+=8}if(t.nlen=(d&31)+257,d>>>=5,p-=5,t.ndist=(d&31)+1,d>>>=5,p-=5,t.ncode=(d&15)+4,d>>>=4,p-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=Gr;break}t.have=0,t.mode=JS;case JS:for(;t.have<t.ncode;){for(;p<3;){if(c===0)break e;c--,d+=r[s++]<<p,p+=8}t.lens[k[t.have++]]=d&7,d>>>=3,p-=3}for(;t.have<19;)t.lens[k[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,F={bits:t.lenbits},C=lg(d$,t.lens,0,19,t.lencode,0,t.work,F),t.lenbits=F.bits,C){n.msg="invalid code lengths set",t.mode=Gr;break}t.have=0,t.mode=QS;case QS:for(;t.have<t.nlen+t.ndist;){for(;L=t.lencode[d&(1<<t.lenbits)-1],B=L>>>24,K=L>>>16&255,W=L&65535,!(B<=p);){if(c===0)break e;c--,d+=r[s++]<<p,p+=8}if(W<16)d>>>=B,p-=B,t.lens[t.have++]=W;else{if(W===16){for(S=B+2;p<S;){if(c===0)break e;c--,d+=r[s++]<<p,p+=8}if(d>>>=B,p-=B,t.have===0){n.msg="invalid bit length repeat",t.mode=Gr;break}U=t.lens[t.have-1],w=3+(d&3),d>>>=2,p-=2}else if(W===17){for(S=B+3;p<S;){if(c===0)break e;c--,d+=r[s++]<<p,p+=8}d>>>=B,p-=B,U=0,w=3+(d&7),d>>>=3,p-=3}else{for(S=B+7;p<S;){if(c===0)break e;c--,d+=r[s++]<<p,p+=8}d>>>=B,p-=B,U=0,w=11+(d&127),d>>>=7,p-=7}if(t.have+w>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=Gr;break}for(;w--;)t.lens[t.have++]=U}}if(t.mode===Gr)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=Gr;break}if(t.lenbits=9,F={bits:t.lenbits},C=lg(C6,t.lens,0,t.nlen,t.lencode,0,t.work,F),t.lenbits=F.bits,C){n.msg="invalid literal/lengths set",t.mode=Gr;break}if(t.distbits=6,t.distcode=t.distdyn,F={bits:t.distbits},C=lg(R6,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,F),t.distbits=F.bits,C){n.msg="invalid distances set",t.mode=Gr;break}if(t.mode=wy,e===xy)break e;case wy:t.mode=Ey;case Ey:if(c>=6&&u>=258){n.next_out=a,n.avail_out=u,n.next_in=s,n.avail_in=c,t.hold=d,t.bits=p,s$(n,_),a=n.next_out,i=n.output,u=n.avail_out,s=n.next_in,r=n.input,c=n.avail_in,d=t.hold,p=t.bits,t.mode===kc&&(t.back=-1);break}for(t.back=0;L=t.lencode[d&(1<<t.lenbits)-1],B=L>>>24,K=L>>>16&255,W=L&65535,!(B<=p);){if(c===0)break e;c--,d+=r[s++]<<p,p+=8}if(K&&(K&240)===0){for(J=B,ae=K,le=W;L=t.lencode[le+((d&(1<<J+ae)-1)>>J)],B=L>>>24,K=L>>>16&255,W=L&65535,!(J+B<=p);){if(c===0)break e;c--,d+=r[s++]<<p,p+=8}d>>>=J,p-=J,t.back+=J}if(d>>>=B,p-=B,t.back+=B,t.length=W,K===0){t.mode=nI;break}if(K&32){t.back=-1,t.mode=kc;break}if(K&64){n.msg="invalid literal/length code",t.mode=Gr;break}t.extra=K&15,t.mode=XS;case XS:if(t.extra){for(S=t.extra;p<S;){if(c===0)break e;c--,d+=r[s++]<<p,p+=8}t.length+=d&(1<<t.extra)-1,d>>>=t.extra,p-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=ZS;case ZS:for(;L=t.distcode[d&(1<<t.distbits)-1],B=L>>>24,K=L>>>16&255,W=L&65535,!(B<=p);){if(c===0)break e;c--,d+=r[s++]<<p,p+=8}if((K&240)===0){for(J=B,ae=K,le=W;L=t.distcode[le+((d&(1<<J+ae)-1)>>J)],B=L>>>24,K=L>>>16&255,W=L&65535,!(J+B<=p);){if(c===0)break e;c--,d+=r[s++]<<p,p+=8}d>>>=J,p-=J,t.back+=J}if(d>>>=B,p-=B,t.back+=B,K&64){n.msg="invalid distance code",t.mode=Gr;break}t.offset=W,t.extra=K&15,t.mode=eI;case eI:if(t.extra){for(S=t.extra;p<S;){if(c===0)break e;c--,d+=r[s++]<<p,p+=8}t.offset+=d&(1<<t.extra)-1,d>>>=t.extra,p-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=Gr;break}t.mode=tI;case tI:if(u===0)break e;if(w=_-u,t.offset>w){if(w=t.offset-w,w>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=Gr;break}w>t.wnext?(w-=t.wnext,P=t.wsize-w):P=t.wnext-w,w>t.length&&(w=t.length),O=t.window}else O=i,P=a-t.offset,w=t.length;w>u&&(w=u),u-=w,t.length-=w;do i[a++]=O[P++];while(--w);t.length===0&&(t.mode=Ey);break;case nI:if(u===0)break e;i[a++]=t.length,u--,t.mode=Ey;break;case C2:if(t.wrap){for(;p<32;){if(c===0)break e;c--,d|=r[s++]<<p,p+=8}if(_-=u,n.total_out+=_,t.total+=_,t.wrap&4&&_&&(n.adler=t.check=t.flags?Vl(t.check,i,_,a-_):$b(t.check,i,_,a-_)),_=u,t.wrap&4&&(t.flags?d:sI(d))!==t.check){n.msg="incorrect data check",t.mode=Gr;break}d=0,p=0}t.mode=rI;case rI:if(t.wrap&&t.flags){for(;p<32;){if(c===0)break e;c--,d+=r[s++]<<p,p+=8}if(t.wrap&4&&d!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=Gr;break}d=0,p=0}t.mode=iI;case iI:C=f$;break e;case Gr:C=P6;break e;case D6:return k6;case L6:default:return ja}return n.next_out=a,n.avail_out=u,n.next_in=s,n.avail_in=c,t.hold=d,t.bits=p,(t.wsize||_!==n.avail_out&&t.mode<Gr&&(t.mode<C2||e!==OS))&&j6(n,n.output,n.next_out,_-n.avail_out),g-=n.avail_in,_-=n.avail_out,n.total_in+=g,n.total_out+=_,t.total+=_,t.wrap&4&&_&&(n.adler=t.check=t.flags?Vl(t.check,i,_,n.next_out-_):$b(t.check,i,_,n.next_out-_)),n.data_type=t.bits+(t.last?64:0)+(t.mode===kc?128:0)+(t.mode===wy||t.mode===I2?256:0),(g===0&&_===0||e===OS)&&C===xh&&(C=m$),C},T$=n=>{if(Ih(n))return ja;let e=n.state;return e.window&&(e.window=null),n.state=null,xh},A$=(n,e)=>{if(Ih(n))return ja;const t=n.state;return(t.wrap&2)===0?ja:(t.head=e,e.done=!1,xh)},N$=(n,e)=>{const t=e.length;let r,i,s;return Ih(n)||(r=n.state,r.wrap!==0&&r.mode!==Sv)?ja:r.mode===Sv&&(i=1,i=$b(i,e,t,0),i!==r.check)?P6:(s=j6(n,e,t,t),s?(r.mode=D6,k6):(r.havedict=1,xh))};var S$=O6,I$=F6,C$=M6,R$=x$,P$=U6,k$=E$,D$=T$,L$=A$,M$=N$,O$="pako inflate (from Nodeca project)",Dc={inflateReset:S$,inflateReset2:I$,inflateResetKeep:C$,inflateInit:R$,inflateInit2:P$,inflate:k$,inflateEnd:D$,inflateGetHeader:L$,inflateSetDictionary:M$,inflateInfo:O$};function F$(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var U$=F$;const V6=Object.prototype.toString,{Z_NO_FLUSH:j$,Z_FINISH:V$,Z_OK:jg,Z_STREAM_END:k2,Z_NEED_DICT:D2,Z_STREAM_ERROR:B$,Z_DATA_ERROR:aI,Z_MEM_ERROR:q$}=N6;function y0(n){this.options=S6.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new r$,this.strm.avail_out=0;let t=Dc.inflateInit2(this.strm,e.windowBits);if(t!==jg)throw new Error(Yb[t]);if(this.header=new U$,Dc.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Wb.string2buf(e.dictionary):V6.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=Dc.inflateSetDictionary(this.strm,e.dictionary),t!==jg)))throw new Error(Yb[t])}y0.prototype.push=function(n,e){const t=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let s,a,c;if(this.ended)return!1;for(e===~~e?a=e:a=e===!0?V$:j$,V6.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),s=Dc.inflate(t,a),s===D2&&i&&(s=Dc.inflateSetDictionary(t,i),s===jg?s=Dc.inflate(t,a):s===aI&&(s=D2));t.avail_in>0&&s===k2&&t.state.wrap>0&&n[t.next_in]!==0;)Dc.inflateReset(t),s=Dc.inflate(t,a);switch(s){case B$:case aI:case D2:case q$:return this.onEnd(s),this.ended=!0,!1}if(c=t.avail_out,t.next_out&&(t.avail_out===0||s===k2))if(this.options.to==="string"){let u=Wb.utf8border(t.output,t.next_out),d=t.next_out-u,p=Wb.buf2string(t.output,u);t.next_out=d,t.avail_out=r-d,d&&t.output.set(t.output.subarray(u,u+d),0),this.onData(p)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(s===jg&&c===0)){if(s===k2)return s=Dc.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};y0.prototype.onData=function(n){this.chunks.push(n)};y0.prototype.onEnd=function(n){n===jg&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=S6.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function G$(n,e){const t=new y0(e);if(t.push(n),t.err)throw t.msg||Yb[t.err];return t.result}var H$=y0,z$=G$,$$={Inflate:H$,inflate:z$};const{Inflate:Y$,inflate:W$}=$$;var lI=Y$,K$=W$;const B6=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;B6[n]=e}const cI=4294967295;function J$(n,e,t){let r=n;for(let i=0;i<t;i++)r=B6[(r^e[i])&255]^r>>>8;return r}function Q$(n,e){return(J$(cI,n,e)^cI)>>>0}function uI(n,e,t){const r=n.readUint32(),i=Q$(new Uint8Array(n.buffer,n.byteOffset+n.offset-e-4,e),e);if(i!==r)throw new Error(`CRC mismatch for chunk ${t}. Expected ${r}, found ${i}`)}function q6(n,e,t){for(let r=0;r<t;r++)e[r]=n[r]}function G6(n,e,t,r){let i=0;for(;i<r;i++)e[i]=n[i];for(;i<t;i++)e[i]=n[i]+e[i-r]&255}function H6(n,e,t,r){let i=0;if(t.length===0)for(;i<r;i++)e[i]=n[i];else for(;i<r;i++)e[i]=n[i]+t[i]&255}function z6(n,e,t,r,i){let s=0;if(t.length===0){for(;s<i;s++)e[s]=n[s];for(;s<r;s++)e[s]=n[s]+(e[s-i]>>1)&255}else{for(;s<i;s++)e[s]=n[s]+(t[s]>>1)&255;for(;s<r;s++)e[s]=n[s]+(e[s-i]+t[s]>>1)&255}}function $6(n,e,t,r,i){let s=0;if(t.length===0){for(;s<i;s++)e[s]=n[s];for(;s<r;s++)e[s]=n[s]+e[s-i]&255}else{for(;s<i;s++)e[s]=n[s]+t[s]&255;for(;s<r;s++)e[s]=n[s]+X$(e[s-i],t[s],t[s-i])&255}}function X$(n,e,t){const r=n+e-t,i=Math.abs(r-n),s=Math.abs(r-e),a=Math.abs(r-t);return i<=s&&i<=a?n:s<=a?e:t}function Z$(n,e,t,r,i,s){switch(n){case 0:q6(e,t,i);break;case 1:G6(e,t,i,s);break;case 2:H6(e,t,r,i);break;case 3:z6(e,t,r,i,s);break;case 4:$6(e,t,r,i,s);break;default:throw new Error(`Unsupported filter: ${n}`)}}const eY=new Uint16Array([255]),tY=new Uint8Array(eY.buffer),nY=tY[0]===255;function rY(n){const{data:e,width:t,height:r,channels:i,depth:s}=n,a=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],c=Math.ceil(s/8)*i,u=new Uint8Array(r*t*c);let d=0;for(let p=0;p<7;p++){const g=a[p],_=Math.ceil((t-g.x)/g.xStep),w=Math.ceil((r-g.y)/g.yStep);if(_<=0||w<=0)continue;const P=_*c,O=new Uint8Array(P);for(let L=0;L<w;L++){const B=e[d++],K=e.subarray(d,d+P);d+=P;const W=new Uint8Array(P);Z$(B,K,W,O,P,c),O.set(W);for(let J=0;J<_;J++){const ae=g.x+J*g.xStep,le=g.y+L*g.yStep;if(!(ae>=t||le>=r))for(let U=0;U<c;U++)u[(le*t+ae)*c+U]=W[J*c+U]}}}if(s===16){const p=new Uint16Array(u.buffer);if(nY)for(let g=0;g<p.length;g++)p[g]=iY(p[g]);return p}else return u}function iY(n){return(n&255)<<8|n>>8&255}const sY=new Uint16Array([255]),oY=new Uint8Array(sY.buffer),aY=oY[0]===255,lY=new Uint8Array(0);function dI(n){const{data:e,width:t,height:r,channels:i,depth:s}=n,a=Math.ceil(s/8)*i,c=Math.ceil(s/8*i*t),u=new Uint8Array(r*c);let d=lY,p=0,g,_;for(let w=0;w<r;w++){switch(g=e.subarray(p+1,p+1+c),_=u.subarray(w*c,(w+1)*c),e[p]){case 0:q6(g,_,c);break;case 1:G6(g,_,c,a);break;case 2:H6(g,_,d,c);break;case 3:z6(g,_,d,c,a);break;case 4:$6(g,_,d,c,a);break;default:throw new Error(`Unsupported filter: ${e[p]}`)}d=_,p+=c+1}if(s===16){const w=new Uint16Array(u.buffer);if(aY)for(let P=0;P<w.length;P++)w[P]=cY(w[P]);return w}else return u}function cY(n){return(n&255)<<8|n>>8&255}const zy=Uint8Array.of(137,80,78,71,13,10,26,10);function hI(n){if(!uY(n.readBytes(zy.length)))throw new Error("wrong PNG signature")}function uY(n){if(n.length<zy.length)return!1;for(let e=0;e<zy.length;e++)if(n[e]!==zy[e])return!1;return!0}const dY="tEXt",hY=0,Y6=new TextDecoder("latin1");function fY(n){if(mY(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}const pY=/^[\u0000-\u00FF]*$/;function mY(n){if(!pY.test(n))throw new Error("invalid latin1 text")}function gY(n,e,t){const r=W6(e);n[r]=yY(e,t-r.length-1)}function W6(n){for(n.mark();n.readByte()!==hY;);const e=n.offset;n.reset();const t=Y6.decode(n.readBytes(e-n.offset-1));return n.skip(1),fY(t),t}function yY(n,e){return Y6.decode(n.readBytes(e))}const oa={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},L2={UNKNOWN:-1,DEFLATE:0},fI={UNKNOWN:-1,ADAPTIVE:0},M2={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Ty={NONE:0,BACKGROUND:1,PREVIOUS:2},O2={SOURCE:0,OVER:1};class vY extends c5{constructor(t,r={}){super(t);cr(this,"_checkCrc");cr(this,"_inflator");cr(this,"_png");cr(this,"_apng");cr(this,"_end");cr(this,"_hasPalette");cr(this,"_palette");cr(this,"_hasTransparency");cr(this,"_transparency");cr(this,"_compressionMethod");cr(this,"_filterMethod");cr(this,"_interlaceMethod");cr(this,"_colorType");cr(this,"_isAnimated");cr(this,"_numberOfFrames");cr(this,"_numberOfPlays");cr(this,"_frames");cr(this,"_writingDataChunks");const{checkCrc:i=!1}=r;this._checkCrc=i,this._inflator=new lI,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=L2.UNKNOWN,this._filterMethod=fI.UNKNOWN,this._interlaceMethod=M2.UNKNOWN,this._colorType=oa.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(hI(this);!this._end;){const t=this.readUint32(),r=this.readChars(4);this.decodeChunk(t,r)}return this.decodeImage(),this._png}decodeApng(){for(hI(this);!this._end;){const t=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(t,r)}return this.decodeApngImage(),this._apng}decodeChunk(t,r){const i=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case dY:gY(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-i!==t)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?uI(this,t+4,r):this.skip(4)}decodeApngChunk(t,r){const i=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,r),this.offset=i+t;break}if(this.offset-i!==t)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?uI(this,t+4,r):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=_Y(this.readUint8());const r=this.readUint8();this._colorType=r;let i;switch(r){case oa.GREYSCALE:i=1;break;case oa.TRUECOLOUR:i=3;break;case oa.INDEXED_COLOUR:i=1;break;case oa.GREYSCALE_ALPHA:i=2;break;case oa.TRUECOLOUR_ALPHA:i=4;break;case oa.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==L2.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const r=t/3;this._hasPalette=!0;const i=[];this._palette=i;for(let s=0;s<r;s++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const r=t,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let r=t,i=this.offset+this.byteOffset;if(i+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case oa.GREYSCALE:case oa.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let r=0;r<t/2;r++)this._transparency[r]=this.readUint16();break}case oa.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let r=0;for(;r<t;r++){const i=this.readByte();this._palette[r].push(i)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case oa.UNKNOWN:case oa.GREYSCALE_ALPHA:case oa.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const r=W6(this),i=this.readUint8();if(i!==L2.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const s=this.readBytes(t-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:K$(s)}}decodepHYs(){const t=this.readUint32(),r=this.readUint32(),i=this.readByte();this._png.resolution={x:t,y:r,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const r={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(t);if(i){if(i.data=dI({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)r.data=i.data;else{const s=this._apng.frames.at(t-1);this.disposeFrame(i,s,r),this.addFrameDataToCanvas(r,i)}this._apng.frames.push(r)}}return this._apng}disposeFrame(t,r,i){switch(t.disposeOp){case Ty.NONE:break;case Ty.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let a=0;a<this._png.width;a++){const c=(s*t.width+a)*this._png.channels;for(let u=0;u<this._png.channels;u++)i.data[c+u]=0}break;case Ty.PREVIOUS:i.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,r){const i=1<<this._png.depth,s=(a,c)=>{const u=((a+r.yOffset)*this._png.width+r.xOffset+c)*this._png.channels,d=(a*r.width+c)*this._png.channels;return{index:u,frameIndex:d}};switch(r.blendOp){case O2.SOURCE:for(let a=0;a<r.height;a++)for(let c=0;c<r.width;c++){const{index:u,frameIndex:d}=s(a,c);for(let p=0;p<this._png.channels;p++)t.data[u+p]=r.data[d+p]}break;case O2.OVER:for(let a=0;a<r.height;a++)for(let c=0;c<r.width;c++){const{index:u,frameIndex:d}=s(a,c);for(let p=0;p<this._png.channels;p++){const g=r.data[d+this._png.channels-1]/i,_=p%(this._png.channels-1)===0?1:r.data[d+p],w=Math.floor(g*_+(1-g)*t.data[u+p]);t.data[u+p]+=w}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var r;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?((r=this._frames)==null?void 0:r.at(0)).data:this._inflator.result;if(this._filterMethod!==fI.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===M2.NO_INTERLACE)this._png.data=dI({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===M2.ADAM7)this._png.data=rY({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,r=this._frames.at(-1);r?r.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Ty.NONE,blendOp:O2.SOURCE,data:t}),this._inflator=new lI,this._writingDataChunks=!1}}function _Y(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}var pI;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.METRE=1]="METRE"})(pI||(pI={}));function bY(n,e){return new vY(n,e).decode()}var un=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function F2(){un.console&&typeof un.console.log=="function"&&un.console.log.apply(un.console,arguments)}var Nr={log:F2,warn:function(n){un.console&&(typeof un.console.warn=="function"?un.console.warn.apply(un.console,arguments):F2.call(null,arguments))},error:function(n){un.console&&(typeof un.console.error=="function"?un.console.error.apply(un.console,arguments):F2(n))}};function U2(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){Bd(r.response,e,t)},r.onerror=function(){Nr.error("could not download file")},r.send()}function mI(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Ay(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Bd=un.saveAs||((typeof window>"u"?"undefined":ur(window))!=="object"||window!==un?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=un.URL||un.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?mI(i.href)?U2(n,e,t):Ay(i,i.target="_blank"):Ay(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Ay(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(mI(n))U2(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){Ay(r)})}else navigator.msSaveOrOpenBlob((function(i,s){return s===void 0?s={autoBom:!1}:ur(s)!=="object"&&(Nr.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return U2(n,e,t);var i=n.type==="application/octet-stream",s=/constructor/i.test(un.HTMLElement)||un.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&s)&&(typeof FileReader>"u"?"undefined":ur(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var p=c.result;p=a?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=p:location=p,r=null},c.readAsDataURL(n)}else{var u=un.URL||un.webkitURL,d=u.createObjectURL(n);r?r.location=d:location.href=d,r=null,setTimeout(function(){u.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function K6(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,s=t[r].process,a=i.exec(n);a&&(e=s(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),u=this.g.toString(16),d=this.b.toString(16);return c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),d.length==1&&(d="0"+d),"#"+c+u+d}}var $y=un.atob.bind(un),gI=un.btoa.bind(un);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function j2(n,e){var t=n[0],r=n[1],i=n[2],s=n[3];t=Ys(t,r,i,s,e[0],7,-680876936),s=Ys(s,t,r,i,e[1],12,-389564586),i=Ys(i,s,t,r,e[2],17,606105819),r=Ys(r,i,s,t,e[3],22,-1044525330),t=Ys(t,r,i,s,e[4],7,-176418897),s=Ys(s,t,r,i,e[5],12,1200080426),i=Ys(i,s,t,r,e[6],17,-1473231341),r=Ys(r,i,s,t,e[7],22,-45705983),t=Ys(t,r,i,s,e[8],7,1770035416),s=Ys(s,t,r,i,e[9],12,-1958414417),i=Ys(i,s,t,r,e[10],17,-42063),r=Ys(r,i,s,t,e[11],22,-1990404162),t=Ys(t,r,i,s,e[12],7,1804603682),s=Ys(s,t,r,i,e[13],12,-40341101),i=Ys(i,s,t,r,e[14],17,-1502002290),t=Ws(t,r=Ys(r,i,s,t,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Ws(s,t,r,i,e[6],9,-1069501632),i=Ws(i,s,t,r,e[11],14,643717713),r=Ws(r,i,s,t,e[0],20,-373897302),t=Ws(t,r,i,s,e[5],5,-701558691),s=Ws(s,t,r,i,e[10],9,38016083),i=Ws(i,s,t,r,e[15],14,-660478335),r=Ws(r,i,s,t,e[4],20,-405537848),t=Ws(t,r,i,s,e[9],5,568446438),s=Ws(s,t,r,i,e[14],9,-1019803690),i=Ws(i,s,t,r,e[3],14,-187363961),r=Ws(r,i,s,t,e[8],20,1163531501),t=Ws(t,r,i,s,e[13],5,-1444681467),s=Ws(s,t,r,i,e[2],9,-51403784),i=Ws(i,s,t,r,e[7],14,1735328473),t=Ks(t,r=Ws(r,i,s,t,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Ks(s,t,r,i,e[8],11,-2022574463),i=Ks(i,s,t,r,e[11],16,1839030562),r=Ks(r,i,s,t,e[14],23,-35309556),t=Ks(t,r,i,s,e[1],4,-1530992060),s=Ks(s,t,r,i,e[4],11,1272893353),i=Ks(i,s,t,r,e[7],16,-155497632),r=Ks(r,i,s,t,e[10],23,-1094730640),t=Ks(t,r,i,s,e[13],4,681279174),s=Ks(s,t,r,i,e[0],11,-358537222),i=Ks(i,s,t,r,e[3],16,-722521979),r=Ks(r,i,s,t,e[6],23,76029189),t=Ks(t,r,i,s,e[9],4,-640364487),s=Ks(s,t,r,i,e[12],11,-421815835),i=Ks(i,s,t,r,e[15],16,530742520),t=Js(t,r=Ks(r,i,s,t,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Js(s,t,r,i,e[7],10,1126891415),i=Js(i,s,t,r,e[14],15,-1416354905),r=Js(r,i,s,t,e[5],21,-57434055),t=Js(t,r,i,s,e[12],6,1700485571),s=Js(s,t,r,i,e[3],10,-1894986606),i=Js(i,s,t,r,e[10],15,-1051523),r=Js(r,i,s,t,e[1],21,-2054922799),t=Js(t,r,i,s,e[8],6,1873313359),s=Js(s,t,r,i,e[15],10,-30611744),i=Js(i,s,t,r,e[6],15,-1560198380),r=Js(r,i,s,t,e[13],21,1309151649),t=Js(t,r,i,s,e[4],6,-145523070),s=Js(s,t,r,i,e[11],10,-1120210379),i=Js(i,s,t,r,e[2],15,718787259),r=Js(r,i,s,t,e[9],21,-343485551),n[0]=$u(t,n[0]),n[1]=$u(r,n[1]),n[2]=$u(i,n[2]),n[3]=$u(s,n[3])}function S1(n,e,t,r,i,s){return e=$u($u(e,n),$u(r,s)),$u(e<<i|e>>>32-i,t)}function Ys(n,e,t,r,i,s,a){return S1(e&t|~e&r,n,e,i,s,a)}function Ws(n,e,t,r,i,s,a){return S1(e&r|t&~r,n,e,i,s,a)}function Ks(n,e,t,r,i,s,a){return S1(e^t^r,n,e,i,s,a)}function Js(n,e,t,r,i,s,a){return S1(t^(e|~r),n,e,i,s,a)}function J6(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)j2(r,xY(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(j2(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,j2(r,i),r}function xY(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}var yI="0123456789abcdef".split("");function wY(n){for(var e="",t=0;t<4;t++)e+=yI[n>>8*t+4&15]+yI[n>>8*t&15];return e}function EY(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function Kb(n){return J6(n).map(EY).join("")}var TY=(function(n){for(var e=0;e<n.length;e++)n[e]=wY(n[e]);return n.join("")})(J6("hello"))!="5d41402abc4b2a76b9719d911017c592";function $u(n,e){if(TY){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Jb(n,e){var t,r,i,s;if(n!==t){for(var a=(i=n,s=1+(256/n.length|0),new Array(s+1).join(i)),c=[],u=0;u<256;u++)c[u]=u;var d=0;for(u=0;u<256;u++){var p=c[u];d=(d+p+a.charCodeAt(u))%256,c[u]=c[d],c[d]=p}t=n,r=c}else c=r;var g=e.length,_=0,w=0,P="";for(u=0;u<g;u++)w=(w+(p=c[_=(_+1)%256]))%256,c[_]=c[w],c[w]=p,a=c[(c[_]+c[w])%256],P+=String.fromCharCode(e.charCodeAt(u)^a);return P}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var vI={print:4,modify:8,copy:16,"annot-forms":32};function Cf(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(c){if(vI.perm!==void 0)throw new Error("Invalid permission: "+c);i+=vI[c]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),a=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^i)),this.encryptionKey=Kb(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Jb(this.encryptionKey,this.padding)}function Rf(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):n[r]}return e}function _I(n){if(ur(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[r,!!i],s},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[t]){var a=e[t][s];try{a[0].apply(n,r)}catch(c){un.console&&Nr.error("jsPDF PubSub Error",c.message,c)}a[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Iv(n){if(!(this instanceof Iv))return new Iv(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function Q6(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Yd(n,e,t,r,i){if(!(this instanceof Yd))return new Yd(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,Q6.call(this,r,i)}function kf(n,e,t,r,i){if(!(this instanceof kf))return new kf(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,Q6.call(this,r,i)}function zt(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],a=[],c=1,u=16,d="S",p=null;ur(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,s=n.compress||n.compressPdf||s,(p=n.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),c=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(u=n.floatPrecision),d=n.defaultPathOperation||"S"),a=n.filters||(s===!0?["FlateEncode"]:a),r=r||"mm",t=(""+(t||"P")).toLowerCase();var g=n.putOnlyUsedFonts||!1,_={},w={internal:{},__private__:{}};w.__private__.PubSub=_I;var P="1.3",O=w.__private__.getPdfVersion=function(){return P};w.__private__.setPdfVersion=function(I){P=I};var L={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};w.__private__.getPageFormats=function(){return L};var B=w.__private__.getPageFormat=function(I){return L[I]};i=i||"a4";var K="compat",W="advanced",J=K;function ae(){this.saveGraphicsState(),ce(new Gt(nn,0,0,-nn,0,ao()*nn).toString()+" cm"),this.setFontSize(this.getFontSize()/nn),d="n",J=W}function le(){this.restoreGraphicsState(),d="S",J=K}var U=w.__private__.combineFontStyleAndFontWeight=function(I,z){if(I=="bold"&&z=="normal"||I=="bold"&&z==400||I=="normal"&&z=="italic"||I=="bold"&&z=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return z&&(I=z==400||z==="normal"?I==="italic"?"italic":"normal":z!=700&&z!=="bold"||I!=="normal"?(z==700?"bold":z)+""+I:"bold"),I};w.advancedAPI=function(I){var z=J===K;return z&&ae.call(this),typeof I!="function"||(I(this),z&&le.call(this)),this},w.compatAPI=function(I){var z=J===W;return z&&le.call(this),typeof I!="function"||(I(this),z&&ae.call(this)),this},w.isAdvancedAPI=function(){return J===W};var C,N=function(I){if(J!==W)throw new Error(I+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},F=w.roundToPrecision=w.__private__.roundToPrecision=function(I,z){var de=e||z;if(isNaN(I)||isNaN(de))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return I.toFixed(de).replace(/0+$/,"")};C=w.hpf=w.__private__.hpf=typeof u=="number"?function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.hpf");return F(I,u)}:u==="smart"?function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.hpf");return F(I,I>-1&&I<1?16:5)}:function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.hpf");return F(I,16)};var S=w.f2=w.__private__.f2=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.f2");return F(I,2)},k=w.__private__.f3=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.f3");return F(I,3)},M=w.scale=w.__private__.scale=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.scale");return J===K?I*nn:J===W?I:void 0},Q=function(I){return M((function(z){return J===K?ao()-z:J===W?z:void 0})(I))};w.__private__.setPrecision=w.setPrecision=function(I){typeof parseInt(I,10)=="number"&&(e=parseInt(I,10))};var pe,se="00000000000000000000000000000000",ve=w.__private__.getFileId=function(){return se},me=w.__private__.setFileId=function(I){return se=I!==void 0&&/^[a-fA-F0-9]{32}$/.test(I)?I.toUpperCase():se.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(wr=new Cf(p.userPermissions,p.userPassword,p.ownerPassword,se)),se};w.setFileId=function(I){return me(I),this},w.getFileId=function(){return ve()};var Se=w.__private__.convertDateToPDFDate=function(I){var z=I.getTimezoneOffset(),de=z<0?"+":"-",be=Math.floor(Math.abs(z/60)),Ce=Math.abs(z%60),Ye=[de,Y(be),"'",Y(Ce),"'"].join("");return["D:",I.getFullYear(),Y(I.getMonth()+1),Y(I.getDate()),Y(I.getHours()),Y(I.getMinutes()),Y(I.getSeconds()),Ye].join("")},Ve=w.__private__.convertPDFDateToDate=function(I){var z=parseInt(I.substr(2,4),10),de=parseInt(I.substr(6,2),10)-1,be=parseInt(I.substr(8,2),10),Ce=parseInt(I.substr(10,2),10),Ye=parseInt(I.substr(12,2),10),tt=parseInt(I.substr(14,2),10);return new Date(z,de,be,Ce,Ye,tt,0)},ne=w.__private__.setCreationDate=function(I){var z;if(I===void 0&&(I=new Date),I instanceof Date)z=Se(I);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(I))throw new Error("Invalid argument passed to jsPDF.setCreationDate");z=I}return pe=z},H=w.__private__.getCreationDate=function(I){var z=pe;return I==="jsDate"&&(z=Ve(pe)),z};w.setCreationDate=function(I){return ne(I),this},w.getCreationDate=function(I){return H(I)};var te,Y=w.__private__.padd2=function(I){return("0"+parseInt(I)).slice(-2)},fe=w.__private__.padd2Hex=function(I){return("00"+(I=I.toString())).substr(I.length)},ge=0,xe=[],we=[],Ie=0,Ge=[],Qe=[],it=!1,dt=we;w.__private__.setCustomOutputDestination=function(I){it=!0,dt=I};var vt=function(I){it||(dt=I)};w.__private__.resetCustomOutputDestination=function(){it=!1,dt=we};var ce=w.__private__.out=function(I){return I=I.toString(),Ie+=I.length+1,dt.push(I),dt},ht=w.__private__.write=function(I){return ce(arguments.length===1?I.toString():Array.prototype.join.call(arguments," "))},Bt=w.__private__.getArrayBuffer=function(I){for(var z=I.length,de=new ArrayBuffer(z),be=new Uint8Array(de);z--;)be[z]=I.charCodeAt(z);return de},Mt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];w.__private__.getStandardFonts=function(){return Mt};var Ke=n.fontSize||16;w.__private__.setFontSize=w.setFontSize=function(I){return Ke=J===W?I/nn:I,this};var bt,ye=w.__private__.getFontSize=w.getFontSize=function(){return J===K?Ke:Ke*nn},He=n.R2L||!1;w.__private__.setR2L=w.setR2L=function(I){return He=I,this},w.__private__.getR2L=w.getR2L=function(){return He};var rt,at=w.__private__.setZoomMode=function(I){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(I))bt=I;else if(isNaN(I)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(I)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+I+'" is not recognized.');bt=I}else bt=parseInt(I,10)};w.__private__.getZoomMode=function(){return bt};var _t,gt=w.__private__.setPageMode=function(I){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(I)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+I+'" is not recognized.');rt=I};w.__private__.getPageMode=function(){return rt};var mt=w.__private__.setLayoutMode=function(I){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(I)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+I+'" is not recognized.');_t=I};w.__private__.getLayoutMode=function(){return _t},w.__private__.setDisplayMode=w.setDisplayMode=function(I,z,de){return at(I),mt(z),gt(de),this};var Yt={title:"",subject:"",author:"",keywords:"",creator:""};w.__private__.getDocumentProperty=function(I){if(Object.keys(Yt).indexOf(I)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Yt[I]},w.__private__.getDocumentProperties=function(){return Yt},w.__private__.setDocumentProperties=w.setProperties=w.setDocumentProperties=function(I){for(var z in Yt)Yt.hasOwnProperty(z)&&I[z]&&(Yt[z]=I[z]);return this},w.__private__.setDocumentProperty=function(I,z){if(Object.keys(Yt).indexOf(I)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Yt[I]=z};var wt,nn,St,rr,Rt,Ot={},rn={},dn=[],qt={},Vn={},en={},tn={},Gn=null,jt=0,Ft=[],vn=new _I(w),Vi=n.hotfixes||[],Si={},bo={},gi=[],Gt=function I(z,de,be,Ce,Ye,tt){if(!(this instanceof I))return new I(z,de,be,Ce,Ye,tt);isNaN(z)&&(z=1),isNaN(de)&&(de=0),isNaN(be)&&(be=0),isNaN(Ce)&&(Ce=1),isNaN(Ye)&&(Ye=0),isNaN(tt)&&(tt=0),this._matrix=[z,de,be,Ce,Ye,tt]};Object.defineProperty(Gt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(I){this._matrix[0]=I}}),Object.defineProperty(Gt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(I){this._matrix[1]=I}}),Object.defineProperty(Gt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(I){this._matrix[2]=I}}),Object.defineProperty(Gt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(I){this._matrix[3]=I}}),Object.defineProperty(Gt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(I){this._matrix[4]=I}}),Object.defineProperty(Gt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(I){this._matrix[5]=I}}),Object.defineProperty(Gt.prototype,"a",{get:function(){return this._matrix[0]},set:function(I){this._matrix[0]=I}}),Object.defineProperty(Gt.prototype,"b",{get:function(){return this._matrix[1]},set:function(I){this._matrix[1]=I}}),Object.defineProperty(Gt.prototype,"c",{get:function(){return this._matrix[2]},set:function(I){this._matrix[2]=I}}),Object.defineProperty(Gt.prototype,"d",{get:function(){return this._matrix[3]},set:function(I){this._matrix[3]=I}}),Object.defineProperty(Gt.prototype,"e",{get:function(){return this._matrix[4]},set:function(I){this._matrix[4]=I}}),Object.defineProperty(Gt.prototype,"f",{get:function(){return this._matrix[5]},set:function(I){this._matrix[5]=I}}),Object.defineProperty(Gt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Gt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Gt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Gt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Gt.prototype.join=function(I){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(C).join(I)},Gt.prototype.multiply=function(I){var z=I.sx*this.sx+I.shy*this.shx,de=I.sx*this.shy+I.shy*this.sy,be=I.shx*this.sx+I.sy*this.shx,Ce=I.shx*this.shy+I.sy*this.sy,Ye=I.tx*this.sx+I.ty*this.shx+this.tx,tt=I.tx*this.shy+I.ty*this.sy+this.ty;return new Gt(z,de,be,Ce,Ye,tt)},Gt.prototype.decompose=function(){var I=this.sx,z=this.shy,de=this.shx,be=this.sy,Ce=this.tx,Ye=this.ty,tt=Math.sqrt(I*I+z*z),Nt=(I/=tt)*de+(z/=tt)*be;de-=I*Nt,be-=z*Nt;var Pt=Math.sqrt(de*de+be*be);return Nt/=Pt,I*(be/=Pt)<z*(de/=Pt)&&(I=-I,z=-z,Nt=-Nt,tt=-tt),{scale:new Gt(tt,0,0,Pt,0,0),translate:new Gt(1,0,0,1,Ce,Ye),rotate:new Gt(I,z,-z,I,0,0),skew:new Gt(1,0,Nt,1,0,0)}},Gt.prototype.toString=function(I){return this.join(" ")},Gt.prototype.inversed=function(){var I=this.sx,z=this.shy,de=this.shx,be=this.sy,Ce=this.tx,Ye=this.ty,tt=1/(I*be-z*de),Nt=be*tt,Pt=-z*tt,Qt=-de*tt,Ht=I*tt;return new Gt(Nt,Pt,Qt,Ht,-Nt*Ce-Qt*Ye,-Pt*Ce-Ht*Ye)},Gt.prototype.applyToPoint=function(I){var z=I.x*this.sx+I.y*this.shx+this.tx,de=I.x*this.shy+I.y*this.sy+this.ty;return new Ri(z,de)},Gt.prototype.applyToRectangle=function(I){var z=this.applyToPoint(I),de=this.applyToPoint(new Ri(I.x+I.w,I.y+I.h));return new wo(z.x,z.y,de.x-z.x,de.y-z.y)},Gt.prototype.clone=function(){var I=this.sx,z=this.shy,de=this.shx,be=this.sy,Ce=this.tx,Ye=this.ty;return new Gt(I,z,de,be,Ce,Ye)},w.Matrix=Gt;var $o=w.matrixMult=function(I,z){return z.multiply(I)},_s=new Gt(1,0,0,1,0,0);w.unitMatrix=w.identityMatrix=_s;var ts=function(I,z){if(!Vn[I]){var de=(z instanceof Yd?"Sh":"P")+(Object.keys(qt).length+1).toString(10);z.id=de,Vn[I]=de,qt[de]=z,vn.publish("addPattern",z)}};w.ShadingPattern=Yd,w.TilingPattern=kf,w.addShadingPattern=function(I,z){return N("addShadingPattern()"),ts(I,z),this},w.beginTilingPattern=function(I){N("beginTilingPattern()"),Eo(I.boundingBox[0],I.boundingBox[1],I.boundingBox[2]-I.boundingBox[0],I.boundingBox[3]-I.boundingBox[1],I.matrix)},w.endTilingPattern=function(I,z){N("endTilingPattern()"),z.stream=Qe[te].join(`
`),ts(I,z),vn.publish("endTilingPattern",z),gi.pop().restore()};var ns,er=w.__private__.newObject=function(){var I=fr();return ni(I,!0),I},fr=w.__private__.newObjectDeferred=function(){return ge++,xe[ge]=function(){return Ie},ge},ni=function(I,z){return z=typeof z=="boolean"&&z,xe[I]=Ie,z&&ce(I+" 0 obj"),I},Bi=w.__private__.newAdditionalObject=function(){var I={objId:fr(),content:""};return Ge.push(I),I},Ii=fr(),Hn=fr(),ir=w.__private__.decodeColorString=function(I){var z=I.split(" ");if(z.length!==2||z[1]!=="g"&&z[1]!=="G")z.length!==5||z[4]!=="k"&&z[4]!=="K"||(z=[(1-z[0])*(1-z[3]),(1-z[1])*(1-z[3]),(1-z[2])*(1-z[3]),"r"]);else{var de=parseFloat(z[0]);z=[de,de,de,"r"]}for(var be="#",Ce=0;Ce<3;Ce++)be+=("0"+Math.floor(255*parseFloat(z[Ce])).toString(16)).slice(-2);return be},ri=w.__private__.encodeColorString=function(I){var z;typeof I=="string"&&(I={ch1:I});var de=I.ch1,be=I.ch2,Ce=I.ch3,Ye=I.ch4,tt=I.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof de=="string"&&de.charAt(0)!=="#"){var Nt=new K6(de);if(Nt.ok)de=Nt.toHex();else if(!/^\d*\.?\d*$/.test(de))throw new Error('Invalid color "'+de+'" passed to jsPDF.encodeColorString.')}if(typeof de=="string"&&/^#[0-9A-Fa-f]{3}$/.test(de)&&(de="#"+de[1]+de[1]+de[2]+de[2]+de[3]+de[3]),typeof de=="string"&&/^#[0-9A-Fa-f]{6}$/.test(de)){var Pt=parseInt(de.substr(1),16);de=Pt>>16&255,be=Pt>>8&255,Ce=255&Pt}if(be===void 0||Ye===void 0&&de===be&&be===Ce)z=typeof de=="string"?de+" "+tt[0]:I.precision===2?S(de/255)+" "+tt[0]:k(de/255)+" "+tt[0];else if(Ye===void 0||ur(Ye)==="object"){if(Ye&&!isNaN(Ye.a)&&Ye.a===0)return["1.","1.","1.",tt[1]].join(" ");z=typeof de=="string"?[de,be,Ce,tt[1]].join(" "):I.precision===2?[S(de/255),S(be/255),S(Ce/255),tt[1]].join(" "):[k(de/255),k(be/255),k(Ce/255),tt[1]].join(" ")}else z=typeof de=="string"?[de,be,Ce,Ye,tt[2]].join(" "):I.precision===2?[S(de),S(be),S(Ce),S(Ye),tt[2]].join(" "):[k(de),k(be),k(Ce),k(Ye),tt[2]].join(" ");return z},rs=w.__private__.getFilters=function(){return a},Us=w.__private__.putStream=function(I){var z=(I=I||{}).data||"",de=I.filters||rs(),be=I.alreadyAppliedFilters||[],Ce=I.addLength1||!1,Ye=z.length,tt=I.objectId,Nt=function(D){return D};if(p!==null&&tt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(Nt=wr.encryptor(tt,0));var Pt={};de===!0&&(de=["FlateEncode"]);var Qt=I.additionalKeyValues||[],Ht=(Pt=zt.API.processDataByFilters!==void 0?zt.API.processDataByFilters(z,de):{data:z,reverseChain:[]}).reverseChain+(Array.isArray(be)?be.join(" "):be.toString());if(Pt.data.length!==0&&(Qt.push({key:"Length",value:Pt.data.length}),Ce===!0&&Qt.push({key:"Length1",value:Ye})),Ht.length!=0)if(Ht.split("/").length-1==1)Qt.push({key:"Filter",value:Ht});else{Qt.push({key:"Filter",value:"["+Ht+"]"});for(var En=0;En<Qt.length;En+=1)if(Qt[En].key==="DecodeParms"){for(var pr=[],tr=0;tr<Pt.reverseChain.split("/").length-1;tr+=1)pr.push("null");pr.push(Qt[En].value),Qt[En].value="["+pr.join(" ")+"]"}}ce("<<");for(var b=0;b<Qt.length;b++)ce("/"+Qt[b].key+" "+Qt[b].value);ce(">>"),Pt.data.length!==0&&(ce("stream"),ce(Nt(Pt.data)),ce("endstream"))},ma=w.__private__.putPage=function(I){var z=I.number,de=I.data,be=I.objId,Ce=I.contentsObjId;ni(be,!0),ce("<</Type /Page"),ce("/Parent "+I.rootDictionaryObjId+" 0 R"),ce("/Resources "+I.resourceDictionaryObjId+" 0 R"),ce("/MediaBox ["+parseFloat(C(I.mediaBox.bottomLeftX))+" "+parseFloat(C(I.mediaBox.bottomLeftY))+" "+C(I.mediaBox.topRightX)+" "+C(I.mediaBox.topRightY)+"]"),I.cropBox!==null&&ce("/CropBox ["+C(I.cropBox.bottomLeftX)+" "+C(I.cropBox.bottomLeftY)+" "+C(I.cropBox.topRightX)+" "+C(I.cropBox.topRightY)+"]"),I.bleedBox!==null&&ce("/BleedBox ["+C(I.bleedBox.bottomLeftX)+" "+C(I.bleedBox.bottomLeftY)+" "+C(I.bleedBox.topRightX)+" "+C(I.bleedBox.topRightY)+"]"),I.trimBox!==null&&ce("/TrimBox ["+C(I.trimBox.bottomLeftX)+" "+C(I.trimBox.bottomLeftY)+" "+C(I.trimBox.topRightX)+" "+C(I.trimBox.topRightY)+"]"),I.artBox!==null&&ce("/ArtBox ["+C(I.artBox.bottomLeftX)+" "+C(I.artBox.bottomLeftY)+" "+C(I.artBox.topRightX)+" "+C(I.artBox.topRightY)+"]"),typeof I.userUnit=="number"&&I.userUnit!==1&&ce("/UserUnit "+I.userUnit),vn.publish("putPage",{objId:be,pageContext:Ft[z],pageNumber:z,page:de}),ce("/Contents "+Ce+" 0 R"),ce(">>"),ce("endobj");var Ye=de.join(`
`);return J===W&&(Ye+=`
Q`),ni(Ce,!0),Us({data:Ye,filters:rs(),objectId:Ce}),ce("endobj"),be},ro=w.__private__.putPages=function(){var I,z,de=[];for(I=1;I<=jt;I++)Ft[I].objId=fr(),Ft[I].contentsObjId=fr();for(I=1;I<=jt;I++)de.push(ma({number:I,data:Qe[I],objId:Ft[I].objId,contentsObjId:Ft[I].contentsObjId,mediaBox:Ft[I].mediaBox,cropBox:Ft[I].cropBox,bleedBox:Ft[I].bleedBox,trimBox:Ft[I].trimBox,artBox:Ft[I].artBox,userUnit:Ft[I].userUnit,rootDictionaryObjId:Ii,resourceDictionaryObjId:Hn}));ni(Ii,!0),ce("<</Type /Pages");var be="/Kids [";for(z=0;z<jt;z++)be+=de[z]+" 0 R ";ce(be+"]"),ce("/Count "+jt),ce(">>"),ce("endobj"),vn.publish("postPutPages")},is=function(I){vn.publish("putFont",{font:I,out:ce,newObject:er,putStream:Us}),I.isAlreadyPutted!==!0&&(I.objectNumber=er(),ce("<<"),ce("/Type /Font"),ce("/BaseFont /"+Rf(I.postScriptName)),ce("/Subtype /Type1"),typeof I.encoding=="string"&&ce("/Encoding /"+I.encoding),ce("/FirstChar 32"),ce("/LastChar 255"),ce(">>"),ce("endobj"))},Yo=function(I){I.objectNumber=er();var z=[];z.push({key:"Type",value:"/XObject"}),z.push({key:"Subtype",value:"/Form"}),z.push({key:"BBox",value:"["+[C(I.x),C(I.y),C(I.x+I.width),C(I.y+I.height)].join(" ")+"]"}),z.push({key:"Matrix",value:"["+I.matrix.toString()+"]"});var de=I.pages[1].join(`
`);Us({data:de,additionalKeyValues:z,objectId:I.objectNumber}),ce("endobj")},bs=function(I,z){z||(z=21);var de=er(),be=(function(tt,Nt){var Pt,Qt=[],Ht=1/(Nt-1);for(Pt=0;Pt<1;Pt+=Ht)Qt.push(Pt);if(Qt.push(1),tt[0].offset!=0){var En={offset:0,color:tt[0].color};tt.unshift(En)}if(tt[tt.length-1].offset!=1){var pr={offset:1,color:tt[tt.length-1].color};tt.push(pr)}for(var tr="",b=0,D=0;D<Qt.length;D++){for(Pt=Qt[D];Pt>tt[b+1].offset;)b++;var G=tt[b].offset,ie=(Pt-G)/(tt[b+1].offset-G),Pe=tt[b].color,Ue=tt[b+1].color;tr+=fe(Math.round((1-ie)*Pe[0]+ie*Ue[0]).toString(16))+fe(Math.round((1-ie)*Pe[1]+ie*Ue[1]).toString(16))+fe(Math.round((1-ie)*Pe[2]+ie*Ue[2]).toString(16))}return tr.trim()})(I.colors,z),Ce=[];Ce.push({key:"FunctionType",value:"0"}),Ce.push({key:"Domain",value:"[0.0 1.0]"}),Ce.push({key:"Size",value:"["+z+"]"}),Ce.push({key:"BitsPerSample",value:"8"}),Ce.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ce.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Us({data:be,additionalKeyValues:Ce,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:de}),ce("endobj"),I.objectNumber=er(),ce("<< /ShadingType "+I.type),ce("/ColorSpace /DeviceRGB");var Ye="/Coords ["+C(parseFloat(I.coords[0]))+" "+C(parseFloat(I.coords[1]))+" ";I.type===2?Ye+=C(parseFloat(I.coords[2]))+" "+C(parseFloat(I.coords[3])):Ye+=C(parseFloat(I.coords[2]))+" "+C(parseFloat(I.coords[3]))+" "+C(parseFloat(I.coords[4]))+" "+C(parseFloat(I.coords[5])),ce(Ye+="]"),I.matrix&&ce("/Matrix ["+I.matrix.toString()+"]"),ce("/Function "+de+" 0 R"),ce("/Extend [true true]"),ce(">>"),ce("endobj")},qi=function(I,z){var de=fr(),be=er();z.push({resourcesOid:de,objectOid:be}),I.objectNumber=be;var Ce=[];Ce.push({key:"Type",value:"/Pattern"}),Ce.push({key:"PatternType",value:"1"}),Ce.push({key:"PaintType",value:"1"}),Ce.push({key:"TilingType",value:"1"}),Ce.push({key:"BBox",value:"["+I.boundingBox.map(C).join(" ")+"]"}),Ce.push({key:"XStep",value:C(I.xStep)}),Ce.push({key:"YStep",value:C(I.yStep)}),Ce.push({key:"Resources",value:de+" 0 R"}),I.matrix&&Ce.push({key:"Matrix",value:"["+I.matrix.toString()+"]"}),Us({data:I.stream,additionalKeyValues:Ce,objectId:I.objectNumber}),ce("endobj")},xs=function(I){for(var z in I.objectNumber=er(),ce("<<"),I)switch(z){case"opacity":ce("/ca "+S(I[z]));break;case"stroke-opacity":ce("/CA "+S(I[z]))}ce(">>"),ce("endobj")},js=function(I){ni(I.resourcesOid,!0),ce("<<"),ce("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var z in ce("/Font <<"),Ot)Ot.hasOwnProperty(z)&&(g===!1||g===!0&&_.hasOwnProperty(z))&&ce("/"+z+" "+Ot[z].objectNumber+" 0 R");ce(">>")})(),(function(){if(Object.keys(qt).length>0){for(var z in ce("/Shading <<"),qt)qt.hasOwnProperty(z)&&qt[z]instanceof Yd&&qt[z].objectNumber>=0&&ce("/"+z+" "+qt[z].objectNumber+" 0 R");vn.publish("putShadingPatternDict"),ce(">>")}})(),(function(z){if(Object.keys(qt).length>0){for(var de in ce("/Pattern <<"),qt)qt.hasOwnProperty(de)&&qt[de]instanceof w.TilingPattern&&qt[de].objectNumber>=0&&qt[de].objectNumber<z&&ce("/"+de+" "+qt[de].objectNumber+" 0 R");vn.publish("putTilingPatternDict"),ce(">>")}})(I.objectOid),(function(){if(Object.keys(en).length>0){var z;for(z in ce("/ExtGState <<"),en)en.hasOwnProperty(z)&&en[z].objectNumber>=0&&ce("/"+z+" "+en[z].objectNumber+" 0 R");vn.publish("putGStateDict"),ce(">>")}})(),(function(){for(var z in ce("/XObject <<"),Si)Si.hasOwnProperty(z)&&Si[z].objectNumber>=0&&ce("/"+z+" "+Si[z].objectNumber+" 0 R");vn.publish("putXobjectDict"),ce(">>")})(),ce(">>"),ce("endobj")},Cr=function(I){rn[I.fontName]=rn[I.fontName]||{},rn[I.fontName][I.fontStyle]=I.id},vl=function(I,z,de,be,Ce){var Ye={id:"F"+(Object.keys(Ot).length+1).toString(10),postScriptName:I,fontName:z,fontStyle:de,encoding:be,isStandardFont:Ce||!1,metadata:{}};return vn.publish("addFont",{font:Ye,instance:this}),Ot[Ye.id]=Ye,Cr(Ye),Ye.id},ss=w.__private__.pdfEscape=w.pdfEscape=function(I,z){return(function(de,be){var Ce,Ye,tt,Nt,Pt,Qt,Ht,En,pr;if(tt=(be=be||{}).sourceEncoding||"Unicode",Pt=be.outputEncoding,(be.autoencode||Pt)&&Ot[wt].metadata&&Ot[wt].metadata[tt]&&Ot[wt].metadata[tt].encoding&&(Nt=Ot[wt].metadata[tt].encoding,!Pt&&Ot[wt].encoding&&(Pt=Ot[wt].encoding),!Pt&&Nt.codePages&&(Pt=Nt.codePages[0]),typeof Pt=="string"&&(Pt=Nt[Pt]),Pt)){for(Ht=!1,Qt=[],Ce=0,Ye=de.length;Ce<Ye;Ce++)(En=Pt[de.charCodeAt(Ce)])?Qt.push(String.fromCharCode(En)):Qt.push(de[Ce]),Qt[Ce].charCodeAt(0)>>8&&(Ht=!0);de=Qt.join("")}for(Ce=de.length;Ht===void 0&&Ce!==0;)de.charCodeAt(Ce-1)>>8&&(Ht=!0),Ce--;if(!Ht)return de;for(Qt=be.noBOM?[]:[254,255],Ce=0,Ye=de.length;Ce<Ye;Ce++){if((pr=(En=de.charCodeAt(Ce))>>8)>>8)throw new Error("Character at position "+Ce+" of string '"+de+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Qt.push(pr),Qt.push(En-(pr<<8))}return String.fromCharCode.apply(void 0,Qt)})(I,z).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Vs=w.__private__.beginPage=function(I){Qe[++jt]=[],Ft[jt]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(I[0]),topRightY:Number(I[1])}},_l(jt),vt(Qe[te])},io=function(I,z){var de,be,Ce;switch(t=z||t,typeof I=="string"&&(de=B(I.toLowerCase()),Array.isArray(de)&&(be=de[0],Ce=de[1])),Array.isArray(I)&&(be=I[0]*nn,Ce=I[1]*nn),isNaN(be)&&(be=i[0],Ce=i[1]),(be>14400||Ce>14400)&&(Nr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),be=Math.min(14400,be),Ce=Math.min(14400,Ce)),i=[be,Ce],t.substr(0,1)){case"l":Ce>be&&(i=[Ce,be]);break;case"p":be>Ce&&(i=[Ce,be])}Vs(i),Kt(as),ce(Es),As!==0&&ce(As+" J"),Kr!==0&&ce(Kr+" j"),vn.publish("addPage",{pageNumber:jt})},Va=function(I){I>0&&I<=jt&&(Qe.splice(I,1),Ft.splice(I,1),jt--,te>jt&&(te=jt),this.setPage(te))},_l=function(I){I>0&&I<=jt&&(te=I)},bl=w.__private__.getNumberOfPages=w.getNumberOfPages=function(){return Qe.length-1},sc=function(I,z,de){var be,Ce=void 0;return de=de||{},I=I!==void 0?I:Ot[wt].fontName,z=z!==void 0?z:Ot[wt].fontStyle,be=I.toLowerCase(),rn[be]!==void 0&&rn[be][z]!==void 0?Ce=rn[be][z]:rn[I]!==void 0&&rn[I][z]!==void 0?Ce=rn[I][z]:de.disableWarning===!1&&Nr.warn("Unable to look up font label for font '"+I+"', '"+z+"'. Refer to getFontList() for available fonts."),Ce||de.noFallback||(Ce=rn.times[z])==null&&(Ce=rn.times.normal),Ce},ws=w.__private__.putInfo=function(){var I=er(),z=function(be){return be};for(var de in p!==null&&(z=wr.encryptor(I,0)),ce("<<"),ce("/Producer ("+ss(z("jsPDF "+zt.version))+")"),Yt)Yt.hasOwnProperty(de)&&Yt[de]&&ce("/"+de.substr(0,1).toUpperCase()+de.substr(1)+" ("+ss(z(Yt[de]))+")");ce("/CreationDate ("+ss(z(pe))+")"),ce(">>"),ce("endobj")},Ci=w.__private__.putCatalog=function(I){var z=(I=I||{}).rootDictionaryObjId||Ii;switch(er(),ce("<<"),ce("/Type /Catalog"),ce("/Pages "+z+" 0 R"),bt||(bt="fullwidth"),bt){case"fullwidth":ce("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ce("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ce("/OpenAction [3 0 R /Fit]");break;case"original":ce("/OpenAction [3 0 R /XYZ null null 1]");break;default:var de=""+bt;de.substr(de.length-1)==="%"&&(bt=parseInt(bt)/100),typeof bt=="number"&&ce("/OpenAction [3 0 R /XYZ null null "+S(bt)+"]")}switch(_t||(_t="continuous"),_t){case"continuous":ce("/PageLayout /OneColumn");break;case"single":ce("/PageLayout /SinglePage");break;case"two":case"twoleft":ce("/PageLayout /TwoColumnLeft");break;case"tworight":ce("/PageLayout /TwoColumnRight")}rt&&ce("/PageMode /"+rt),vn.publish("putCatalog"),ce(">>"),ce("endobj")},Fr=w.__private__.putTrailer=function(){ce("trailer"),ce("<<"),ce("/Size "+(ge+1)),ce("/Root "+ge+" 0 R"),ce("/Info "+(ge-1)+" 0 R"),p!==null&&ce("/Encrypt "+wr.oid+" 0 R"),ce("/ID [ <"+se+"> <"+se+"> ]"),ce(">>")},wn=w.__private__.putHeader=function(){ce("%PDF-"+P),ce("%")},Wo=w.__private__.putXRef=function(){var I="0000000000";ce("xref"),ce("0 "+(ge+1)),ce("0000000000 65535 f ");for(var z=1;z<=ge;z++)typeof xe[z]=="function"?ce((I+xe[z]()).slice(-10)+" 00000 n "):xe[z]!==void 0?ce((I+xe[z]).slice(-10)+" 00000 n "):ce("0000000000 00000 n ")},Bs=w.__private__.buildDocument=function(){var I;ge=0,Ie=0,we=[],xe=[],Ge=[],Ii=fr(),Hn=fr(),vt(we),vn.publish("buildDocument"),wn(),ro(),(function(){vn.publish("putAdditionalObjects");for(var de=0;de<Ge.length;de++){var be=Ge[de];ni(be.objId,!0),ce(be.content),ce("endobj")}vn.publish("postPutAdditionalObjects")})(),I=[],(function(){for(var de in Ot)Ot.hasOwnProperty(de)&&(g===!1||g===!0&&_.hasOwnProperty(de))&&is(Ot[de])})(),(function(){var de;for(de in en)en.hasOwnProperty(de)&&xs(en[de])})(),(function(){for(var de in Si)Si.hasOwnProperty(de)&&Yo(Si[de])})(),(function(de){var be;for(be in qt)qt.hasOwnProperty(be)&&(qt[be]instanceof Yd?bs(qt[be]):qt[be]instanceof kf&&qi(qt[be],de))})(I),vn.publish("putResources"),I.forEach(js),js({resourcesOid:Hn,objectOid:Number.MAX_SAFE_INTEGER}),vn.publish("postPutResources"),p!==null&&(wr.oid=er(),ce("<<"),ce("/Filter /Standard"),ce("/V "+wr.v),ce("/R "+wr.r),ce("/U <"+wr.toHexString(wr.U)+">"),ce("/O <"+wr.toHexString(wr.O)+">"),ce("/P "+wr.P),ce(">>"),ce("endobj")),ws(),Ci();var z=Ie;return Wo(),Fr(),ce("startxref"),ce(""+z),ce("%%EOF"),vt(Qe[te]),we.join(`
`)},Rn=w.__private__.getBlob=function(I){return new Blob([Bt(I)],{type:"application/pdf"})},ga=w.output=w.__private__.output=(ns=function(I,z){switch(typeof(z=z||{})=="string"?z={filename:z}:z.filename=z.filename||"generated.pdf",I){case void 0:return Bs();case"save":w.save(z.filename);break;case"arraybuffer":return Bt(Bs());case"blob":return Rn(Bs());case"bloburi":case"bloburl":if(un.URL!==void 0&&typeof un.URL.createObjectURL=="function")return un.URL&&un.URL.createObjectURL(Rn(Bs()))||void 0;Nr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var de="",be=Bs();try{de=gI(be)}catch{de=gI(unescape(encodeURIComponent(be)))}return"data:application/pdf;filename="+z.filename+";base64,"+de;case"pdfobjectnewwindow":if(Object.prototype.toString.call(un)==="[object Window]"){var Ce="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ye=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';z.pdfObjectUrl&&(Ce=z.pdfObjectUrl,Ye="");var tt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ce+'"'+Ye+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(z)+");<\/script></body></html>",Nt=un.open();return Nt!==null&&Nt.document.write(tt),Nt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(un)==="[object Window]"){var Pt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(z.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+z.filename+'" width="500px" height="400px" /></body></html>',Qt=un.open();if(Qt!==null){Qt.document.write(Pt);var Ht=this;Qt.document.documentElement.querySelector("#pdfViewer").onload=function(){Qt.document.title=z.filename,Qt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ht.output("bloburl"))}}return Qt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(un)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var En='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",z)+'"></iframe></body></html>',pr=un.open();if(pr!==null&&(pr.document.write(En),pr.document.title=z.filename),pr||typeof safari>"u")return pr;break;case"datauri":case"dataurl":return un.document.location.href=this.output("datauristring",z);default:return null}},ns.foo=function(){try{return ns.apply(this,arguments)}catch(de){var I=de.stack||"";~I.indexOf(" at ")&&(I=I.split(" at ")[1]);var z="Error in function "+I.split(`
`)[0].split("<")[0]+": "+de.message;if(!un.console)throw new Error(z);un.console.error(z,de),un.alert&&alert(z)}},ns.foo.bar=ns,ns.foo),Wr=function(I){return Array.isArray(Vi)===!0&&Vi.indexOf(I)>-1};switch(r){case"pt":nn=1;break;case"mm":nn=72/25.4;break;case"cm":nn=72/2.54;break;case"in":nn=72;break;case"px":nn=Wr("px_scaling")==1?.75:96/72;break;case"pc":case"em":nn=12;break;case"ex":nn=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);nn=r}var wr=null;ne(),me();var Ur=w.__private__.getPageInfo=w.getPageInfo=function(I){if(isNaN(I)||I%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ft[I].objId,pageNumber:I,pageContext:Ft[I]}},Ba=w.__private__.getPageInfoByObjId=function(I){if(isNaN(I)||I%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var z in Ft)if(Ft[z].objId===I)break;return Ur(z)},su=w.__private__.getCurrentPageInfo=w.getCurrentPageInfo=function(){return{objId:Ft[te].objId,pageNumber:te,pageContext:Ft[te]}};w.addPage=function(){return io.apply(this,arguments),this},w.setPage=function(){return _l.apply(this,arguments),vt.call(this,Qe[te]),this},w.insertPage=function(I){return this.addPage(),this.movePage(te,I),this},w.movePage=function(I,z){var de,be;if(I>z){de=Qe[I],be=Ft[I];for(var Ce=I;Ce>z;Ce--)Qe[Ce]=Qe[Ce-1],Ft[Ce]=Ft[Ce-1];Qe[z]=de,Ft[z]=be,this.setPage(z)}else if(I<z){de=Qe[I],be=Ft[I];for(var Ye=I;Ye<z;Ye++)Qe[Ye]=Qe[Ye+1],Ft[Ye]=Ft[Ye+1];Qe[z]=de,Ft[z]=be,this.setPage(z)}return this},w.deletePage=function(){return Va.apply(this,arguments),this},w.__private__.text=w.text=function(I,z,de,be,Ce){var Ye,tt,Nt,Pt,Qt,Ht,En,pr,tr,b=(be=be||{}).scope||this;if(typeof I=="number"&&typeof z=="number"&&(typeof de=="string"||Array.isArray(de))){var D=de;de=z,z=I,I=D}if(arguments[3]instanceof Gt==0?(Nt=arguments[4],Pt=arguments[5],ur(En=arguments[3])==="object"&&En!==null||(typeof Nt=="string"&&(Pt=Nt,Nt=null),typeof En=="string"&&(Pt=En,En=null),typeof En=="number"&&(Nt=En,En=null),be={flags:En,angle:Nt,align:Pt})):(N("The transform parameter of text() with a Matrix value"),tr=Ce),isNaN(z)||isNaN(de)||I==null)throw new Error("Invalid arguments passed to jsPDF.text");if(I.length===0)return b;var G,ie="",Pe=typeof be.lineHeightFactor=="number"?be.lineHeightFactor:Qo,Ue=b.internal.scaleFactor;function ct(Bn){return Bn=Bn.split("	").join(Array(be.TabLen||9).join(" ")),ss(Bn,En)}function ln(Bn){for(var Ln,gr=Bn.concat(),Qr=[],Ia=gr.length;Ia--;)typeof(Ln=gr.shift())=="string"?Qr.push(Ln):Array.isArray(Bn)&&(Ln.length===1||Ln[1]===void 0&&Ln[2]===void 0)?Qr.push(Ln[0]):Qr.push([Ln[0],Ln[1],Ln[2]]);return Qr}function mr(Bn,Ln){var gr;if(typeof Bn=="string")gr=Ln(Bn)[0];else if(Array.isArray(Bn)){for(var Qr,Ia,ta=Bn.concat(),fc=[],wd=ta.length;wd--;)typeof(Qr=ta.shift())=="string"?fc.push(Ln(Qr)[0]):Array.isArray(Qr)&&typeof Qr[0]=="string"&&(Ia=Ln(Qr[0],Qr[1],Qr[2]),fc.push([Ia[0],Ia[1],Ia[2]]));gr=fc}return gr}var bn=!1,$n=!0;if(typeof I=="string")bn=!0;else if(Array.isArray(I)){var Pi=I.concat();tt=[];for(var Hi,sr=Pi.length;sr--;)(typeof(Hi=Pi.shift())!="string"||Array.isArray(Hi)&&typeof Hi[0]!="string")&&($n=!1);bn=$n}if(bn===!1)throw new Error('Type of text must be string or Array. "'+I+'" is not recognized.');typeof I=="string"&&(I=I.match(/[\r?\n]/)?I.split(/\r\n|\r|\n/g):[I]);var zi=Ke/b.internal.scaleFactor,lo=zi*(Pe-1);switch(be.baseline){case"bottom":de-=lo;break;case"top":de+=zi-lo;break;case"hanging":de+=zi-2*lo;break;case"middle":de+=zi/2-lo}if((Ht=be.maxWidth||0)>0&&(typeof I=="string"?I=b.splitTextToSize(I,Ht):Object.prototype.toString.call(I)==="[object Array]"&&(I=I.reduce(function(Bn,Ln){return Bn.concat(b.splitTextToSize(Ln,Ht))},[]))),Ye={text:I,x:z,y:de,options:be,mutex:{pdfEscape:ss,activeFontKey:wt,fonts:Ot,activeFontSize:Ke}},vn.publish("preProcessText",Ye),I=Ye.text,Nt=(be=Ye.options).angle,tr instanceof Gt==0&&Nt&&typeof Nt=="number"){Nt*=Math.PI/180,be.rotationDirection===0&&(Nt=-Nt),J===W&&(Nt=-Nt);var xa=Math.cos(Nt),wa=Math.sin(Nt);tr=new Gt(xa,wa,-wa,xa,0,0)}else Nt&&Nt instanceof Gt&&(tr=Nt);J!==W||tr||(tr=_s),(Qt=be.charSpace||Ts)!==void 0&&(ie+=C(M(Qt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(pr=be.horizontalScale)!==void 0&&(ie+=C(100*pr)+` Tz
`),be.lang;var Ss=-1,$a=be.renderingMode!==void 0?be.renderingMode:be.stroke,ou=b.internal.getCurrentPageInfo().pageContext;switch($a){case 0:case!1:case"fill":Ss=0;break;case 1:case!0:case"stroke":Ss=1;break;case 2:case"fillThenStroke":Ss=2;break;case 3:case"invisible":Ss=3;break;case 4:case"fillAndAddForClipping":Ss=4;break;case 5:case"strokeAndAddPathForClipping":Ss=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ss=6;break;case 7:case"addToPathForClipping":Ss=7}var bd=ou.usedRenderingMode!==void 0?ou.usedRenderingMode:-1;Ss!==-1?ie+=Ss+` Tr
`:bd!==-1&&(ie+=`0 Tr
`),Ss!==-1&&(ou.usedRenderingMode=Ss),Pt=be.align||"left";var co,Zo=Ke*Pe,Ya=b.internal.pageSize.getWidth(),xd=Ot[wt];Qt=be.charSpace||Ts,Ht=be.maxWidth||0,En=Object.assign({autoencode:!0,noBOM:!0},be.flags);var ea=[],Nl=function(Bn){return b.getStringUnitWidth(Bn,{font:xd,charSpace:Qt,fontSize:Ke,doKerning:!1})*Ke/Ue};if(Object.prototype.toString.call(I)==="[object Array]"){var Gs;tt=ln(I),Pt!=="left"&&(co=tt.map(Nl));var Is,Ea=0;if(Pt==="right"){z-=co[0],I=[],sr=tt.length;for(var Ta=0;Ta<sr;Ta++)Ta===0?(Is=vi(z),Gs=ii(de)):(Is=M(Ea-co[Ta]),Gs=-Zo),I.push([tt[Ta],Is,Gs]),Ea=co[Ta]}else if(Pt==="center"){z-=co[0]/2,I=[],sr=tt.length;for(var Wa=0;Wa<sr;Wa++)Wa===0?(Is=vi(z),Gs=ii(de)):(Is=M((Ea-co[Wa])/2),Gs=-Zo),I.push([tt[Wa],Is,Gs]),Ea=co[Wa]}else if(Pt==="left"){I=[],sr=tt.length;for(var au=0;au<sr;au++)I.push(tt[au])}else if(Pt==="justify"&&xd.encoding==="Identity-H"){I=[],sr=tt.length,Ht=Ht!==0?Ht:Ya;for(var lu=0,Jr=0;Jr<sr;Jr++)if(Gs=Jr===0?ii(de):-Zo,Is=Jr===0?vi(z):lu,Jr<sr-1){var Dh=M((Ht-co[Jr])/(tt[Jr].split(" ").length-1)),Aa=tt[Jr].split(" ");I.push([Aa[0]+" ",Is,Gs]),lu=0;for(var Na=1;Na<Aa.length;Na++){var $i=(Nl(Aa[Na-1]+" "+Aa[Na])-Nl(Aa[Na]))*Ue+Dh;Na==Aa.length-1?I.push([Aa[Na],$i,0]):I.push([Aa[Na]+" ",$i,0]),lu-=$i}}else I.push([tt[Jr],Is,Gs]);I.push(["",lu,0])}else{if(Pt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(I=[],sr=tt.length,Ht=Ht!==0?Ht:Ya,Jr=0;Jr<sr;Jr++){Gs=Jr===0?ii(de):-Zo,Is=Jr===0?vi(z):0;var Ka=tt[Jr].split(" ").length-1,cu=Ka>0?(Ht-co[Jr])/Ka:0;Jr<sr-1?ea.push(C(M(cu))):ea.push(0),I.push([tt[Jr],Is,Gs])}}}(typeof be.R2L=="boolean"?be.R2L:He)===!0&&(I=mr(I,function(Bn,Ln,gr){return[Bn.split("").reverse().join(""),Ln,gr]})),Ye={text:I,x:z,y:de,options:be,mutex:{pdfEscape:ss,activeFontKey:wt,fonts:Ot,activeFontSize:Ke}},vn.publish("postProcessText",Ye),I=Ye.text,G=Ye.mutex.isHex||!1;var uu=Ot[wt].encoding;uu!=="WinAnsiEncoding"&&uu!=="StandardEncoding"||(I=mr(I,function(Bn,Ln,gr){return[ct(Bn),Ln,gr]})),tt=ln(I),I=[];for(var Ja,Qa,Sa,hc=Array.isArray(tt[0])?1:0,uo="",Xa=function(Bn,Ln,gr){var Qr="";return gr instanceof Gt?(gr=typeof be.angle=="number"?$o(gr,new Gt(1,0,0,1,Bn,Ln)):$o(new Gt(1,0,0,1,Bn,Ln),gr),J===W&&(gr=$o(new Gt(1,0,0,-1,0,0),gr)),Qr=gr.join(" ")+` Tm
`):Qr=C(Bn)+" "+C(Ln)+` Td
`,Qr},ls=0;ls<tt.length;ls++){switch(uo="",hc){case 1:Sa=(G?"<":"(")+tt[ls][0]+(G?">":")"),Ja=parseFloat(tt[ls][1]),Qa=parseFloat(tt[ls][2]);break;case 0:Sa=(G?"<":"(")+tt[ls]+(G?">":")"),Ja=vi(z),Qa=ii(de)}ea!==void 0&&ea[ls]!==void 0&&(uo=ea[ls]+` Tw
`),ls===0?I.push(uo+Xa(Ja,Qa,tr)+Sa):hc===0?I.push(uo+Sa):hc===1&&I.push(uo+Xa(Ja,Qa,tr)+Sa)}I=hc===0?I.join(` Tj
T* `):I.join(` Tj
`),I+=` Tj
`;var No=`BT
/`;return No+=wt+" "+Ke+` Tf
`,No+=C(Ke*Pe)+` TL
`,No+=oo+`
`,No+=ie,No+=I,ce(No+="ET"),_[wt]=!0,b};var oc=w.__private__.clip=w.clip=function(I){return ce(I==="evenodd"?"W*":"W"),this};w.clipEvenOdd=function(){return oc("evenodd")},w.__private__.discardPath=w.discardPath=function(){return ce("n"),this};var Gi=w.__private__.isValidStyle=function(I){var z=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(I)!==-1&&(z=!0),z};w.__private__.setDefaultPathOperation=w.setDefaultPathOperation=function(I){return Gi(I)&&(d=I),this};var ac=w.__private__.getStyle=w.getStyle=function(I){var z=d;switch(I){case"D":case"S":z="S";break;case"F":z="f";break;case"FD":case"DF":z="B";break;case"f":case"f*":case"B":case"B*":z=I}return z},Ko=w.close=function(){return ce("h"),this};w.stroke=function(){return ce("S"),this},w.fill=function(I){return yi("f",I),this},w.fillEvenOdd=function(I){return yi("f*",I),this},w.fillStroke=function(I){return yi("B",I),this},w.fillStrokeEvenOdd=function(I){return yi("B*",I),this};var yi=function(I,z){ur(z)==="object"?cc(z,I):ce(I)},ya=function(I){I===null||J===W&&I===void 0||(I=ac(I),ce(I))};function lc(I,z,de,be,Ce){var Ye=new kf(z||this.boundingBox,de||this.xStep,be||this.yStep,this.gState,Ce||this.matrix);Ye.stream=this.stream;var tt=I+"$$"+this.cloneIndex+++"$$";return ts(tt,Ye),Ye}var cc=function(I,z){var de=Vn[I.key],be=qt[de];if(be instanceof Yd)ce("q"),ce(xl(z)),be.gState&&w.setGState(be.gState),ce(I.matrix.toString()+" cm"),ce("/"+de+" sh"),ce("Q");else if(be instanceof kf){var Ce=new Gt(1,0,0,-1,0,ao());I.matrix&&(Ce=Ce.multiply(I.matrix||_s),de=lc.call(be,I.key,I.boundingBox,I.xStep,I.yStep,Ce).id),ce("q"),ce("/Pattern cs"),ce("/"+de+" scn"),be.gState&&w.setGState(be.gState),ce(z),ce("Q")}},xl=function(I){switch(I){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},wl=w.moveTo=function(I,z){return ce(C(M(I))+" "+C(Q(z))+" m"),this},Jo=w.lineTo=function(I,z){return ce(C(M(I))+" "+C(Q(z))+" l"),this},os=w.curveTo=function(I,z,de,be,Ce,Ye){return ce([C(M(I)),C(Q(z)),C(M(de)),C(Q(be)),C(M(Ce)),C(Q(Ye)),"c"].join(" ")),this};w.__private__.line=w.line=function(I,z,de,be,Ce){if(isNaN(I)||isNaN(z)||isNaN(de)||isNaN(be)||!Gi(Ce))throw new Error("Invalid arguments passed to jsPDF.line");return J===K?this.lines([[de-I,be-z]],I,z,[1,1],Ce||"S"):this.lines([[de-I,be-z]],I,z,[1,1]).stroke()},w.__private__.lines=w.lines=function(I,z,de,be,Ce,Ye){var tt,Nt,Pt,Qt,Ht,En,pr,tr,b,D,G,ie;if(typeof I=="number"&&(ie=de,de=z,z=I,I=ie),be=be||[1,1],Ye=Ye||!1,isNaN(z)||isNaN(de)||!Array.isArray(I)||!Array.isArray(be)||!Gi(Ce)||typeof Ye!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(wl(z,de),tt=be[0],Nt=be[1],Qt=I.length,D=z,G=de,Pt=0;Pt<Qt;Pt++)(Ht=I[Pt]).length===2?(D=Ht[0]*tt+D,G=Ht[1]*Nt+G,Jo(D,G)):(En=Ht[0]*tt+D,pr=Ht[1]*Nt+G,tr=Ht[2]*tt+D,b=Ht[3]*Nt+G,D=Ht[4]*tt+D,G=Ht[5]*Nt+G,os(En,pr,tr,b,D,G));return Ye&&Ko(),ya(Ce),this},w.path=function(I){for(var z=0;z<I.length;z++){var de=I[z],be=de.c;switch(de.op){case"m":wl(be[0],be[1]);break;case"l":Jo(be[0],be[1]);break;case"c":os.apply(this,be);break;case"h":Ko()}}return this},w.__private__.rect=w.rect=function(I,z,de,be,Ce){if(isNaN(I)||isNaN(z)||isNaN(de)||isNaN(be)||!Gi(Ce))throw new Error("Invalid arguments passed to jsPDF.rect");return J===K&&(be=-be),ce([C(M(I)),C(Q(z)),C(M(de)),C(M(be)),"re"].join(" ")),ya(Ce),this},w.__private__.triangle=w.triangle=function(I,z,de,be,Ce,Ye,tt){if(isNaN(I)||isNaN(z)||isNaN(de)||isNaN(be)||isNaN(Ce)||isNaN(Ye)||!Gi(tt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[de-I,be-z],[Ce-de,Ye-be],[I-Ce,z-Ye]],I,z,[1,1],tt,!0),this},w.__private__.roundedRect=w.roundedRect=function(I,z,de,be,Ce,Ye,tt){if(isNaN(I)||isNaN(z)||isNaN(de)||isNaN(be)||isNaN(Ce)||isNaN(Ye)||!Gi(tt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Nt=4/3*(Math.SQRT2-1);return Ce=Math.min(Ce,.5*de),Ye=Math.min(Ye,.5*be),this.lines([[de-2*Ce,0],[Ce*Nt,0,Ce,Ye-Ye*Nt,Ce,Ye],[0,be-2*Ye],[0,Ye*Nt,-Ce*Nt,Ye,-Ce,Ye],[2*Ce-de,0],[-Ce*Nt,0,-Ce,-Ye*Nt,-Ce,-Ye],[0,2*Ye-be],[0,-Ye*Nt,Ce*Nt,-Ye,Ce,-Ye]],I+Ce,z,[1,1],tt,!0),this},w.__private__.ellipse=w.ellipse=function(I,z,de,be,Ce){if(isNaN(I)||isNaN(z)||isNaN(de)||isNaN(be)||!Gi(Ce))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ye=4/3*(Math.SQRT2-1)*de,tt=4/3*(Math.SQRT2-1)*be;return wl(I+de,z),os(I+de,z-tt,I+Ye,z-be,I,z-be),os(I-Ye,z-be,I-de,z-tt,I-de,z),os(I-de,z+tt,I-Ye,z+be,I,z+be),os(I+Ye,z+be,I+de,z+tt,I+de,z),ya(Ce),this},w.__private__.circle=w.circle=function(I,z,de,be){if(isNaN(I)||isNaN(z)||isNaN(de)||!Gi(be))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(I,z,de,de,be)},w.setFont=function(I,z,de){return de&&(z=U(z,de)),wt=sc(I,z,{disableWarning:!1}),this};var so=w.__private__.getFont=w.getFont=function(){return Ot[sc.apply(w,arguments)]};w.__private__.getFontList=w.getFontList=function(){var I,z,de={};for(I in rn)if(rn.hasOwnProperty(I))for(z in de[I]=[],rn[I])rn[I].hasOwnProperty(z)&&de[I].push(z);return de},w.addFont=function(I,z,de,be,Ce){var Ye=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ye.indexOf(arguments[3])!==-1?Ce=arguments[3]:arguments[3]&&Ye.indexOf(arguments[3])==-1&&(de=U(de,be)),vl.call(this,I,z,de,Ce=Ce||"Identity-H")};var Qo,as=n.lineWidth||.200025,va=w.__private__.getLineWidth=w.getLineWidth=function(){return as},Kt=w.__private__.setLineWidth=w.setLineWidth=function(I){return as=I,ce(C(M(I))+" w"),this};w.__private__.setLineDash=zt.API.setLineDash=zt.API.setLineDashPattern=function(I,z){if(I=I||[],z=z||0,isNaN(z)||!Array.isArray(I))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return I=I.map(function(de){return C(M(de))}).join(" "),z=C(M(z)),ce("["+I+"] "+z+" d"),this};var qa=w.__private__.getLineHeight=w.getLineHeight=function(){return Ke*Qo};w.__private__.getLineHeight=w.getLineHeight=function(){return Ke*Qo};var El=w.__private__.setLineHeightFactor=w.setLineHeightFactor=function(I){return typeof(I=I||1.15)=="number"&&(Qo=I),this},_a=w.__private__.getLineHeightFactor=w.getLineHeightFactor=function(){return Qo};El(n.lineHeight);var vi=w.__private__.getHorizontalCoordinate=function(I){return M(I)},ii=w.__private__.getVerticalCoordinate=function(I){return J===W?I:Ft[te].mediaBox.topRightY-Ft[te].mediaBox.bottomLeftY-M(I)},Ga=w.__private__.getHorizontalCoordinateString=w.getHorizontalCoordinateString=function(I){return C(vi(I))},zn=w.__private__.getVerticalCoordinateString=w.getVerticalCoordinateString=function(I){return C(ii(I))},Es=n.strokeColor||"0 G";w.__private__.getStrokeColor=w.getDrawColor=function(){return ir(Es)},w.__private__.setStrokeColor=w.setDrawColor=function(I,z,de,be){return Es=ri({ch1:I,ch2:z,ch3:de,ch4:be,pdfColorType:"draw",precision:2}),ce(Es),this};var Ha=n.fillColor||"0 g";w.__private__.getFillColor=w.getFillColor=function(){return ir(Ha)},w.__private__.setFillColor=w.setFillColor=function(I,z,de,be){return Ha=ri({ch1:I,ch2:z,ch3:de,ch4:be,pdfColorType:"fill",precision:2}),ce(Ha),this};var oo=n.textColor||"0 g",uc=w.__private__.getTextColor=w.getTextColor=function(){return ir(oo)};w.__private__.setTextColor=w.setTextColor=function(I,z,de,be){return oo=ri({ch1:I,ch2:z,ch3:de,ch4:be,pdfColorType:"text",precision:3}),this};var Ts=n.charSpace,Xo=w.__private__.getCharSpace=w.getCharSpace=function(){return parseFloat(Ts||0)};w.__private__.setCharSpace=w.setCharSpace=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ts=I,this};var As=0;w.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},w.__private__.setLineCap=w.setLineCap=function(I){var z=w.CapJoinStyles[I];if(z===void 0)throw new Error("Line cap style of '"+I+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return As=z,ce(z+" J"),this};var Kr=0;w.__private__.setLineJoin=w.setLineJoin=function(I){var z=w.CapJoinStyles[I];if(z===void 0)throw new Error("Line join style of '"+I+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Kr=z,ce(z+" j"),this},w.__private__.setLineMiterLimit=w.__private__.setMiterLimit=w.setLineMiterLimit=w.setMiterLimit=function(I){if(I=I||0,isNaN(I))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ce(C(M(I))+" M"),this},w.GState=Iv,w.setGState=function(I){(I=typeof I=="string"?en[tn[I]]:xo(null,I)).equals(Gn)||(ce("/"+I.id+" gs"),Gn=I)};var xo=function(I,z){if(!I||!tn[I]){var de=!1;for(var be in en)if(en.hasOwnProperty(be)&&en[be].equals(z)){de=!0;break}if(de)z=en[be];else{var Ce="GS"+(Object.keys(en).length+1).toString(10);en[Ce]=z,z.id=Ce}return I&&(tn[I]=z.id),vn.publish("addGState",z),z}};w.addGState=function(I,z){return xo(I,z),this},w.saveGraphicsState=function(){return ce("q"),dn.push({key:wt,size:Ke,color:oo}),this},w.restoreGraphicsState=function(){ce("Q");var I=dn.pop();return wt=I.key,Ke=I.size,oo=I.color,Gn=null,this},w.setCurrentTransformationMatrix=function(I){return ce(I.toString()+" cm"),this},w.comment=function(I){return ce("#"+I),this};var Ri=function(I,z){var de=I||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return de},set:function(Ye){isNaN(Ye)||(de=parseFloat(Ye))}});var be=z||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return be},set:function(Ye){isNaN(Ye)||(be=parseFloat(Ye))}});var Ce="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ce},set:function(Ye){Ce=Ye.toString()}}),this},wo=function(I,z,de,be){Ri.call(this,I,z),this.type="rect";var Ce=de||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ce},set:function(tt){isNaN(tt)||(Ce=parseFloat(tt))}});var Ye=be||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ye},set:function(tt){isNaN(tt)||(Ye=parseFloat(tt))}}),this},ba=function(){this.page=jt,this.currentPage=te,this.pages=Qe.slice(0),this.pagesContext=Ft.slice(0),this.x=St,this.y=rr,this.matrix=Rt,this.width=qs(te),this.height=Tl(te),this.outputDestination=dt,this.id="",this.objectNumber=-1};ba.prototype.restore=function(){jt=this.page,te=this.currentPage,Ft=this.pagesContext,Qe=this.pages,St=this.x,rr=this.y,Rt=this.matrix,za(te,this.width),Ns(te,this.height),dt=this.outputDestination};var Eo=function(I,z,de,be,Ce){gi.push(new ba),jt=te=0,Qe=[],St=I,rr=z,Rt=Ce,Vs([de,be])};for(var To in w.beginFormObject=function(I,z,de,be,Ce){return Eo(I,z,de,be,Ce),this},w.endFormObject=function(I){return(function(z){if(bo[z])gi.pop().restore();else{var de=new ba,be="Xo"+(Object.keys(Si).length+1).toString(10);de.id=be,bo[z]=be,Si[be]=de,vn.publish("addFormObject",de),gi.pop().restore()}})(I),this},w.doFormObject=function(I,z){var de=Si[bo[I]];return ce("q"),ce(z.toString()+" cm"),ce("/"+de.id+" Do"),ce("Q"),this},w.getFormObject=function(I){var z=Si[bo[I]];return{x:z.x,y:z.y,width:z.width,height:z.height,matrix:z.matrix}},w.save=function(I,z){return I=I||"generated.pdf",(z=z||{}).returnPromise=z.returnPromise||!1,z.returnPromise===!1?(Bd(Rn(Bs()),I),typeof Bd.unload=="function"&&un.setTimeout&&setTimeout(Bd.unload,911),this):new Promise(function(de,be){try{var Ce=Bd(Rn(Bs()),I);typeof Bd.unload=="function"&&un.setTimeout&&setTimeout(Bd.unload,911),de(Ce)}catch(Ye){be(Ye.message)}})},zt.API)zt.API.hasOwnProperty(To)&&(To==="events"&&zt.API.events.length?(function(I,z){var de,be,Ce;for(Ce=z.length-1;Ce!==-1;Ce--)de=z[Ce][0],be=z[Ce][1],I.subscribe.apply(I,[de].concat(typeof be=="function"?[be]:be))})(vn,zt.API.events):w[To]=zt.API[To]);function qs(I){return Ft[I].mediaBox.topRightX-Ft[I].mediaBox.bottomLeftX}function za(I,z){Ft[I].mediaBox.topRightX=z+Ft[I].mediaBox.bottomLeftX}function Tl(I){return Ft[I].mediaBox.topRightY-Ft[I].mediaBox.bottomLeftY}function Ns(I,z){Ft[I].mediaBox.topRightY=z+Ft[I].mediaBox.bottomLeftY}var Ao=w.getPageWidth=function(I){return qs(I=I||te)/nn},dc=w.setPageWidth=function(I,z){za(I,z*nn)},ao=w.getPageHeight=function(I){return Tl(I=I||te)/nn},Al=w.setPageHeight=function(I,z){Ns(I,z*nn)};return w.internal={pdfEscape:ss,getStyle:ac,getFont:so,getFontSize:ye,getCharSpace:Xo,getTextColor:uc,getLineHeight:qa,getLineHeightFactor:_a,getLineWidth:va,write:ht,getHorizontalCoordinate:vi,getVerticalCoordinate:ii,getCoordinateString:Ga,getVerticalCoordinateString:zn,collections:{},newObject:er,newAdditionalObject:Bi,newObjectDeferred:fr,newObjectDeferredBegin:ni,getFilters:rs,putStream:Us,events:vn,scaleFactor:nn,pageSize:{getWidth:function(){return Ao(te)},setWidth:function(I){dc(te,I)},getHeight:function(){return ao(te)},setHeight:function(I){Al(te,I)}},encryptionOptions:p,encryption:wr,getEncryptor:function(I){return p!==null?wr.encryptor(I,0):function(z){return z}},output:ga,getNumberOfPages:bl,get pages(){return Qe},out:ce,f2:S,f3:k,getPageInfo:Ur,getPageInfoByObjId:Ba,getCurrentPageInfo:su,getPDFVersion:O,Point:Ri,Rectangle:wo,Matrix:Gt,hasHotfix:Wr},Object.defineProperty(w.internal.pageSize,"width",{get:function(){return Ao(te)},set:function(I){dc(te,I)},enumerable:!0,configurable:!0}),Object.defineProperty(w.internal.pageSize,"height",{get:function(){return ao(te)},set:function(I){Al(te,I)},enumerable:!0,configurable:!0}),(function(I){for(var z=0,de=Mt.length;z<de;z++){var be=vl.call(this,I[z][0],I[z][1],I[z][2],Mt[z][3],!0);g===!1&&(_[be]=!0);var Ce=I[z][0].split("-");Cr({id:be,fontName:Ce[0],fontStyle:Ce[1]||""})}vn.publish("addFonts",{fonts:Ot,dictionary:rn})}).call(w,Mt),wt="F1",io(i,t),vn.publish("initialized"),w}Cf.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},Cf.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Cf.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},Cf.prototype.processOwnerPassword=function(n,e){return Jb(Kb(e).substr(0,5),n)},Cf.prototype.encryptor=function(n,e){var t=Kb(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Jb(t,r)}},Iv.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||ur(n)!==ur(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},zt.API={events:[]},zt.version="3.0.4";var di=zt.API,u5=1,Ch=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},wf=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},mn=function(n){return n.toFixed(2)},Vu=function(n){return n.toFixed(5)};di.__acroform__={};var zo=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},bI=function(n){return n*u5},Bl=function(n){var e=new Z6,t=Dt.internal.getHeight(n)||0,r=Dt.internal.getWidth(n)||0;return e.BBox=[0,0,Number(mn(r)),Number(mn(t))],e},AY=di.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<e},NY=di.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<e)},SY=di.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},xi=di.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return SY(n,e-1)},wi=di.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return AY(n,e-1)},Ei=di.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return NY(n,e-1)},IY=di.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],s=n[1],a=n[2],c=n[3],u={};return u.lowerLeft_X=t(i)||0,u.lowerLeft_Y=r(s+c)||0,u.upperRight_X=t(i+a)||0,u.upperRight_Y=r(s)||0,[Number(mn(u.lowerLeft_X)),Number(mn(u.lowerLeft_Y)),Number(mn(u.upperRight_X)),Number(mn(u.upperRight_Y))]},CY=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=Qb(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+mn(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Bl(n);return s.scope=n.scope,s.stream=e.join(`
`),s}},Qb=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(S){return S.split(`
`)}):i.map(function(S){return[S]});var s=t,a=Dt.internal.getHeight(n)||0;a=a<0?-a:a;var c=Dt.internal.getWidth(n)||0;c=c<0?-c:c;var u=function(S,k,M){if(S+1<i.length){var Q=k+" "+i[S+1][0];return Ny(Q,n,M).width<=c-4}return!1};s++;e:for(;s>0;){e="",s--;var d,p,g=Ny("3",n,s).height,_=n.multiline?a-s:(a-g)/2,w=_+=2,P=0,O=0,L=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Ny(e,n,s=12).width+", FieldWidth:"+c+`
`;break}for(var B="",K=0,W=0;W<i.length;W++)if(i.hasOwnProperty(W)){var J=!1;if(i[W].length!==1&&L!==i[W].length-1){if((g+2)*(K+2)+2>a)continue e;B+=i[W][L],J=!0,O=W,W--}else{B=(B+=i[W][L]+" ").substr(B.length-1)==" "?B.substr(0,B.length-1):B;var ae=parseInt(W),le=u(ae,B,s),U=W>=i.length-1;if(le&&!U){B+=" ",L=0;continue}if(le||U){if(U)O=ae;else if(n.multiline&&(g+2)*(K+2)+2>a)continue e}else{if(!n.multiline||(g+2)*(K+2)+2>a)continue e;O=ae}}for(var C="",N=P;N<=O;N++){var F=i[N];if(n.multiline){if(N===O){C+=F[L]+" ",L=(L+1)%F.length;continue}if(N===P){C+=F[F.length-1]+" ";continue}}C+=F[0]+" "}switch(C=C.substr(C.length-1)==" "?C.substr(0,C.length-1):C,p=Ny(C,n,s).width,n.textAlign){case"right":d=c-p-2;break;case"center":d=(c-p)/2;break;default:d=2}e+=mn(d)+" "+mn(w)+` Td
`,e+="("+Ch(C)+`) Tj
`,e+=-mn(d)+` 0 Td
`,w=-(s+2),p=0,P=J?O:O+1,K++,B=""}break}return r.text=e,r.fontSize=s,r},Ny=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},RY={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},PY=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},kY=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(ml.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(RY)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");u5=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new eD,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&PY(s,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var s=!r;for(var a in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var c=r[a],u=[],d=c.Rect;if(c.Rect&&(c.Rect=IY(c.Rect,i)),i.internal.newObjectDeferredBegin(c.objId,!0),c.DA=Dt.createDefaultAppearanceStream(c),ur(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(u=c.getKeyValueListForStream()),c.Rect=d,c.hasAppearanceStream&&!c.appearanceStreamContent){var p=CY(c);u.push({key:"AP",value:"<</N "+p+">>"}),i.internal.acroformPlugin.xForms.push(p)}if(c.appearanceStreamContent){var g="";for(var _ in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(_)){var w=c.appearanceStreamContent[_];if(g+="/"+_+" ",g+="<<",Object.keys(w).length>=1||Array.isArray(w)){for(var a in w)if(w.hasOwnProperty(a)){var P=w[a];typeof P=="function"&&(P=P.call(i,c)),g+="/"+a+" "+P+" ",i.internal.acroformPlugin.xForms.indexOf(P)>=0||i.internal.acroformPlugin.xForms.push(P)}}else typeof(P=w)=="function"&&(P=P.call(i,c)),g+="/"+a+" "+P,i.internal.acroformPlugin.xForms.indexOf(P)>=0||i.internal.acroformPlugin.xForms.push(P);g+=">>"}u.push({key:"AP",value:`<<
`+g+">>"})}i.internal.putStream({additionalKeyValues:u,objectId:c.objId}),i.internal.out("endobj")}s&&(function(O,L){for(var B in O)if(O.hasOwnProperty(B)){var K=B,W=O[B];L.internal.newObjectDeferredBegin(W.objId,!0),ur(W)==="object"&&typeof W.putStream=="function"&&W.putStream(),delete O[K]}})(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},X6=di.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(a){return a};if(Array.isArray(n)){for(var i="[",s=0;s<n.length;s++)switch(s!==0&&(i+=" "),ur(n[s])){case"boolean":case"number":case"object":i+=n[s].toString();break;case"string":n[s].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+Ch(r(n[s].toString()))+")"):i+=n[s].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},V2=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),"("+Ch(r(n))+")"},Ql=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ql.prototype.toString=function(){return this.objId+" 0 R"},Ql.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Ql.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:X6(i,this.objId,this.scope)}):i instanceof Ql?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var Z6=function(){Ql.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};zo(Z6,Ql);var eD=function(){Ql.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Ch(t(n))+")"}},set:function(t){n=t}})};zo(eD,Ql);var ml=function n(){Ql.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(B){if(isNaN(B))throw new Error('Invalid value "'+B+'" for attribute F supplied.');e=B}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!xi(e,3)},set:function(B){B?this.F=wi(e,3):this.F=Ei(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(B){if(isNaN(B))throw new Error('Invalid value "'+B+'" for attribute Ff supplied.');t=B}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(B){r=B!==void 0?B:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(B){r[0]=B}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(B){r[1]=B}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(B){r[2]=B}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(B){r[3]=B}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(B){switch(B){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=B;break;default:throw new Error('Invalid value "'+B+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Cv)return;s="FieldObject"+n.FieldNum++}var B=function(K){return K};return this.scope&&(B=this.scope.internal.getEncryptor(this.objId)),"("+Ch(B(s))+")"},set:function(B){s=B.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(B){s=B}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(B){a=B}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(B){c=B}});var u=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return u},set:function(B){u=B}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/u5:d},set:function(B){d=B}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(B){p=B}});var g="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!g||this instanceof Cv||this instanceof ih))return V2(g,this.objId,this.scope)},set:function(B){B=B.toString(),g=B}});var _=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(_)return this instanceof gs==0?V2(_,this.objId,this.scope):_},set:function(B){B=B.toString(),_=this instanceof gs==0?B.substr(0,1)==="("?wf(B.substr(1,B.length-2)):wf(B):B}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof gs==1?wf(_.substr(1,_.length-1)):_},set:function(B){B=B.toString(),_=this instanceof gs==1?"/"+B:B}});var w=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(w)return w},set:function(B){this.V=B}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(w)return this instanceof gs==0?V2(w,this.objId,this.scope):w},set:function(B){B=B.toString(),w=this instanceof gs==0?B.substr(0,1)==="("?wf(B.substr(1,B.length-2)):wf(B):B}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof gs==1?wf(w.substr(1,w.length-1)):w},set:function(B){B=B.toString(),w=this instanceof gs==1?"/"+B:B}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var P,O=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return O},set:function(B){B=!!B,O=B}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(P)return P},set:function(B){P=B}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,1)},set:function(B){B?this.Ff=wi(this.Ff,1):this.Ff=Ei(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,2)},set:function(B){B?this.Ff=wi(this.Ff,2):this.Ff=Ei(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,3)},set:function(B){B?this.Ff=wi(this.Ff,3):this.Ff=Ei(this.Ff,3)}});var L=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(L!==null)return L},set:function(B){if([0,1,2].indexOf(B)===-1)throw new Error('Invalid value "'+B+'" for attribute Q supplied.');L=B}}),Object.defineProperty(this,"textAlign",{get:function(){var B;switch(L){case 0:default:B="left";break;case 1:B="center";break;case 2:B="right"}return B},configurable:!0,enumerable:!0,set:function(B){switch(B){case"right":case 2:L=2;break;case"center":case 1:L=1;break;default:L=0}}})};zo(ml,Ql);var Vf=function(){ml.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return X6(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=(function(s,a,c){c||(c=1);for(var u,d=[];u=a.exec(s);)d.push(u[c]);return d})(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,18)},set:function(t){t?this.Ff=wi(this.Ff,18):this.Ff=Ei(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=wi(this.Ff,19):this.Ff=Ei(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,20)},set:function(t){t?(this.Ff=wi(this.Ff,20),e.sort()):this.Ff=Ei(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,22)},set:function(t){t?this.Ff=wi(this.Ff,22):this.Ff=Ei(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,23)},set:function(t){t?this.Ff=wi(this.Ff,23):this.Ff=Ei(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,27)},set:function(t){t?this.Ff=wi(this.Ff,27):this.Ff=Ei(this.Ff,27)}}),this.hasAppearanceStream=!1};zo(Vf,ml);var Bf=function(){Vf.call(this),this.fontName="helvetica",this.combo=!1};zo(Bf,Vf);var qf=function(){Bf.call(this),this.combo=!0};zo(qf,Bf);var Yy=function(){qf.call(this),this.edit=!0};zo(Yy,qf);var gs=function(){ml.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,15)},set:function(t){t?this.Ff=wi(this.Ff,15):this.Ff=Ei(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,16)},set:function(t){t?this.Ff=wi(this.Ff,16):this.Ff=Ei(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,17)},set:function(t){t?this.Ff=wi(this.Ff,17):this.Ff=Ei(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,26)},set:function(t){t?this.Ff=wi(this.Ff,26):this.Ff=Ei(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Ch(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){ur(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};zo(gs,ml);var Wy=function(){gs.call(this),this.pushButton=!0};zo(Wy,gs);var Gf=function(){gs.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};zo(Gf,gs);var Cv=function(){var n,e;ml.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(c){return c};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),r)a.push("/"+s+" ("+Ch(i(r[s]))+")");return a.push(">>"),a.join(`
`)},set:function(i){ur(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Dt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};zo(Cv,ml),Gf.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Gf.prototype.createOption=function(n){var e=new Cv;return e.Parent=this,e.optionName=n,this.Kids.push(e),DY.call(this.scope,e),e};var Ky=function(){gs.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Dt.CheckBox.createAppearanceStream()};zo(Ky,gs);var ih=function(){ml.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,13)},set:function(e){e?this.Ff=wi(this.Ff,13):this.Ff=Ei(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,21)},set:function(e){e?this.Ff=wi(this.Ff,21):this.Ff=Ei(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,23)},set:function(e){e?this.Ff=wi(this.Ff,23):this.Ff=Ei(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,24)},set:function(e){e?this.Ff=wi(this.Ff,24):this.Ff=Ei(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,25)},set:function(e){e?this.Ff=wi(this.Ff,25):this.Ff=Ei(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,26)},set:function(e){e?this.Ff=wi(this.Ff,26):this.Ff=Ei(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};zo(ih,ml);var Jy=function(){ih.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,14)},set:function(n){n?this.Ff=wi(this.Ff,14):this.Ff=Ei(this.Ff,14)}}),this.password=!0};zo(Jy,ih);var Dt={CheckBox:{createAppearanceStream:function(){return{N:{On:Dt.CheckBox.YesNormal},D:{On:Dt.CheckBox.YesPushDown,Off:Dt.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=Bl(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),s=Qb(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+mn(Dt.internal.getWidth(n))+" "+mn(Dt.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+mn(s.fontSize)+" Tf "+i),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=Bl(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],s=Dt.internal.getHeight(n),a=Dt.internal.getWidth(n),c=Qb(n,n.caption);return i.push("1 g"),i.push("0 0 "+mn(a)+" "+mn(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+mn(a-1)+" "+mn(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+mn(c.fontSize)+" Tf "+r),i.push(c.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=Bl(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+mn(Dt.internal.getWidth(n))+" "+mn(Dt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:Dt.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=Dt.RadioButton.Circle.YesNormal,e.D[n]=Dt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=Bl(n);e.scope=n.scope;var t=[],r=Dt.internal.getWidth(n)<=Dt.internal.getHeight(n)?Dt.internal.getWidth(n)/4:Dt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Dt.internal.Bezier_C,s=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Vu(Dt.internal.getWidth(n)/2)+" "+Vu(Dt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Bl(n);e.scope=n.scope;var t=[],r=Dt.internal.getWidth(n)<=Dt.internal.getHeight(n)?Dt.internal.getWidth(n)/4:Dt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Dt.internal.Bezier_C).toFixed(5)),a=Number((r*Dt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Vu(Dt.internal.getWidth(n)/2)+" "+Vu(Dt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Vu(Dt.internal.getWidth(n)/2)+" "+Vu(Dt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),t.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),t.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),t.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=Bl(n);e.scope=n.scope;var t=[],r=Dt.internal.getWidth(n)<=Dt.internal.getHeight(n)?Dt.internal.getWidth(n)/4:Dt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Dt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Vu(Dt.internal.getWidth(n)/2)+" "+Vu(Dt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:Dt.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=Dt.RadioButton.Cross.YesNormal,e.D[n]=Dt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=Bl(n);e.scope=n.scope;var t=[],r=Dt.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+mn(Dt.internal.getWidth(n)-2)+" "+mn(Dt.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(mn(r.x1.x)+" "+mn(r.x1.y)+" m"),t.push(mn(r.x2.x)+" "+mn(r.x2.y)+" l"),t.push(mn(r.x4.x)+" "+mn(r.x4.y)+" m"),t.push(mn(r.x3.x)+" "+mn(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Bl(n);e.scope=n.scope;var t=Dt.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+mn(Dt.internal.getWidth(n))+" "+mn(Dt.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+mn(Dt.internal.getWidth(n)-2)+" "+mn(Dt.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(mn(t.x1.x)+" "+mn(t.x1.y)+" m"),r.push(mn(t.x2.x)+" "+mn(t.x2.y)+" l"),r.push(mn(t.x4.x)+" "+mn(t.x4.y)+" m"),r.push(mn(t.x3.x)+" "+mn(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=Bl(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+mn(Dt.internal.getWidth(n))+" "+mn(Dt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};Dt.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=Dt.internal.getWidth(n),t=Dt.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},Dt.internal.getWidth=function(n){var e=0;return ur(n)==="object"&&(e=bI(n.Rect[2])),e},Dt.internal.getHeight=function(n){var e=0;return ur(n)==="object"&&(e=bI(n.Rect[3])),e};var DY=di.addField=function(n){if(kY(this,n),!(n instanceof ml))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};di.AcroFormChoiceField=Vf,di.AcroFormListBox=Bf,di.AcroFormComboBox=qf,di.AcroFormEditBox=Yy,di.AcroFormButton=gs,di.AcroFormPushButton=Wy,di.AcroFormRadioButton=Gf,di.AcroFormCheckBox=Ky,di.AcroFormTextField=ih,di.AcroFormPasswordField=Jy,di.AcroFormAppearance=Dt,di.AcroForm={ChoiceField:Vf,ListBox:Bf,ComboBox:qf,EditBox:Yy,Button:gs,PushButton:Wy,RadioButton:Gf,CheckBox:Ky,TextField:ih,PasswordField:Jy,Appearance:Dt},zt.AcroForm={ChoiceField:Vf,ListBox:Bf,ComboBox:qf,EditBox:Yy,Button:gs,PushButton:Wy,RadioButton:Gf,CheckBox:Ky,TextField:ih,PasswordField:Jy,Appearance:Dt};zt.AcroForm;function tD(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){var e="addImage_";n.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=n.__addimage__.getImageFileTypeByImageData=function(S,k){var M,Q,pe,se,ve,me=t;if((k=k||t)==="RGBA"||S.data!==void 0&&S.data instanceof Uint8ClampedArray&&"height"in S&&"width"in S)return"RGBA";if(le(S))for(ve in r)for(pe=r[ve],M=0;M<pe.length;M+=1){for(se=!0,Q=0;Q<pe[M].length;Q+=1)if(pe[M][Q]!==void 0&&pe[M][Q]!==S[Q]){se=!1;break}if(se===!0){me=ve;break}}else for(ve in r)for(pe=r[ve],M=0;M<pe.length;M+=1){for(se=!0,Q=0;Q<pe[M].length;Q+=1)if(pe[M][Q]!==void 0&&pe[M][Q]!==S.charCodeAt(Q)){se=!1;break}if(se===!0){me=ve;break}}return me===t&&k!==t&&(me=k),me},s=function S(k){for(var M=this.internal.write,Q=this.internal.putStream,pe=(0,this.internal.getFilters)();pe.indexOf("FlateEncode")!==-1;)pe.splice(pe.indexOf("FlateEncode"),1);k.objectId=this.internal.newObject();var se=[];if(se.push({key:"Type",value:"/XObject"}),se.push({key:"Subtype",value:"/Image"}),se.push({key:"Width",value:k.width}),se.push({key:"Height",value:k.height}),k.colorSpace===B.INDEXED?se.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(k.palette.length/3-1)+" "+("sMask"in k&&k.sMask!==void 0?k.objectId+2:k.objectId+1)+" 0 R]"}):(se.push({key:"ColorSpace",value:"/"+k.colorSpace}),k.colorSpace===B.DEVICE_CMYK&&se.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),se.push({key:"BitsPerComponent",value:k.bitsPerComponent}),"decodeParameters"in k&&k.decodeParameters!==void 0&&se.push({key:"DecodeParms",value:"<<"+k.decodeParameters+">>"}),"transparency"in k&&Array.isArray(k.transparency)&&k.transparency.length>0){for(var ve="",me=0,Se=k.transparency.length;me<Se;me++)ve+=k.transparency[me]+" "+k.transparency[me]+" ";se.push({key:"Mask",value:"["+ve+"]"})}k.sMask!==void 0&&se.push({key:"SMask",value:k.objectId+1+" 0 R"});var Ve=k.filter!==void 0?["/"+k.filter]:void 0;if(Q({data:k.data,additionalKeyValues:se,alreadyAppliedFilters:Ve,objectId:k.objectId}),M("endobj"),"sMask"in k&&k.sMask!==void 0){var ne,H=(ne=k.sMaskBitsPerComponent)!==null&&ne!==void 0?ne:k.bitsPerComponent,te={width:k.width,height:k.height,colorSpace:"DeviceGray",bitsPerComponent:H,data:k.sMask};"filter"in k&&(te.decodeParameters="/Predictor ".concat(k.predictor," /Colors 1 /BitsPerComponent ").concat(H," /Columns ").concat(k.width),te.filter=k.filter),S.call(this,te)}if(k.colorSpace===B.INDEXED){var Y=this.internal.newObject();Q({data:C(new Uint8Array(k.palette)),objectId:Y}),M("endobj")}},a=function(){var S=this.internal.collections[e+"images"];for(var k in S)s.call(this,S[k])},c=function(){var S,k=this.internal.collections[e+"images"],M=this.internal.write;for(var Q in k)M("/I"+(S=k[Q]).index,S.objectId,"0","R")},u=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",c))},d=function(){var S=this.internal.collections[e+"images"];return u.call(this),S},p=function(){return Object.keys(this.internal.collections[e+"images"]).length},g=function(S){return typeof n["process"+S.toUpperCase()]=="function"},_=function(S){return ur(S)==="object"&&S.nodeType===1},w=function(S,k){if(S.nodeName==="IMG"&&S.hasAttribute("src")){var M=""+S.getAttribute("src");if(M.indexOf("data:image/")===0)return $y(unescape(M).split("base64,").pop());var Q=n.loadFile(M,!0);if(Q!==void 0)return Q}if(S.nodeName==="CANVAS"){if(S.width===0||S.height===0)throw new Error("Given canvas must have data. Canvas width: "+S.width+", height: "+S.height);var pe;switch(k){case"PNG":pe="image/png";break;case"WEBP":pe="image/webp";break;default:pe="image/jpeg"}return $y(S.toDataURL(pe,1).split("base64,").pop())}},P=function(S){var k=this.internal.collections[e+"images"];if(k){for(var M in k)if(S===k[M].alias)return k[M]}},O=function(S,k,M){return S||k||(S=-96,k=-96),S<0&&(S=-1*M.width*72/S/this.internal.scaleFactor),k<0&&(k=-1*M.height*72/k/this.internal.scaleFactor),S===0&&(S=k*M.width/M.height),k===0&&(k=S*M.height/M.width),[S,k]},L=function(S,k,M,Q,pe,se){var ve=O.call(this,M,Q,pe),me=this.internal.getCoordinateString,Se=this.internal.getVerticalCoordinateString,Ve=d.call(this);if(M=ve[0],Q=ve[1],Ve[pe.index]=pe,se){se*=Math.PI/180;var ne=Math.cos(se),H=Math.sin(se),te=function(fe){return fe.toFixed(4)},Y=[te(ne),te(H),te(-1*H),te(ne),0,0,"cm"]}this.internal.write("q"),se?(this.internal.write([1,"0","0",1,me(S),Se(k+Q),"cm"].join(" ")),this.internal.write(Y.join(" ")),this.internal.write([me(M),"0","0",me(Q),"0","0","cm"].join(" "))):this.internal.write([me(M),"0","0",me(Q),me(S),Se(k+Q),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+pe.index+" Do"),this.internal.write("Q")},B=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var K=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},W=n.__addimage__.sHashCode=function(S){var k,M,Q=0;if(typeof S=="string")for(M=S.length,k=0;k<M;k++)Q=(Q<<5)-Q+S.charCodeAt(k),Q|=0;else if(le(S))for(M=S.byteLength/2,k=0;k<M;k++)Q=(Q<<5)-Q+S[k],Q|=0;return Q},J=n.__addimage__.validateStringAsBase64=function(S){(S=S||"").toString().trim();var k=!0;return S.length===0&&(k=!1),S.length%4!=0&&(k=!1),/^[A-Za-z0-9+/]+$/.test(S.substr(0,S.length-2))===!1&&(k=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(S.substr(-2))===!1&&(k=!1),k},ae=n.__addimage__.extractImageFromDataUrl=function(S){if(S==null||!(S=S.trim()).startsWith("data:"))return null;var k=S.indexOf(",");return k<0?null:S.substring(0,k).trim().endsWith("base64")?S.substring(k+1):null};n.__addimage__.isArrayBuffer=function(S){return S instanceof ArrayBuffer};var le=n.__addimage__.isArrayBufferView=function(S){return S instanceof Int8Array||S instanceof Uint8Array||S instanceof Uint8ClampedArray||S instanceof Int16Array||S instanceof Uint16Array||S instanceof Int32Array||S instanceof Uint32Array||S instanceof Float32Array||S instanceof Float64Array},U=n.__addimage__.binaryStringToUint8Array=function(S){for(var k=S.length,M=new Uint8Array(k),Q=0;Q<k;Q++)M[Q]=S.charCodeAt(Q);return M},C=n.__addimage__.arrayBufferToBinaryString=function(S){for(var k="",M=le(S)?S:new Uint8Array(S),Q=0;Q<M.length;Q+=8192)k+=String.fromCharCode.apply(null,M.subarray(Q,Q+8192));return k};n.addImage=function(){var S,k,M,Q,pe,se,ve,me,Se;if(typeof arguments[1]=="number"?(k=t,M=arguments[1],Q=arguments[2],pe=arguments[3],se=arguments[4],ve=arguments[5],me=arguments[6],Se=arguments[7]):(k=arguments[1],M=arguments[2],Q=arguments[3],pe=arguments[4],se=arguments[5],ve=arguments[6],me=arguments[7],Se=arguments[8]),ur(S=arguments[0])==="object"&&!_(S)&&"imageData"in S){var Ve=S;S=Ve.imageData,k=Ve.format||k||t,M=Ve.x||M||0,Q=Ve.y||Q||0,pe=Ve.w||Ve.width||pe,se=Ve.h||Ve.height||se,ve=Ve.alias||ve,me=Ve.compression||me,Se=Ve.rotation||Ve.angle||Se}var ne=this.internal.getFilters();if(me===void 0&&ne.indexOf("FlateEncode")!==-1&&(me="SLOW"),isNaN(M)||isNaN(Q))throw new Error("Invalid coordinates passed to jsPDF.addImage");u.call(this);var H=N.call(this,S,k,ve,me);return L.call(this,M,Q,pe,se,H,Se),this};var N=function(S,k,M,Q){var pe,se,ve;if(typeof S=="string"&&i(S)===t){S=unescape(S);var me=F(S,!1);(me!==""||(me=n.loadFile(S,!0))!==void 0)&&(S=me)}if(_(S)&&(S=w(S,k)),k=i(S,k),!g(k))throw new Error("addImage does not support files of type '"+k+"', please ensure that a plugin for '"+k+"' support is added.");if(((ve=M)==null||ve.length===0)&&(M=(function(Se){return typeof Se=="string"||le(Se)?W(Se):le(Se.data)?W(Se.data):null})(S)),(pe=P.call(this,M))||(S instanceof Uint8Array||k==="RGBA"||(se=S,S=U(S)),pe=this["process"+k.toUpperCase()](S,p.call(this),M,(function(Se){return Se&&typeof Se=="string"&&(Se=Se.toUpperCase()),Se in n.image_compression?Se:K.NONE})(Q),se)),!pe)throw new Error("An unknown error occurred whilst processing the image.");return pe},F=n.__addimage__.convertBase64ToBinaryString=function(S,k){k=typeof k!="boolean"||k;var M,Q="";if(typeof S=="string"){var pe;M=(pe=ae(S))!==null&&pe!==void 0?pe:S;try{Q=$y(M)}catch(se){if(k)throw J(M)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+se.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Q};n.getImageProperties=function(S){var k,M,Q="";if(_(S)&&(S=w(S)),typeof S=="string"&&i(S)===t&&((Q=F(S,!1))===""&&(Q=n.loadFile(S)||""),S=Q),M=i(S),!g(M))throw new Error("addImage does not support files of type '"+M+"', please ensure that a plugin for '"+M+"' support is added.");if(S instanceof Uint8Array||(S=U(S)),!(k=this["process"+M.toUpperCase()](S)))throw new Error("An unknown error occurred whilst processing the image");return k.fileType=M,k}})(zt.API),(function(n){var e=function(t){if(t!==void 0&&t!="")return!0};zt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,s,a=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,u=this.internal.getPageInfoByObjId(t.objId),d=t.pageContext.annotations,p=!1,g=0;g<d.length&&!p;g++)switch((r=d[g]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var _=0;_<d.length;_++){r=d[_];var w=this.internal.pdfEscape,P=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var O=this.internal.newAdditionalObject(),L=this.internal.newAdditionalObject(),B=this.internal.getEncryptor(O.objId),K=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(r.bounds.x)+" "+c(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+c(r.bounds.y)+"] ")+"/Contents ("+w(B(r.contents))+")",s+=" /Popup "+L.objId+" 0 R",s+=" /P "+u.objId+" 0 R",s+=" /T ("+w(B(K))+") >>",O.content=s;var W=O.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(r.bounds.x+30)+" "+c(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+c(r.bounds.y)+"] ")+" /Parent "+W,r.open&&(s+=" /Open true"),s+=" >>",L.content=s,this.internal.write(O.objId,"0 R",L.objId,"0 R");break;case"freetext":i="/Rect ["+a(r.bounds.x)+" "+c(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+c(r.bounds.y+r.bounds.h)+"] ";var J=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+w(P(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+J+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var ae=this.annotations._nameMap[r.options.name];r.options.pageNumber=ae.page,r.options.top=ae.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+w(P(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;default:var le=c(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+le+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,s,a){var c=this.internal.getCurrentPageInfo(),u=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:u(t),y:d(r),w:u(t+i),h:d(r+s)},options:a,type:"link"})},n.textWithLink=function(t,r,i,s){var a,c,u=this.getTextWidth(t),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){c=s.maxWidth;var p=this.splitTextToSize(t,c).length;a=Math.ceil(d*p)}else c=u,a=d;return this.text(t,r,i,s),i+=.2*d,s.align==="center"&&(r-=u/2),s.align==="right"&&(r-=u),this.link(r,i-d,c,a,s),u},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}})(zt.API),(function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var s=n.__arabicParser__.isInArabicSubstitutionA=function(O){return e[O.charCodeAt(0)]!==void 0},a=n.__arabicParser__.isArabicLetter=function(O){return typeof O=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(O)},c=n.__arabicParser__.isArabicEndLetter=function(O){return a(O)&&s(O)&&e[O.charCodeAt(0)].length<=2},u=n.__arabicParser__.isArabicAlfLetter=function(O){return a(O)&&i.indexOf(O.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(O){return a(O)&&s(O)&&e[O.charCodeAt(0)].length>=1};var d=n.__arabicParser__.arabicLetterHasFinalForm=function(O){return a(O)&&s(O)&&e[O.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(O){return a(O)&&s(O)&&e[O.charCodeAt(0)].length>=3};var p=n.__arabicParser__.arabicLetterHasMedialForm=function(O){return a(O)&&s(O)&&e[O.charCodeAt(0)].length==4},g=n.__arabicParser__.resolveLigatures=function(O){var L=0,B=t,K="",W=0;for(L=0;L<O.length;L+=1)B[O.charCodeAt(L)]!==void 0?(W++,typeof(B=B[O.charCodeAt(L)])=="number"&&(K+=String.fromCharCode(B),B=t,W=0),L===O.length-1&&(B=t,K+=O.charAt(L-(W-1)),L-=W-1,W=0)):(B=t,K+=O.charAt(L-W),L-=W,W=0);return K};n.__arabicParser__.isArabicDiacritic=function(O){return O!==void 0&&r[O.charCodeAt(0)]!==void 0};var _=n.__arabicParser__.getCorrectForm=function(O,L,B){return a(O)?s(O)===!1?-1:!d(O)||!a(L)&&!a(B)||!a(B)&&c(L)||c(O)&&!a(L)||c(O)&&u(L)||c(O)&&c(L)?0:p(O)&&a(L)&&!c(L)&&a(B)&&d(B)?3:c(O)||!a(B)?1:2:-1},w=function(O){var L=0,B=0,K=0,W="",J="",ae="",le=(O=O||"").split("\\s+"),U=[];for(L=0;L<le.length;L+=1){for(U.push(""),B=0;B<le[L].length;B+=1)W=le[L][B],J=le[L][B-1],ae=le[L][B+1],a(W)?(K=_(W,J,ae),U[L]+=K!==-1?String.fromCharCode(e[W.charCodeAt(0)][K]):W):U[L]+=W;U[L]=g(U[L])}return U.join(" ")},P=n.__arabicParser__.processArabic=n.processArabic=function(){var O,L=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,B=[];if(Array.isArray(L)){var K=0;for(B=[],K=0;K<L.length;K+=1)Array.isArray(L[K])?B.push([w(L[K][0]),L[K][1],L[K][2]]):B.push([w(L[K])]);O=B}else O=w(L);return typeof arguments[0]=="string"?O:(arguments[0].text=O,arguments[0])};n.events.push(["preProcessText",P])})(zt.API),zt.API.autoPrint=function(n){var e;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(c){t=c}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(c){r=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(c){i=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(c){s=c}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(c){a=c}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(zt.API),(function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var u=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return u},set:function(O){u=O}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(O){d=O}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(O){p=O}});var g=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return g},set:function(O){g=O}});var _=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return _},set:function(O){_=O}});var w=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return w},set:function(O){w=O}});var P=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return P},set:function(O){P=O}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(u){return r.call(this),this.internal.__cell__.headerFunction=typeof u=="function"?u:void 0,this},n.getTextDimensions=function(u,d){r.call(this);var p=(d=d||{}).fontSize||this.getFontSize(),g=d.font||this.getFont(),_=d.scaleFactor||this.internal.scaleFactor,w=0,P=0,O=0,L=this;if(!Array.isArray(u)&&typeof u!="string"){if(typeof u!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");u=String(u)}var B=d.maxWidth;B>0?typeof u=="string"?u=this.splitTextToSize(u,B):Object.prototype.toString.call(u)==="[object Array]"&&(u=u.reduce(function(W,J){return W.concat(L.splitTextToSize(J,B))},[])):u=Array.isArray(u)?u:[u];for(var K=0;K<u.length;K++)w<(O=this.getStringUnitWidth(u[K],{font:g})*p)&&(w=O);return w!==0&&(P=u.length),{w:w/=_,h:Math.max((P*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/_,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var u=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(u.left,u.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=n.cell=function(){var u;u=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var d=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,g=this.internal.__cell__.margins||e,_=this.internal.__cell__.tableHeaderRow,w=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===u.lineNumber?(u.x=(d.x||0)+(d.width||0),u.y=d.y||0):d.y+d.height+u.height+g.bottom>this.getPageHeight()?(this.cellAddPage(),u.y=g.top,w&&_&&(this.printHeaderRow(u.lineNumber,!0),u.y+=_[0].height)):u.y=d.y+d.height||u.y),u.text[0]!==void 0&&(this.rect(u.x,u.y,u.width,u.height,t===!0?"FD":void 0),u.align==="right"?this.text(u.text,u.x+u.width-p,u.y+p,{align:"right",baseline:"top"}):u.align==="center"?this.text(u.text,u.x+u.width/2,u.y+p,{align:"center",baseline:"top",maxWidth:u.width-p-p}):this.text(u.text,u.x+p,u.y+p,{align:"left",baseline:"top",maxWidth:u.width-p-p})),this.internal.__cell__.lastCell=u,this};n.table=function(u,d,p,g,_){if(r.call(this),!p)throw new Error("No data for PDF table.");var w,P,O,L,B=[],K=[],W=[],J={},ae={},le=[],U=[],C=(_=_||{}).autoSize||!1,N=_.printHeaders!==!1,F=_.css&&_.css["font-size"]!==void 0?16*_.css["font-size"]:_.fontSize||12,S=_.margins||Object.assign({width:this.getPageWidth()},e),k=typeof _.padding=="number"?_.padding:3,M=_.headerBackgroundColor||"#c8c8c8",Q=_.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=N,this.internal.__cell__.margins=S,this.internal.__cell__.table_font_size=F,this.internal.__cell__.padding=k,this.internal.__cell__.headerBackgroundColor=M,this.internal.__cell__.headerTextColor=Q,this.setFontSize(F),g==null)K=B=Object.keys(p[0]),W=B.map(function(){return"left"});else if(Array.isArray(g)&&ur(g[0])==="object")for(B=g.map(function(Ve){return Ve.name}),K=g.map(function(Ve){return Ve.prompt||Ve.name||""}),W=g.map(function(Ve){return Ve.align||"left"}),w=0;w<g.length;w+=1)ae[g[w].name]=.7499990551181103*g[w].width;else Array.isArray(g)&&typeof g[0]=="string"&&(K=B=g,W=B.map(function(){return"left"}));if(C||Array.isArray(g)&&typeof g[0]=="string")for(w=0;w<B.length;w+=1){for(J[L=B[w]]=p.map(function(Ve){return Ve[L]}),this.setFont(void 0,"bold"),le.push(this.getTextDimensions(K[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),P=J[L],this.setFont(void 0,"normal"),O=0;O<P.length;O+=1)le.push(this.getTextDimensions(P[O],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);ae[L]=Math.max.apply(null,le)+k+k,le=[]}if(N){var pe={};for(w=0;w<B.length;w+=1)pe[B[w]]={},pe[B[w]].text=K[w],pe[B[w]].align=W[w];var se=c.call(this,pe,ae);U=B.map(function(Ve){return new s(u,d,ae[Ve],se,pe[Ve].text,void 0,pe[Ve].align)}),this.setTableHeaderRow(U),this.printHeaderRow(1,!1)}var ve=g.reduce(function(Ve,ne){return Ve[ne.name]=ne.align,Ve},{});for(w=0;w<p.length;w+=1){"rowStart"in _&&_.rowStart instanceof Function&&_.rowStart({row:w,data:p[w]},this);var me=c.call(this,p[w],ae);for(O=0;O<B.length;O+=1){var Se=p[w][B[O]];"cellStart"in _&&_.cellStart instanceof Function&&_.cellStart({row:w,col:O,data:Se},this),a.call(this,new s(u,d,ae[B[O]],me,Se,w+2,ve[B[O]]))}}return this.internal.__cell__.table_x=u,this.internal.__cell__.table_y=d,this};var c=function(u,d){var p=this.internal.__cell__.padding,g=this.internal.__cell__.table_font_size,_=this.internal.scaleFactor;return Object.keys(u).map(function(w){var P=u[w];return this.splitTextToSize(P.hasOwnProperty("text")?P.text:P,d[w]-p-p)},this).map(function(w){return this.getLineHeightFactor()*w.length*g/_+p+p},this).reduce(function(w,P){return Math.max(w,P)},0)};n.setTableHeaderRow=function(u){r.call(this),this.internal.__cell__.tableHeaderRow=u},n.printHeaderRow=function(u,d){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var g=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(g[0],g[1],g[2],g[3],void 0,-1)}this.setFont(void 0,"bold");for(var _=[],w=0;w<this.internal.__cell__.tableHeaderRow.length;w+=1){p=this.internal.__cell__.tableHeaderRow[w].clone(),d&&(p.y=this.internal.__cell__.margins.top||0,_.push(p)),p.lineNumber=u;var P=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,p),this.setTextColor(P)}_.length>0&&this.setTableHeaderRow(_),this.setFont(void 0,"normal"),t=!1}})(zt.API);var nD={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},rD=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Xb=tD(rD),iD=[100,200,300,400,500,600,700,800,900],LY=tD(iD);function B2(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=(function(s){return nD[s=s||"normal"]?s:"normal"})(n.style),r=(function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400})(n.weight),i=(function(s){return typeof Xb[s=s||"normal"]=="number"?s:"normal"})(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function xI(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var MY={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},wI={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function EI(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function TI(n){return n.trimLeft()}function OY(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function FY(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var Sy,AI,NI,Ef,Iy,SI,II,CI,q2=["times"];function RI(n,e,t,r,i){var s=4,a=kI;switch(i){case zt.API.image_compression.FAST:s=1,a=PI;break;case zt.API.image_compression.MEDIUM:s=6,a=DI;break;case zt.API.image_compression.SLOW:s=9,a=LI}n=(function(u,d,p,g){for(var _,w=u.length/d,P=new Uint8Array(u.length+w),O=[UY,PI,kI,DI,LI],L=0;L<w;L+=1){var B=L*d,K=u.subarray(B,B+d);if(g)P.set(g(K,p,_),B+L);else{for(var W=O.length,J=[],ae=0;ae<W;ae+=1)J[ae]=O[ae](K,p,_);var le=VY(J.concat());P.set(J[le],B+L)}_=K}return P})(n,e,Math.ceil(t*r/8),a);var c=zb(n,{level:s});return zt.API.__addimage__.arrayBufferToBinaryString(c)}function UY(n){var e=Array.apply([],n);return e.unshift(0),e}function PI(n,e){var t=n.length,r=[];r[0]=1;for(var i=0;i<t;i+=1){var s=n[i-e]||0;r[i+1]=n[i]-s+256&255}return r}function kI(n,e,t){var r=n.length,i=[];i[0]=2;for(var s=0;s<r;s+=1){var a=t&&t[s]||0;i[s+1]=n[s]-a+256&255}return i}function DI(n,e,t){var r=n.length,i=[];i[0]=3;for(var s=0;s<r;s+=1){var a=n[s-e]||0,c=t&&t[s]||0;i[s+1]=n[s]+256-(a+c>>>1)&255}return i}function LI(n,e,t){var r=n.length,i=[];i[0]=4;for(var s=0;s<r;s+=1){var a=jY(n[s-e]||0,t&&t[s]||0,t&&t[s-e]||0);i[s+1]=n[s]-a+256&255}return i}function jY(n,e,t){if(n===e&&e===t)return n;var r=Math.abs(e-t),i=Math.abs(n-t),s=Math.abs(n+e-t-t);return r<=i&&r<=s?n:i<=s?e:t}function VY(n){var e=n.map(function(t){return t.reduce(function(r,i){return r+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function G2(n,e,t){var r=e*t,i=Math.floor(r/8),s=16-(r-8*i+t),a=(1<<t)-1;return sD(n,i)>>s&a}function MI(n,e,t,r){var i=t*r,s=Math.floor(i/8),a=16-(i-8*s+r),c=(1<<r)-1,u=(e&c)<<a;(function(d,p,g){if(p+1<d.byteLength)d.setUint16(p,g,!1);else{var _=g>>8&255;d.setUint8(p,_)}})(n,s,sD(n,s)&~(c<<a)&65535|u)}function sD(n,e){return e+1<n.byteLength?n.getUint16(e,!1):n.getUint8(e)<<8}function BY(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],s=i>>7,a=1<<1+(7&i);n[e++],n[e++];var c=null,u=null;s&&(c=e,u=a,e+=3*a);var d=!0,p=[],g=0,_=null,w=0,P=null;for(this.width=t,this.height=r;d&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,P=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((S=n[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var O=n[e++];g=n[e++]|n[e++]<<8,_=n[e++],1&O||(_=null),w=O>>2&7,e++;break;case 254:for(;;){if(!((S=n[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var L=n[e++]|n[e++]<<8,B=n[e++]|n[e++]<<8,K=n[e++]|n[e++]<<8,W=n[e++]|n[e++]<<8,J=n[e++],ae=J>>6&1,le=1<<1+(7&J),U=c,C=u,N=!1;J>>7&&(N=!0,U=e,C=le,e+=3*le);var F=e;for(e++;;){var S;if(!((S=n[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}p.push({x:L,y:B,width:K,height:W,has_local_palette:N,palette_offset:U,palette_size:C,data_offset:F,data_length:e-F,transparent_index:_,interlaced:!!ae,delay:g,disposal:w});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return P},this.frameInfo=function(k){if(k<0||k>=p.length)throw new Error("Frame index out of range.");return p[k]},this.decodeAndBlitFrameBGRA=function(k,M){var Q=this.frameInfo(k),pe=Q.width*Q.height,se=new Uint8Array(pe);OI(n,Q.data_offset,se,pe);var ve=Q.palette_offset,me=Q.transparent_index;me===null&&(me=256);var Se=Q.width,Ve=t-Se,ne=Se,H=4*(Q.y*t+Q.x),te=4*((Q.y+Q.height)*t+Q.x),Y=H,fe=4*Ve;Q.interlaced===!0&&(fe+=4*t*7);for(var ge=8,xe=0,we=se.length;xe<we;++xe){var Ie=se[xe];if(ne===0&&(ne=Se,(Y+=fe)>=te&&(fe=4*Ve+4*t*(ge-1),Y=H+(Se+Ve)*(ge<<1),ge>>=1)),Ie===me)Y+=4;else{var Ge=n[ve+3*Ie],Qe=n[ve+3*Ie+1],it=n[ve+3*Ie+2];M[Y++]=it,M[Y++]=Qe,M[Y++]=Ge,M[Y++]=255}--ne}},this.decodeAndBlitFrameRGBA=function(k,M){var Q=this.frameInfo(k),pe=Q.width*Q.height,se=new Uint8Array(pe);OI(n,Q.data_offset,se,pe);var ve=Q.palette_offset,me=Q.transparent_index;me===null&&(me=256);var Se=Q.width,Ve=t-Se,ne=Se,H=4*(Q.y*t+Q.x),te=4*((Q.y+Q.height)*t+Q.x),Y=H,fe=4*Ve;Q.interlaced===!0&&(fe+=4*t*7);for(var ge=8,xe=0,we=se.length;xe<we;++xe){var Ie=se[xe];if(ne===0&&(ne=Se,(Y+=fe)>=te&&(fe=4*Ve+4*t*(ge-1),Y=H+(Se+Ve)*(ge<<1),ge>>=1)),Ie===me)Y+=4;else{var Ge=n[ve+3*Ie],Qe=n[ve+3*Ie+1],it=n[ve+3*Ie+2];M[Y++]=Ge,M[Y++]=Qe,M[Y++]=it,M[Y++]=255}--ne}}}function OI(n,e,t,r){for(var i=n[e++],s=1<<i,a=s+1,c=a+1,u=i+1,d=(1<<u)-1,p=0,g=0,_=0,w=n[e++],P=new Int32Array(4096),O=null;;){for(;p<16&&w!==0;)g|=n[e++]<<p,p+=8,w===1?w=n[e++]:--w;if(p<u)break;var L=g&d;if(g>>=u,p-=u,L!==s){if(L===a)break;for(var B=L<c?L:O,K=0,W=B;W>s;)W=P[W]>>8,++K;var J=W;if(_+K+(B!==L?1:0)>r)return void Nr.log("Warning, gif stream longer than expected.");t[_++]=J;var ae=_+=K;for(B!==L&&(t[_++]=J),W=B;K--;)W=P[W],t[--ae]=255&W,W>>=8;O!==null&&c<4096&&(P[c++]=O<<8|J,c>=d+1&&u<12&&(++u,d=d<<1|1)),O=L}else c=a+1,d=(1<<(u=i+1))-1,O=null}return _!==r&&Nr.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function H2(n){var e,t,r,i,s,a=Math.floor,c=new Array(64),u=new Array(64),d=new Array(64),p=new Array(64),g=new Array(65535),_=new Array(65535),w=new Array(64),P=new Array(64),O=[],L=0,B=7,K=new Array(64),W=new Array(64),J=new Array(64),ae=new Array(256),le=new Array(2048),U=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],C=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],N=[0,1,2,3,4,5,6,7,8,9,10,11],F=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],S=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],k=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],Q=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],pe=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function se(H,te){for(var Y=0,fe=0,ge=new Array,xe=1;xe<=16;xe++){for(var we=1;we<=H[xe];we++)ge[te[fe]]=[],ge[te[fe]][0]=Y,ge[te[fe]][1]=xe,fe++,Y++;Y*=2}return ge}function ve(H){for(var te=H[0],Y=H[1]-1;Y>=0;)te&1<<Y&&(L|=1<<B),Y--,--B<0&&(L==255?(me(255),me(0)):me(L),B=7,L=0)}function me(H){O.push(H)}function Se(H){me(H>>8&255),me(255&H)}function Ve(H,te,Y,fe,ge){for(var xe,we=ge[0],Ie=ge[240],Ge=(function(Ke,bt){var ye,He,rt,at,_t,gt,mt,Yt,wt,nn,St=0;for(wt=0;wt<8;++wt){ye=Ke[St],He=Ke[St+1],rt=Ke[St+2],at=Ke[St+3],_t=Ke[St+4],gt=Ke[St+5],mt=Ke[St+6];var rr=ye+(Yt=Ke[St+7]),Rt=ye-Yt,Ot=He+mt,rn=He-mt,dn=rt+gt,qt=rt-gt,Vn=at+_t,en=at-_t,tn=rr+Vn,Gn=rr-Vn,jt=Ot+dn,Ft=Ot-dn;Ke[St]=tn+jt,Ke[St+4]=tn-jt;var vn=.707106781*(Ft+Gn);Ke[St+2]=Gn+vn,Ke[St+6]=Gn-vn;var Vi=.382683433*((tn=en+qt)-(Ft=rn+Rt)),Si=.5411961*tn+Vi,bo=1.306562965*Ft+Vi,gi=.707106781*(jt=qt+rn),Gt=Rt+gi,$o=Rt-gi;Ke[St+5]=$o+Si,Ke[St+3]=$o-Si,Ke[St+1]=Gt+bo,Ke[St+7]=Gt-bo,St+=8}for(St=0,wt=0;wt<8;++wt){ye=Ke[St],He=Ke[St+8],rt=Ke[St+16],at=Ke[St+24],_t=Ke[St+32],gt=Ke[St+40],mt=Ke[St+48];var _s=ye+(Yt=Ke[St+56]),ts=ye-Yt,ns=He+mt,er=He-mt,fr=rt+gt,ni=rt-gt,Bi=at+_t,Ii=at-_t,Hn=_s+Bi,ir=_s-Bi,ri=ns+fr,rs=ns-fr;Ke[St]=Hn+ri,Ke[St+32]=Hn-ri;var Us=.707106781*(rs+ir);Ke[St+16]=ir+Us,Ke[St+48]=ir-Us;var ma=.382683433*((Hn=Ii+ni)-(rs=er+ts)),ro=.5411961*Hn+ma,is=1.306562965*rs+ma,Yo=.707106781*(ri=ni+er),bs=ts+Yo,qi=ts-Yo;Ke[St+40]=qi+ro,Ke[St+24]=qi-ro,Ke[St+8]=bs+is,Ke[St+56]=bs-is,St++}for(wt=0;wt<64;++wt)nn=Ke[wt]*bt[wt],w[wt]=nn>0?nn+.5|0:nn-.5|0;return w})(H,te),Qe=0;Qe<64;++Qe)P[U[Qe]]=Ge[Qe];var it=P[0]-Y;Y=P[0],it==0?ve(fe[0]):(ve(fe[_[xe=32767+it]]),ve(g[xe]));for(var dt=63;dt>0&&P[dt]==0;)dt--;if(dt==0)return ve(we),Y;for(var vt,ce=1;ce<=dt;){for(var ht=ce;P[ce]==0&&ce<=dt;)++ce;var Bt=ce-ht;if(Bt>=16){vt=Bt>>4;for(var Mt=1;Mt<=vt;++Mt)ve(Ie);Bt&=15}xe=32767+P[ce],ve(ge[(Bt<<4)+_[xe]]),ve(g[xe]),ce++}return dt!=63&&ve(we),Y}function ne(H){H=Math.min(Math.max(H,1),100),s!=H&&((function(te){for(var Y=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],fe=0;fe<64;fe++){var ge=a((Y[fe]*te+50)/100);ge=Math.min(Math.max(ge,1),255),c[U[fe]]=ge}for(var xe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],we=0;we<64;we++){var Ie=a((xe[we]*te+50)/100);Ie=Math.min(Math.max(Ie,1),255),u[U[we]]=Ie}for(var Ge=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Qe=0,it=0;it<8;it++)for(var dt=0;dt<8;dt++)d[Qe]=1/(c[U[Qe]]*Ge[it]*Ge[dt]*8),p[Qe]=1/(u[U[Qe]]*Ge[it]*Ge[dt]*8),Qe++})(H<50?Math.floor(5e3/H):Math.floor(200-2*H)),s=H)}this.encode=function(H,te){te&&ne(te),O=new Array,L=0,B=7,Se(65496),Se(65504),Se(16),me(74),me(70),me(73),me(70),me(0),me(1),me(1),me(0),Se(1),Se(1),me(0),me(0),(function(){Se(65499),Se(132),me(0);for(var He=0;He<64;He++)me(c[He]);me(1);for(var rt=0;rt<64;rt++)me(u[rt])})(),(function(He,rt){Se(65472),Se(17),me(8),Se(rt),Se(He),me(3),me(1),me(17),me(0),me(2),me(17),me(1),me(3),me(17),me(1)})(H.width,H.height),(function(){Se(65476),Se(418),me(0);for(var He=0;He<16;He++)me(C[He+1]);for(var rt=0;rt<=11;rt++)me(N[rt]);me(16);for(var at=0;at<16;at++)me(F[at+1]);for(var _t=0;_t<=161;_t++)me(S[_t]);me(1);for(var gt=0;gt<16;gt++)me(k[gt+1]);for(var mt=0;mt<=11;mt++)me(M[mt]);me(17);for(var Yt=0;Yt<16;Yt++)me(Q[Yt+1]);for(var wt=0;wt<=161;wt++)me(pe[wt])})(),Se(65498),Se(12),me(3),me(1),me(0),me(2),me(17),me(3),me(17),me(0),me(63),me(0);var Y=0,fe=0,ge=0;L=0,B=7,this.encode.displayName="_encode_";for(var xe,we,Ie,Ge,Qe,it,dt,vt,ce,ht=H.data,Bt=H.width,Mt=H.height,Ke=4*Bt,bt=0;bt<Mt;){for(xe=0;xe<Ke;){for(Qe=Ke*bt+xe,dt=-1,vt=0,ce=0;ce<64;ce++)it=Qe+(vt=ce>>3)*Ke+(dt=4*(7&ce)),bt+vt>=Mt&&(it-=Ke*(bt+1+vt-Mt)),xe+dt>=Ke&&(it-=xe+dt-Ke+4),we=ht[it++],Ie=ht[it++],Ge=ht[it++],K[ce]=(le[we]+le[Ie+256|0]+le[Ge+512|0]>>16)-128,W[ce]=(le[we+768|0]+le[Ie+1024|0]+le[Ge+1280|0]>>16)-128,J[ce]=(le[we+1280|0]+le[Ie+1536|0]+le[Ge+1792|0]>>16)-128;Y=Ve(K,d,Y,e,r),fe=Ve(W,p,fe,t,i),ge=Ve(J,p,ge,t,i),xe+=32}bt+=8}if(B>=0){var ye=[];ye[1]=B+1,ye[0]=(1<<B+1)-1,ve(ye)}return Se(65497),new Uint8Array(O)},n=n||50,(function(){for(var H=String.fromCharCode,te=0;te<256;te++)ae[te]=H(te)})(),e=se(C,N),t=se(k,M),r=se(F,S),i=se(Q,pe),(function(){for(var H=1,te=2,Y=1;Y<=15;Y++){for(var fe=H;fe<te;fe++)_[32767+fe]=Y,g[32767+fe]=[],g[32767+fe][1]=Y,g[32767+fe][0]=fe;for(var ge=-(te-1);ge<=-H;ge++)_[32767+ge]=Y,g[32767+ge]=[],g[32767+ge][1]=Y,g[32767+ge][0]=te-1+ge;H<<=1,te<<=1}})(),(function(){for(var H=0;H<256;H++)le[H]=19595*H,le[H+256|0]=38470*H,le[H+512|0]=7471*H+32768,le[H+768|0]=-11059*H,le[H+1024|0]=-21709*H,le[H+1280|0]=32768*H+8421375,le[H+1536|0]=-27439*H,le[H+1792|0]=-5329*H})(),ne(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function al(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function FI(n){function e(N){if(!N)throw Error("assert :P")}function t(N,F,S){for(var k=0;4>k;k++)if(N[F+k]!=S.charCodeAt(k))return!0;return!1}function r(N,F,S,k,M){for(var Q=0;Q<M;Q++)N[F+Q]=S[k+Q]}function i(N,F,S,k){for(var M=0;M<k;M++)N[F+M]=S}function s(N){return new Int32Array(N)}function a(N,F){for(var S=[],k=0;k<N;k++)S.push(new F);return S}function c(N,F){var S=[];return(function k(M,Q,pe){for(var se=pe[Q],ve=0;ve<se&&(M.push(pe.length>Q+1?[]:new F),!(pe.length<Q+1));ve++)k(M[ve],Q+1,pe)})(S,0,N),S}var u=function(){var N=this;function F(v,T){for(var R=1<<T-1>>>0;v&R;)R>>>=1;return R?(v&R-1)+R:v}function S(v,T,R,V,$){e(!(V%R));do v[T+(V-=R)]=$;while(0<V)}function k(v,T,R,V,$){if(e(2328>=$),512>=$)var X=s(512);else if((X=s($))==null)return 0;return(function(Z,re,oe,he,Te,Me){var ue,Ne,ke=re,$e=1<<oe,De=s(16),ze=s(16);for(e(Te!=0),e(he!=null),e(Z!=null),e(0<oe),Ne=0;Ne<Te;++Ne){if(15<he[Ne])return 0;++De[he[Ne]]}if(De[0]==Te)return 0;for(ze[1]=0,ue=1;15>ue;++ue){if(De[ue]>1<<ue)return 0;ze[ue+1]=ze[ue]+De[ue]}for(Ne=0;Ne<Te;++Ne)ue=he[Ne],0<he[Ne]&&(Me[ze[ue]++]=Ne);if(ze[15]==1)return(he=new M).g=0,he.value=Me[0],S(Z,ke,1,$e,he),$e;var Je,ot=-1,et=$e-1,kt=0,Tt=1,cn=1,It=1<<oe;for(Ne=0,ue=1,Te=2;ue<=oe;++ue,Te<<=1){if(Tt+=cn<<=1,0>(cn-=De[ue]))return 0;for(;0<De[ue];--De[ue])(he=new M).g=ue,he.value=Me[Ne++],S(Z,ke+kt,Te,It,he),kt=F(kt,ue)}for(ue=oe+1,Te=2;15>=ue;++ue,Te<<=1){if(Tt+=cn<<=1,0>(cn-=De[ue]))return 0;for(;0<De[ue];--De[ue]){if(he=new M,(kt&et)!=ot){for(ke+=It,Je=1<<(ot=ue)-oe;15>ot&&!(0>=(Je-=De[ot]));)++ot,Je<<=1;$e+=It=1<<(Je=ot-oe),Z[re+(ot=kt&et)].g=Je+oe,Z[re+ot].value=ke-re-ot}he.g=ue-oe,he.value=Me[Ne++],S(Z,ke+(kt>>oe),Te,It,he),kt=F(kt,ue)}}return Tt!=2*ze[15]-1?0:$e})(v,T,R,V,$,X)}function M(){this.value=this.g=0}function Q(){this.value=this.g=0}function pe(){this.G=a(5,M),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Nl,Q)}function se(v,T,R,V){e(v!=null),e(T!=null),e(2147483648>V),v.Ca=254,v.I=0,v.b=-8,v.Ka=0,v.oa=T,v.pa=R,v.Jd=T,v.Yc=R+V,v.Zc=4<=V?R+V-4+1:R,we(v)}function ve(v,T){for(var R=0;0<T--;)R|=Ge(v,128)<<T;return R}function me(v,T){var R=ve(v,T);return Ie(v)?-R:R}function Se(v,T,R,V){var $,X=0;for(e(v!=null),e(T!=null),e(4294967288>V),v.Sb=V,v.Ra=0,v.u=0,v.h=0,4<V&&(V=4),$=0;$<V;++$)X+=T[R+$]<<8*$;v.Ra=X,v.bb=V,v.oa=T,v.pa=R}function Ve(v){for(;8<=v.u&&v.bb<v.Sb;)v.Ra>>>=8,v.Ra+=v.oa[v.pa+v.bb]<<Ea-8>>>0,++v.bb,v.u-=8;fe(v)&&(v.h=1,v.u=0)}function ne(v,T){if(e(0<=T),!v.h&&T<=Is){var R=Y(v)&Gs[T];return v.u+=T,Ve(v),R}return v.h=1,v.u=0}function H(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function te(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Y(v){return v.Ra>>>(v.u&Ea-1)>>>0}function fe(v){return e(v.bb<=v.Sb),v.h||v.bb==v.Sb&&v.u>Ea}function ge(v,T){v.u=T,v.h=fe(v)}function xe(v){v.u>=Ta&&(e(v.u>=Ta),Ve(v))}function we(v){e(v!=null&&v.oa!=null),v.pa<v.Zc?(v.I=(v.oa[v.pa++]|v.I<<8)>>>0,v.b+=8):(e(v!=null&&v.oa!=null),v.pa<v.Yc?(v.b+=8,v.I=v.oa[v.pa++]|v.I<<8):v.Ka?v.b=0:(v.I<<=8,v.b+=8,v.Ka=1))}function Ie(v){return ve(v,1)}function Ge(v,T){var R=v.Ca;0>v.b&&we(v);var V=v.b,$=R*T>>>8,X=(v.I>>>V>$)+0;for(X?(R-=$,v.I-=$+1<<V>>>0):R=$+1,V=R,$=0;256<=V;)$+=8,V>>=8;return V=7^$+Wa[V],v.b-=V,v.Ca=(R<<V)-1,X}function Qe(v,T,R){v[T+0]=R>>24&255,v[T+1]=R>>16&255,v[T+2]=R>>8&255,v[T+3]=255&R}function it(v,T){return v[T+0]|v[T+1]<<8}function dt(v,T){return it(v,T)|v[T+2]<<16}function vt(v,T){return it(v,T)|it(v,T+2)<<16}function ce(v,T){var R=1<<T;return e(v!=null),e(0<T),v.X=s(R),v.X==null?0:(v.Mb=32-T,v.Xa=T,1)}function ht(v,T){e(v!=null),e(T!=null),e(v.Xa==T.Xa),r(T.X,0,v.X,0,1<<T.Xa)}function Bt(){this.X=[],this.Xa=this.Mb=0}function Mt(v,T,R,V){e(R!=null),e(V!=null);var $=R[0],X=V[0];return $==0&&($=(v*X+T/2)/T),X==0&&(X=(T*$+v/2)/v),0>=$||0>=X?0:(R[0]=$,V[0]=X,1)}function Ke(v,T){return v+(1<<T)-1>>>T}function bt(v,T){return((4278255360&v)+(4278255360&T)>>>0&4278255360)+((16711935&v)+(16711935&T)>>>0&16711935)>>>0}function ye(v,T){N[T]=function(R,V,$,X,Z,re,oe){var he;for(he=0;he<Z;++he){var Te=N[v](re[oe+he-1],$,X+he);re[oe+he]=bt(R[V+he],Te)}}}function He(){this.ud=this.hd=this.jd=0}function rt(v,T){return((4278124286&(v^T))>>>1)+(v&T)>>>0}function at(v){return 0<=v&&256>v?v:0>v?0:255<v?255:void 0}function _t(v,T){return at(v+(v-T+.5>>1))}function gt(v,T,R){return Math.abs(T-R)-Math.abs(v-R)}function mt(v,T,R,V,$,X,Z){for(V=X[Z-1],R=0;R<$;++R)X[Z+R]=V=bt(v[T+R],V)}function Yt(v,T,R,V,$){var X;for(X=0;X<R;++X){var Z=v[T+X],re=Z>>8&255,oe=16711935&(oe=(oe=16711935&Z)+((re<<16)+re));V[$+X]=(4278255360&Z)+oe>>>0}}function wt(v,T){T.jd=255&v,T.hd=v>>8&255,T.ud=v>>16&255}function nn(v,T,R,V,$,X){var Z;for(Z=0;Z<V;++Z){var re=T[R+Z],oe=re>>>8,he=re,Te=255&(Te=(Te=re>>>16)+((v.jd<<24>>24)*(oe<<24>>24)>>>5));he=255&(he=(he+=(v.hd<<24>>24)*(oe<<24>>24)>>>5)+((v.ud<<24>>24)*(Te<<24>>24)>>>5)),$[X+Z]=(4278255360&re)+(Te<<16)+he}}function St(v,T,R,V,$){N[T]=function(X,Z,re,oe,he,Te,Me,ue,Ne){for(oe=Me;oe<ue;++oe)for(Me=0;Me<Ne;++Me)he[Te++]=$(re[V(X[Z++])])},N[v]=function(X,Z,re,oe,he,Te,Me){var ue=8>>X.b,Ne=X.Ea,ke=X.K[0],$e=X.w;if(8>ue)for(X=(1<<X.b)-1,$e=(1<<ue)-1;Z<re;++Z){var De,ze=0;for(De=0;De<Ne;++De)De&X||(ze=V(oe[he++])),Te[Me++]=$(ke[ze&$e]),ze>>=ue}else N["VP8LMapColor"+R](oe,he,ke,$e,Te,Me,Z,re,Ne)}}function rr(v,T,R,V,$){for(R=T+R;T<R;){var X=v[T++];V[$++]=X>>16&255,V[$++]=X>>8&255,V[$++]=255&X}}function Rt(v,T,R,V,$){for(R=T+R;T<R;){var X=v[T++];V[$++]=X>>16&255,V[$++]=X>>8&255,V[$++]=255&X,V[$++]=X>>24&255}}function Ot(v,T,R,V,$){for(R=T+R;T<R;){var X=(Z=v[T++])>>16&240|Z>>12&15,Z=240&Z|Z>>28&15;V[$++]=X,V[$++]=Z}}function rn(v,T,R,V,$){for(R=T+R;T<R;){var X=(Z=v[T++])>>16&248|Z>>13&7,Z=Z>>5&224|Z>>3&31;V[$++]=X,V[$++]=Z}}function dn(v,T,R,V,$){for(R=T+R;T<R;){var X=v[T++];V[$++]=255&X,V[$++]=X>>8&255,V[$++]=X>>16&255}}function qt(v,T,R,V,$,X){if(X==0)for(R=T+R;T<R;)Qe(V,((X=v[T++])[0]>>24|X[1]>>8&65280|X[2]<<8&16711680|X[3]<<24)>>>0),$+=32;else r(V,$,v,T,R)}function Vn(v,T){N[T][0]=N[v+"0"],N[T][1]=N[v+"1"],N[T][2]=N[v+"2"],N[T][3]=N[v+"3"],N[T][4]=N[v+"4"],N[T][5]=N[v+"5"],N[T][6]=N[v+"6"],N[T][7]=N[v+"7"],N[T][8]=N[v+"8"],N[T][9]=N[v+"9"],N[T][10]=N[v+"10"],N[T][11]=N[v+"11"],N[T][12]=N[v+"12"],N[T][13]=N[v+"13"],N[T][14]=N[v+"0"],N[T][15]=N[v+"0"]}function en(v){return v==Id||v==Uh||v==hu||v==jh}function tn(){this.eb=[],this.size=this.A=this.fb=0}function Gn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function jt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new tn,this.f.kb=new Gn,this.sd=null}function Ft(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function vn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Vi(v){return alert("todo:WebPSamplerProcessPlane"),v.T}function Si(v,T){var R=v.T,V=T.ba.f.RGBA,$=V.eb,X=V.fb+v.ka*V.A,Z=Ki[T.ba.S],re=v.y,oe=v.O,he=v.f,Te=v.N,Me=v.ea,ue=v.W,Ne=T.cc,ke=T.dc,$e=T.Mc,De=T.Nc,ze=v.ka,Je=v.ka+v.T,ot=v.U,et=ot+1>>1;for(ze==0?Z(re,oe,null,null,he,Te,Me,ue,he,Te,Me,ue,$,X,null,null,ot):(Z(T.ec,T.fc,re,oe,Ne,ke,$e,De,he,Te,Me,ue,$,X-V.A,$,X,ot),++R);ze+2<Je;ze+=2)Ne=he,ke=Te,$e=Me,De=ue,Te+=v.Rc,ue+=v.Rc,X+=2*V.A,Z(re,(oe+=2*v.fa)-v.fa,re,oe,Ne,ke,$e,De,he,Te,Me,ue,$,X-V.A,$,X,ot);return oe+=v.fa,v.j+Je<v.o?(r(T.ec,T.fc,re,oe,ot),r(T.cc,T.dc,he,Te,et),r(T.Mc,T.Nc,Me,ue,et),R--):1&Je||Z(re,oe,null,null,he,Te,Me,ue,he,Te,Me,ue,$,X+V.A,null,null,ot),R}function bo(v,T,R){var V=v.F,$=[v.J];if(V!=null){var X=v.U,Z=T.ba.S,re=Z==Sd||Z==hu;T=T.ba.f.RGBA;var oe=[0],he=v.ka;oe[0]=v.T,v.Kb&&(he==0?--oe[0]:(--he,$[0]-=v.width),v.j+v.ka+v.T==v.o&&(oe[0]=v.o-v.j-he));var Te=T.eb;he=T.fb+he*T.A,v=Ed(V,$[0],v.width,X,oe,Te,he+(re?0:3),T.A),e(R==oe),v&&en(Z)&&pc(Te,he,re,X,oe,T.A)}return 0}function gi(v){var T=v.ma,R=T.ba.S,V=11>R,$=R==us||R==Io||R==Sd||R==du||R==12||en(R);if(T.memory=null,T.Ib=null,T.Jb=null,T.Nd=null,!Ya(T.Oa,v,$?11:12))return 0;if($&&en(R)&&ln(),v.da)alert("todo:use_scaling");else{if(V){if(T.Ib=Vi,v.Kb){if(R=v.U+1>>1,T.memory=s(v.U+2*R),T.memory==null)return 0;T.ec=T.memory,T.fc=0,T.cc=T.ec,T.dc=T.fc+v.U,T.Mc=T.cc,T.Nc=T.dc+R,T.Ib=Si,ln()}}else alert("todo:EmitYUV");$&&(T.Jb=bo,V&&Ue())}if(V&&!Dl){for(v=0;256>v;++v)Ji[v]=89858*(v-128)+mu>>Lo,F1[v]=-22014*(v-128)+mu,A0[v]=-45773*(v-128),Hh[v]=113618*(v-128)+mu>>Lo;for(v=vc;v<kl;++v)T=76283*(v-16)+mu>>Lo,U1[v-vc]=ws(T,255),j1[v-vc]=ws(T+8>>4,15);Dl=1}return 1}function Gt(v){var T=v.ma,R=v.U,V=v.T;return e(!(1&v.ka)),0>=R||0>=V?0:(R=T.Ib(v,T),T.Jb!=null&&T.Jb(v,T,R),T.Dc+=R,1)}function $o(v){v.ma.memory=null}function _s(v,T,R,V){return ne(v,8)!=47?0:(T[0]=ne(v,14)+1,R[0]=ne(v,14)+1,V[0]=ne(v,1),ne(v,3)!=0?0:!v.h)}function ts(v,T){if(4>v)return v+1;var R=v-2>>1;return(2+(1&v)<<R)+ne(T,R)+1}function ns(v,T){return 120<T?T-120:1<=(R=((R=Ro[T-1])>>4)*v+(8-(15&R)))?R:1;var R}function er(v,T,R){var V=Y(R),$=v[T+=255&V].g-8;return 0<$&&(ge(R,R.u+8),V=Y(R),T+=v[T].value,T+=V&(1<<$)-1),ge(R,R.u+v[T].g),v[T].value}function fr(v,T,R){return R.g+=v.g,R.value+=v.value<<T>>>0,e(8>=R.g),v.g}function ni(v,T,R){var V=v.xc;return e((T=V==0?0:v.vc[v.md*(R>>V)+(T>>V)])<v.Wb),v.Ya[T]}function Bi(v,T,R,V){var $=v.ab,X=v.c*T,Z=v.C;T=Z+T;var re=R,oe=V;for(V=v.Ta,R=v.Ua;0<$--;){var he=v.gc[$],Te=Z,Me=T,ue=re,Ne=oe,ke=(oe=V,re=R,he.Ea);switch(e(Te<Me),e(Me<=he.nc),he.hc){case 2:Jr(ue,Ne,(Me-Te)*ke,oe,re);break;case 0:var $e=Te,De=Me,ze=oe,Je=re,ot=(It=he).Ea;$e==0&&(au(ue,Ne,null,null,1,ze,Je),mt(ue,Ne+1,0,0,ot-1,ze,Je+1),Ne+=ot,Je+=ot,++$e);for(var et=1<<It.b,kt=et-1,Tt=Ke(ot,It.b),cn=It.K,It=It.w+($e>>It.b)*Tt;$e<De;){var Tn=cn,Tr=It,fn=1;for(lu(ue,Ne,ze,Je-ot,1,ze,Je);fn<ot;){var At=(fn&~kt)+et;At>ot&&(At=ot),(0,Ka[Tn[Tr++]>>8&15])(ue,Ne+ +fn,ze,Je+fn-ot,At-fn,ze,Je+fn),fn=At}Ne+=ot,Je+=ot,++$e&kt||(It+=Tt)}Me!=he.nc&&r(oe,re-ke,oe,re+(Me-Te-1)*ke,ke);break;case 1:for(ke=ue,De=Ne,ot=(ue=he.Ea)-(Je=ue&~(ze=(Ne=1<<he.b)-1)),$e=Ke(ue,he.b),et=he.K,he=he.w+(Te>>he.b)*$e;Te<Me;){for(kt=et,Tt=he,cn=new He,It=De+Je,Tn=De+ue;De<It;)wt(kt[Tt++],cn),cu(cn,ke,De,Ne,oe,re),De+=Ne,re+=Ne;De<Tn&&(wt(kt[Tt++],cn),cu(cn,ke,De,ot,oe,re),De+=ot,re+=ot),++Te&ze||(he+=$e)}break;case 3:if(ue==oe&&Ne==re&&0<he.b){for(De=oe,ue=ke=re+(Me-Te)*ke-(Je=(Me-Te)*Ke(he.Ea,he.b)),Ne=oe,ze=re,$e=[],Je=(ot=Je)-1;0<=Je;--Je)$e[Je]=Ne[ze+Je];for(Je=ot-1;0<=Je;--Je)De[ue+Je]=$e[Je];Dh(he,Te,Me,oe,ke,oe,re)}else Dh(he,Te,Me,ue,Ne,oe,re)}re=V,oe=R}oe!=R&&r(V,R,re,oe,X)}function Ii(v,T){var R=v.V,V=v.Ba+v.c*v.C,$=T-v.C;if(e(T<=v.l.o),e(16>=$),0<$){var X=v.l,Z=v.Ta,re=v.Ua,oe=X.width;if(Bi(v,$,R,V),$=re=[re],e((R=v.C)<(V=T)),e(X.v<X.va),V>X.o&&(V=X.o),R<X.j){var he=X.j-R;R=X.j,$[0]+=he*oe}if(R>=V?R=0:($[0]+=4*X.v,X.ka=R-X.j,X.U=X.va-X.v,X.T=V-R,R=1),R){if(re=re[0],11>(R=v.ca).S){var Te=R.f.RGBA,Me=(V=R.S,$=X.U,X=X.T,he=Te.eb,Te.A),ue=X;for(Te=Te.fb+v.Ma*Te.A;0<ue--;){var Ne=Z,ke=re,$e=$,De=he,ze=Te;switch(V){case Oh:uu(Ne,ke,$e,De,ze);break;case us:Ja(Ne,ke,$e,De,ze);break;case Id:Ja(Ne,ke,$e,De,ze),pc(De,ze,0,$e,1,0);break;case Fh:hc(Ne,ke,$e,De,ze);break;case Io:qt(Ne,ke,$e,De,ze,1);break;case Uh:qt(Ne,ke,$e,De,ze,1),pc(De,ze,0,$e,1,0);break;case Sd:qt(Ne,ke,$e,De,ze,0);break;case hu:qt(Ne,ke,$e,De,ze,0),pc(De,ze,1,$e,1,0);break;case du:Qa(Ne,ke,$e,De,ze);break;case jh:Qa(Ne,ke,$e,De,ze),So(De,ze,$e,1,0);break;case Sl:Sa(Ne,ke,$e,De,ze);break;default:e(0)}re+=oe,Te+=Me}v.Ma+=X}else alert("todo:EmitRescaledRowsYUVA");e(v.Ma<=R.height)}}v.C=T,e(v.C<=v.i)}function Hn(v){var T;if(0<v.ua)return 0;for(T=0;T<v.Wb;++T){var R=v.Ya[T].G,V=v.Ya[T].H;if(0<R[1][V[1]+0].g||0<R[2][V[2]+0].g||0<R[3][V[3]+0].g)return 0}return 1}function ir(v,T,R,V,$,X){if(v.Z!=0){var Z=v.qd,re=v.rd;for(e(el[v.Z]!=null);T<R;++T)el[v.Z](Z,re,V,$,V,$,X),Z=V,re=$,$+=X;v.qd=Z,v.rd=re}}function ri(v,T){var R=v.l.ma,V=R.Z==0||R.Z==1?v.l.j:v.C;if(V=v.C<V?V:v.C,e(T<=v.l.o),T>V){var $=v.l.width,X=R.ca,Z=R.tb+$*V,re=v.V,oe=v.Ba+v.c*V,he=v.gc;e(v.ab==1),e(he[0].hc==3),Na(he[0],V,T,re,oe,X,Z),ir(R,V,T,X,Z,$)}v.C=v.Ma=T}function rs(v,T,R,V,$,X,Z){var re=v.$/V,oe=v.$%V,he=v.m,Te=v.s,Me=R+v.$,ue=Me;$=R+V*$;var Ne=R+V*X,ke=280+Te.ua,$e=v.Pb?re:16777216,De=0<Te.ua?Te.Wa:null,ze=Te.wc,Je=Me<Ne?ni(Te,oe,re):null;e(v.C<X),e(Ne<=$);var ot=!1;e:for(;;){for(;ot||Me<Ne;){var et=0;if(re>=$e){var kt=Me-R;e(($e=v).Pb),$e.wd=$e.m,$e.xd=kt,0<$e.s.ua&&ht($e.s.Wa,$e.s.vb),$e=re+Il}if(oe&ze||(Je=ni(Te,oe,re)),e(Je!=null),Je.Qb&&(T[Me]=Je.qb,ot=!0),!ot)if(xe(he),Je.jc){et=he,kt=T;var Tt=Me,cn=Je.pd[Y(et)&Nl-1];e(Je.jc),256>cn.g?(ge(et,et.u+cn.g),kt[Tt]=cn.value,et=0):(ge(et,et.u+cn.g-256),e(256<=cn.value),et=cn.value),et==0&&(ot=!0)}else et=er(Je.G[0],Je.H[0],he);if(he.h)break;if(ot||256>et){if(!ot)if(Je.nd)T[Me]=(Je.qb|et<<8)>>>0;else{if(xe(he),ot=er(Je.G[1],Je.H[1],he),xe(he),kt=er(Je.G[2],Je.H[2],he),Tt=er(Je.G[3],Je.H[3],he),he.h)break;T[Me]=(Tt<<24|ot<<16|et<<8|kt)>>>0}if(ot=!1,++Me,++oe>=V&&(oe=0,++re,Z!=null&&re<=X&&!(re%16)&&Z(v,re),De!=null))for(;ue<Me;)et=T[ue++],De.X[(506832829*et&4294967295)>>>De.Mb]=et}else if(280>et){if(et=ts(et-256,he),kt=er(Je.G[4],Je.H[4],he),xe(he),kt=ns(V,kt=ts(kt,he)),he.h)break;if(Me-R<kt||$-Me<et)break e;for(Tt=0;Tt<et;++Tt)T[Me+Tt]=T[Me+Tt-kt];for(Me+=et,oe+=et;oe>=V;)oe-=V,++re,Z!=null&&re<=X&&!(re%16)&&Z(v,re);if(e(Me<=$),oe&ze&&(Je=ni(Te,oe,re)),De!=null)for(;ue<Me;)et=T[ue++],De.X[(506832829*et&4294967295)>>>De.Mb]=et}else{if(!(et<ke))break e;for(ot=et-280,e(De!=null);ue<Me;)et=T[ue++],De.X[(506832829*et&4294967295)>>>De.Mb]=et;et=Me,e(!(ot>>>(kt=De).Xa)),T[et]=kt.X[ot],ot=!0}ot||e(he.h==fe(he))}if(v.Pb&&he.h&&Me<$)e(v.m.h),v.a=5,v.m=v.wd,v.$=v.xd,0<v.s.ua&&ht(v.s.vb,v.s.Wa);else{if(he.h)break e;Z!=null&&Z(v,re>X?X:re),v.a=0,v.$=Me-R}return 1}return v.a=3,0}function Us(v){e(v!=null),v.vc=null,v.yc=null,v.Ya=null;var T=v.Wa;T!=null&&(T.X=null),v.vb=null,e(v!=null)}function ma(){var v=new Qt;return v==null?null:(v.a=0,v.xb=zp,Vn("Predictor","VP8LPredictors"),Vn("Predictor","VP8LPredictors_C"),Vn("PredictorAdd","VP8LPredictorsAdd"),Vn("PredictorAdd","VP8LPredictorsAdd_C"),Jr=Yt,cu=nn,uu=rr,Ja=Rt,Qa=Ot,Sa=rn,hc=dn,N.VP8LMapColor32b=Aa,N.VP8LMapColor8b=$i,v)}function ro(v,T,R,V,$){var X=1,Z=[v],re=[T],oe=V.m,he=V.s,Te=null,Me=0;e:for(;;){if(R)for(;X&&ne(oe,1);){var ue=Z,Ne=re,ke=V,$e=1,De=ke.m,ze=ke.gc[ke.ab],Je=ne(De,2);if(ke.Oc&1<<Je)X=0;else{switch(ke.Oc|=1<<Je,ze.hc=Je,ze.Ea=ue[0],ze.nc=Ne[0],ze.K=[null],++ke.ab,e(4>=ke.ab),Je){case 0:case 1:ze.b=ne(De,3)+2,$e=ro(Ke(ze.Ea,ze.b),Ke(ze.nc,ze.b),0,ke,ze.K),ze.K=ze.K[0];break;case 3:var ot,et=ne(De,8)+1,kt=16<et?0:4<et?1:2<et?2:3;if(ue[0]=Ke(ze.Ea,kt),ze.b=kt,ot=$e=ro(et,1,0,ke,ze.K)){var Tt,cn=et,It=ze,Tn=1<<(8>>It.b),Tr=s(Tn);if(Tr==null)ot=0;else{var fn=It.K[0],At=It.w;for(Tr[0]=It.K[0][0],Tt=1;Tt<1*cn;++Tt)Tr[Tt]=bt(fn[At+Tt],Tr[Tt-1]);for(;Tt<4*Tn;++Tt)Tr[Tt]=0;It.K[0]=null,It.K[0]=Tr,ot=1}}$e=ot;break;case 2:break;default:e(0)}X=$e}}if(Z=Z[0],re=re[0],X&&ne(oe,1)&&!(X=1<=(Me=ne(oe,4))&&11>=Me)){V.a=3;break e}var ft;if(ft=X)t:{var Rr,sn,gn,Qn=V,_i=Z,Qi=re,yr=Me,si=R,ds=Qn.m,oi=Qn.s,xn=[null],On=1,Pr=0,qn=Po[yr];n:for(;;){if(si&&ne(ds,1)){var bi=ne(ds,3)+2,kr=Ke(_i,bi),Fn=Ke(Qi,bi),Zr=kr*Fn;if(!ro(kr,Fn,0,Qn,xn))break n;for(xn=xn[0],oi.xc=bi,Rr=0;Rr<Zr;++Rr){var Xn=xn[Rr]>>8&65535;xn[Rr]=Xn,Xn>=On&&(On=Xn+1)}}if(ds.h)break n;for(sn=0;5>sn;++sn){var ai=gc[sn];!sn&&0<yr&&(ai+=1<<yr),Pr<ai&&(Pr=ai)}var li=a(On*qn,M),or=On,Mn=a(or,pe);if(Mn==null)var hs=null;else e(65536>=or),hs=Mn;var Vr=s(Pr);if(hs==null||Vr==null||li==null){Qn.a=1;break n}var Jt=li;for(Rr=gn=0;Rr<On;++Rr){var Xt=hs[Rr],Un=Xt.G,Hs=Xt.H,Mo=0,Rs=1,ci=0;for(sn=0;5>sn;++sn){ai=gc[sn],Un[sn]=Jt,Hs[sn]=gn,!sn&&0<yr&&(ai+=1<<yr);i:{var Ll,Ml=ai,$h=Qn,vr=Vr,Yp=Jt,Wp=gn,Yh=0,tl=$h.m,V1=ne(tl,1);if(i(vr,0,0,Ml),V1){var Kp=ne(tl,1)+1,Jp=ne(tl,1),Wh=ne(tl,Jp==0?1:8);vr[Wh]=1,Kp==2&&(vr[Wh=ne(tl,8)]=1);var ki=1}else{var Br=s(19),kd=ne(tl,4)+4;if(19<kd){$h.a=3;var Ol=0;break i}for(Ll=0;Ll<kd;++Ll)Br[Cd[Ll]]=ne(tl,3);var yu=void 0,_c=void 0,Ra=$h,Kh=Br,vu=Ml,Jh=vr,Qh=0,nl=Ra.m,Qp=8,Xp=a(128,M);r:for(;k(Xp,0,7,Kh,19);){if(ne(nl,1)){var N0=2+2*ne(nl,3);if((yu=2+ne(nl,N0))>vu)break r}else yu=vu;for(_c=0;_c<vu&&yu--;){xe(nl);var Zp=Xp[0+(127&Y(nl))];ge(nl,nl.u+Zp.g);var Fl=Zp.value;if(16>Fl)Jh[_c++]=Fl,Fl!=0&&(Qp=Fl);else{var S0=Fl==16,I0=Fl-16,C0=fu[I0],em=ne(nl,Co[I0])+C0;if(_c+em>vu)break r;for(var R0=S0?Qp:0;0<em--;)Jh[_c++]=R0}}Qh=1;break r}Qh||(Ra.a=3),ki=Qh}(ki=ki&&!tl.h)&&(Yh=k(Yp,Wp,8,vr,Ml)),ki&&Yh!=0?Ol=Yh:($h.a=3,Ol=0)}if(Ol==0)break n;if(Rs&&Vh[sn]==1&&(Rs=Jt[gn].g==0),Mo+=Jt[gn].g,gn+=Ol,3>=sn){var bc,Xh=Vr[0];for(bc=1;bc<ai;++bc)Vr[bc]>Xh&&(Xh=Vr[bc]);ci+=Xh}}if(Xt.nd=Rs,Xt.Qb=0,Rs&&(Xt.qb=(Un[3][Hs[3]+0].value<<24|Un[1][Hs[1]+0].value<<16|Un[2][Hs[2]+0].value)>>>0,Mo==0&&256>Un[0][Hs[0]+0].value&&(Xt.Qb=1,Xt.qb+=Un[0][Hs[0]+0].value<<8)),Xt.jc=!Xt.Qb&&6>ci,Xt.jc){var Dd,Pa=Xt;for(Dd=0;Dd<Nl;++Dd){var rl=Dd,il=Pa.pd[rl],Zh=Pa.G[0][Pa.H[0]+rl];256<=Zh.value?(il.g=Zh.g+256,il.value=Zh.value):(il.g=0,il.value=0,rl>>=fr(Zh,8,il),rl>>=fr(Pa.G[1][Pa.H[1]+rl],16,il),rl>>=fr(Pa.G[2][Pa.H[2]+rl],0,il),fr(Pa.G[3][Pa.H[3]+rl],24,il))}}}oi.vc=xn,oi.Wb=On,oi.Ya=hs,oi.yc=li,ft=1;break t}ft=0}if(!(X=ft)){V.a=3;break e}if(0<Me){if(he.ua=1<<Me,!ce(he.Wa,Me)){V.a=1,X=0;break e}}else he.ua=0;var ef=V,xc=Z,P0=re,_u=ef.s,bu=_u.xc;if(ef.c=xc,ef.i=P0,_u.md=Ke(xc,bu),_u.wc=bu==0?-1:(1<<bu)-1,R){V.xb=Cl;break e}if((Te=s(Z*re))==null){V.a=1,X=0;break e}X=(X=rs(V,Te,0,Z,re,re,null))&&!oe.h;break e}return X?($!=null?$[0]=Te:(e(Te==null),e(R)),V.$=0,R||Us(he)):Us(he),X}function is(v,T){var R=v.c*v.i,V=R+T+16*T;return e(v.c<=T),v.V=s(V),v.V==null?(v.Ta=null,v.Ua=0,v.a=1,0):(v.Ta=v.V,v.Ua=v.Ba+R+T,1)}function Yo(v,T){var R=v.C,V=T-R,$=v.V,X=v.Ba+v.c*R;for(e(T<=v.l.o);0<V;){var Z=16<V?16:V,re=v.l.ma,oe=v.l.width,he=oe*Z,Te=re.ca,Me=re.tb+oe*R,ue=v.Ta,Ne=v.Ua;Bi(v,Z,$,X),ho(ue,Ne,Te,Me,he),ir(re,R,R+Z,Te,Me,oe),V-=Z,$+=Z*v.c,R+=Z}e(R==T),v.C=v.Ma=T}function bs(){this.ub=this.yd=this.td=this.Rb=0}function qi(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function xs(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function js(){this.Yb=(function(){var v=[];return(function T(R,V,$){for(var X=$[V],Z=0;Z<X&&(R.push($.length>V+1?[]:0),!($.length<V+1));Z++)T(R[Z],V+1,$)})(v,0,[3,11]),v})()}function Cr(){this.jb=s(3),this.Wc=c([4,8],js),this.Xc=c([4,17],js)}function vl(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function ss(){this.ld=this.La=this.dd=this.tc=0}function Vs(){this.Na=this.la=0}function io(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Va(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function _l(){this.uc=this.M=this.Nb=0,this.wa=Array(new ss),this.Y=0,this.ya=Array(new Va),this.aa=0,this.l=new Ci}function bl(){this.y=s(16),this.f=s(8),this.ea=s(8)}function sc(){this.cb=this.a=0,this.sc="",this.m=new H,this.Od=new bs,this.Kc=new qi,this.ed=new vl,this.Qa=new xs,this.Ic=this.$c=this.Aa=0,this.D=new _l,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,H),this.ia=0,this.pb=a(4,io),this.Pa=new Cr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new bl),this.Hd=0,this.rb=Array(new Vs),this.sb=0,this.wa=Array(new ss),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Va),this.L=this.aa=0,this.gd=c([4,2],ss),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ws(v,T){return 0>v?0:v>T?T:v}function Ci(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Fr(){var v=new sc;return v!=null&&(v.a=0,v.sc="OK",v.cb=0,v.Xb=0,fo||(fo=Rn)),v}function wn(v,T,R){return v.a==0&&(v.a=T,v.sc=R,v.cb=0),0}function Wo(v,T,R){return 3<=R&&v[T+0]==157&&v[T+1]==1&&v[T+2]==42}function Bs(v,T){if(v==null)return 0;if(v.a=0,v.sc="OK",T==null)return wn(v,2,"null VP8Io passed to VP8GetHeaders()");var R=T.data,V=T.w,$=T.ha;if(4>$)return wn(v,7,"Truncated header.");var X=R[V+0]|R[V+1]<<8|R[V+2]<<16,Z=v.Od;if(Z.Rb=!(1&X),Z.td=X>>1&7,Z.yd=X>>4&1,Z.ub=X>>5,3<Z.td)return wn(v,3,"Incorrect keyframe parameters.");if(!Z.yd)return wn(v,4,"Frame not displayable.");V+=3,$-=3;var re=v.Kc;if(Z.Rb){if(7>$)return wn(v,7,"cannot parse picture header");if(!Wo(R,V,$))return wn(v,3,"Bad code word");re.c=16383&(R[V+4]<<8|R[V+3]),re.Td=R[V+4]>>6,re.i=16383&(R[V+6]<<8|R[V+5]),re.Ud=R[V+6]>>6,V+=7,$-=7,v.za=re.c+15>>4,v.Ub=re.i+15>>4,T.width=re.c,T.height=re.i,T.Da=0,T.j=0,T.v=0,T.va=T.width,T.o=T.height,T.da=0,T.ib=T.width,T.hb=T.height,T.U=T.width,T.T=T.height,i((X=v.Pa).jb,0,255,X.jb.length),e((X=v.Qa)!=null),X.Cb=0,X.Bb=0,X.Fb=1,i(X.Zb,0,0,X.Zb.length),i(X.Lb,0,0,X.Lb)}if(Z.ub>$)return wn(v,7,"bad partition length");se(X=v.m,R,V,Z.ub),V+=Z.ub,$-=Z.ub,Z.Rb&&(re.Ld=Ie(X),re.Kd=Ie(X)),re=v.Qa;var oe,he=v.Pa;if(e(X!=null),e(re!=null),re.Cb=Ie(X),re.Cb){if(re.Bb=Ie(X),Ie(X)){for(re.Fb=Ie(X),oe=0;4>oe;++oe)re.Zb[oe]=Ie(X)?me(X,7):0;for(oe=0;4>oe;++oe)re.Lb[oe]=Ie(X)?me(X,6):0}if(re.Bb)for(oe=0;3>oe;++oe)he.jb[oe]=Ie(X)?ve(X,8):255}else re.Bb=0;if(X.Ka)return wn(v,3,"cannot parse segment header");if((re=v.ed).zd=Ie(X),re.Tb=ve(X,6),re.wb=ve(X,3),re.Pc=Ie(X),re.Pc&&Ie(X)){for(he=0;4>he;++he)Ie(X)&&(re.vd[he]=me(X,6));for(he=0;4>he;++he)Ie(X)&&(re.od[he]=me(X,6))}if(v.L=re.Tb==0?0:re.zd?1:2,X.Ka)return wn(v,3,"cannot parse filter header");var Te=$;if($=oe=V,V=oe+Te,re=Te,v.Xb=(1<<ve(v.m,2))-1,Te<3*(he=v.Xb))R=7;else{for(oe+=3*he,re-=3*he,Te=0;Te<he;++Te){var Me=R[$+0]|R[$+1]<<8|R[$+2]<<16;Me>re&&(Me=re),se(v.Jc[+Te],R,oe,Me),oe+=Me,re-=Me,$+=3}se(v.Jc[+he],R,oe,re),R=oe<V?0:5}if(R!=0)return wn(v,R,"cannot parse partitions");for(R=ve(oe=v.m,7),$=Ie(oe)?me(oe,4):0,V=Ie(oe)?me(oe,4):0,re=Ie(oe)?me(oe,4):0,he=Ie(oe)?me(oe,4):0,oe=Ie(oe)?me(oe,4):0,Te=v.Qa,Me=0;4>Me;++Me){if(Te.Cb){var ue=Te.Zb[Me];Te.Fb||(ue+=R)}else{if(0<Me){v.pb[Me]=v.pb[0];continue}ue=R}var Ne=v.pb[Me];Ne.Sc[0]=ko[ws(ue+$,127)],Ne.Sc[1]=Do[ws(ue+0,127)],Ne.Eb[0]=2*ko[ws(ue+V,127)],Ne.Eb[1]=101581*Do[ws(ue+re,127)]>>16,8>Ne.Eb[1]&&(Ne.Eb[1]=8),Ne.Qc[0]=ko[ws(ue+he,117)],Ne.Qc[1]=Do[ws(ue+oe,127)],Ne.lc=ue+oe}if(!Z.Rb)return wn(v,4,"Not a key frame.");for(Ie(X),Z=v.Pa,R=0;4>R;++R){for($=0;8>$;++$)for(V=0;3>V;++V)for(re=0;11>re;++re)he=Ge(X,Er[R][$][V][re])?ve(X,8):T0[R][$][V][re],Z.Wc[R][$].Yb[V][re]=he;for($=0;17>$;++$)Z.Xc[R][$]=Z.Wc[R][An[$]]}return v.kc=Ie(X),v.kc&&(v.Bd=ve(X,8)),v.cb=1}function Rn(v,T,R,V,$,X,Z){var re=T[$].Yb[R];for(R=0;16>$;++$){if(!Ge(v,re[R+0]))return $;for(;!Ge(v,re[R+1]);)if(re=T[++$].Yb[0],R=0,$==16)return 16;var oe=T[$+1].Yb;if(Ge(v,re[R+2])){var he=v,Te=0;if(Ge(he,(ue=re)[(Me=R)+3]))if(Ge(he,ue[Me+6])){for(re=0,Me=2*(Te=Ge(he,ue[Me+8]))+(ue=Ge(he,ue[Me+9+Te])),Te=0,ue=E0[Me];ue[re];++re)Te+=Te+Ge(he,ue[re]);Te+=3+(8<<Me)}else Ge(he,ue[Me+7])?(Te=7+2*Ge(he,165),Te+=Ge(he,145)):Te=5+Ge(he,159);else Te=Ge(he,ue[Me+4])?3+Ge(he,ue[Me+5]):2;re=oe[2]}else Te=1,re=oe[1];oe=Z+Hp[$],0>(he=v).b&&we(he);var Me,ue=he.b,Ne=(Me=he.Ca>>1)-(he.I>>ue)>>31;--he.b,he.Ca+=Ne,he.Ca|=1,he.I-=(Me+1&Ne)<<ue,X[oe]=((Te^Ne)-Ne)*V[(0<$)+0]}return 16}function ga(v){var T=v.rb[v.sb-1];T.la=0,T.Na=0,i(v.zc,0,0,v.zc.length),v.ja=0}function Wr(v,T,R,V,$){$=v[T+R+32*V]+($>>3),v[T+R+32*V]=-256&$?0>$?0:255:$}function wr(v,T,R,V,$,X){Wr(v,T,0,R,V+$),Wr(v,T,1,R,V+X),Wr(v,T,2,R,V-X),Wr(v,T,3,R,V-$)}function Ur(v){return(20091*v>>16)+v}function Ba(v,T,R,V){var $,X=0,Z=s(16);for($=0;4>$;++$){var re=v[T+0]+v[T+8],oe=v[T+0]-v[T+8],he=(35468*v[T+4]>>16)-Ur(v[T+12]),Te=Ur(v[T+4])+(35468*v[T+12]>>16);Z[X+0]=re+Te,Z[X+1]=oe+he,Z[X+2]=oe-he,Z[X+3]=re-Te,X+=4,T++}for($=X=0;4>$;++$)re=(v=Z[X+0]+4)+Z[X+8],oe=v-Z[X+8],he=(35468*Z[X+4]>>16)-Ur(Z[X+12]),Wr(R,V,0,0,re+(Te=Ur(Z[X+4])+(35468*Z[X+12]>>16))),Wr(R,V,1,0,oe+he),Wr(R,V,2,0,oe-he),Wr(R,V,3,0,re-Te),X++,V+=32}function su(v,T,R,V){var $=v[T+0]+4,X=35468*v[T+4]>>16,Z=Ur(v[T+4]),re=35468*v[T+1]>>16;wr(R,V,0,$+Z,v=Ur(v[T+1]),re),wr(R,V,1,$+X,v,re),wr(R,V,2,$-X,v,re),wr(R,V,3,$-Z,v,re)}function oc(v,T,R,V,$){Ba(v,T,R,V),$&&Ba(v,T+16,R,V+4)}function Gi(v,T,R,V){Xa(v,T+0,R,V,1),Xa(v,T+32,R,V+128,1)}function ac(v,T,R,V){var $;for(v=v[T+0]+4,$=0;4>$;++$)for(T=0;4>T;++T)Wr(R,V,T,$,v)}function Ko(v,T,R,V){v[T+0]&&Bn(v,T+0,R,V),v[T+16]&&Bn(v,T+16,R,V+4),v[T+32]&&Bn(v,T+32,R,V+128),v[T+48]&&Bn(v,T+48,R,V+128+4)}function yi(v,T,R,V){var $,X=s(16);for($=0;4>$;++$){var Z=v[T+0+$]+v[T+12+$],re=v[T+4+$]+v[T+8+$],oe=v[T+4+$]-v[T+8+$],he=v[T+0+$]-v[T+12+$];X[0+$]=Z+re,X[8+$]=Z-re,X[4+$]=he+oe,X[12+$]=he-oe}for($=0;4>$;++$)Z=(v=X[0+4*$]+3)+X[3+4*$],re=X[1+4*$]+X[2+4*$],oe=X[1+4*$]-X[2+4*$],he=v-X[3+4*$],R[V+0]=Z+re>>3,R[V+16]=he+oe>>3,R[V+32]=Z-re>>3,R[V+48]=he-oe>>3,V+=64}function ya(v,T,R){var V,$=T-32,X=cs,Z=255-v[$-1];for(V=0;V<R;++V){var re,oe=X,he=Z+v[T-1];for(re=0;re<R;++re)v[T+re]=oe[he+v[$+re]];T+=32}}function lc(v,T){ya(v,T,4)}function cc(v,T){ya(v,T,8)}function xl(v,T){ya(v,T,16)}function wl(v,T){var R;for(R=0;16>R;++R)r(v,T+32*R,v,T-32,16)}function Jo(v,T){var R;for(R=16;0<R;--R)i(v,T,v[T-1],16),T+=32}function os(v,T,R){var V;for(V=0;16>V;++V)i(T,R+32*V,v,16)}function so(v,T){var R,V=16;for(R=0;16>R;++R)V+=v[T-1+32*R]+v[T+R-32];os(V>>5,v,T)}function Qo(v,T){var R,V=8;for(R=0;16>R;++R)V+=v[T-1+32*R];os(V>>4,v,T)}function as(v,T){var R,V=8;for(R=0;16>R;++R)V+=v[T+R-32];os(V>>4,v,T)}function va(v,T){os(128,v,T)}function Kt(v,T,R){return v+2*T+R+2>>2}function qa(v,T){var R,V=T-32;for(V=new Uint8Array([Kt(v[V-1],v[V+0],v[V+1]),Kt(v[V+0],v[V+1],v[V+2]),Kt(v[V+1],v[V+2],v[V+3]),Kt(v[V+2],v[V+3],v[V+4])]),R=0;4>R;++R)r(v,T+32*R,V,0,V.length)}function El(v,T){var R=v[T-1],V=v[T-1+32],$=v[T-1+64],X=v[T-1+96];Qe(v,T+0,16843009*Kt(v[T-1-32],R,V)),Qe(v,T+32,16843009*Kt(R,V,$)),Qe(v,T+64,16843009*Kt(V,$,X)),Qe(v,T+96,16843009*Kt($,X,X))}function _a(v,T){var R,V=4;for(R=0;4>R;++R)V+=v[T+R-32]+v[T-1+32*R];for(V>>=3,R=0;4>R;++R)i(v,T+32*R,V,4)}function vi(v,T){var R=v[T-1+0],V=v[T-1+32],$=v[T-1+64],X=v[T-1-32],Z=v[T+0-32],re=v[T+1-32],oe=v[T+2-32],he=v[T+3-32];v[T+0+96]=Kt(V,$,v[T-1+96]),v[T+1+96]=v[T+0+64]=Kt(R,V,$),v[T+2+96]=v[T+1+64]=v[T+0+32]=Kt(X,R,V),v[T+3+96]=v[T+2+64]=v[T+1+32]=v[T+0+0]=Kt(Z,X,R),v[T+3+64]=v[T+2+32]=v[T+1+0]=Kt(re,Z,X),v[T+3+32]=v[T+2+0]=Kt(oe,re,Z),v[T+3+0]=Kt(he,oe,re)}function ii(v,T){var R=v[T+1-32],V=v[T+2-32],$=v[T+3-32],X=v[T+4-32],Z=v[T+5-32],re=v[T+6-32],oe=v[T+7-32];v[T+0+0]=Kt(v[T+0-32],R,V),v[T+1+0]=v[T+0+32]=Kt(R,V,$),v[T+2+0]=v[T+1+32]=v[T+0+64]=Kt(V,$,X),v[T+3+0]=v[T+2+32]=v[T+1+64]=v[T+0+96]=Kt($,X,Z),v[T+3+32]=v[T+2+64]=v[T+1+96]=Kt(X,Z,re),v[T+3+64]=v[T+2+96]=Kt(Z,re,oe),v[T+3+96]=Kt(re,oe,oe)}function Ga(v,T){var R=v[T-1+0],V=v[T-1+32],$=v[T-1+64],X=v[T-1-32],Z=v[T+0-32],re=v[T+1-32],oe=v[T+2-32],he=v[T+3-32];v[T+0+0]=v[T+1+64]=X+Z+1>>1,v[T+1+0]=v[T+2+64]=Z+re+1>>1,v[T+2+0]=v[T+3+64]=re+oe+1>>1,v[T+3+0]=oe+he+1>>1,v[T+0+96]=Kt($,V,R),v[T+0+64]=Kt(V,R,X),v[T+0+32]=v[T+1+96]=Kt(R,X,Z),v[T+1+32]=v[T+2+96]=Kt(X,Z,re),v[T+2+32]=v[T+3+96]=Kt(Z,re,oe),v[T+3+32]=Kt(re,oe,he)}function zn(v,T){var R=v[T+0-32],V=v[T+1-32],$=v[T+2-32],X=v[T+3-32],Z=v[T+4-32],re=v[T+5-32],oe=v[T+6-32],he=v[T+7-32];v[T+0+0]=R+V+1>>1,v[T+1+0]=v[T+0+64]=V+$+1>>1,v[T+2+0]=v[T+1+64]=$+X+1>>1,v[T+3+0]=v[T+2+64]=X+Z+1>>1,v[T+0+32]=Kt(R,V,$),v[T+1+32]=v[T+0+96]=Kt(V,$,X),v[T+2+32]=v[T+1+96]=Kt($,X,Z),v[T+3+32]=v[T+2+96]=Kt(X,Z,re),v[T+3+64]=Kt(Z,re,oe),v[T+3+96]=Kt(re,oe,he)}function Es(v,T){var R=v[T-1+0],V=v[T-1+32],$=v[T-1+64],X=v[T-1+96];v[T+0+0]=R+V+1>>1,v[T+2+0]=v[T+0+32]=V+$+1>>1,v[T+2+32]=v[T+0+64]=$+X+1>>1,v[T+1+0]=Kt(R,V,$),v[T+3+0]=v[T+1+32]=Kt(V,$,X),v[T+3+32]=v[T+1+64]=Kt($,X,X),v[T+3+64]=v[T+2+64]=v[T+0+96]=v[T+1+96]=v[T+2+96]=v[T+3+96]=X}function Ha(v,T){var R=v[T-1+0],V=v[T-1+32],$=v[T-1+64],X=v[T-1+96],Z=v[T-1-32],re=v[T+0-32],oe=v[T+1-32],he=v[T+2-32];v[T+0+0]=v[T+2+32]=R+Z+1>>1,v[T+0+32]=v[T+2+64]=V+R+1>>1,v[T+0+64]=v[T+2+96]=$+V+1>>1,v[T+0+96]=X+$+1>>1,v[T+3+0]=Kt(re,oe,he),v[T+2+0]=Kt(Z,re,oe),v[T+1+0]=v[T+3+32]=Kt(R,Z,re),v[T+1+32]=v[T+3+64]=Kt(V,R,Z),v[T+1+64]=v[T+3+96]=Kt($,V,R),v[T+1+96]=Kt(X,$,V)}function oo(v,T){var R;for(R=0;8>R;++R)r(v,T+32*R,v,T-32,8)}function uc(v,T){var R;for(R=0;8>R;++R)i(v,T,v[T-1],8),T+=32}function Ts(v,T,R){var V;for(V=0;8>V;++V)i(T,R+32*V,v,8)}function Xo(v,T){var R,V=8;for(R=0;8>R;++R)V+=v[T+R-32]+v[T-1+32*R];Ts(V>>4,v,T)}function As(v,T){var R,V=4;for(R=0;8>R;++R)V+=v[T+R-32];Ts(V>>3,v,T)}function Kr(v,T){var R,V=4;for(R=0;8>R;++R)V+=v[T-1+32*R];Ts(V>>3,v,T)}function xo(v,T){Ts(128,v,T)}function Ri(v,T,R){var V=v[T-R],$=v[T+0],X=3*($-V)+Za[1020+v[T-2*R]-v[T+R]],Z=Nd[112+(X+4>>3)];v[T-R]=cs[255+V+Nd[112+(X+3>>3)]],v[T+0]=cs[255+$-Z]}function wo(v,T,R,V){var $=v[T+0],X=v[T+R];return Yi[255+v[T-2*R]-v[T-R]]>V||Yi[255+X-$]>V}function ba(v,T,R,V){return 4*Yi[255+v[T-R]-v[T+0]]+Yi[255+v[T-2*R]-v[T+R]]<=V}function Eo(v,T,R,V,$){var X=v[T-3*R],Z=v[T-2*R],re=v[T-R],oe=v[T+0],he=v[T+R],Te=v[T+2*R],Me=v[T+3*R];return 4*Yi[255+re-oe]+Yi[255+Z-he]>V?0:Yi[255+v[T-4*R]-X]<=$&&Yi[255+X-Z]<=$&&Yi[255+Z-re]<=$&&Yi[255+Me-Te]<=$&&Yi[255+Te-he]<=$&&Yi[255+he-oe]<=$}function To(v,T,R,V){var $=2*V+1;for(V=0;16>V;++V)ba(v,T+V,R,$)&&Ri(v,T+V,R)}function qs(v,T,R,V){var $=2*V+1;for(V=0;16>V;++V)ba(v,T+V*R,1,$)&&Ri(v,T+V*R,1)}function za(v,T,R,V){var $;for($=3;0<$;--$)To(v,T+=4*R,R,V)}function Tl(v,T,R,V){var $;for($=3;0<$;--$)qs(v,T+=4,R,V)}function Ns(v,T,R,V,$,X,Z,re){for(X=2*X+1;0<$--;){if(Eo(v,T,R,X,Z))if(wo(v,T,R,re))Ri(v,T,R);else{var oe=v,he=T,Te=R,Me=oe[he-2*Te],ue=oe[he-Te],Ne=oe[he+0],ke=oe[he+Te],$e=oe[he+2*Te],De=27*(Je=Za[1020+3*(Ne-ue)+Za[1020+Me-ke]])+63>>7,ze=18*Je+63>>7,Je=9*Je+63>>7;oe[he-3*Te]=cs[255+oe[he-3*Te]+Je],oe[he-2*Te]=cs[255+Me+ze],oe[he-Te]=cs[255+ue+De],oe[he+0]=cs[255+Ne-De],oe[he+Te]=cs[255+ke-ze],oe[he+2*Te]=cs[255+$e-Je]}T+=V}}function Ao(v,T,R,V,$,X,Z,re){for(X=2*X+1;0<$--;){if(Eo(v,T,R,X,Z))if(wo(v,T,R,re))Ri(v,T,R);else{var oe=v,he=T,Te=R,Me=oe[he-Te],ue=oe[he+0],Ne=oe[he+Te],ke=Nd[112+(4+($e=3*(ue-Me))>>3)],$e=Nd[112+($e+3>>3)],De=ke+1>>1;oe[he-2*Te]=cs[255+oe[he-2*Te]+De],oe[he-Te]=cs[255+Me+$e],oe[he+0]=cs[255+ue-ke],oe[he+Te]=cs[255+Ne-De]}T+=V}}function dc(v,T,R,V,$,X){Ns(v,T,R,1,16,V,$,X)}function ao(v,T,R,V,$,X){Ns(v,T,1,R,16,V,$,X)}function Al(v,T,R,V,$,X){var Z;for(Z=3;0<Z;--Z)Ao(v,T+=4*R,R,1,16,V,$,X)}function I(v,T,R,V,$,X){var Z;for(Z=3;0<Z;--Z)Ao(v,T+=4,1,R,16,V,$,X)}function z(v,T,R,V,$,X,Z,re){Ns(v,T,$,1,8,X,Z,re),Ns(R,V,$,1,8,X,Z,re)}function de(v,T,R,V,$,X,Z,re){Ns(v,T,1,$,8,X,Z,re),Ns(R,V,1,$,8,X,Z,re)}function be(v,T,R,V,$,X,Z,re){Ao(v,T+4*$,$,1,8,X,Z,re),Ao(R,V+4*$,$,1,8,X,Z,re)}function Ce(v,T,R,V,$,X,Z,re){Ao(v,T+4,1,$,8,X,Z,re),Ao(R,V+4,1,$,8,X,Z,re)}function Ye(){this.ba=new jt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new vn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function tt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Nt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Pt(){this.ua=0,this.Wa=new Bt,this.vb=new Bt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new pe,this.yc=new M}function Qt(){this.xb=this.a=0,this.l=new Ci,this.ca=new jt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new te,this.Pb=0,this.wd=new te,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Pt,this.ab=0,this.gc=a(4,Nt),this.Oc=0}function Ht(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ci,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function En(v,T,R,V,$,X,Z){for(v=v==null?0:v[T+0],T=0;T<Z;++T)$[X+T]=v+R[V+T]&255,v=$[X+T]}function pr(v,T,R,V,$,X,Z){var re;if(v==null)En(null,null,R,V,$,X,Z);else for(re=0;re<Z;++re)$[X+re]=v[T+re]+R[V+re]&255}function tr(v,T,R,V,$,X,Z){if(v==null)En(null,null,R,V,$,X,Z);else{var re,oe=v[T+0],he=oe,Te=oe;for(re=0;re<Z;++re)he=Te+(oe=v[T+re])-he,Te=R[V+re]+(-256&he?0>he?0:255:he)&255,he=oe,$[X+re]=Te}}function b(v,T,R,V){var $=T.width,X=T.o;if(e(v!=null&&T!=null),0>R||0>=V||R+V>X)return null;if(!v.Cc){if(v.ga==null){var Z;if(v.ga=new Ht,(Z=v.ga==null)||(Z=T.width*T.o,e(v.Gb.length==0),v.Gb=s(Z),v.Uc=0,v.Gb==null?Z=0:(v.mb=v.Gb,v.nb=v.Uc,v.rc=null,Z=1),Z=!Z),!Z){Z=v.ga;var re=v.Fa,oe=v.P,he=v.qc,Te=v.mb,Me=v.nb,ue=oe+1,Ne=he-1,ke=Z.l;if(e(re!=null&&Te!=null&&T!=null),el[0]=null,el[1]=En,el[2]=pr,el[3]=tr,Z.ca=Te,Z.tb=Me,Z.c=T.width,Z.i=T.height,e(0<Z.c&&0<Z.i),1>=he)T=0;else if(Z.$a=3&re[oe+0],Z.Z=re[oe+0]>>2&3,Z.Lc=re[oe+0]>>4&3,oe=re[oe+0]>>6&3,0>Z.$a||1<Z.$a||4<=Z.Z||1<Z.Lc||oe)T=0;else if(ke.put=Gt,ke.ac=gi,ke.bc=$o,ke.ma=Z,ke.width=T.width,ke.height=T.height,ke.Da=T.Da,ke.v=T.v,ke.va=T.va,ke.j=T.j,ke.o=T.o,Z.$a)e:{e(Z.$a==1),T=ma();t:for(;;){if(T==null){T=0;break e}if(e(Z!=null),Z.mc=T,T.c=Z.c,T.i=Z.i,T.l=Z.l,T.l.ma=Z,T.l.width=Z.c,T.l.height=Z.i,T.a=0,Se(T.m,re,ue,Ne),!ro(Z.c,Z.i,1,T,null)||(T.ab==1&&T.gc[0].hc==3&&Hn(T.s)?(Z.ic=1,re=T.c*T.i,T.Ta=null,T.Ua=0,T.V=s(re),T.Ba=0,T.V==null?(T.a=1,T=0):T=1):(Z.ic=0,T=is(T,Z.c)),!T))break t;T=1;break e}Z.mc=null,T=0}else T=Ne>=Z.c*Z.i;Z=!T}if(Z)return null;v.ga.Lc!=1?v.Ga=0:V=X-R}e(v.ga!=null),e(R+V<=X);e:{if(T=(re=v.ga).c,X=re.l.o,re.$a==0){if(ue=v.rc,Ne=v.Vc,ke=v.Fa,oe=v.P+1+R*T,he=v.mb,Te=v.nb+R*T,e(oe<=v.P+v.qc),re.Z!=0)for(e(el[re.Z]!=null),Z=0;Z<V;++Z)el[re.Z](ue,Ne,ke,oe,he,Te,T),ue=he,Ne=Te,Te+=T,oe+=T;else for(Z=0;Z<V;++Z)r(he,Te,ke,oe,T),ue=he,Ne=Te,Te+=T,oe+=T;v.rc=ue,v.Vc=Ne}else{if(e(re.mc!=null),T=R+V,e((Z=re.mc)!=null),e(T<=Z.i),Z.C>=T)T=1;else if(re.ic||Ue(),re.ic){re=Z.V,ue=Z.Ba,Ne=Z.c;var $e=Z.i,De=(ke=1,oe=Z.$/Ne,he=Z.$%Ne,Te=Z.m,Me=Z.s,Z.$),ze=Ne*$e,Je=Ne*T,ot=Me.wc,et=De<Je?ni(Me,he,oe):null;e(De<=ze),e(T<=$e),e(Hn(Me));t:for(;;){for(;!Te.h&&De<Je;){if(he&ot||(et=ni(Me,he,oe)),e(et!=null),xe(Te),256>($e=er(et.G[0],et.H[0],Te)))re[ue+De]=$e,++De,++he>=Ne&&(he=0,++oe<=T&&!(oe%16)&&ri(Z,oe));else{if(!(280>$e)){ke=0;break t}$e=ts($e-256,Te);var kt,Tt=er(et.G[4],et.H[4],Te);if(xe(Te),!(De>=(Tt=ns(Ne,Tt=ts(Tt,Te)))&&ze-De>=$e)){ke=0;break t}for(kt=0;kt<$e;++kt)re[ue+De+kt]=re[ue+De+kt-Tt];for(De+=$e,he+=$e;he>=Ne;)he-=Ne,++oe<=T&&!(oe%16)&&ri(Z,oe);De<Je&&he&ot&&(et=ni(Me,he,oe))}e(Te.h==fe(Te))}ri(Z,oe>T?T:oe);break t}!ke||Te.h&&De<ze?(ke=0,Z.a=Te.h?5:3):Z.$=De,T=ke}else T=rs(Z,Z.V,Z.Ba,Z.c,Z.i,T,Yo);if(!T){V=0;break e}}R+V>=X&&(v.Cc=1),V=1}if(!V)return null;if(v.Cc&&((V=v.ga)!=null&&(V.mc=null),v.ga=null,0<v.Ga))return alert("todo:WebPDequantizeLevels"),null}return v.nb+R*$}function D(v,T,R,V,$,X){for(;0<$--;){var Z,re=v,oe=T+(R?1:0),he=v,Te=T+(R?0:3);for(Z=0;Z<V;++Z){var Me=he[Te+4*Z];Me!=255&&(Me*=32897,re[oe+4*Z+0]=re[oe+4*Z+0]*Me>>23,re[oe+4*Z+1]=re[oe+4*Z+1]*Me>>23,re[oe+4*Z+2]=re[oe+4*Z+2]*Me>>23)}T+=X}}function G(v,T,R,V,$){for(;0<V--;){var X;for(X=0;X<R;++X){var Z=v[T+2*X+0],re=15&(he=v[T+2*X+1]),oe=4369*re,he=(240&he|he>>4)*oe>>16;v[T+2*X+0]=(240&Z|Z>>4)*oe>>16&240|(15&Z|Z<<4)*oe>>16>>4&15,v[T+2*X+1]=240&he|re}T+=$}}function ie(v,T,R,V,$,X,Z,re){var oe,he,Te=255;for(he=0;he<$;++he){for(oe=0;oe<V;++oe){var Me=v[T+oe];X[Z+4*oe]=Me,Te&=Me}T+=R,Z+=re}return Te!=255}function Pe(v,T,R,V,$){var X;for(X=0;X<$;++X)R[V+X]=v[T+X]>>8}function Ue(){pc=D,So=G,Ed=ie,ho=Pe}function ct(v,T,R){N[v]=function(V,$,X,Z,re,oe,he,Te,Me,ue,Ne,ke,$e,De,ze,Je,ot){var et,kt=ot-1>>1,Tt=re[oe+0]|he[Te+0]<<16,cn=Me[ue+0]|Ne[ke+0]<<16;e(V!=null);var It=3*Tt+cn+131074>>2;for(T(V[$+0],255&It,It>>16,$e,De),X!=null&&(It=3*cn+Tt+131074>>2,T(X[Z+0],255&It,It>>16,ze,Je)),et=1;et<=kt;++et){var Tn=re[oe+et]|he[Te+et]<<16,Tr=Me[ue+et]|Ne[ke+et]<<16,fn=Tt+Tn+cn+Tr+524296,At=fn+2*(Tn+cn)>>3;It=At+Tt>>1,Tt=(fn=fn+2*(Tt+Tr)>>3)+Tn>>1,T(V[$+2*et-1],255&It,It>>16,$e,De+(2*et-1)*R),T(V[$+2*et-0],255&Tt,Tt>>16,$e,De+(2*et-0)*R),X!=null&&(It=fn+cn>>1,Tt=At+Tr>>1,T(X[Z+2*et-1],255&It,It>>16,ze,Je+(2*et-1)*R),T(X[Z+2*et+0],255&Tt,Tt>>16,ze,Je+(2*et+0)*R)),Tt=Tn,cn=Tr}1&ot||(It=3*Tt+cn+131074>>2,T(V[$+ot-1],255&It,It>>16,$e,De+(ot-1)*R),X!=null&&(It=3*cn+Tt+131074>>2,T(X[Z+ot-1],255&It,It>>16,ze,Je+(ot-1)*R)))}}function ln(){Ki[Oh]=yc,Ki[us]=pu,Ki[Fh]=$p,Ki[Io]=qh,Ki[Sd]=Rl,Ki[du]=Ca,Ki[Sl]=Pl,Ki[Id]=pu,Ki[Uh]=qh,Ki[hu]=Rl,Ki[jh]=Ca}function mr(v){return v&-16384?0>v?0:255:v>>Gh}function bn(v,T){return mr((19077*v>>8)+(26149*T>>8)-14234)}function $n(v,T,R){return mr((19077*v>>8)-(6419*T>>8)-(13320*R>>8)+8708)}function Pi(v,T){return mr((19077*v>>8)+(33050*T>>8)-17685)}function Hi(v,T,R,V,$){V[$+0]=bn(v,R),V[$+1]=$n(v,T,R),V[$+2]=Pi(v,T)}function sr(v,T,R,V,$){V[$+0]=Pi(v,T),V[$+1]=$n(v,T,R),V[$+2]=bn(v,R)}function zi(v,T,R,V,$){var X=$n(v,T,R);T=X<<3&224|Pi(v,T)>>3,V[$+0]=248&bn(v,R)|X>>5,V[$+1]=T}function lo(v,T,R,V,$){var X=240&Pi(v,T)|15;V[$+0]=240&bn(v,R)|$n(v,T,R)>>4,V[$+1]=X}function xa(v,T,R,V,$){V[$+0]=255,Hi(v,T,R,V,$+1)}function wa(v,T,R,V,$){sr(v,T,R,V,$),V[$+3]=255}function Ss(v,T,R,V,$){Hi(v,T,R,V,$),V[$+3]=255}function $a(v,T,R){N[v]=function(V,$,X,Z,re,oe,he,Te,Me){for(var ue=Te+(-2&Me)*R;Te!=ue;)T(V[$+0],X[Z+0],re[oe+0],he,Te),T(V[$+1],X[Z+0],re[oe+0],he,Te+R),$+=2,++Z,++oe,Te+=2*R;1&Me&&T(V[$+0],X[Z+0],re[oe+0],he,Te)}}function ou(v,T,R){return R==0?v==0?T==0?6:5:T==0?4:0:R}function bd(v,T,R,V,$){switch(v>>>30){case 3:Xa(T,R,V,$,0);break;case 2:ls(T,R,V,$);break;case 1:Bn(T,R,V,$)}}function co(v,T){var R,V,$=T.M,X=T.Nb,Z=v.oc,re=v.pc+40,oe=v.oc,he=v.pc+584,Te=v.oc,Me=v.pc+600;for(R=0;16>R;++R)Z[re+32*R-1]=129;for(R=0;8>R;++R)oe[he+32*R-1]=129,Te[Me+32*R-1]=129;for(0<$?Z[re-1-32]=oe[he-1-32]=Te[Me-1-32]=129:(i(Z,re-32-1,127,21),i(oe,he-32-1,127,9),i(Te,Me-32-1,127,9)),V=0;V<v.za;++V){var ue=T.ya[T.aa+V];if(0<V){for(R=-1;16>R;++R)r(Z,re+32*R-4,Z,re+32*R+12,4);for(R=-1;8>R;++R)r(oe,he+32*R-4,oe,he+32*R+4,4),r(Te,Me+32*R-4,Te,Me+32*R+4,4)}var Ne=v.Gd,ke=v.Hd+V,$e=ue.ad,De=ue.Hc;if(0<$&&(r(Z,re-32,Ne[ke].y,0,16),r(oe,he-32,Ne[ke].f,0,8),r(Te,Me-32,Ne[ke].ea,0,8)),ue.Za){var ze=Z,Je=re-32+16;for(0<$&&(V>=v.za-1?i(ze,Je,Ne[ke].y[15],4):r(ze,Je,Ne[ke+1].y,0,4)),R=0;4>R;R++)ze[Je+128+R]=ze[Je+256+R]=ze[Je+384+R]=ze[Je+0+R];for(R=0;16>R;++R,De<<=2)ze=Z,Je=re+Xr[R],jr[ue.Ob[R]](ze,Je),bd(De,$e,16*+R,ze,Je)}else if(ze=ou(V,$,ue.Ob[0]),Cs[ze](Z,re),De!=0)for(R=0;16>R;++R,De<<=2)bd(De,$e,16*+R,Z,re+Xr[R]);for(R=ue.Gc,ze=ou(V,$,ue.Dd),na[ze](oe,he),na[ze](Te,Me),De=$e,ze=oe,Je=he,255&(ue=0|R)&&(170&ue?No(De,256,ze,Je):Ln(De,256,ze,Je)),ue=Te,De=Me,255&(R>>=8)&&(170&R?No($e,320,ue,De):Ln($e,320,ue,De)),$<v.Ub-1&&(r(Ne[ke].y,0,Z,re+480,16),r(Ne[ke].f,0,oe,he+224,8),r(Ne[ke].ea,0,Te,Me+224,8)),R=8*X*v.B,Ne=v.sa,ke=v.ta+16*V+16*X*v.R,$e=v.qa,ue=v.ra+8*V+R,De=v.Ha,ze=v.Ia+8*V+R,R=0;16>R;++R)r(Ne,ke+R*v.R,Z,re+32*R,16);for(R=0;8>R;++R)r($e,ue+R*v.B,oe,he+32*R,8),r(De,ze+R*v.B,Te,Me+32*R,8)}}function Zo(v,T,R,V,$,X,Z,re,oe){var he=[0],Te=[0],Me=0,ue=oe!=null?oe.kd:0,Ne=oe??new tt;if(v==null||12>R)return 7;Ne.data=v,Ne.w=T,Ne.ha=R,T=[T],R=[R],Ne.gb=[Ne.gb];e:{var ke=T,$e=R,De=Ne.gb;if(e(v!=null),e($e!=null),e(De!=null),De[0]=0,12<=$e[0]&&!t(v,ke[0],"RIFF")){if(t(v,ke[0]+8,"WEBP")){De=3;break e}var ze=vt(v,ke[0]+4);if(12>ze||4294967286<ze){De=3;break e}if(ue&&ze>$e[0]-8){De=7;break e}De[0]=ze,ke[0]+=12,$e[0]-=12}De=0}if(De!=0)return De;for(ze=0<Ne.gb[0],R=R[0];;){e:{var Je=v;$e=T,De=R;var ot=he,et=Te,kt=ke=[0];if((It=Me=[Me])[0]=0,8>De[0])De=7;else{if(!t(Je,$e[0],"VP8X")){if(vt(Je,$e[0]+4)!=10){De=3;break e}if(18>De[0]){De=7;break e}var Tt=vt(Je,$e[0]+8),cn=1+dt(Je,$e[0]+12);if(2147483648<=cn*(Je=1+dt(Je,$e[0]+15))){De=3;break e}kt!=null&&(kt[0]=Tt),ot!=null&&(ot[0]=cn),et!=null&&(et[0]=Je),$e[0]+=18,De[0]-=18,It[0]=1}De=0}}if(Me=Me[0],ke=ke[0],De!=0)return De;if($e=!!(2&ke),!ze&&Me)return 3;if(X!=null&&(X[0]=!!(16&ke)),Z!=null&&(Z[0]=$e),re!=null&&(re[0]=0),Z=he[0],ke=Te[0],Me&&$e&&oe==null){De=0;break}if(4>R){De=7;break}if(ze&&Me||!ze&&!Me&&!t(v,T[0],"ALPH")){R=[R],Ne.na=[Ne.na],Ne.P=[Ne.P],Ne.Sa=[Ne.Sa];e:{Tt=v,De=T,ze=R;var It=Ne.gb;ot=Ne.na,et=Ne.P,kt=Ne.Sa,cn=22,e(Tt!=null),e(ze!=null),Je=De[0];var Tn=ze[0];for(e(ot!=null),e(kt!=null),ot[0]=null,et[0]=null,kt[0]=0;;){if(De[0]=Je,ze[0]=Tn,8>Tn){De=7;break e}var Tr=vt(Tt,Je+4);if(4294967286<Tr){De=3;break e}var fn=8+Tr+1&-2;if(cn+=fn,0<It&&cn>It){De=3;break e}if(!t(Tt,Je,"VP8 ")||!t(Tt,Je,"VP8L")){De=0;break e}if(Tn[0]<fn){De=7;break e}t(Tt,Je,"ALPH")||(ot[0]=Tt,et[0]=Je+8,kt[0]=Tr),Je+=fn,Tn-=fn}}if(R=R[0],Ne.na=Ne.na[0],Ne.P=Ne.P[0],Ne.Sa=Ne.Sa[0],De!=0)break}R=[R],Ne.Ja=[Ne.Ja],Ne.xa=[Ne.xa];e:if(It=v,De=T,ze=R,ot=Ne.gb[0],et=Ne.Ja,kt=Ne.xa,Tt=De[0],Je=!t(It,Tt,"VP8 "),cn=!t(It,Tt,"VP8L"),e(It!=null),e(ze!=null),e(et!=null),e(kt!=null),8>ze[0])De=7;else{if(Je||cn){if(It=vt(It,Tt+4),12<=ot&&It>ot-12){De=3;break e}if(ue&&It>ze[0]-8){De=7;break e}et[0]=It,De[0]+=8,ze[0]-=8,kt[0]=cn}else kt[0]=5<=ze[0]&&It[Tt+0]==47&&!(It[Tt+4]>>5),et[0]=ze[0];De=0}if(R=R[0],Ne.Ja=Ne.Ja[0],Ne.xa=Ne.xa[0],T=T[0],De!=0)break;if(4294967286<Ne.Ja)return 3;if(re==null||$e||(re[0]=Ne.xa?2:1),Z=[Z],ke=[ke],Ne.xa){if(5>R){De=7;break}re=Z,ue=ke,$e=X,v==null||5>R?v=0:5<=R&&v[T+0]==47&&!(v[T+4]>>5)?(ze=[0],It=[0],ot=[0],Se(et=new te,v,T,R),_s(et,ze,It,ot)?(re!=null&&(re[0]=ze[0]),ue!=null&&(ue[0]=It[0]),$e!=null&&($e[0]=ot[0]),v=1):v=0):v=0}else{if(10>R){De=7;break}re=ke,v==null||10>R||!Wo(v,T+3,R-3)?v=0:(ue=v[T+0]|v[T+1]<<8|v[T+2]<<16,$e=16383&(v[T+7]<<8|v[T+6]),v=16383&(v[T+9]<<8|v[T+8]),1&ue||3<(ue>>1&7)||!(ue>>4&1)||ue>>5>=Ne.Ja||!$e||!v?v=0:(Z&&(Z[0]=$e),re&&(re[0]=v),v=1))}if(!v||(Z=Z[0],ke=ke[0],Me&&(he[0]!=Z||Te[0]!=ke)))return 3;oe!=null&&(oe[0]=Ne,oe.offset=T-oe.w,e(4294967286>T-oe.w),e(oe.offset==oe.ha-R));break}return De==0||De==7&&Me&&oe==null?(X!=null&&(X[0]|=Ne.na!=null&&0<Ne.na.length),V!=null&&(V[0]=Z),$!=null&&($[0]=ke),0):De}function Ya(v,T,R){var V=T.width,$=T.height,X=0,Z=0,re=V,oe=$;if(T.Da=v!=null&&0<v.Da,T.Da&&(re=v.cd,oe=v.bd,X=v.v,Z=v.j,11>R||(X&=-2,Z&=-2),0>X||0>Z||0>=re||0>=oe||X+re>V||Z+oe>$))return 0;if(T.v=X,T.j=Z,T.va=X+re,T.o=Z+oe,T.U=re,T.T=oe,T.da=v!=null&&0<v.da,T.da){if(!Mt(re,oe,R=[v.ib],X=[v.hb]))return 0;T.ib=R[0],T.hb=X[0]}return T.ob=v!=null&&v.ob,T.Kb=v==null||!v.Sd,T.da&&(T.ob=T.ib<3*V/4&&T.hb<3*$/4,T.Kb=0),1}function xd(v){if(v==null)return 2;if(11>v.S){var T=v.f.RGBA;T.fb+=(v.height-1)*T.A,T.A=-T.A}else T=v.f.kb,v=v.height,T.O+=(v-1)*T.fa,T.fa=-T.fa,T.N+=(v-1>>1)*T.Ab,T.Ab=-T.Ab,T.W+=(v-1>>1)*T.Db,T.Db=-T.Db,T.F!=null&&(T.J+=(v-1)*T.lb,T.lb=-T.lb);return 0}function ea(v,T,R,V){if(V==null||0>=v||0>=T)return 2;if(R!=null){if(R.Da){var $=R.cd,X=R.bd,Z=-2&R.v,re=-2&R.j;if(0>Z||0>re||0>=$||0>=X||Z+$>v||re+X>T)return 2;v=$,T=X}if(R.da){if(!Mt(v,T,$=[R.ib],X=[R.hb]))return 2;v=$[0],T=X[0]}}V.width=v,V.height=T;e:{var oe=V.width,he=V.height;if(v=V.S,0>=oe||0>=he||!(v>=Oh&&13>v))v=2;else{if(0>=V.Rd&&V.sd==null){Z=X=$=T=0;var Te=(re=oe*zh[v])*he;if(11>v||(X=(he+1)/2*(T=(oe+1)/2),v==12&&(Z=($=oe)*he)),(he=s(Te+2*X+Z))==null){v=1;break e}V.sd=he,11>v?((oe=V.f.RGBA).eb=he,oe.fb=0,oe.A=re,oe.size=Te):((oe=V.f.kb).y=he,oe.O=0,oe.fa=re,oe.Fd=Te,oe.f=he,oe.N=0+Te,oe.Ab=T,oe.Cd=X,oe.ea=he,oe.W=0+Te+X,oe.Db=T,oe.Ed=X,v==12&&(oe.F=he,oe.J=0+Te+2*X),oe.Tc=Z,oe.lb=$)}if(T=1,$=V.S,X=V.width,Z=V.height,$>=Oh&&13>$)if(11>$)v=V.f.RGBA,T&=(re=Math.abs(v.A))*(Z-1)+X<=v.size,T&=re>=X*zh[$],T&=v.eb!=null;else{v=V.f.kb,re=(X+1)/2,Te=(Z+1)/2,oe=Math.abs(v.fa),he=Math.abs(v.Ab);var Me=Math.abs(v.Db),ue=Math.abs(v.lb),Ne=ue*(Z-1)+X;T&=oe*(Z-1)+X<=v.Fd,T&=he*(Te-1)+re<=v.Cd,T=(T&=Me*(Te-1)+re<=v.Ed)&oe>=X&he>=re&Me>=re,T&=v.y!=null,T&=v.f!=null,T&=v.ea!=null,$==12&&(T&=ue>=X,T&=Ne<=v.Tc,T&=v.F!=null)}else T=0;v=T?0:2}}return v!=0||R!=null&&R.fd&&(v=xd(V)),v}var Nl=64,Gs=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Is=24,Ea=32,Ta=8,Wa=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ye("Predictor0","PredictorAdd0"),N.Predictor0=function(){return 4278190080},N.Predictor1=function(v){return v},N.Predictor2=function(v,T,R){return T[R+0]},N.Predictor3=function(v,T,R){return T[R+1]},N.Predictor4=function(v,T,R){return T[R-1]},N.Predictor5=function(v,T,R){return rt(rt(v,T[R+1]),T[R+0])},N.Predictor6=function(v,T,R){return rt(v,T[R-1])},N.Predictor7=function(v,T,R){return rt(v,T[R+0])},N.Predictor8=function(v,T,R){return rt(T[R-1],T[R+0])},N.Predictor9=function(v,T,R){return rt(T[R+0],T[R+1])},N.Predictor10=function(v,T,R){return rt(rt(v,T[R-1]),rt(T[R+0],T[R+1]))},N.Predictor11=function(v,T,R){var V=T[R+0];return 0>=gt(V>>24&255,v>>24&255,(T=T[R-1])>>24&255)+gt(V>>16&255,v>>16&255,T>>16&255)+gt(V>>8&255,v>>8&255,T>>8&255)+gt(255&V,255&v,255&T)?V:v},N.Predictor12=function(v,T,R){var V=T[R+0];return(at((v>>24&255)+(V>>24&255)-((T=T[R-1])>>24&255))<<24|at((v>>16&255)+(V>>16&255)-(T>>16&255))<<16|at((v>>8&255)+(V>>8&255)-(T>>8&255))<<8|at((255&v)+(255&V)-(255&T)))>>>0},N.Predictor13=function(v,T,R){var V=T[R-1];return(_t((v=rt(v,T[R+0]))>>24&255,V>>24&255)<<24|_t(v>>16&255,V>>16&255)<<16|_t(v>>8&255,V>>8&255)<<8|_t(255&v,255&V))>>>0};var au=N.PredictorAdd0;N.PredictorAdd1=mt,ye("Predictor2","PredictorAdd2"),ye("Predictor3","PredictorAdd3"),ye("Predictor4","PredictorAdd4"),ye("Predictor5","PredictorAdd5"),ye("Predictor6","PredictorAdd6"),ye("Predictor7","PredictorAdd7"),ye("Predictor8","PredictorAdd8"),ye("Predictor9","PredictorAdd9"),ye("Predictor10","PredictorAdd10"),ye("Predictor11","PredictorAdd11"),ye("Predictor12","PredictorAdd12"),ye("Predictor13","PredictorAdd13");var lu=N.PredictorAdd2;St("ColorIndexInverseTransform","MapARGB","32b",function(v){return v>>8&255},function(v){return v}),St("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(v){return v},function(v){return v>>8&255});var Jr,Dh=N.ColorIndexInverseTransform,Aa=N.MapARGB,Na=N.VP8LColorIndexInverseTransformAlpha,$i=N.MapAlpha,Ka=N.VP8LPredictorsAdd=[];Ka.length=16,(N.VP8LPredictors=[]).length=16,(N.VP8LPredictorsAdd_C=[]).length=16,(N.VP8LPredictors_C=[]).length=16;var cu,uu,Ja,Qa,Sa,hc,uo,Xa,ls,No,Bn,Ln,gr,Qr,Ia,ta,fc,wd,Bp,b0,x0,w0,qp,Gp,pc,So,Ed,ho,mc=s(511),Lh=s(2041),Td=s(225),Ad=s(767),Mh=0,Za=Lh,Nd=Td,cs=Ad,Yi=mc,Oh=0,us=1,Fh=2,Io=3,Sd=4,du=5,Sl=6,Id=7,Uh=8,hu=9,jh=10,Co=[2,3,7],fu=[3,3,11],gc=[280,256,256,256,40],Vh=[0,1,1,1,0],Cd=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Ro=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Po=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Il=8,ko=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Do=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],fo=null,E0=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Hp=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Bh=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],T0=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Wi=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Er=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],An=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Cs=[],jr=[],na=[],Cl=1,zp=2,el=[],Ki=[];ct("UpsampleRgbLinePair",Hi,3),ct("UpsampleBgrLinePair",sr,3),ct("UpsampleRgbaLinePair",Ss,4),ct("UpsampleBgraLinePair",wa,4),ct("UpsampleArgbLinePair",xa,4),ct("UpsampleRgba4444LinePair",lo,2),ct("UpsampleRgb565LinePair",zi,2);var yc=N.UpsampleRgbLinePair,$p=N.UpsampleBgrLinePair,pu=N.UpsampleRgbaLinePair,qh=N.UpsampleBgraLinePair,Rl=N.UpsampleArgbLinePair,Ca=N.UpsampleRgba4444LinePair,Pl=N.UpsampleRgb565LinePair,Lo=16,mu=1<<Lo-1,vc=-227,kl=482,Gh=6,Dl=0,Ji=s(256),Hh=s(256),A0=s(256),F1=s(256),U1=s(kl-vc),j1=s(kl-vc);$a("YuvToRgbRow",Hi,3),$a("YuvToBgrRow",sr,3),$a("YuvToRgbaRow",Ss,4),$a("YuvToBgraRow",wa,4),$a("YuvToArgbRow",xa,4),$a("YuvToRgba4444Row",lo,2),$a("YuvToRgb565Row",zi,2);var Xr=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],gu=[0,2,8],Rd=[8,7,6,4,4,2,2,2,1,1,1,1],Pd=1;this.WebPDecodeRGBA=function(v,T,R,V,$){var X=us,Z=new Ye,re=new jt;Z.ba=re,re.S=X,re.width=[re.width],re.height=[re.height];var oe=re.width,he=re.height,Te=new Ft;if(Te==null||v==null)var Me=2;else e(Te!=null),Me=Zo(v,T,R,Te.width,Te.height,Te.Pd,Te.Qd,Te.format,null);if(Me!=0?oe=0:(oe!=null&&(oe[0]=Te.width[0]),he!=null&&(he[0]=Te.height[0]),oe=1),oe){re.width=re.width[0],re.height=re.height[0],V!=null&&(V[0]=re.width),$!=null&&($[0]=re.height);e:{if(V=new Ci,($=new tt).data=v,$.w=T,$.ha=R,$.kd=1,T=[0],e($!=null),((v=Zo($.data,$.w,$.ha,null,null,null,T,null,$))==0||v==7)&&T[0]&&(v=4),(T=v)==0){if(e(Z!=null),V.data=$.data,V.w=$.w+$.offset,V.ha=$.ha-$.offset,V.put=Gt,V.ac=gi,V.bc=$o,V.ma=Z,$.xa){if((v=ma())==null){Z=1;break e}if((function(ue,Ne){var ke=[0],$e=[0],De=[0];t:for(;;){if(ue==null)return 0;if(Ne==null)return ue.a=2,0;if(ue.l=Ne,ue.a=0,Se(ue.m,Ne.data,Ne.w,Ne.ha),!_s(ue.m,ke,$e,De)){ue.a=3;break t}if(ue.xb=zp,Ne.width=ke[0],Ne.height=$e[0],!ro(ke[0],$e[0],1,ue,null))break t;return 1}return e(ue.a!=0),0})(v,V)){if(V=(T=ea(V.width,V.height,Z.Oa,Z.ba))==0){t:{V=v;n:for(;;){if(V==null){V=0;break t}if(e(V.s.yc!=null),e(V.s.Ya!=null),e(0<V.s.Wb),e((R=V.l)!=null),e(($=R.ma)!=null),V.xb!=0){if(V.ca=$.ba,V.tb=$.tb,e(V.ca!=null),!Ya($.Oa,R,Io)){V.a=2;break n}if(!is(V,R.width)||R.da)break n;if((R.da||en(V.ca.S))&&Ue(),11>V.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),V.ca.f.kb.F!=null&&Ue()),V.Pb&&0<V.s.ua&&V.s.vb.X==null&&!ce(V.s.vb,V.s.Wa.Xa)){V.a=1;break n}V.xb=0}if(!rs(V,V.V,V.Ba,V.c,V.i,R.o,Ii))break n;$.Dc=V.Ma,V=1;break t}e(V.a!=0),V=0}V=!V}V&&(T=v.a)}else T=v.a}else{if((v=new Fr)==null){Z=1;break e}if(v.Fa=$.na,v.P=$.P,v.qc=$.Sa,Bs(v,V)){if((T=ea(V.width,V.height,Z.Oa,Z.ba))==0){if(v.Aa=0,R=Z.Oa,e(($=v)!=null),R!=null){if(0<(oe=0>(oe=R.Md)?0:100<oe?255:255*oe/100)){for(he=Te=0;4>he;++he)12>(Me=$.pb[he]).lc&&(Me.ia=oe*Rd[0>Me.lc?0:Me.lc]>>3),Te|=Me.ia;Te&&(alert("todo:VP8InitRandom"),$.ia=1)}$.Ga=R.Id,100<$.Ga?$.Ga=100:0>$.Ga&&($.Ga=0)}(function(ue,Ne){if(ue==null)return 0;if(Ne==null)return wn(ue,2,"NULL VP8Io parameter in VP8Decode().");if(!ue.cb&&!Bs(ue,Ne))return 0;if(e(ue.cb),Ne.ac==null||Ne.ac(Ne)){Ne.ob&&(ue.L=0);var ke=gu[ue.L];if(ue.L==2?(ue.yb=0,ue.zb=0):(ue.yb=Ne.v-ke>>4,ue.zb=Ne.j-ke>>4,0>ue.yb&&(ue.yb=0),0>ue.zb&&(ue.zb=0)),ue.Va=Ne.o+15+ke>>4,ue.Hb=Ne.va+15+ke>>4,ue.Hb>ue.za&&(ue.Hb=ue.za),ue.Va>ue.Ub&&(ue.Va=ue.Ub),0<ue.L){var $e=ue.ed;for(ke=0;4>ke;++ke){var De;if(ue.Qa.Cb){var ze=ue.Qa.Lb[ke];ue.Qa.Fb||(ze+=$e.Tb)}else ze=$e.Tb;for(De=0;1>=De;++De){var Je=ue.gd[ke][De],ot=ze;if($e.Pc&&(ot+=$e.vd[0],De&&(ot+=$e.od[0])),0<(ot=0>ot?0:63<ot?63:ot)){var et=ot;0<$e.wb&&(et=4<$e.wb?et>>2:et>>1)>9-$e.wb&&(et=9-$e.wb),1>et&&(et=1),Je.dd=et,Je.tc=2*ot+et,Je.ld=40<=ot?2:15<=ot?1:0}else Je.tc=0;Je.La=De}}}ke=0}else wn(ue,6,"Frame setup failed"),ke=ue.a;if(ke=ke==0){if(ke){ue.$c=0,0<ue.Aa||(ue.Ic=Pd);t:{ke=ue.Ic,$e=4*(et=ue.za);var kt=32*et,Tt=et+1,cn=0<ue.L?et*(0<ue.Aa?2:1):0,It=(ue.Aa==2?2:1)*et;if((Je=$e+832+(De=3*(16*ke+gu[ue.L])/2*kt)+(ze=ue.Fa!=null&&0<ue.Fa.length?ue.Kc.c*ue.Kc.i:0))!=Je)ke=0;else{if(Je>ue.Vb){if(ue.Vb=0,ue.Ec=s(Je),ue.Fc=0,ue.Ec==null){ke=wn(ue,1,"no memory during frame initialization.");break t}ue.Vb=Je}Je=ue.Ec,ot=ue.Fc,ue.Ac=Je,ue.Bc=ot,ot+=$e,ue.Gd=a(kt,bl),ue.Hd=0,ue.rb=a(Tt+1,Vs),ue.sb=1,ue.wa=cn?a(cn,ss):null,ue.Y=0,ue.D.Nb=0,ue.D.wa=ue.wa,ue.D.Y=ue.Y,0<ue.Aa&&(ue.D.Y+=et),e(!0),ue.oc=Je,ue.pc=ot,ot+=832,ue.ya=a(It,Va),ue.aa=0,ue.D.ya=ue.ya,ue.D.aa=ue.aa,ue.Aa==2&&(ue.D.aa+=et),ue.R=16*et,ue.B=8*et,et=(kt=gu[ue.L])*ue.R,kt=kt/2*ue.B,ue.sa=Je,ue.ta=ot+et,ue.qa=ue.sa,ue.ra=ue.ta+16*ke*ue.R+kt,ue.Ha=ue.qa,ue.Ia=ue.ra+8*ke*ue.B+kt,ue.$c=0,ot+=De,ue.mb=ze?Je:null,ue.nb=ze?ot:null,e(ot+ze<=ue.Fc+ue.Vb),ga(ue),i(ue.Ac,ue.Bc,0,$e),ke=1}}if(ke){if(Ne.ka=0,Ne.y=ue.sa,Ne.O=ue.ta,Ne.f=ue.qa,Ne.N=ue.ra,Ne.ea=ue.Ha,Ne.Vd=ue.Ia,Ne.fa=ue.R,Ne.Rc=ue.B,Ne.F=null,Ne.J=0,!Mh){for(ke=-255;255>=ke;++ke)mc[255+ke]=0>ke?-ke:ke;for(ke=-1020;1020>=ke;++ke)Lh[1020+ke]=-128>ke?-128:127<ke?127:ke;for(ke=-112;112>=ke;++ke)Td[112+ke]=-16>ke?-16:15<ke?15:ke;for(ke=-255;510>=ke;++ke)Ad[255+ke]=0>ke?0:255<ke?255:ke;Mh=1}uo=yi,Xa=oc,No=Gi,Bn=ac,Ln=Ko,ls=su,gr=dc,Qr=ao,Ia=z,ta=de,fc=Al,wd=I,Bp=be,b0=Ce,x0=To,w0=qs,qp=za,Gp=Tl,jr[0]=_a,jr[1]=lc,jr[2]=qa,jr[3]=El,jr[4]=vi,jr[5]=Ga,jr[6]=ii,jr[7]=zn,jr[8]=Ha,jr[9]=Es,Cs[0]=so,Cs[1]=xl,Cs[2]=wl,Cs[3]=Jo,Cs[4]=Qo,Cs[5]=as,Cs[6]=va,na[0]=Xo,na[1]=cc,na[2]=oo,na[3]=uc,na[4]=Kr,na[5]=As,na[6]=xo,ke=1}else ke=0}ke&&(ke=(function(Tn,Tr){for(Tn.M=0;Tn.M<Tn.Va;++Tn.M){var fn,At=Tn.Jc[Tn.M&Tn.Xb],ft=Tn.m,Rr=Tn;for(fn=0;fn<Rr.za;++fn){var sn=ft,gn=Rr,Qn=gn.Ac,_i=gn.Bc+4*fn,Qi=gn.zc,yr=gn.ya[gn.aa+fn];if(gn.Qa.Bb?yr.$b=Ge(sn,gn.Pa.jb[0])?2+Ge(sn,gn.Pa.jb[2]):Ge(sn,gn.Pa.jb[1]):yr.$b=0,gn.kc&&(yr.Ad=Ge(sn,gn.Bd)),yr.Za=!Ge(sn,145)+0,yr.Za){var si=yr.Ob,ds=0;for(gn=0;4>gn;++gn){var oi,xn=Qi[0+gn];for(oi=0;4>oi;++oi){xn=Wi[Qn[_i+oi]][xn];for(var On=Bh[Ge(sn,xn[0])];0<On;)On=Bh[2*On+Ge(sn,xn[On])];xn=-On,Qn[_i+oi]=xn}r(si,ds,Qn,_i,4),ds+=4,Qi[0+gn]=xn}}else xn=Ge(sn,156)?Ge(sn,128)?1:3:Ge(sn,163)?2:0,yr.Ob[0]=xn,i(Qn,_i,xn,4),i(Qi,0,xn,4);yr.Dd=Ge(sn,142)?Ge(sn,114)?Ge(sn,183)?1:3:2:0}if(Rr.m.Ka)return wn(Tn,7,"Premature end-of-partition0 encountered.");for(;Tn.ja<Tn.za;++Tn.ja){if(Rr=At,sn=(ft=Tn).rb[ft.sb-1],Qn=ft.rb[ft.sb+ft.ja],fn=ft.ya[ft.aa+ft.ja],_i=ft.kc?fn.Ad:0)sn.la=Qn.la=0,fn.Za||(sn.Na=Qn.Na=0),fn.Hc=0,fn.Gc=0,fn.ia=0;else{var Pr,qn;if(sn=Qn,Qn=Rr,_i=ft.Pa.Xc,Qi=ft.ya[ft.aa+ft.ja],yr=ft.pb[Qi.$b],gn=Qi.ad,si=0,ds=ft.rb[ft.sb-1],xn=oi=0,i(gn,si,0,384),Qi.Za)var bi=0,kr=_i[3];else{On=s(16);var Fn=sn.Na+ds.Na;if(Fn=fo(Qn,_i[1],Fn,yr.Eb,0,On,0),sn.Na=ds.Na=(0<Fn)+0,1<Fn)uo(On,0,gn,si);else{var Zr=On[0]+3>>3;for(On=0;256>On;On+=16)gn[si+On]=Zr}bi=1,kr=_i[0]}var Xn=15&sn.la,ai=15&ds.la;for(On=0;4>On;++On){var li=1&ai;for(Zr=qn=0;4>Zr;++Zr)Xn=Xn>>1|(li=(Fn=fo(Qn,kr,Fn=li+(1&Xn),yr.Sc,bi,gn,si))>bi)<<7,qn=qn<<2|(3<Fn?3:1<Fn?2:gn[si+0]!=0),si+=16;Xn>>=4,ai=ai>>1|li<<7,oi=(oi<<8|qn)>>>0}for(kr=Xn,bi=ai>>4,Pr=0;4>Pr;Pr+=2){for(qn=0,Xn=sn.la>>4+Pr,ai=ds.la>>4+Pr,On=0;2>On;++On){for(li=1&ai,Zr=0;2>Zr;++Zr)Fn=li+(1&Xn),Xn=Xn>>1|(li=0<(Fn=fo(Qn,_i[2],Fn,yr.Qc,0,gn,si)))<<3,qn=qn<<2|(3<Fn?3:1<Fn?2:gn[si+0]!=0),si+=16;Xn>>=2,ai=ai>>1|li<<5}xn|=qn<<4*Pr,kr|=Xn<<4<<Pr,bi|=(240&ai)<<Pr}sn.la=kr,ds.la=bi,Qi.Hc=oi,Qi.Gc=xn,Qi.ia=43690&xn?0:yr.ia,_i=!(oi|xn)}if(0<ft.L&&(ft.wa[ft.Y+ft.ja]=ft.gd[fn.$b][fn.Za],ft.wa[ft.Y+ft.ja].La|=!_i),Rr.Ka)return wn(Tn,7,"Premature end-of-file encountered.")}if(ga(Tn),ft=Tr,Rr=1,fn=(At=Tn).D,sn=0<At.L&&At.M>=At.zb&&At.M<=At.Va,At.Aa==0)t:{if(fn.M=At.M,fn.uc=sn,co(At,fn),Rr=1,fn=(qn=At.D).Nb,sn=(xn=gu[At.L])*At.R,Qn=xn/2*At.B,On=16*fn*At.R,Zr=8*fn*At.B,_i=At.sa,Qi=At.ta-sn+On,yr=At.qa,gn=At.ra-Qn+Zr,si=At.Ha,ds=At.Ia-Qn+Zr,ai=(Xn=qn.M)==0,oi=Xn>=At.Va-1,At.Aa==2&&co(At,qn),qn.uc)for(li=(Fn=At).D.M,e(Fn.D.uc),qn=Fn.yb;qn<Fn.Hb;++qn){bi=qn,kr=li;var or=(Mn=(ci=Fn).D).Nb;Pr=ci.R;var Mn=Mn.wa[Mn.Y+bi],hs=ci.sa,Vr=ci.ta+16*or*Pr+16*bi,Jt=Mn.dd,Xt=Mn.tc;if(Xt!=0)if(e(3<=Xt),ci.L==1)0<bi&&w0(hs,Vr,Pr,Xt+4),Mn.La&&Gp(hs,Vr,Pr,Xt),0<kr&&x0(hs,Vr,Pr,Xt+4),Mn.La&&qp(hs,Vr,Pr,Xt);else{var Un=ci.B,Hs=ci.qa,Mo=ci.ra+8*or*Un+8*bi,Rs=ci.Ha,ci=ci.Ia+8*or*Un+8*bi;or=Mn.ld,0<bi&&(Qr(hs,Vr,Pr,Xt+4,Jt,or),ta(Hs,Mo,Rs,ci,Un,Xt+4,Jt,or)),Mn.La&&(wd(hs,Vr,Pr,Xt,Jt,or),b0(Hs,Mo,Rs,ci,Un,Xt,Jt,or)),0<kr&&(gr(hs,Vr,Pr,Xt+4,Jt,or),Ia(Hs,Mo,Rs,ci,Un,Xt+4,Jt,or)),Mn.La&&(fc(hs,Vr,Pr,Xt,Jt,or),Bp(Hs,Mo,Rs,ci,Un,Xt,Jt,or))}}if(At.ia&&alert("todo:DitherRow"),ft.put!=null){if(qn=16*Xn,Xn=16*(Xn+1),ai?(ft.y=At.sa,ft.O=At.ta+On,ft.f=At.qa,ft.N=At.ra+Zr,ft.ea=At.Ha,ft.W=At.Ia+Zr):(qn-=xn,ft.y=_i,ft.O=Qi,ft.f=yr,ft.N=gn,ft.ea=si,ft.W=ds),oi||(Xn-=xn),Xn>ft.o&&(Xn=ft.o),ft.F=null,ft.J=null,At.Fa!=null&&0<At.Fa.length&&qn<Xn&&(ft.J=b(At,ft,qn,Xn-qn),ft.F=At.mb,ft.F==null&&ft.F.length==0)){Rr=wn(At,3,"Could not decode alpha data.");break t}qn<ft.j&&(xn=ft.j-qn,qn=ft.j,e(!(1&xn)),ft.O+=At.R*xn,ft.N+=At.B*(xn>>1),ft.W+=At.B*(xn>>1),ft.F!=null&&(ft.J+=ft.width*xn)),qn<Xn&&(ft.O+=ft.v,ft.N+=ft.v>>1,ft.W+=ft.v>>1,ft.F!=null&&(ft.J+=ft.v),ft.ka=qn-ft.j,ft.U=ft.va-ft.v,ft.T=Xn-qn,Rr=ft.put(ft))}fn+1!=At.Ic||oi||(r(At.sa,At.ta-sn,_i,Qi+16*At.R,sn),r(At.qa,At.ra-Qn,yr,gn+8*At.B,Qn),r(At.Ha,At.Ia-Qn,si,ds+8*At.B,Qn))}if(!Rr)return wn(Tn,6,"Output aborted.")}return 1})(ue,Ne)),Ne.bc!=null&&Ne.bc(Ne),ke&=1}return ke?(ue.cb=0,ke):0})(v,V)||(T=v.a)}}else T=v.a}T==0&&Z.Oa!=null&&Z.Oa.fd&&(T=xd(Z.ba))}Z=T}X=Z!=0?null:11>X?re.f.RGBA.eb:re.f.kb.y}else X=null;return X};var zh=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(N,F){for(var S="",k=0;k<4;k++)S+=String.fromCharCode(N[F++]);return S}function p(N,F){return N[F+0]|N[F+1]<<8}function g(N,F){return(N[F+0]|N[F+1]<<8|N[F+2]<<16)>>>0}function _(N,F){return(N[F+0]|N[F+1]<<8|N[F+2]<<16|N[F+3]<<24)>>>0}new u;var w=[0],P=[0],O=[],L=new u,B=n,K=(function(N,F){var S={},k=0,M=!1,Q=0,pe=0;if(S.frames=[],!(function(H,te){for(var Y=0;Y<4;Y++)if(H[te+Y]!="RIFF".charCodeAt(Y))return!0;return!1})(N,F)){for(_(N,F+=4),F+=8;F<N.length;){var se=d(N,F),ve=_(N,F+=4);F+=4;var me=ve+(1&ve);switch(se){case"VP8 ":case"VP8L":S.frames[k]===void 0&&(S.frames[k]={}),(ne=S.frames[k]).src_off=M?pe:F-8,ne.src_size=Q+ve+8,k++,M&&(M=!1,Q=0,pe=0);break;case"VP8X":(ne=S.header={}).feature_flags=N[F];var Se=F+4;ne.canvas_width=1+g(N,Se),Se+=3,ne.canvas_height=1+g(N,Se),Se+=3;break;case"ALPH":M=!0,Q=me+8,pe=F-8;break;case"ANIM":(ne=S.header).bgcolor=_(N,F),Se=F+4,ne.loop_count=p(N,Se),Se+=2;break;case"ANMF":var Ve,ne;(ne=S.frames[k]={}).offset_x=2*g(N,F),F+=3,ne.offset_y=2*g(N,F),F+=3,ne.width=1+g(N,F),F+=3,ne.height=1+g(N,F),F+=3,ne.duration=g(N,F),F+=3,Ve=N[F++],ne.dispose=1&Ve,ne.blend=Ve>>1&1}se!="ANMF"&&(F+=me)}return S}})(B,0);K.response=B,K.rgbaoutput=!0,K.dataurl=!1;var W=K.header?K.header:null,J=K.frames?K.frames:null;if(W){W.loop_counter=W.loop_count,w=[W.canvas_height],P=[W.canvas_width];for(var ae=0;ae<J.length&&J[ae].blend!=0;ae++);}var le=J[0],U=L.WebPDecodeRGBA(B,le.src_off,le.src_size,P,w);le.rgba=U,le.imgwidth=P[0],le.imgheight=w[0];for(var C=0;C<P[0]*w[0]*4;C++)O[C]=U[C];return this.width=P,this.height=w,this.data=O,this}(function(n){var e,t,r,i,s,a,c,u,d,p=function(H){return H=H||{},this.isStrokeTransparent=H.isStrokeTransparent||!1,this.strokeOpacity=H.strokeOpacity||1,this.strokeStyle=H.strokeStyle||"#000000",this.fillStyle=H.fillStyle||"#000000",this.isFillTransparent=H.isFillTransparent||!1,this.fillOpacity=H.fillOpacity||1,this.font=H.font||"10px sans-serif",this.textBaseline=H.textBaseline||"alphabetic",this.textAlign=H.textAlign||"left",this.lineWidth=H.lineWidth||1,this.lineJoin=H.lineJoin||"miter",this.lineCap=H.lineCap||"butt",this.path=H.path||[],this.transform=H.transform!==void 0?H.transform.clone():new u,this.globalCompositeOperation=H.globalCompositeOperation||"normal",this.globalAlpha=H.globalAlpha||1,this.clip_path=H.clip_path||[],this.currentPoint=H.currentPoint||new a,this.miterLimit=H.miterLimit||10,this.lastPoint=H.lastPoint||new a,this.lineDashOffset=H.lineDashOffset||0,this.lineDash=H.lineDash||[],this.margin=H.margin||[0,0,0,0],this.prevPageLastElemOffset=H.prevPageLastElemOffset||0,this.ignoreClearRect=typeof H.ignoreClearRect!="boolean"||H.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new g(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,c=this.internal.Rectangle,u=this.internal.Matrix,d=new p}]);var g=function(H){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var te=H;Object.defineProperty(this,"pdf",{get:function(){return te}});var Y=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Y},set:function(ce){Y=!!ce}});var fe=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return fe},set:function(ce){fe=!!ce}});var ge=0;Object.defineProperty(this,"posX",{get:function(){return ge},set:function(ce){isNaN(ce)||(ge=ce)}});var xe=0;Object.defineProperty(this,"posY",{get:function(){return xe},set:function(ce){isNaN(ce)||(xe=ce)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(ce){var ht;typeof ce=="number"?ht=[ce,ce,ce,ce]:((ht=new Array(4))[0]=ce[0],ht[1]=ce.length>=2?ce[1]:ht[0],ht[2]=ce.length>=3?ce[2]:ht[0],ht[3]=ce.length>=4?ce[3]:ht[1]),d.margin=ht}});var we=!1;Object.defineProperty(this,"autoPaging",{get:function(){return we},set:function(ce){we=ce}});var Ie=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ie},set:function(ce){Ie=ce}});var Ge=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ge},set:function(ce){Ge=ce}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(ce){ce instanceof p&&(d=ce)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(ce){d.path=ce}});var Qe=[];Object.defineProperty(this,"ctxStack",{get:function(){return Qe},set:function(ce){Qe=ce}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ce){var ht;ht=_(ce),this.ctx.fillStyle=ht.style,this.ctx.isFillTransparent=ht.a===0,this.ctx.fillOpacity=ht.a,this.pdf.setFillColor(ht.r,ht.g,ht.b,{a:ht.a}),this.pdf.setTextColor(ht.r,ht.g,ht.b,{a:ht.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ce){var ht=_(ce);this.ctx.strokeStyle=ht.style,this.ctx.isStrokeTransparent=ht.a===0,this.ctx.strokeOpacity=ht.a,ht.a===0?this.pdf.setDrawColor(255,255,255):(ht.a,this.pdf.setDrawColor(ht.r,ht.g,ht.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ce){["butt","round","square"].indexOf(ce)!==-1&&(this.ctx.lineCap=ce,this.pdf.setLineCap(ce))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ce){isNaN(ce)||(this.ctx.lineWidth=ce,this.pdf.setLineWidth(ce))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ce){["bevel","round","miter"].indexOf(ce)!==-1&&(this.ctx.lineJoin=ce,this.pdf.setLineJoin(ce))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ce){isNaN(ce)||(this.ctx.miterLimit=ce,this.pdf.setMiterLimit(ce))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ce){this.ctx.textBaseline=ce}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ce){["right","end","center","left","start"].indexOf(ce)!==-1&&(this.ctx.textAlign=ce)}});var it=null,dt=null,vt=null;Object.defineProperty(this,"fontFaces",{get:function(){return vt},set:function(ce){it=null,dt=null,vt=ce}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ce){var ht;if(this.ctx.font=ce,(ht=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(ce))!==null){var Bt=ht[1];ht[2];var Mt=ht[3],Ke=ht[4];ht[5];var bt=ht[6],ye=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ke)[2];Ke=Math.floor(ye==="px"?parseFloat(Ke)*this.pdf.internal.scaleFactor:ye==="em"?parseFloat(Ke)*this.pdf.getFontSize():parseFloat(Ke)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ke);var He=(function(St){var rr,Rt,Ot=[],rn=St.trim();if(rn==="")return q2;if(rn in wI)return[wI[rn]];for(;rn!=="";){switch(Rt=null,rr=(rn=TI(rn)).charAt(0)){case'"':case"'":Rt=OY(rn.substring(1),rr);break;default:Rt=FY(rn)}if(Rt===null||(Ot.push(Rt[0]),(rn=TI(Rt[1]))!==""&&rn.charAt(0)!==","))return q2;rn=rn.replace(/^,/,"")}return Ot})(bt);if(this.fontFaces){var rt=(function(St,rr){var Rt=St.getFontList(),Ot=JSON.stringify(Rt);if(it===null||dt!==Ot){var rn=(function(dn){var qt=[];return Object.keys(dn).forEach(function(Vn){dn[Vn].forEach(function(en){var tn=null;switch(en){case"bold":tn={family:Vn,weight:"bold"};break;case"italic":tn={family:Vn,style:"italic"};break;case"bolditalic":tn={family:Vn,weight:"bold",style:"italic"};break;case"":case"normal":tn={family:Vn}}tn!==null&&(tn.ref={name:Vn,style:en},qt.push(tn))})}),qt})(Rt);it=(function(dn){for(var qt={},Vn=0;Vn<dn.length;++Vn){var en=B2(dn[Vn]),tn=en.family,Gn=en.stretch,jt=en.style,Ft=en.weight;qt[tn]=qt[tn]||{},qt[tn][Gn]=qt[tn][Gn]||{},qt[tn][Gn][jt]=qt[tn][Gn][jt]||{},qt[tn][Gn][jt][Ft]=en}return qt})(rn.concat(rr)),dt=Ot}return it})(this.pdf,this.fontFaces),at=He.map(function(St){return{family:St,stretch:"normal",weight:Mt,style:Bt}}),_t=(function(St,rr,Rt){for(var Ot=(Rt=Rt||{}).defaultFontFamily||"times",rn=Object.assign({},MY,Rt.genericFontFamilies||{}),dn=null,qt=null,Vn=0;Vn<rr.length;++Vn)if(rn[(dn=B2(rr[Vn])).family]&&(dn.family=rn[dn.family]),St.hasOwnProperty(dn.family)){qt=St[dn.family];break}if(!(qt=qt||St[Ot]))throw new Error("Could not find a font-family for the rule '"+EI(dn)+"' and default family '"+Ot+"'.");if(qt=(function(en,tn){if(tn[en])return tn[en];var Gn=Xb[en],jt=Gn<=Xb.normal?-1:1,Ft=xI(tn,rD,Gn,jt);if(!Ft)throw new Error("Could not find a matching font-stretch value for "+en);return Ft})(dn.stretch,qt),qt=(function(en,tn){if(tn[en])return tn[en];for(var Gn=nD[en],jt=0;jt<Gn.length;++jt)if(tn[Gn[jt]])return tn[Gn[jt]];throw new Error("Could not find a matching font-style for "+en)})(dn.style,qt),!(qt=(function(en,tn){if(tn[en])return tn[en];if(en===400&&tn[500])return tn[500];if(en===500&&tn[400])return tn[400];var Gn=LY[en],jt=xI(tn,iD,Gn,en<400?-1:1);if(!jt)throw new Error("Could not find a matching font-weight for value "+en);return jt})(dn.weight,qt)))throw new Error("Failed to resolve a font for the rule '"+EI(dn)+"'.");return qt})(rt,at);this.pdf.setFont(_t.ref.name,_t.ref.style)}else{var gt="";(Mt==="bold"||parseInt(Mt,10)>=700||Bt==="bold")&&(gt="bold"),Bt==="italic"&&(gt+="italic"),gt.length===0&&(gt="normal");for(var mt="",Yt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},wt=0;wt<He.length;wt++){if(this.pdf.internal.getFont(He[wt],gt,{noFallback:!0,disableWarning:!0})!==void 0){mt=He[wt];break}if(gt==="bolditalic"&&this.pdf.internal.getFont(He[wt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)mt=He[wt],gt="bold";else if(this.pdf.internal.getFont(He[wt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){mt=He[wt],gt="normal";break}}if(mt===""){for(var nn=0;nn<He.length;nn++)if(Yt[He[nn]]){mt=Yt[He[nn]];break}}mt=mt===""?"Times":mt,this.pdf.setFont(mt,gt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ce){this.ctx.globalCompositeOperation=ce}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ce){this.ctx.globalAlpha=ce}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ce){this.ctx.lineDashOffset=ce,ne.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ce){this.ctx.lineDash=ce,ne.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ce){this.ctx.ignoreClearRect=!!ce}})};g.prototype.setLineDash=function(H){this.lineDash=H},g.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},g.prototype.fill=function(){J.call(this,"fill",!1)},g.prototype.stroke=function(){J.call(this,"stroke",!1)},g.prototype.beginPath=function(){this.path=[{type:"begin"}]},g.prototype.moveTo=function(H,te){if(isNaN(H)||isNaN(te))throw Nr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Y=this.ctx.transform.applyToPoint(new a(H,te));this.path.push({type:"mt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new a(H,te)},g.prototype.closePath=function(){var H=new a(0,0),te=0;for(te=this.path.length-1;te!==-1;te--)if(this.path[te].type==="begin"&&ur(this.path[te+1])==="object"&&typeof this.path[te+1].x=="number"){H=new a(this.path[te+1].x,this.path[te+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(H.x,H.y)},g.prototype.lineTo=function(H,te){if(isNaN(H)||isNaN(te))throw Nr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Y=this.ctx.transform.applyToPoint(new a(H,te));this.path.push({type:"lt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new a(Y.x,Y.y)},g.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),J.call(this,null,!0)},g.prototype.quadraticCurveTo=function(H,te,Y,fe){if(isNaN(Y)||isNaN(fe)||isNaN(H)||isNaN(te))throw Nr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ge=this.ctx.transform.applyToPoint(new a(Y,fe)),xe=this.ctx.transform.applyToPoint(new a(H,te));this.path.push({type:"qct",x1:xe.x,y1:xe.y,x:ge.x,y:ge.y}),this.ctx.lastPoint=new a(ge.x,ge.y)},g.prototype.bezierCurveTo=function(H,te,Y,fe,ge,xe){if(isNaN(ge)||isNaN(xe)||isNaN(H)||isNaN(te)||isNaN(Y)||isNaN(fe))throw Nr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var we=this.ctx.transform.applyToPoint(new a(ge,xe)),Ie=this.ctx.transform.applyToPoint(new a(H,te)),Ge=this.ctx.transform.applyToPoint(new a(Y,fe));this.path.push({type:"bct",x1:Ie.x,y1:Ie.y,x2:Ge.x,y2:Ge.y,x:we.x,y:we.y}),this.ctx.lastPoint=new a(we.x,we.y)},g.prototype.arc=function(H,te,Y,fe,ge,xe){if(isNaN(H)||isNaN(te)||isNaN(Y)||isNaN(fe)||isNaN(ge))throw Nr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(xe=!!xe,!this.ctx.transform.isIdentity){var we=this.ctx.transform.applyToPoint(new a(H,te));H=we.x,te=we.y;var Ie=this.ctx.transform.applyToPoint(new a(0,Y)),Ge=this.ctx.transform.applyToPoint(new a(0,0));Y=Math.sqrt(Math.pow(Ie.x-Ge.x,2)+Math.pow(Ie.y-Ge.y,2))}Math.abs(ge-fe)>=2*Math.PI&&(fe=0,ge=2*Math.PI),this.path.push({type:"arc",x:H,y:te,radius:Y,startAngle:fe,endAngle:ge,counterclockwise:xe})},g.prototype.arcTo=function(H,te,Y,fe,ge){throw new Error("arcTo not implemented.")},g.prototype.rect=function(H,te,Y,fe){if(isNaN(H)||isNaN(te)||isNaN(Y)||isNaN(fe))throw Nr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(H,te),this.lineTo(H+Y,te),this.lineTo(H+Y,te+fe),this.lineTo(H,te+fe),this.lineTo(H,te),this.lineTo(H+Y,te),this.lineTo(H,te)},g.prototype.fillRect=function(H,te,Y,fe){if(isNaN(H)||isNaN(te)||isNaN(Y)||isNaN(fe))throw Nr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!w.call(this)){var ge={};this.lineCap!=="butt"&&(ge.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ge.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(H,te,Y,fe),this.fill(),ge.hasOwnProperty("lineCap")&&(this.lineCap=ge.lineCap),ge.hasOwnProperty("lineJoin")&&(this.lineJoin=ge.lineJoin)}},g.prototype.strokeRect=function(H,te,Y,fe){if(isNaN(H)||isNaN(te)||isNaN(Y)||isNaN(fe))throw Nr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");P.call(this)||(this.beginPath(),this.rect(H,te,Y,fe),this.stroke())},g.prototype.clearRect=function(H,te,Y,fe){if(isNaN(H)||isNaN(te)||isNaN(Y)||isNaN(fe))throw Nr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(H,te,Y,fe))},g.prototype.save=function(H){H=typeof H!="boolean"||H;for(var te=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("q");if(this.pdf.setPage(te),H){this.ctx.fontSize=this.pdf.internal.getFontSize();var fe=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=fe}},g.prototype.restore=function(H){H=typeof H!="boolean"||H;for(var te=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("Q");this.pdf.setPage(te),H&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},g.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var _=function(H){var te,Y,fe,ge;if(H.isCanvasGradient===!0&&(H=H.getColor()),!H)return{r:0,g:0,b:0,a:0,style:H};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(H))te=0,Y=0,fe=0,ge=0;else{var xe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(H);if(xe!==null)te=parseInt(xe[1]),Y=parseInt(xe[2]),fe=parseInt(xe[3]),ge=1;else if((xe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(H))!==null)te=parseInt(xe[1]),Y=parseInt(xe[2]),fe=parseInt(xe[3]),ge=parseFloat(xe[4]);else{if(ge=1,typeof H=="string"&&H.charAt(0)!=="#"){var we=new K6(H);H=we.ok?we.toHex():"#000000"}H.length===4?(te=H.substring(1,2),te+=te,Y=H.substring(2,3),Y+=Y,fe=H.substring(3,4),fe+=fe):(te=H.substring(1,3),Y=H.substring(3,5),fe=H.substring(5,7)),te=parseInt(te,16),Y=parseInt(Y,16),fe=parseInt(fe,16)}}return{r:te,g:Y,b:fe,a:ge,style:H}},w=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},P=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};g.prototype.fillText=function(H,te,Y,fe){if(isNaN(te)||isNaN(Y)||typeof H!="string")throw Nr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(fe=isNaN(fe)?void 0:fe,!w.call(this)){var ge=me(this.ctx.transform.rotation),xe=this.ctx.transform.scaleX;k.call(this,{text:H,x:te,y:Y,scale:xe,angle:ge,align:this.textAlign,maxWidth:fe})}},g.prototype.strokeText=function(H,te,Y,fe){if(isNaN(te)||isNaN(Y)||typeof H!="string")throw Nr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!P.call(this)){fe=isNaN(fe)?void 0:fe;var ge=me(this.ctx.transform.rotation),xe=this.ctx.transform.scaleX;k.call(this,{text:H,x:te,y:Y,scale:xe,renderingMode:"stroke",angle:ge,align:this.textAlign,maxWidth:fe})}},g.prototype.measureText=function(H){if(typeof H!="string")throw Nr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var te=this.pdf,Y=this.pdf.internal.scaleFactor,fe=te.internal.getFontSize(),ge=te.getStringUnitWidth(H)*fe/te.internal.scaleFactor;return new function(xe){var we=(xe=xe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return we}}),this}({width:ge*=Math.round(96*Y/72*1e4)/1e4})},g.prototype.scale=function(H,te){if(isNaN(H)||isNaN(te))throw Nr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Y=new u(H,0,0,te,0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},g.prototype.rotate=function(H){if(isNaN(H))throw Nr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var te=new u(Math.cos(H),Math.sin(H),-Math.sin(H),Math.cos(H),0,0);this.ctx.transform=this.ctx.transform.multiply(te)},g.prototype.translate=function(H,te){if(isNaN(H)||isNaN(te))throw Nr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Y=new u(1,0,0,1,H,te);this.ctx.transform=this.ctx.transform.multiply(Y)},g.prototype.transform=function(H,te,Y,fe,ge,xe){if(isNaN(H)||isNaN(te)||isNaN(Y)||isNaN(fe)||isNaN(ge)||isNaN(xe))throw Nr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var we=new u(H,te,Y,fe,ge,xe);this.ctx.transform=this.ctx.transform.multiply(we)},g.prototype.setTransform=function(H,te,Y,fe,ge,xe){H=isNaN(H)?1:H,te=isNaN(te)?0:te,Y=isNaN(Y)?0:Y,fe=isNaN(fe)?1:fe,ge=isNaN(ge)?0:ge,xe=isNaN(xe)?0:xe,this.ctx.transform=new u(H,te,Y,fe,ge,xe)};var O=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};g.prototype.drawImage=function(H,te,Y,fe,ge,xe,we,Ie,Ge){var Qe=this.pdf.getImageProperties(H),it=1,dt=1,vt=1,ce=1;fe!==void 0&&Ie!==void 0&&(vt=Ie/fe,ce=Ge/ge,it=Qe.width/fe*Ie/fe,dt=Qe.height/ge*Ge/ge),xe===void 0&&(xe=te,we=Y,te=0,Y=0),fe!==void 0&&Ie===void 0&&(Ie=fe,Ge=ge),fe===void 0&&Ie===void 0&&(Ie=Qe.width,Ge=Qe.height);var ht=this.ctx.transform.decompose(),Bt=me(ht.rotate.shx),Mt=new u,Ke=(Mt=(Mt=(Mt=Mt.multiply(ht.translate)).multiply(ht.skew)).multiply(ht.scale)).applyToRectangle(new c(xe-te*vt,we-Y*ce,fe*it,ge*dt));if(this.autoPaging){for(var bt,ye=L.call(this,Ke),He=[],rt=0;rt<ye.length;rt+=1)He.indexOf(ye[rt])===-1&&He.push(ye[rt]);W(He);for(var at=He[0],_t=He[He.length-1],gt=at;gt<_t+1;gt++){this.pdf.setPage(gt);var mt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Yt=gt===1?this.posY+this.margin[0]:this.margin[0],wt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],nn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],St=gt===1?0:wt+(gt-2)*nn;if(this.ctx.clip_path.length!==0){var rr=this.path;bt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=K(bt,this.posX+this.margin[3],-St+Yt+this.ctx.prevPageLastElemOffset),ae.call(this,"fill",!0),this.path=rr}var Rt=JSON.parse(JSON.stringify(Ke));Rt=K([Rt],this.posX+this.margin[3],-St+Yt+this.ctx.prevPageLastElemOffset)[0];var Ot=(gt>at||gt<_t)&&O.call(this);Ot&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],mt,nn,null).clip().discardPath()),this.pdf.addImage(H,"JPEG",Rt.x,Rt.y,Rt.w,Rt.h,null,null,Bt),Ot&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(H,"JPEG",Ke.x,Ke.y,Ke.w,Ke.h,null,null,Bt)};var L=function(H,te,Y){var fe=[];te=te||this.pdf.internal.pageSize.width,Y=Y||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ge=this.posY+this.ctx.prevPageLastElemOffset;switch(H.type){default:case"mt":case"lt":fe.push(Math.floor((H.y+ge)/Y)+1);break;case"arc":fe.push(Math.floor((H.y+ge-H.radius)/Y)+1),fe.push(Math.floor((H.y+ge+H.radius)/Y)+1);break;case"qct":var xe=Se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,H.x1,H.y1,H.x,H.y);fe.push(Math.floor((xe.y+ge)/Y)+1),fe.push(Math.floor((xe.y+xe.h+ge)/Y)+1);break;case"bct":var we=Ve(this.ctx.lastPoint.x,this.ctx.lastPoint.y,H.x1,H.y1,H.x2,H.y2,H.x,H.y);fe.push(Math.floor((we.y+ge)/Y)+1),fe.push(Math.floor((we.y+we.h+ge)/Y)+1);break;case"rect":fe.push(Math.floor((H.y+ge)/Y)+1),fe.push(Math.floor((H.y+H.h+ge)/Y)+1)}for(var Ie=0;Ie<fe.length;Ie+=1)for(;this.pdf.internal.getNumberOfPages()<fe[Ie];)B.call(this);return fe},B=function(){var H=this.fillStyle,te=this.strokeStyle,Y=this.font,fe=this.lineCap,ge=this.lineWidth,xe=this.lineJoin;this.pdf.addPage(),this.fillStyle=H,this.strokeStyle=te,this.font=Y,this.lineCap=fe,this.lineWidth=ge,this.lineJoin=xe},K=function(H,te,Y){for(var fe=0;fe<H.length;fe++)switch(H[fe].type){case"bct":H[fe].x2+=te,H[fe].y2+=Y;case"qct":H[fe].x1+=te,H[fe].y1+=Y;default:H[fe].x+=te,H[fe].y+=Y}return H},W=function(H){return H.sort(function(te,Y){return te-Y})},J=function(H,te){var Y=this.fillStyle,fe=this.strokeStyle,ge=this.lineCap,xe=this.lineWidth,we=Math.abs(xe*this.ctx.transform.scaleX),Ie=this.lineJoin;if(this.autoPaging){for(var Ge,Qe,it=JSON.parse(JSON.stringify(this.path)),dt=JSON.parse(JSON.stringify(this.path)),vt=[],ce=0;ce<dt.length;ce++)if(dt[ce].x!==void 0)for(var ht=L.call(this,dt[ce]),Bt=0;Bt<ht.length;Bt+=1)vt.indexOf(ht[Bt])===-1&&vt.push(ht[Bt]);for(var Mt=0;Mt<vt.length;Mt++)for(;this.pdf.internal.getNumberOfPages()<vt[Mt];)B.call(this);W(vt);for(var Ke=vt[0],bt=vt[vt.length-1],ye=Ke;ye<bt+1;ye++){this.pdf.setPage(ye),this.fillStyle=Y,this.strokeStyle=fe,this.lineCap=ge,this.lineWidth=we,this.lineJoin=Ie;var He=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],rt=ye===1?this.posY+this.margin[0]:this.margin[0],at=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],_t=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],gt=ye===1?0:at+(ye-2)*_t;if(this.ctx.clip_path.length!==0){var mt=this.path;Ge=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=K(Ge,this.posX+this.margin[3],-gt+rt+this.ctx.prevPageLastElemOffset),ae.call(this,H,!0),this.path=mt}if(Qe=JSON.parse(JSON.stringify(it)),this.path=K(Qe,this.posX+this.margin[3],-gt+rt+this.ctx.prevPageLastElemOffset),te===!1||ye===0){var Yt=(ye>Ke||ye<bt)&&O.call(this);Yt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],He,_t,null).clip().discardPath()),ae.call(this,H,te),Yt&&this.pdf.restoreGraphicsState()}this.lineWidth=xe}this.path=it}else this.lineWidth=we,ae.call(this,H,te),this.lineWidth=xe},ae=function(H,te){if((H!=="stroke"||te||!P.call(this))&&(H==="stroke"||te||!w.call(this))){for(var Y,fe,ge=[],xe=this.path,we=0;we<xe.length;we++){var Ie=xe[we];switch(Ie.type){case"begin":ge.push({begin:!0});break;case"close":ge.push({close:!0});break;case"mt":ge.push({start:Ie,deltas:[],abs:[]});break;case"lt":var Ge=ge.length;if(xe[we-1]&&!isNaN(xe[we-1].x)&&(Y=[Ie.x-xe[we-1].x,Ie.y-xe[we-1].y],Ge>0)){for(;Ge>=0;Ge--)if(ge[Ge-1].close!==!0&&ge[Ge-1].begin!==!0){ge[Ge-1].deltas.push(Y),ge[Ge-1].abs.push(Ie);break}}break;case"bct":Y=[Ie.x1-xe[we-1].x,Ie.y1-xe[we-1].y,Ie.x2-xe[we-1].x,Ie.y2-xe[we-1].y,Ie.x-xe[we-1].x,Ie.y-xe[we-1].y],ge[ge.length-1].deltas.push(Y);break;case"qct":var Qe=xe[we-1].x+2/3*(Ie.x1-xe[we-1].x),it=xe[we-1].y+2/3*(Ie.y1-xe[we-1].y),dt=Ie.x+2/3*(Ie.x1-Ie.x),vt=Ie.y+2/3*(Ie.y1-Ie.y),ce=Ie.x,ht=Ie.y;Y=[Qe-xe[we-1].x,it-xe[we-1].y,dt-xe[we-1].x,vt-xe[we-1].y,ce-xe[we-1].x,ht-xe[we-1].y],ge[ge.length-1].deltas.push(Y);break;case"arc":ge.push({deltas:[],abs:[],arc:!0}),Array.isArray(ge[ge.length-1].abs)&&ge[ge.length-1].abs.push(Ie)}}fe=te?null:H==="stroke"?"stroke":"fill";for(var Bt=!1,Mt=0;Mt<ge.length;Mt++)if(ge[Mt].arc)for(var Ke=ge[Mt].abs,bt=0;bt<Ke.length;bt++){var ye=Ke[bt];ye.type==="arc"?C.call(this,ye.x,ye.y,ye.radius,ye.startAngle,ye.endAngle,ye.counterclockwise,void 0,te,!Bt):M.call(this,ye.x,ye.y),Bt=!0}else if(ge[Mt].close===!0)this.pdf.internal.out("h"),Bt=!1;else if(ge[Mt].begin!==!0){var He=ge[Mt].start.x,rt=ge[Mt].start.y;Q.call(this,ge[Mt].deltas,He,rt),Bt=!0}fe&&N.call(this,fe),te&&F.call(this)}},le=function(H){var te=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Y=te*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return H-Y;case"top":return H+te-Y;case"hanging":return H+te-2*Y;case"middle":return H+te/2-Y;default:return H}},U=function(H){return H+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};g.prototype.createLinearGradient=function(){var H=function(){};return H.colorStops=[],H.addColorStop=function(te,Y){this.colorStops.push([te,Y])},H.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},H.isCanvasGradient=!0,H},g.prototype.createPattern=function(){return this.createLinearGradient()},g.prototype.createRadialGradient=function(){return this.createLinearGradient()};var C=function(H,te,Y,fe,ge,xe,we,Ie,Ge){for(var Qe=se.call(this,Y,fe,ge,xe),it=0;it<Qe.length;it++){var dt=Qe[it];it===0&&(Ge?S.call(this,dt.x1+H,dt.y1+te):M.call(this,dt.x1+H,dt.y1+te)),pe.call(this,H,te,dt.x2,dt.y2,dt.x3,dt.y3,dt.x4,dt.y4)}Ie?F.call(this):N.call(this,we)},N=function(H){switch(H){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},F=function(){this.pdf.clip(),this.pdf.discardPath()},S=function(H,te){this.pdf.internal.out(t(H)+" "+r(te)+" m")},k=function(H){var te;switch(H.align){case"right":case"end":te="right";break;case"center":te="center";break;default:te="left"}var Y,fe,ge,xe=this.pdf.getTextDimensions(H.text),we=le.call(this,H.y),Ie=U.call(this,we)-xe.h,Ge=this.ctx.transform.applyToPoint(new a(H.x,we));if(this.autoPaging){var Qe=this.ctx.transform.decompose(),it=new u;it=(it=(it=it.multiply(Qe.translate)).multiply(Qe.skew)).multiply(Qe.scale);for(var dt=this.ctx.transform.applyToRectangle(new c(H.x,we,xe.w,xe.h)),vt=it.applyToRectangle(new c(H.x,Ie,xe.w,xe.h)),ce=L.call(this,vt),ht=[],Bt=0;Bt<ce.length;Bt+=1)ht.indexOf(ce[Bt])===-1&&ht.push(ce[Bt]);W(ht);for(var Mt=ht[0],Ke=ht[ht.length-1],bt=Mt;bt<Ke+1;bt++){this.pdf.setPage(bt);var ye=bt===1?this.posY+this.margin[0]:this.margin[0],He=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],rt=this.pdf.internal.pageSize.height-this.margin[2],at=rt-this.margin[0],_t=this.pdf.internal.pageSize.width-this.margin[1],gt=_t-this.margin[3],mt=bt===1?0:He+(bt-2)*at;if(this.ctx.clip_path.length!==0){var Yt=this.path;Y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=K(Y,this.posX+this.margin[3],-1*mt+ye),ae.call(this,"fill",!0),this.path=Yt}var wt=K([JSON.parse(JSON.stringify(vt))],this.posX+this.margin[3],-mt+ye+this.ctx.prevPageLastElemOffset)[0];H.scale>=.01&&(fe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(fe*H.scale),ge=this.lineWidth,this.lineWidth=ge*H.scale);var nn=this.autoPaging!=="text";if(nn||wt.y+wt.h<=rt){if(nn||wt.y>=ye&&wt.x<=_t){var St=nn?H.text:this.pdf.splitTextToSize(H.text,H.maxWidth||_t-wt.x)[0],rr=K([JSON.parse(JSON.stringify(dt))],this.posX+this.margin[3],-mt+ye+this.ctx.prevPageLastElemOffset)[0],Rt=nn&&(bt>Mt||bt<Ke)&&O.call(this);Rt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],gt,at,null).clip().discardPath()),this.pdf.text(St,rr.x,rr.y,{angle:H.angle,align:te,renderingMode:H.renderingMode}),Rt&&this.pdf.restoreGraphicsState()}}else wt.y<rt&&(this.ctx.prevPageLastElemOffset+=rt-wt.y);H.scale>=.01&&(this.pdf.setFontSize(fe),this.lineWidth=ge)}}else H.scale>=.01&&(fe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(fe*H.scale),ge=this.lineWidth,this.lineWidth=ge*H.scale),this.pdf.text(H.text,Ge.x+this.posX,Ge.y+this.posY,{angle:H.angle,align:te,renderingMode:H.renderingMode,maxWidth:H.maxWidth}),H.scale>=.01&&(this.pdf.setFontSize(fe),this.lineWidth=ge)},M=function(H,te,Y,fe){Y=Y||0,fe=fe||0,this.pdf.internal.out(t(H+Y)+" "+r(te+fe)+" l")},Q=function(H,te,Y){return this.pdf.lines(H,te,Y,null,null)},pe=function(H,te,Y,fe,ge,xe,we,Ie){this.pdf.internal.out([e(i(Y+H)),e(s(fe+te)),e(i(ge+H)),e(s(xe+te)),e(i(we+H)),e(s(Ie+te)),"c"].join(" "))},se=function(H,te,Y,fe){for(var ge=2*Math.PI,xe=Math.PI/2;te>Y;)te-=ge;var we=Math.abs(Y-te);we<ge&&fe&&(we=ge-we);for(var Ie=[],Ge=fe?-1:1,Qe=te;we>1e-5;){var it=Qe+Ge*Math.min(we,xe);Ie.push(ve.call(this,H,Qe,it)),we-=Math.abs(it-Qe),Qe=it}return Ie},ve=function(H,te,Y){var fe=(Y-te)/2,ge=H*Math.cos(fe),xe=H*Math.sin(fe),we=ge,Ie=-xe,Ge=we*we+Ie*Ie,Qe=Ge+we*ge+Ie*xe,it=4/3*(Math.sqrt(2*Ge*Qe)-Qe)/(we*xe-Ie*ge),dt=we-it*Ie,vt=Ie+it*we,ce=dt,ht=-vt,Bt=fe+te,Mt=Math.cos(Bt),Ke=Math.sin(Bt);return{x1:H*Math.cos(te),y1:H*Math.sin(te),x2:dt*Mt-vt*Ke,y2:dt*Ke+vt*Mt,x3:ce*Mt-ht*Ke,y3:ce*Ke+ht*Mt,x4:H*Math.cos(Y),y4:H*Math.sin(Y)}},me=function(H){return 180*H/Math.PI},Se=function(H,te,Y,fe,ge,xe){var we=H+.5*(Y-H),Ie=te+.5*(fe-te),Ge=ge+.5*(Y-ge),Qe=xe+.5*(fe-xe),it=Math.min(H,ge,we,Ge),dt=Math.max(H,ge,we,Ge),vt=Math.min(te,xe,Ie,Qe),ce=Math.max(te,xe,Ie,Qe);return new c(it,vt,dt-it,ce-vt)},Ve=function(H,te,Y,fe,ge,xe,we,Ie){var Ge,Qe,it,dt,vt,ce,ht,Bt,Mt,Ke,bt,ye,He,rt,at=Y-H,_t=fe-te,gt=ge-Y,mt=xe-fe,Yt=we-ge,wt=Ie-xe;for(Qe=0;Qe<41;Qe++)Mt=(ht=(it=H+(Ge=Qe/40)*at)+Ge*((vt=Y+Ge*gt)-it))+Ge*(vt+Ge*(ge+Ge*Yt-vt)-ht),Ke=(Bt=(dt=te+Ge*_t)+Ge*((ce=fe+Ge*mt)-dt))+Ge*(ce+Ge*(xe+Ge*wt-ce)-Bt),Qe==0?(bt=Mt,ye=Ke,He=Mt,rt=Ke):(bt=Math.min(bt,Mt),ye=Math.min(ye,Ke),He=Math.max(He,Mt),rt=Math.max(rt,Ke));return new c(Math.round(bt),Math.round(ye),Math.round(He-bt),Math.round(rt-ye))},ne=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var H,te,Y=(H=this.ctx.lineDash,te=this.ctx.lineDashOffset,JSON.stringify({lineDash:H,lineDashOffset:te}));this.prevLineDash!==Y&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Y)}}})(zt.API),(function(n){var e=function(a){var c,u,d,p,g,_,w,P,O,L;for(u=[],d=0,p=(a+=c="\0\0\0\0".slice(a.length%4||4)).length;p>d;d+=4)(g=(a.charCodeAt(d)<<24)+(a.charCodeAt(d+1)<<16)+(a.charCodeAt(d+2)<<8)+a.charCodeAt(d+3))!==0?(_=(g=((g=((g=((g=(g-(L=g%85))/85)-(O=g%85))/85)-(P=g%85))/85)-(w=g%85))/85)%85,u.push(_+33,w+33,P+33,O+33,L+33)):u.push(122);return(function(B,K){for(var W=K;W>0;W--)B.pop()})(u,c.length),String.fromCharCode.apply(String,u)+"~>"},t=function(a){var c,u,d,p,g,_=String,w="length",P=255,O="charCodeAt",L="slice",B="replace";for(a[L](-2),a=a[L](0,-2)[B](/\s/g,"")[B]("z","!!!!!"),d=[],p=0,g=(a+=c="uuuuu"[L](a[w]%5||5))[w];g>p;p+=5)u=52200625*(a[O](p)-33)+614125*(a[O](p+1)-33)+7225*(a[O](p+2)-33)+85*(a[O](p+3)-33)+(a[O](p+4)-33),d.push(P&u>>24,P&u>>16,P&u>>8,P&u);return(function(K,W){for(var J=W;J>0;J--)K.pop()})(d,c[w]),_.fromCharCode.apply(_,d)},r=function(a){return a.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(a){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),c.test(a)===!1)return"";for(var u="",d=0;d<a.length;d+=2)u+=String.fromCharCode("0x"+(a[d]+a[d+1]));return u},s=function(a){for(var c=new Uint8Array(a.length),u=a.length;u--;)c[u]=a.charCodeAt(u);return(c=zb(c)).reduce(function(d,p){return d+String.fromCharCode(p)},"")};n.processDataByFilters=function(a,c){var u=0,d=a||"",p=[];for(typeof(c=c||[])=="string"&&(c=[c]),u=0;u<c.length;u+=1)switch(c[u]){case"ASCII85Decode":case"/ASCII85Decode":d=t(d),p.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=e(d),p.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=i(d),p.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=r(d),p.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=s(d),p.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[u]+'" is not implemented')}return{data:d,reverseChain:p.reverse().join(" ")}}})(zt.API),(function(n){n.loadFile=function(e,t,r){return(function(i,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var c=void 0;try{c=(function(u,d,p){var g=new XMLHttpRequest,_=0,w=function(P){var O=P.length,L=[],B=String.fromCharCode;for(_=0;_<O;_+=1)L.push(B(255&P.charCodeAt(_)));return L.join("")};if(g.open("GET",u,!d),g.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(g.onload=function(){g.status===200?p(w(this.responseText)):p(void 0)}),g.send(null),d&&g.status===200)return w(g.responseText)})(i,s,a)}catch{}return c})(e,t,r)},n.loadImageFile=n.loadFile})(zt.API),(function(n){function e(){return(un.html2canvas?Promise.resolve(un.html2canvas):E2(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function t(){return(un.DOMPurify?Promise.resolve(un.DOMPurify):E2(()=>import("./purify.es-B9ZVCkUG.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var r=function(c){var u=ur(c);return u==="undefined"?"undefined":u==="string"||c instanceof String?"string":u==="number"||c instanceof Number?"number":u==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":u==="object"?"object":"unknown"},i=function(c,u){var d=document.createElement(c);for(var p in u.className&&(d.className=u.className),u.innerHTML&&u.dompurify&&(d.innerHTML=u.dompurify.sanitize(u.innerHTML)),u.style)d.style[p]=u.style[p];return d},s=function c(u,d){for(var p=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),g=u.firstChild;g;g=g.nextSibling)d!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||p.appendChild(c(g,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(p.width=u.width,p.height=u.height,p.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(p.value=u.value),p.addEventListener("load",function(){p.scrollTop=u.scrollTop,p.scrollLeft=u.scrollLeft},!0)),p},a=function c(u){var d=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),p=c.convert(Promise.resolve(),d);return(p=p.setProgress(1,c,1,[c])).set(u)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(c,u){return c.__proto__=u||a.prototype,c},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(c,u){return this.then(function(){switch(u=u||(function(d){switch(r(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(c),u){case"string":return this.then(t).then(function(d){return this.set({src:i("div",{innerHTML:c,dompurify:d})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},a.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},u=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);u.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(u),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(u){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,u(this.prop.container,d)}).then(function(u){(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(u){var d=this.opt.jsPDF,p=this.opt.fontFaces,g=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,_=Object.assign({async:!0,allowTaint:!0,scale:g,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete _.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=p,p)for(var w=0;w<p.length;++w){var P=p[w],O=P.src.find(function(L){return L.format==="truetype"});O&&d.addFont(O.url,P.ref.name,P.ref.style)}return _.windowHeight=_.windowHeight||0,_.windowHeight=_.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):_.windowHeight,d.context2d.save(!0),u(this.prop.container,_)}).then(function(u){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(c,u,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(c,u):this.outputPdf(c,u)},a.prototype.outputPdf=function(c,u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,u)})},a.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},a.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(c){if(r(c)!=="object")return this;var u=Object.keys(c||{}).map(function(d){if(d in a.template.prop)return function(){this.prop[d]=c[d]};switch(d){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[d]=c[d]}}},this);return this.then(function(){return this.thenList(u)})},a.prototype.get=function(c,u){return this.then(function(){var d=c in a.template.prop?this.prop[c]:this.opt[c];return u?u(d):d})},a.prototype.setMargin=function(c){return this.then(function(){switch(r(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},a.prototype.setPageSize=function(c){function u(d,p){return Math.floor(d*p/72*96)}return this.then(function(){(c=c||zt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:u(c.inner.width,c.k),height:u(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},a.prototype.setProgress=function(c,u,d,p){return c!=null&&(this.progress.val=c),u!=null&&(this.progress.state=u),d!=null&&(this.progress.n=d),p!=null&&(this.progress.stack=p),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(c,u,d,p){return this.setProgress(c?this.progress.val+c:null,u||null,d?this.progress.n+d:null,p?this.progress.stack.concat(p):null)},a.prototype.then=function(c,u){var d=this;return this.thenCore(c,u,function(p,g){return d.updateProgress(null,null,1,[p]),Promise.prototype.then.call(this,function(_){return d.updateProgress(null,p),_}).then(p,g).then(function(_){return d.updateProgress(1),_})})},a.prototype.thenCore=function(c,u,d){d=d||Promise.prototype.then;var p=this;c&&(c=c.bind(p)),u&&(u=u.bind(p));var g=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?p:a.convert(Object.assign({},p),Promise.prototype),_=d.call(g,c,u);return a.convert(_,p.__proto__)},a.prototype.thenExternal=function(c,u){return Promise.prototype.then.call(this,c,u)},a.prototype.thenList=function(c){var u=this;return c.forEach(function(d){u=u.thenCore(d)}),u},a.prototype.catch=function(c){c&&(c=c.bind(this));var u=Promise.prototype.catch.call(this,c);return a.convert(u,this)},a.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},a.prototype.error=function(c){return this.then(function(){throw new Error(c)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,zt.getPageSize=function(c,u,d){if(ur(c)==="object"){var p=c;c=p.orientation,u=p.unit||u,d=p.format||d}u=u||"mm",d=d||"a4",c=(""+(c||"P")).toLowerCase();var g,_=(""+d).toLowerCase(),w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(u){case"pt":g=1;break;case"mm":g=72/25.4;break;case"cm":g=72/2.54;break;case"in":g=72;break;case"px":g=.75;break;case"pc":case"em":g=12;break;case"ex":g=6;break;default:throw"Invalid unit: "+u}var P,O=0,L=0;if(w.hasOwnProperty(_))O=w[_][1]/g,L=w[_][0]/g;else try{O=d[1],L=d[0]}catch{throw new Error("Invalid format: "+d)}if(c==="p"||c==="portrait")c="p",L>O&&(P=L,L=O,O=P);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",O>L&&(P=L,L=O,O=P)}return{width:L,height:O,unit:u,k:g,orientation:c}},n.html=function(c,u){(u=u||{}).callback=u.callback||function(){},u.html2canvas=u.html2canvas||{},u.html2canvas.canvas=u.html2canvas.canvas||this.canvas,u.jsPDF=u.jsPDF||this,u.fontFaces=u.fontFaces?u.fontFaces.map(B2):null;var d=new a(u);return u.worker?d:d.from(c).doCallback()}})(zt.API),zt.API.addJS=function(n){return NI=n,this.internal.events.subscribe("postPutResources",function(){Sy=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Sy+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),AI=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+NI+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Sy!==void 0&&AI!==void 0&&this.internal.out("/Names <</JavaScript "+Sy+" 0 R>>")}),this},(function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),s=0;s<i.length;s++){var a=i[s],c=r.exec(a);if(c!=null){var u=c[1];t.internal.newObjectDeferredBegin(u,!1)}t.internal.write(a)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,p=[];for(s=0;s<d;s++){var g=t.internal.newObject();p.push(g);var _=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+_.objId+" 0 R /XYZ null null null]>> endobj")}var w=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<p.length;s++)t.internal.write("(page_"+(s+1)+")"+p[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+w+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,s){var a={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(a),a},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var a=r.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var c=this.count=this.count_r({count:0},a);if(c>0&&this.line("/Count "+c),a.options&&a.options.pageNumber){var u=t.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+u.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var d=0;d<r.children.length;d++)this.renderItems(r.children[d])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])})(zt.API),(function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,s,a,c){var u,d=this.decode.DCT_DECODE,p=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=a||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,u=(function(g){for(var _,w=256*g.charCodeAt(4)+g.charCodeAt(5),P=g.length,O={width:0,height:0,numcomponents:1},L=4;L<P;L+=2){if(L+=w,e.indexOf(g.charCodeAt(L+1))!==-1){_=256*g.charCodeAt(L+5)+g.charCodeAt(L+6),O={width:256*g.charCodeAt(L+7)+g.charCodeAt(L+8),height:_,numcomponents:g.charCodeAt(L+9)};break}w=256*g.charCodeAt(L+2)+g.charCodeAt(L+3)}return O})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),u.numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}p={data:t,width:u.width,height:u.height,colorSpace:c,bitsPerComponent:8,filter:d,index:r,alias:i}}return p}})(zt.API),zt.API.processPNG=function(n,e,t,r){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var i,s=bY(n,{checkCrc:!0}),a=s.width,c=s.height,u=s.channels,d=s.palette,p=s.depth;i=d&&u===1?(function(C){for(var N=C.width,F=C.height,S=C.data,k=C.palette,M=C.depth,Q=!1,pe=[],se=[],ve=void 0,me=!1,Se=0,Ve=0;Ve<k.length;Ve++){var ne=RS(k[Ve],4),H=ne[0],te=ne[1],Y=ne[2],fe=ne[3];pe.push(H,te,Y),fe!=null&&(fe===0?(Se++,se.length<1&&se.push(Ve)):fe<255&&(me=!0))}if(me||Se>1){Q=!0,se=void 0;var ge=N*F;ve=new Uint8Array(ge);for(var xe=new DataView(S.buffer),we=0;we<ge;we++){var Ie=G2(xe,we,M),Ge=RS(k[Ie],4)[3];ve[we]=Ge}}else Se===0&&(se=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:Q?8:void 0,colorBytes:S,alphaBytes:ve,needSMask:Q,palette:pe,mask:se}})(s):u===2||u===4?(function(C){for(var N=C.data,F=C.width,S=C.height,k=C.channels,M=C.depth,Q=k===2?"DeviceGray":"DeviceRGB",pe=k-1,se=F*S,ve=pe,me=se*ve,Se=1*se,Ve=Math.ceil(me*M/8),ne=Math.ceil(Se*M/8),H=new Uint8Array(Ve),te=new Uint8Array(ne),Y=new DataView(N.buffer),fe=new DataView(H.buffer),ge=new DataView(te.buffer),xe=!1,we=0;we<se;we++){for(var Ie=we*k,Ge=0;Ge<ve;Ge++)MI(fe,G2(Y,Ie+Ge,M),we*ve+Ge,M);var Qe=G2(Y,Ie+ve,M);Qe<(1<<M)-1&&(xe=!0),MI(ge,Qe,1*we,M)}return{colorSpace:Q,colorsPerPixel:pe,sMaskBitsPerComponent:xe?M:void 0,colorBytes:H,alphaBytes:te,needSMask:xe}})(s):(function(C){var N=C.data,F=C.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:F,colorsPerPixel:F==="DeviceGray"?1:3,colorBytes:N instanceof Uint16Array?(function(S){for(var k=S.length,M=new Uint8Array(2*k),Q=new DataView(M.buffer,M.byteOffset,M.byteLength),pe=0;pe<k;pe++)Q.setUint16(2*pe,S[pe],!1);return M})(N):N,needSMask:!1}})(s);var g,_,w,P=i,O=P.colorSpace,L=P.colorsPerPixel,B=P.sMaskBitsPerComponent,K=P.colorBytes,W=P.alphaBytes,J=P.needSMask,ae=P.palette,le=P.mask,U=null;return r!==zt.API.image_compression.NONE&&typeof zb=="function"?(U=(function(C){var N;switch(C){case zt.API.image_compression.FAST:N=11;break;case zt.API.image_compression.MEDIUM:N=13;break;case zt.API.image_compression.SLOW:N=14;break;default:N=12}return N})(r),g=this.decode.FLATE_DECODE,_="/Predictor ".concat(U," /Colors ").concat(L," /BitsPerComponent ").concat(p," /Columns ").concat(a),n=RI(K,Math.ceil(a*L*p/8),L,p,r),J&&(w=RI(W,Math.ceil(a*B/8),1,B,r))):(g=void 0,_=void 0,n=K,J&&(w=W)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(w&&this.__addimage__.isArrayBuffer(w)||this.__addimage__.isArrayBufferView(w))&&(w=this.__addimage__.arrayBufferToBinaryString(w)),{alias:t,data:n,index:e,filter:g,decodeParameters:_,transparency:le,palette:ae,sMask:w,predictor:U,width:a,height:c,bitsPerComponent:p,sMaskBitsPerComponent:B,colorSpace:O}}},(function(n){n.processGIF89A=function(e,t,r,i){var s=new BY(e),a=s.width,c=s.height,u=[];s.decodeAndBlitFrameRGBA(0,u);var d={data:u,width:a,height:c},p=new H2(100).encode(d,100);return n.processJPEG.call(this,p,t,r,i)},n.processGIF87A=n.processGIF89A})(zt.API),al.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},al.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Nr.log("bit decode error:"+t)}},al.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*i*4,c=0;c<8&&8*i+c<this.width;c++){var u=this.palette[s>>7-c&1];this.data[a+4*c]=u.blue,this.data[a+4*c+1]=u.green,this.data[a+4*c+2]=u.red,this.data[a+4*c+3]=255}t!==0&&(this.pos+=4-t)}},al.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*i*4,c=s>>4,u=15&s,d=this.palette[c];if(this.data[a]=d.blue,this.data[a+1]=d.green,this.data[a+2]=d.red,this.data[a+3]=255,2*i+1>=this.width)break;d=this.palette[u],this.data[a+4]=d.blue,this.data[a+4+1]=d.green,this.data[a+4+2]=d.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},al.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;if(i<this.palette.length){var a=this.palette[i];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}n!==0&&(this.pos+=4-n)}},al.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,c=(s>>5&e)/e*255|0,u=(s>>10&e)/e*255|0,d=s>>15?255:0,p=r*this.width*4+4*i;this.data[p]=u,this.data[p+1]=c,this.data[p+2]=a,this.data[p+3]=d}this.pos+=n}},al.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(a&e)/e*255|0,u=(a>>5&t)/t*255|0,d=(a>>11)/e*255|0,p=i*this.width*4+4*s;this.data[p]=d,this.data[p+1]=u,this.data[p+2]=c,this.data[p+3]=255}this.pos+=n}},al.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},al.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*t;this.data[c]=s,this.data[c+1]=i,this.data[c+2]=r,this.data[c+3]=a}},al.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(e,t,r,i){var s=new al(e,!1),a=s.width,c=s.height,u={data:s.getData(),width:a,height:c},d=new H2(100).encode(u,100);return n.processJPEG.call(this,d,t,r,i)}})(zt.API),FI.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(e,t,r,i){var s=new FI(e),a=s.width,c=s.height,u={data:s.getData(),width:a,height:c},d=new H2(100).encode(u,100);return n.processJPEG.call(this,d,t,r,i)}})(zt.API),zt.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,s=new Uint8Array(i/4*3),a=new Uint8Array(i/4),c=0,u=0,d=0;d<i;d+=4){var p=r[d],g=r[d+1],_=r[d+2],w=r[d+3];s[c++]=p,s[c++]=g,s[c++]=_,a[u++]=w}var P=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:P,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},zt.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ef=zt.API,Iy=Ef.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),c=e.widths?e.widths:i.metadata.Unicode.widths,u=c.fof?c.fof:1,d=e.kerning?e.kerning:i.metadata.Unicode.kerning,p=d.fof?d.fof:1,g=e.doKerning!==!1,_=0,w=n.length,P=0,O=c[0]||u,L=[];for(t=0;t<w;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?L.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+a*(1e3/s)||0)/1e3):(_=g&&ur(d[r])==="object"&&!isNaN(parseInt(d[r][P],10))?d[r][P]/p:0,L.push((c[r]||O)/u+_)),P=r;return L},SI=Ef.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Ef.processArabic&&(n=Ef.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:Iy.apply(this,arguments).reduce(function(s,a){return s+a},0)},II=function(n,e,t,r){for(var i=[],s=0,a=n.length,c=0;s!==a&&c+e[s]<t;)c+=e[s],s++;i.push(n.slice(0,s));var u=s;for(c=0;s!==a;)c+e[s]>r&&(i.push(n.slice(u,s)),c=0,u=s),c+=e[s],s++;return u!==s&&i.push(n.slice(u,s)),i},CI=function(n,e,t){t||(t={});var r,i,s,a,c,u,d,p=[],g=[p],_=t.textIndent||0,w=0,P=0,O=n.split(" "),L=Iy.apply(this,[" ",t])[0];if(u=t.lineIndent===-1?O[0].length+2:t.lineIndent||0){var B=Array(u).join(" "),K=[];O.map(function(J){(J=J.split(/\s*\n/)).length>1?K=K.concat(J.map(function(ae,le){return(le&&ae.length?`
`:"")+ae})):K.push(J[0])}),O=K,u=SI.apply(this,[B,t])}for(s=0,a=O.length;s<a;s++){var W=0;if(r=O[s],u&&r[0]==`
`&&(r=r.substr(1),W=1),_+w+(P=(i=Iy.apply(this,[r,t])).reduce(function(J,ae){return J+ae},0))>e||W){if(P>e){for(c=II.apply(this,[r,i,e-(_+w),e]),p.push(c.shift()),p=[c.pop()];c.length;)g.push([c.shift()]);P=i.slice(r.length-(p[0]?p[0].length:0)).reduce(function(J,ae){return J+ae},0)}else p=[r];g.push(p),_=P+u,w=L}else p.push(r),_+=w+P,w=L}return d=u?function(J,ae){return(ae?B:"")+J.join(" ")}:function(J){return J.join(" ")},g.map(d)},Ef.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var g=this.internal.getFont(p.fontName,p.fontStyle),_="Unicode";return g.metadata[_]?{widths:g.metadata[_].widths||{0:1},kerning:g.metadata[_].kerning||{}}:{font:g.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/i;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=t.lineIndent;var c,u,d=[];for(c=0,u=r.length;c<u;c++)d=d.concat(CI.apply(this,[r[c],a,s]));return d},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",r={},i={},s=0;s<16;s++)r[t[s]]=e[s],i[e[s]]=t[s];var a=function(_){return"0x"+parseInt(_,10).toString(16)},c=n.__fontmetrics__.compress=function(_){var w,P,O,L,B=["{"];for(var K in _){if(w=_[K],isNaN(parseInt(K,10))?P="'"+K+"'":(K=parseInt(K,10),P=(P=a(K).slice(2)).slice(0,-1)+i[P.slice(-1)]),typeof w=="number")w<0?(O=a(w).slice(3),L="-"):(O=a(w).slice(2),L=""),O=L+O.slice(0,-1)+i[O.slice(-1)];else{if(ur(w)!=="object")throw new Error("Don't know what to do with value type "+ur(w)+".");O=c(w)}B.push(P+O)}return B.push("}"),B.join("")},u=n.__fontmetrics__.uncompress=function(_){if(typeof _!="string")throw new Error("Invalid argument passed to uncompress.");for(var w,P,O,L,B={},K=1,W=B,J=[],ae="",le="",U=_.length-1,C=1;C<U;C+=1)(L=_[C])=="'"?w?(O=w.join(""),w=void 0):w=[]:w?w.push(L):L=="{"?(J.push([W,O]),W={},O=void 0):L=="}"?((P=J.pop())[0][P[1]]=W,O=void 0,W=P[0]):L=="-"?K=-1:O===void 0?r.hasOwnProperty(L)?(ae+=r[L],O=parseInt(ae,16)*K,K=1,ae=""):ae+=L:r.hasOwnProperty(L)?(le+=r[L],W[O]=parseInt(le,16)*K,K=1,O=void 0,le=""):le+=L;return B},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:u("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},p={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},g={Unicode:{"Courier-Oblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":u("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":u("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:u("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:u("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":u("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":u("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(_){var w=_.font,P=g.Unicode[w.postScriptName];P&&(w.metadata.Unicode={},w.metadata.Unicode.widths=P.widths,w.metadata.Unicode.kerning=P.kerning);var O=p.Unicode[w.postScriptName];O&&(w.metadata.Unicode.encoding=O,w.encoding=O.codePages[0])}])})(zt.API),(function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=t.charCodeAt(s);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,s=t.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,c){c=/^\x00\x01\x00\x00/.test(c)?e(c):e($y(c)),a.metadata=n.API.TTFFont.open(c),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,r)}}])})(zt),zt.API.addSvgAsImage=function(n,e,t,r,i,s,a,c){if(isNaN(e)||isNaN(t))throw Nr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw Nr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=r,u.height=i;var d=u.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,u.width,u.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return(un.canvg?Promise.resolve(un.canvg):E2(()=>import("./index.es-zk6zZYfw.js"),[])).catch(function(_){return Promise.reject(new Error("Could not load canvg: "+_))}).then(function(_){return _.default?_.default:_}).then(function(_){return _.fromString(d,n,p)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(_){return _.render(p)}).then(function(){g.addImage(u.toDataURL("image/jpeg",1),e,t,r,i,a,c)})},zt.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},zt.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(a),u=[],d=0,p=0,g=0;function _(P,O){var L,B=!1;for(L=0;L<P.length;L+=1)P[L]===O&&(B=!0);return B}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var w=c.length;for(g=0;g<w;g+=1)t[c[g]].value=t[c[g]].defaultValue,t[c[g]].explicitSet=!1}if(ur(n)==="object"){for(i in n)if(s=n[i],_(c,i)&&s!==void 0){if(t[i].type==="boolean"&&typeof s=="boolean")t[i].value=s;else if(t[i].type==="name"&&_(t[i].valueSet,s))t[i].value=s;else if(t[i].type==="integer"&&Number.isInteger(s))t[i].value=s;else if(t[i].type==="array"){for(d=0;d<s.length;d+=1)if(r=!0,s[d].length===1&&typeof s[d][0]=="number")u.push(String(s[d]-1));else if(s[d].length>1){for(p=0;p<s[d].length;p+=1)typeof s[d][p]!="number"&&(r=!1);r===!0&&u.push([s[d][0]-1,s[d][1]-1].join(" "))}t[i].value="["+u.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var P,O=[];for(P in t)t[P].explicitSet===!0&&(t[P].type==="name"?O.push("/"+P+" /"+t[P].value):O.push("/"+P+" "+t[P].value));O.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+O.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),c=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),u=unescape(encodeURIComponent("</x:xmpmeta>")),d=s.length+a.length+c.length+i.length+u.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(i+s+a+c+u),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(zt.API),(function(n){var e=n.API,t=e.pdfEscape16=function(s,a){for(var c,u=a.metadata.Unicode.widths,d=["","0","00","000","0000"],p=[""],g=0,_=s.length;g<_;++g){if(c=a.metadata.characterToGlyph(s.charCodeAt(g)),a.metadata.glyIdsUsed.push(c),a.metadata.toUnicode[c]=s.charCodeAt(g),u.indexOf(c)==-1&&(u.push(c),u.push([parseInt(a.metadata.widthOfGlyph(c),10)])),c=="0")return p.join("");c=c.toString(16),p.push(d[4-c.length],c)}return p.join("")},r=function(s){var a,c,u,d,p,g,_;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,u=[],g=0,_=(c=Object.keys(s).sort(function(w,P){return w-P})).length;g<_;g++)a=c[g],u.length>=100&&(p+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar`,u=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(d=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),u.push("<"+a+"><"+d+">"));return u.length&&(p+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar
`),p+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(a){var c=a.font,u=a.out,d=a.newObject,p=a.putStream;if(c.metadata instanceof n.API.TTFFont&&c.encoding==="Identity-H"){for(var g=c.metadata.Unicode.widths,_=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),w="",P=0;P<_.length;P++)w+=String.fromCharCode(_[P]);var O=d();p({data:w,addLength1:!0,objectId:O}),u("endobj");var L=d();p({data:r(c.metadata.toUnicode),addLength1:!0,objectId:L}),u("endobj");var B=d();u("<<"),u("/Type /FontDescriptor"),u("/FontName /"+Rf(c.fontName)),u("/FontFile2 "+O+" 0 R"),u("/FontBBox "+n.API.PDFObject.convert(c.metadata.bbox)),u("/Flags "+c.metadata.flags),u("/StemV "+c.metadata.stemV),u("/ItalicAngle "+c.metadata.italicAngle),u("/Ascent "+c.metadata.ascender),u("/Descent "+c.metadata.decender),u("/CapHeight "+c.metadata.capHeight),u(">>"),u("endobj");var K=d();u("<<"),u("/Type /Font"),u("/BaseFont /"+Rf(c.fontName)),u("/FontDescriptor "+B+" 0 R"),u("/W "+n.API.PDFObject.convert(g)),u("/CIDToGIDMap /Identity"),u("/DW 1000"),u("/Subtype /CIDFontType2"),u("/CIDSystemInfo"),u("<<"),u("/Supplement 0"),u("/Registry (Adobe)"),u("/Ordering ("+c.encoding+")"),u(">>"),u(">>"),u("endobj"),c.objectNumber=d(),u("<<"),u("/Type /Font"),u("/Subtype /Type0"),u("/ToUnicode "+L+" 0 R"),u("/BaseFont /"+Rf(c.fontName)),u("/Encoding /"+c.encoding),u("/DescendantFonts ["+K+" 0 R]"),u(">>"),u("endobj"),c.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(a){var c=a.font,u=a.out,d=a.newObject,p=a.putStream;if(c.metadata instanceof n.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var g=c.metadata.rawData,_="",w=0;w<g.length;w++)_+=String.fromCharCode(g[w]);var P=d();p({data:_,addLength1:!0,objectId:P}),u("endobj");var O=d();p({data:r(c.metadata.toUnicode),addLength1:!0,objectId:O}),u("endobj");var L=d();u("<<"),u("/Descent "+c.metadata.decender),u("/CapHeight "+c.metadata.capHeight),u("/StemV "+c.metadata.stemV),u("/Type /FontDescriptor"),u("/FontFile2 "+P+" 0 R"),u("/Flags 96"),u("/FontBBox "+n.API.PDFObject.convert(c.metadata.bbox)),u("/FontName /"+Rf(c.fontName)),u("/ItalicAngle "+c.metadata.italicAngle),u("/Ascent "+c.metadata.ascender),u(">>"),u("endobj"),c.objectNumber=d();for(var B=0;B<c.metadata.hmtx.widths.length;B++)c.metadata.hmtx.widths[B]=parseInt(c.metadata.hmtx.widths[B]*(1e3/c.metadata.head.unitsPerEm));u("<</Subtype/TrueType/Type/Font/ToUnicode "+O+" 0 R/BaseFont/"+Rf(c.fontName)+"/FontDescriptor "+L+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),u("endobj"),c.isAlreadyPutted=!0}})(s)}]);var i=function(s){var a,c=s.text||"",u=s.x,d=s.y,p=s.options||{},g=s.mutex||{},_=g.pdfEscape,w=g.activeFontKey,P=g.fonts,O=w,L="",B=0,K="",W=P[O].encoding;if(P[O].encoding!=="Identity-H")return{text:c,x:u,y:d,options:p,mutex:g};for(K=c,O=w,Array.isArray(c)&&(K=c[0]),B=0;B<K.length;B+=1)P[O].metadata.hasOwnProperty("cmap")&&(a=P[O].metadata.cmap.unicode.codeMap[K[B].charCodeAt(0)]),a||K[B].charCodeAt(0)<256&&P[O].metadata.hasOwnProperty("Unicode")?L+=K[B]:L+="";var J="";return parseInt(O.slice(1))<14||W==="WinAnsiEncoding"?J=_(L,O).split("").map(function(ae){return ae.charCodeAt(0).toString(16)}).join(""):W==="Identity-H"&&(J=t(L,P[O])),g.isHex=!0,{text:J,x:u,y:d,options:p,mutex:g}};e.events.push(["postProcessText",function(s){var a=s.text||"",c=[],u={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var d=0;for(d=0;d<a.length;d+=1)Array.isArray(a[d])&&a[d].length===3?c.push([i(Object.assign({},u,{text:a[d][0]})).text,a[d][1],a[d][2]]):c.push(i(Object.assign({},u,{text:a[d]})).text);s.text=c}else s.text=i(Object.assign({},u,{text:a})).text}])})(zt),(function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(zt.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,s,a,c,u,d,p,g=e,_=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],w=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],P={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},O={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},L=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],B=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),K=!1,W=0;this.__bidiEngine__={};var J=function(S){var k=S.charCodeAt(),M=k>>8,Q=O[M];return Q!==void 0?g[256*Q+(255&k)]:M===252||M===253?"AL":B.test(M)?"L":M===8?"R":"N"},ae=function(S){for(var k,M=0;M<S.length;M++){if((k=J(S.charAt(M)))==="L")return!1;if(k==="R")return!0}return!1},le=function(S,k,M,Q){var pe,se,ve,me,Se=k[Q];switch(Se){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":K=!1;break;case"N":case"AN":break;case"EN":K&&(Se="AN");break;case"AL":K=!0,Se="R";break;case"WS":case"BN":Se="N";break;case"CS":Q<1||Q+1>=k.length||(pe=M[Q-1])!=="EN"&&pe!=="AN"||(se=k[Q+1])!=="EN"&&se!=="AN"?Se="N":K&&(se="AN"),Se=se===pe?se:"N";break;case"ES":Se=(pe=Q>0?M[Q-1]:"B")==="EN"&&Q+1<k.length&&k[Q+1]==="EN"?"EN":"N";break;case"ET":if(Q>0&&M[Q-1]==="EN"){Se="EN";break}if(K){Se="N";break}for(ve=Q+1,me=k.length;ve<me&&k[ve]==="ET";)ve++;Se=ve<me&&k[ve]==="EN"?"EN":"N";break;case"NSM":if(a&&!c){for(me=k.length,ve=Q+1;ve<me&&k[ve]==="NSM";)ve++;if(ve<me){var Ve=S[Q],ne=Ve>=1425&&Ve<=2303||Ve===64286;if(pe=k[ve],ne&&(pe==="R"||pe==="AL")){Se="R";break}}}Se=Q<1||(pe=k[Q-1])==="B"?"N":M[Q-1];break;case"B":K=!1,i=!0,Se=W;break;case"S":s=!0,Se="N"}return Se},U=function(S,k,M){var Q=S.split("");return M&&C(Q,M,{hiLevel:W}),Q.reverse(),k&&k.reverse(),Q.join("")},C=function(S,k,M){var Q,pe,se,ve,me,Se=-1,Ve=S.length,ne=0,H=[],te=W?w:_,Y=[];for(K=!1,i=!1,s=!1,pe=0;pe<Ve;pe++)Y[pe]=J(S[pe]);for(se=0;se<Ve;se++){if(me=ne,H[se]=le(S,Y,H,se),Q=240&(ne=te[me][P[H[se]]]),ne&=15,k[se]=ve=te[ne][5],Q>0)if(Q===16){for(pe=Se;pe<se;pe++)k[pe]=1;Se=-1}else Se=-1;if(te[ne][6])Se===-1&&(Se=se);else if(Se>-1){for(pe=Se;pe<se;pe++)k[pe]=ve;Se=-1}Y[se]==="B"&&(k[se]=0),M.hiLevel|=ve}s&&(function(fe,ge,xe){for(var we=0;we<xe;we++)if(fe[we]==="S"){ge[we]=W;for(var Ie=we-1;Ie>=0&&fe[Ie]==="WS";Ie--)ge[Ie]=W}})(Y,k,Ve)},N=function(S,k,M,Q,pe){if(!(pe.hiLevel<S)){if(S===1&&W===1&&!i)return k.reverse(),void(M&&M.reverse());for(var se,ve,me,Se,Ve=k.length,ne=0;ne<Ve;){if(Q[ne]>=S){for(me=ne+1;me<Ve&&Q[me]>=S;)me++;for(Se=ne,ve=me-1;Se<ve;Se++,ve--)se=k[Se],k[Se]=k[ve],k[ve]=se,M&&(se=M[Se],M[Se]=M[ve],M[ve]=se);ne=me}ne++}}},F=function(S,k,M){var Q=S.split(""),pe={hiLevel:W};return M||(M=[]),C(Q,M,pe),(function(se,ve,me){if(me.hiLevel!==0&&p)for(var Se,Ve=0;Ve<se.length;Ve++)ve[Ve]===1&&(Se=L.indexOf(se[Ve]))>=0&&(se[Ve]=L[Se+1])})(Q,M,pe),N(2,Q,k,M,pe),N(1,Q,k,M,pe),Q.join("")};return this.__bidiEngine__.doBidiReorder=function(S,k,M){if((function(pe,se){if(se)for(var ve=0;ve<pe.length;ve++)se[ve]=ve;c===void 0&&(c=ae(pe)),d===void 0&&(d=ae(pe))})(S,k),a||!u||d)if(a&&u&&c^d)W=c?1:0,S=U(S,k,M);else if(!a&&u&&d)W=c?1:0,S=F(S,k,M),S=U(S,k);else if(!a||c||u||d){if(a&&!u&&c^d)S=U(S,k),c?(W=0,S=F(S,k,M)):(W=1,S=F(S,k,M),S=U(S,k));else if(a&&c&&!u&&d)W=1,S=F(S,k,M),S=U(S,k);else if(!a&&!u&&c^d){var Q=p;c?(W=1,S=F(S,k,M),W=0,p=!1,S=F(S,k,M),p=Q):(W=0,S=F(S,k,M),S=U(S,k),W=1,p=!1,S=F(S,k,M),p=Q,S=U(S,k))}}else W=0,S=F(S,k,M);else W=c?1:0,S=F(S,k,M);return S},this.__bidiEngine__.setOptions=function(S){S&&(a=S.isInputVisual,u=S.isOutputVisual,c=S.isInputRtl,d=S.isOutputRtl,p=S.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var s=r.options||{};r.mutex,s.lang;var a=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var c=0;for(a=[],c=0;c<i.length;c+=1)Object.prototype.toString.call(i[c])==="[object Array]"?a.push([t.doBidiReorder(i[c][0]),i[c][1],i[c][2]]):a.push([t.doBidiReorder(i[c])]);r.text=a}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])})(zt),zt.API.TTFFont=(function(){function n(e){var t;if(this.rawData=e,t=this.contents=new ud(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new nW(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new qY(this.contents),this.head=new HY(this),this.name=new KY(this),this.cmap=new oD(this),this.toUnicode={},this.hhea=new zY(this),this.maxp=new JY(this),this.hmtx=new QY(this),this.post=new YY(this),this.os2=new $Y(this),this.loca=new tW(this),this.glyf=new XY(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,c,u,d;for(d=[],a=0,c=(u=this.bbox).length;a<c;a++)e=u[a],d.push(Math.round(e*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,s,a,c;for(a=0,s=0,c=(e=""+e).length;0<=c?s<c:s>c;s=0<=c?++s:--s)i=e.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return a*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n})();var gl,ud=(function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,s,a,c,u;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),c=this.readByte(),u=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^a)+256*(255^c)+(255^u)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*s+65536*a+256*c+u},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)t=e[r],s.push(this.writeByte(t));return s},n})(),qY=(function(){var n;function e(t){var r,i,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,s,a,c,u,d,p,g,_,w,P,O;for(O in w=Object.keys(t).length,u=Math.log(2),g=16*Math.floor(Math.log(w)/u),a=Math.floor(g/u),p=16*w-g,(i=new ud).writeInt(this.scalarType),i.writeShort(w),i.writeShort(g),i.writeShort(a),i.writeShort(p),s=16*w,d=i.pos+s,c=null,P=[],t)for(_=t[O],i.writeString(O),i.writeInt(n(_)),i.writeInt(d),i.writeInt(_.length),P=P.concat(_),O==="head"&&(c=d),d+=_.length;d%4;)P.push(0),d++;return i.write(P),r=2981146554-n(i.data),i.pos=c+8,i.writeUInt32(r),i.data},n=function(t){var r,i,s,a;for(t=aD.call(t);t.length%4;)t.push(0);for(s=new ud(t),i=0,r=0,a=t.length;r<a;r=r+=4)i+=s.readUInt32();return 4294967295&i},e})(),GY={}.hasOwnProperty,ic=function(n,e){for(var t in e)GY.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};gl=(function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var HY=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ic(n,gl),n.prototype.tag="head",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},n.prototype.encode=function(e){var t;return(t=new ud).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},n})(),UI=(function(){function n(e,t){var r,i,s,a,c,u,d,p,g,_,w,P,O,L,B,K,W;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),g=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(u=0;u<256;++u)this.codeMap[u]=e.readByte();break;case 4:for(w=e.readUInt16(),_=w/2,e.pos+=6,s=(function(){var J,ae;for(ae=[],u=J=0;0<=_?J<_:J>_;u=0<=_?++J:--J)ae.push(e.readUInt16());return ae})(),e.pos+=2,O=(function(){var J,ae;for(ae=[],u=J=0;0<=_?J<_:J>_;u=0<=_?++J:--J)ae.push(e.readUInt16());return ae})(),d=(function(){var J,ae;for(ae=[],u=J=0;0<=_?J<_:J>_;u=0<=_?++J:--J)ae.push(e.readUInt16());return ae})(),p=(function(){var J,ae;for(ae=[],u=J=0;0<=_?J<_:J>_;u=0<=_?++J:--J)ae.push(e.readUInt16());return ae})(),i=(this.length-e.pos+this.offset)/2,c=(function(){var J,ae;for(ae=[],u=J=0;0<=i?J<i:J>i;u=0<=i?++J:--J)ae.push(e.readUInt16());return ae})(),u=B=0,W=s.length;B<W;u=++B)for(L=s[u],r=K=P=O[u];P<=L?K<=L:K>=L;r=P<=L?++K:--K)p[u]===0?a=r+d[u]:(a=c[p[u]/2+(r-P)-(_-u)]||0)!==0&&(a+=d[u]),this.codeMap[r]=65535&a}e.pos=g}return n.encode=function(e,t){var r,i,s,a,c,u,d,p,g,_,w,P,O,L,B,K,W,J,ae,le,U,C,N,F,S,k,M,Q,pe,se,ve,me,Se,Ve,ne,H,te,Y,fe,ge,xe,we,Ie,Ge,Qe,it;switch(Q=new ud,a=Object.keys(e).sort(function(dt,vt){return dt-vt}),t){case"macroman":for(O=0,L=(function(){var dt=[];for(P=0;P<256;++P)dt.push(0);return dt})(),K={0:0},s={},pe=0,Se=a.length;pe<Se;pe++)K[Ie=e[i=a[pe]]]==null&&(K[Ie]=++O),s[i]={old:e[i],new:K[e[i]]},L[i]=K[e[i]];return Q.writeUInt16(1),Q.writeUInt16(0),Q.writeUInt32(12),Q.writeUInt16(0),Q.writeUInt16(262),Q.writeUInt16(0),Q.write(L),{charMap:s,subtable:Q.data,maxGlyphID:O+1};case"unicode":for(k=[],g=[],W=0,K={},r={},B=d=null,se=0,Ve=a.length;se<Ve;se++)K[ae=e[i=a[se]]]==null&&(K[ae]=++W),r[i]={old:ae,new:K[ae]},c=K[ae]-i,B!=null&&c===d||(B&&g.push(B),k.push(i),d=c),B=i;for(B&&g.push(B),g.push(65535),k.push(65535),F=2*(N=k.length),C=2*Math.pow(Math.log(N)/Math.LN2,2),_=Math.log(C/2)/Math.LN2,U=2*N-C,u=[],le=[],w=[],P=ve=0,ne=k.length;ve<ne;P=++ve){if(S=k[P],p=g[P],S===65535){u.push(0),le.push(0);break}if(S-(M=r[S].new)>=32768)for(u.push(0),le.push(2*(w.length+N-P)),i=me=S;S<=p?me<=p:me>=p;i=S<=p?++me:--me)w.push(r[i].new);else u.push(M-S),le.push(0)}for(Q.writeUInt16(3),Q.writeUInt16(1),Q.writeUInt32(12),Q.writeUInt16(4),Q.writeUInt16(16+8*N+2*w.length),Q.writeUInt16(0),Q.writeUInt16(F),Q.writeUInt16(C),Q.writeUInt16(_),Q.writeUInt16(U),xe=0,H=g.length;xe<H;xe++)i=g[xe],Q.writeUInt16(i);for(Q.writeUInt16(0),we=0,te=k.length;we<te;we++)i=k[we],Q.writeUInt16(i);for(Ge=0,Y=u.length;Ge<Y;Ge++)c=u[Ge],Q.writeUInt16(c);for(Qe=0,fe=le.length;Qe<fe;Qe++)J=le[Qe],Q.writeUInt16(J);for(it=0,ge=w.length;it<ge;it++)O=w[it],Q.writeUInt16(O);return{charMap:r,subtable:Q.data,maxGlyphID:W+1}}},n})(),oD=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ic(n,gl),n.prototype.tag="cmap",n.prototype.parse=function(e){var t,r,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)t=new UI(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},n.encode=function(e,t){var r,i;return t==null&&(t="macroman"),r=UI.encode(e,t),(i=new ud).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},n})(),zY=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ic(n,gl),n.prototype.tag="hhea",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},n})(),$Y=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ic(n,gl),n.prototype.tag="OS/2",n.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,r;for(r=[],t=0;t<10;++t)r.push(e.readByte());return r})(),this.charRange=(function(){var t,r;for(r=[],t=0;t<4;++t)r.push(e.readInt());return r})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,r;for(r=[],t=0;t<2;t=++t)r.push(e.readInt());return r})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},n})(),YY=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ic(n,gl),n.prototype.tag="post",n.prototype.parse=function(e){var t,r,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(r=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)t=e.readByte(),i.push(this.names.push(e.readString(t)));return i;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var a,c,u;for(u=[],s=a=0,c=this.file.maxp.numGlyphs;0<=c?a<c:a>c;s=0<=c?++a:--a)u.push(e.readUInt32());return u}).call(this)}},n})(),WY=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},KY=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ic(n,gl),n.prototype.tag="name",n.prototype.parse=function(e){var t,r,i,s,a,c,u,d,p,g,_;for(e.pos=this.offset,e.readShort(),t=e.readShort(),c=e.readShort(),r=[],s=0;0<=t?s<t:s>t;s=0<=t?++s:--s)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+c+e.readShort()});for(u={},s=p=0,g=r.length;p<g;s=++p)i=r[s],e.pos=i.offset,d=e.readString(i.length),a=new WY(d,i),u[_=i.nameID]==null&&(u[_]=[]),u[i.nameID].push(a);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},n})(),JY=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ic(n,gl),n.prototype.tag="maxp",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},n})(),QY=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ic(n,gl),n.prototype.tag="hmtx",n.prototype.parse=function(e){var t,r,i,s,a,c,u;for(e.pos=this.offset,this.metrics=[],t=0,c=this.file.hhea.numberOfMetrics;0<=c?t<c:t>c;t=0<=c?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var d,p;for(p=[],t=d=0;0<=i?d<i:d>i;t=0<=i?++d:--d)p.push(e.readInt16());return p})(),this.widths=(function(){var d,p,g,_;for(_=[],d=0,p=(g=this.metrics).length;d<p;d++)s=g[d],_.push(s.advance);return _}).call(this),r=this.widths[this.widths.length-1],u=[],t=a=0;0<=i?a<i:a>i;t=0<=i?++a:--a)u.push(this.widths.push(r));return u},n.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},n})(),aD=[].slice,XY=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ic(n,gl),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(e){var t,r,i,s,a,c,u,d,p,g;return e in this.cache?this.cache[e]:(s=this.file.loca,t=this.file.contents,r=s.indexOf(e),(i=s.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+r,a=(c=new ud(t.read(i))).readShort(),d=c.readShort(),g=c.readShort(),u=c.readShort(),p=c.readShort(),this.cache[e]=a===-1?new eW(c,d,g,u,p):new ZY(c,a,d,g,u,p),this.cache[e]))},n.prototype.encode=function(e,t,r){var i,s,a,c,u;for(a=[],s=[],c=0,u=t.length;c<u;c++)i=e[t[c]],s.push(a.length),i&&(a=a.concat(i.encode(r)));return s.push(a.length),{table:a,offsets:s}},n})(),ZY=(function(){function n(e,t,r,i,s,a){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),eW=(function(){function n(e,t,r,i,s){var a,c;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;c=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&c;)a.pos+=1&c?4:2,128&c?a.pos+=8:64&c?a.pos+=4:8&c&&(a.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new ud(aD.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n})(),tW=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ic(n,gl),n.prototype.tag="loca",n.prototype.parse=function(e){var t,r;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var i,s;for(s=[],r=0,i=this.length;r<i;r+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var i,s;for(s=[],r=0,i=this.length;r<i;r+=4)s.push(e.readUInt32());return s}).call(this)},n.prototype.indexOf=function(e){return this.offsets[e]},n.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},n.prototype.encode=function(e,t){for(var r=new Uint32Array(this.offsets.length),i=0,s=0,a=0;a<r.length;++a)if(r[a]=i,s<t.length&&t[s]==a){++s,r[a]=i;var c=this.offsets[a],u=this.offsets[a+1]-c;u>0&&(i+=u)}for(var d=new Array(4*r.length),p=0;p<r.length;++p)d[4*p+3]=255&r[p],d[4*p+2]=(65280&r[p])>>8,d[4*p+1]=(16711680&r[p])>>16,d[4*p]=(4278190080&r[p])>>24;return d},n})(),nW=(function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,s;for(t in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,s,a,c,u;for(i={},a=0,c=e.length;a<c;a++)i[s=e[a]]=this.font.glyf.glyphFor(s);for(s in t=[],i)(r=i[s])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(s in u=this.glyphsFor(t))r=u[s],i[s]=r;return i},n.prototype.encode=function(e,t){var r,i,s,a,c,u,d,p,g,_,w,P,O,L,B;for(i in r=oD.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),w={0:0},B=r.charMap)w[(u=B[i]).old]=u.new;for(P in _=r.maxGlyphID,a)P in w||(w[P]=_++);return p=(function(K){var W,J;for(W in J={},K)J[K[W]]=W;return J})(w),g=Object.keys(p).sort(function(K,W){return K-W}),O=(function(){var K,W,J;for(J=[],K=0,W=g.length;K<W;K++)c=g[K],J.push(p[c]);return J})(),s=this.font.glyf.encode(a,O,w),d=this.font.loca.encode(s.offsets,O),L={cmap:this.font.cmap.raw(),glyf:s.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(L["OS/2"]=this.font.os2.raw()),this.font.directory.encode(L)},n})();zt.API.PDFObject=(function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,s,a;if(Array.isArray(t))return"["+(function(){var c,u,d;for(d=[],c=0,u=t.length;c<u;c++)r=t[c],d.push(e.convert(r));return d})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in s=["<<"],t)a=t[i],s.push("/"+i+" "+e.convert(a));return s.push(">>"),s.join(`
`)}return""+t},e})();function lD(n,e,t,r,i){r=r||{};var s=1.15,a=i.internal.scaleFactor,c=i.internal.getFontSize()/a,u=i.getLineHeightFactor?i.getLineHeightFactor():s,d=c*u,p=/\r\n|\r|\n/g,g="",_=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(g=typeof n=="string"?n.split(p):n,_=g.length||1),t+=c*(2-s),r.valign==="middle"?t-=_/2*d:r.valign==="bottom"&&(t-=_*d),r.halign==="center"||r.halign==="right"){var w=c;if(r.halign==="center"&&(w*=.5),g&&_>=1){for(var P=0;P<g.length;P++)i.text(g[P],e-i.getStringUnitWidth(g[P])*w,t),t+=d;return i}e-=i.getStringUnitWidth(n)*w}return r.halign==="justify"?i.text(n,e,t,{maxWidth:r.maxWidth||100,align:"justify"}):i.text(n,e,t),i}var jI={},Hf=(function(){function n(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return n.setDefaults=function(e,t){t===void 0&&(t=null),t?t.__autoTableDocumentDefaults=e:jI=e},n.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},n.prototype.applyStyles=function(e,t){var r,i,s;t===void 0&&(t=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var a=this.jsPDFDocument.internal.getFont(),c=a.fontStyle,u=a.fontName;if(e.font&&(u=e.font),e.fontStyle){c=e.fontStyle;var d=this.getFontList()[u];d&&d.indexOf(c)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(d[0]),c=d[0])}if(this.jsPDFDocument.setFont(u,c),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!t){var p=n.unifyColor(e.fillColor);p&&(r=this.jsPDFDocument).setFillColor.apply(r,p),p=n.unifyColor(e.textColor),p&&(i=this.jsPDFDocument).setTextColor.apply(i,p),p=n.unifyColor(e.lineColor),p&&(s=this.jsPDFDocument).setDrawColor.apply(s,p),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},n.prototype.splitTextToSize=function(e,t,r){return this.jsPDFDocument.splitTextToSize(e,t,r)},n.prototype.rect=function(e,t,r,i,s){return this.jsPDFDocument.rect(e,t,r,i,s)},n.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},n.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},n.prototype.getDocument=function(){return this.jsPDFDocument},n.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},n.prototype.addPage=function(){return this.jsPDFDocument.addPage()},n.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},n.prototype.getGlobalOptions=function(){return jI||{}},n.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},n.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},n.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},n.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},n.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},n.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},n})(),Zb=function(n,e){return Zb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},Zb(n,e)};function cD(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Zb(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var uD=(function(n){cD(e,n);function e(t){var r=n.call(this)||this;return r._element=t,r}return e})(Array);function rW(n){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/n,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function iW(n){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[n]}function Rv(n,e,t){t.applyStyles(e,!0);var r=Array.isArray(n)?n:[n],i=r.map(function(s){return t.getTextWidth(s)}).reduce(function(s,a){return Math.max(s,a)},0);return i}function dD(n,e,t,r){var i=e.settings.tableLineWidth,s=e.settings.tableLineColor;n.applyStyles({lineWidth:i,lineColor:s});var a=hD(i,!1);a&&n.rect(t.x,t.y,e.getWidth(n.pageSize().width),r.y-t.y,a)}function hD(n,e){var t=n>0,r=e||e===0;return t&&r?"DF":t?"S":r?"F":null}function I1(n,e){var t,r,i,s;if(n=n||e,Array.isArray(n)){if(n.length>=4)return{top:n[0],right:n[1],bottom:n[2],left:n[3]};if(n.length===3)return{top:n[0],right:n[1],bottom:n[2],left:n[1]};if(n.length===2)return{top:n[0],right:n[1],bottom:n[0],left:n[1]};n.length===1?n=n[0]:n=e}return typeof n=="object"?(typeof n.vertical=="number"&&(n.top=n.vertical,n.bottom=n.vertical),typeof n.horizontal=="number"&&(n.right=n.horizontal,n.left=n.horizontal),{left:(t=n.left)!==null&&t!==void 0?t:e,top:(r=n.top)!==null&&r!==void 0?r:e,right:(i=n.right)!==null&&i!==void 0?i:e,bottom:(s=n.bottom)!==null&&s!==void 0?s:e}):(typeof n!="number"&&(n=e),{top:n,right:n,bottom:n,left:n})}function fD(n,e){var t=I1(e.settings.margin,0);return n.pageSize().width-(t.left+t.right)}function sW(n,e,t,r,i){var s={},a=1.3333333333333333,c=z2(e,function(W){return i.getComputedStyle(W).backgroundColor});c!=null&&(s.fillColor=c);var u=z2(e,function(W){return i.getComputedStyle(W).color});u!=null&&(s.textColor=u);var d=aW(r,t);d&&(s.cellPadding=d);var p="borderTopColor",g=a*t,_=r.borderTopWidth;if(r.borderBottomWidth===_&&r.borderRightWidth===_&&r.borderLeftWidth===_){var w=(parseFloat(_)||0)/g;w&&(s.lineWidth=w)}else s.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/g,right:(parseFloat(r.borderRightWidth)||0)/g,bottom:(parseFloat(r.borderBottomWidth)||0)/g,left:(parseFloat(r.borderLeftWidth)||0)/g},s.lineWidth.top||(s.lineWidth.right?p="borderRightColor":s.lineWidth.bottom?p="borderBottomColor":s.lineWidth.left&&(p="borderLeftColor"));var P=z2(e,function(W){return i.getComputedStyle(W)[p]});P!=null&&(s.lineColor=P);var O=["left","right","center","justify"];O.indexOf(r.textAlign)!==-1&&(s.halign=r.textAlign),O=["middle","bottom","top"],O.indexOf(r.verticalAlign)!==-1&&(s.valign=r.verticalAlign);var L=parseInt(r.fontSize||"");isNaN(L)||(s.fontSize=L/a);var B=oW(r);B&&(s.fontStyle=B);var K=(r.fontFamily||"").toLowerCase();return n.indexOf(K)!==-1&&(s.font=K),s}function oW(n){var e="";return(n.fontWeight==="bold"||n.fontWeight==="bolder"||parseInt(n.fontWeight)>=700)&&(e="bold"),(n.fontStyle==="italic"||n.fontStyle==="oblique")&&(e+="italic"),e}function z2(n,e){var t=pD(n,e);if(!t)return null;var r=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var i=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],s=parseInt(r[4]);return s===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function pD(n,e){var t=e(n);return t==="rgba(0, 0, 0, 0)"||t==="transparent"||t==="initial"||t==="inherit"?n.parentElement==null?null:pD(n.parentElement,e):t}function aW(n,e){var t=[n.paddingTop,n.paddingRight,n.paddingBottom,n.paddingLeft],r=96/(72/e),i=(parseInt(n.lineHeight)-parseInt(n.fontSize))/e/2,s=t.map(function(c){return parseInt(c||"0")/r}),a=I1(s,0);return i>a.top&&(a.top=i),i>a.bottom&&(a.bottom=i),a}function mD(n,e,t,r,i){var s,a;r===void 0&&(r=!1),i===void 0&&(i=!1);var c;typeof e=="string"?c=t.document.querySelector(e):c=e;var u=Object.keys(n.getFontList()),d=n.scaleFactor(),p=[],g=[],_=[];if(!c)return console.error("Html table could not be found with input: ",e),{head:p,body:g,foot:_};for(var w=0;w<c.rows.length;w++){var P=c.rows[w],O=(a=(s=P==null?void 0:P.parentElement)===null||s===void 0?void 0:s.tagName)===null||a===void 0?void 0:a.toLowerCase(),L=lW(u,d,t,P,r,i);L&&(O==="thead"?p.push(L):O==="tfoot"?_.push(L):g.push(L))}return{head:p,body:g,foot:_}}function lW(n,e,t,r,i,s){for(var a=new uD(r),c=0;c<r.cells.length;c++){var u=r.cells[c],d=t.getComputedStyle(u);if(i||d.display!=="none"){var p=void 0;s&&(p=sW(n,u,e,d,t)),a.push({rowSpan:u.rowSpan,colSpan:u.colSpan,styles:p,_element:u,content:cW(u)})}}var g=t.getComputedStyle(r);if(a.length>0&&(i||g.display!=="none"))return a}function cW(n){var e=n.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join(`
`),e.innerText||e.textContent||""}function uW(n,e,t){for(var r=0,i=[n,e,t];r<i.length;r++){var s=i[r];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function Oc(n,e,t,r,i){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(n),a=1;a<arguments.length;a++){var c=arguments[a];if(c!=null)for(var u in c)Object.prototype.hasOwnProperty.call(c,u)&&(s[u]=c[u])}return s}function dW(n,e){var t=new Hf(n),r=t.getDocumentOptions(),i=t.getGlobalOptions();uW(i,r,e);var s=Oc({},i,r,e),a;typeof window<"u"&&(a=window);var c=hW(i,r,e),u=fW(i,r,e),d=pW(t,s),p=gW(t,s,a);return{id:e.tableId,content:p,hooks:u,styles:c,settings:d}}function hW(n,e,t){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(u){if(u==="columnStyles"){var d=n[u],p=e[u],g=t[u];r.columnStyles=Oc({},d,p,g)}else{var _=[n,e,t],w=_.map(function(P){return P[u]||{}});r[u]=Oc({},w[0],w[1],w[2])}},s=0,a=Object.keys(r);s<a.length;s++){var c=a[s];i(c)}return r}function fW(n,e,t){for(var r=[n,e,t],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,a=r;s<a.length;s++){var c=a[s];c.didParseCell&&i.didParseCell.push(c.didParseCell),c.willDrawCell&&i.willDrawCell.push(c.willDrawCell),c.didDrawCell&&i.didDrawCell.push(c.didDrawCell),c.willDrawPage&&i.willDrawPage.push(c.willDrawPage),c.didDrawPage&&i.didDrawPage.push(c.didDrawPage)}return i}function pW(n,e){var t,r,i,s,a,c,u,d,p,g,_,w,P=I1(e.margin,40/n.scaleFactor()),O=(t=mW(n,e.startY))!==null&&t!==void 0?t:P.top,L;e.showFoot===!0?L="everyPage":e.showFoot===!1?L="never":L=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var B;e.showHead===!0?B="everyPage":e.showHead===!1?B="never":B=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var K=(s=e.useCss)!==null&&s!==void 0?s:!1,W=e.theme||(K?"plain":"striped"),J=!!e.horizontalPageBreak,ae=(a=e.horizontalPageBreakRepeat)!==null&&a!==void 0?a:null;return{includeHiddenHtml:(c=e.includeHiddenHtml)!==null&&c!==void 0?c:!1,useCss:K,theme:W,startY:O,margin:P,pageBreak:(u=e.pageBreak)!==null&&u!==void 0?u:"auto",rowPageBreak:(d=e.rowPageBreak)!==null&&d!==void 0?d:"auto",tableWidth:(p=e.tableWidth)!==null&&p!==void 0?p:"auto",showHead:B,showFoot:L,tableLineWidth:(g=e.tableLineWidth)!==null&&g!==void 0?g:0,tableLineColor:(_=e.tableLineColor)!==null&&_!==void 0?_:200,horizontalPageBreak:J,horizontalPageBreakRepeat:ae,horizontalPageBreakBehaviour:(w=e.horizontalPageBreakBehaviour)!==null&&w!==void 0?w:"afterAllRows"}}function mW(n,e){var t=n.getLastAutoTable(),r=n.scaleFactor(),i=n.pageNumber(),s=!1;if(t&&t.startPageNumber){var a=t.startPageNumber+t.pageNumber-1;s=a===i}return typeof e=="number"?e:(e==null||e===!1)&&s&&(t==null?void 0:t.finalY)!=null?t.finalY+20/r:null}function gW(n,e,t){var r=e.head||[],i=e.body||[],s=e.foot||[];if(e.html){var a=e.includeHiddenHtml;if(t){var c=mD(n,e.html,t,a,e.useCss)||{};r=c.head||r,i=c.body||r,s=c.foot||r}else console.error("Cannot parse html in non browser environment")}var u=e.columns||yW(r,i,s);return{columns:u,head:r,body:i,foot:s}}function yW(n,e,t){var r=n[0]||e[0]||t[0]||[],i=[];return Object.keys(r).filter(function(s){return s!=="_element"}).forEach(function(s){var a=1,c;Array.isArray(r)?c=r[parseInt(s)]:c=r[s],typeof c=="object"&&!Array.isArray(c)&&(a=(c==null?void 0:c.colSpan)||1);for(var u=0;u<a;u++){var d=void 0;Array.isArray(r)?d=i.length:d=s+(u>0?"_".concat(u):"");var p={dataKey:d};i.push(p)}}),i}var ex=(function(){function n(e,t,r){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=r,this.doc=e.getDocument()}return n})(),vW=(function(n){cD(e,n);function e(t,r,i,s,a,c){var u=n.call(this,t,r,c)||this;return u.cell=i,u.row=s,u.column=a,u.section=s.section,u}return e})(ex),_W=(function(){function n(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return n.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},n.prototype.callCellHooks=function(e,t,r,i,s,a){for(var c=0,u=t;c<u.length;c++){var d=u[c],p=new vW(e,this,r,i,s,a),g=d(p)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],g)return!1}return!0},n.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var r=0,i=this.hooks.didDrawPage;r<i.length;r++){var s=i[r];s(new ex(e,this,t))}},n.prototype.callWillDrawPageHooks=function(e,t){for(var r=0,i=this.hooks.willDrawPage;r<i.length;r++){var s=i[r];s(new ex(e,this,t))}},n.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(i,s){return i+s.wrappedWidth},0);return t}else{var r=this.settings.margin;return e-r.left-r.right}},n})(),gD=(function(){function n(e,t,r,i,s){s===void 0&&(s=!1),this.height=0,this.raw=e,e instanceof uD&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=r,this.cells=i,this.spansMultiplePages=s}return n.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(r,i){var s;return Math.max(r,((s=t.cells[i.index])===null||s===void 0?void 0:s.height)||0)},0)},n.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(r){var i=t.cells[r.index];return i?i.rowSpan>1:!1}).length>0},n.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},n.prototype.getMinimumRowHeight=function(e,t){var r=this;return e.reduce(function(i,s){var a=r.cells[s.index];if(!a)return 0;var c=t.getLineHeight(a.styles.fontSize),u=a.padding("vertical"),d=u+c;return d>i?d:i},0)},n})(),yD=(function(){function n(e,t,r){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=r,this.raw=e;var s=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,s=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var a=s!=null?""+s:"",c=/\r\n|\r|\n/g;this.text=a.split(c)}return n.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");e=this.y+t/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");r=this.x+i/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},n.prototype.getContentHeight=function(e,t){t===void 0&&(t=1.15);var r=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*t,s=r*i+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},n.prototype.padding=function(e){var t=I1(this.styles.cellPadding,0);return e==="vertical"?t.top+t.bottom:e==="horizontal"?t.left+t.right:t[e]},n})(),bW=(function(){function n(e,t,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=r}return n.prototype.getMaxCustomCellWidth=function(e){for(var t=0,r=0,i=e.allRows();r<i.length;r++){var s=i[r],a=s.cells[this.index];a&&typeof a.styles.cellWidth=="number"&&(t=Math.max(t,a.styles.cellWidth))}return t},n})();function xW(n,e){wW(n,e);var t=[],r=0;e.columns.forEach(function(s){var a=s.getMaxCustomCellWidth(e);a?s.width=a:(s.width=s.wrappedWidth,t.push(s)),r+=s.width});var i=e.getWidth(n.pageSize().width)-r;i&&(i=tx(t,i,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),i&&(i=tx(t,i,function(s){return s.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/n.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),TW(e),AW(e,n),EW(e)}function wW(n,e){var t=n.scaleFactor(),r=e.settings.horizontalPageBreak,i=fD(n,e);e.allRows().forEach(function(s){for(var a=0,c=e.columns;a<c.length;a++){var u=c[a],d=s.cells[u.index];if(d){var p=e.hooks.didParseCell;e.callCellHooks(n,p,d,s,u,null);var g=d.padding("horizontal");d.contentWidth=Rv(d.text,d.styles,n)+g;var _=Rv(d.text.join(" ").split(/[^\S\u00A0]+/),d.styles,n);if(d.minReadableWidth=_+d.padding("horizontal"),typeof d.styles.cellWidth=="number")d.minWidth=d.styles.cellWidth,d.wrappedWidth=d.styles.cellWidth;else if(d.styles.cellWidth==="wrap"||r===!0)d.contentWidth>i?(d.minWidth=i,d.wrappedWidth=i):(d.minWidth=d.contentWidth,d.wrappedWidth=d.contentWidth);else{var w=10/t;d.minWidth=d.styles.minCellWidth||w,d.wrappedWidth=d.contentWidth,d.minWidth>d.wrappedWidth&&(d.wrappedWidth=d.minWidth)}}}}),e.allRows().forEach(function(s){for(var a=0,c=e.columns;a<c.length;a++){var u=c[a],d=s.cells[u.index];if(d&&d.colSpan===1)u.wrappedWidth=Math.max(u.wrappedWidth,d.wrappedWidth),u.minWidth=Math.max(u.minWidth,d.minWidth),u.minReadableWidth=Math.max(u.minReadableWidth,d.minReadableWidth);else{var p=e.styles.columnStyles[u.dataKey]||e.styles.columnStyles[u.index]||{},g=p.cellWidth||p.minCellWidth;g&&typeof g=="number"&&(u.minWidth=g,u.wrappedWidth=g)}d&&(d.colSpan>1&&!u.minWidth&&(u.minWidth=d.minWidth),d.colSpan>1&&!u.wrappedWidth&&(u.wrappedWidth=d.minWidth))}})}function tx(n,e,t){for(var r=e,i=n.reduce(function(w,P){return w+P.wrappedWidth},0),s=0;s<n.length;s++){var a=n[s],c=a.wrappedWidth/i,u=r*c,d=a.width+u,p=t(a),g=d<p?p:d;e-=g-a.width,a.width=g}if(e=Math.round(e*1e10)/1e10,e){var _=n.filter(function(w){return e<0?w.width>t(w):!0});_.length&&(e=tx(_,e,t))}return e}function EW(n){for(var e={},t=1,r=n.allRows(),i=0;i<r.length;i++)for(var s=r[i],a=0,c=n.columns;a<c.length;a++){var u=c[a],d=e[u.index];if(t>1)t--,delete s.cells[u.index];else if(d)d.cell.height+=s.height,t=d.cell.colSpan,delete s.cells[u.index],d.left--,d.left<=1&&delete e[u.index];else{var p=s.cells[u.index];if(!p)continue;if(p.height=s.height,p.rowSpan>1){var g=r.length-i,_=p.rowSpan>g?g:p.rowSpan;e[u.index]={cell:p,left:_,row:s}}}}}function TW(n){for(var e=n.allRows(),t=0;t<e.length;t++)for(var r=e[t],i=null,s=0,a=0,c=0;c<n.columns.length;c++){var u=n.columns[c];if(a-=1,a>1&&n.columns[c+1])s+=u.width,delete r.cells[u.index];else if(i){var d=i;delete r.cells[u.index],i=null,d.width=u.width+s}else{var d=r.cells[u.index];if(!d)continue;if(a=d.colSpan,s=0,d.colSpan>1){i=d,s+=u.width;continue}d.width=u.width+s}}}function AW(n,e){for(var t={count:0,height:0},r=0,i=n.allRows();r<i.length;r++){for(var s=i[r],a=0,c=n.columns;a<c.length;a++){var u=c[a],d=s.cells[u.index];if(d){e.applyStyles(d.styles,!0);var p=d.width-d.padding("horizontal");if(d.styles.overflow==="linebreak")d.text=e.splitTextToSize(d.text,p+1/e.scaleFactor(),{fontSize:d.styles.fontSize});else if(d.styles.overflow==="ellipsize")d.text=VI(d.text,p,d.styles,e,"...");else if(d.styles.overflow==="hidden")d.text=VI(d.text,p,d.styles,e,"");else if(typeof d.styles.overflow=="function"){var g=d.styles.overflow(d.text,p);typeof g=="string"?d.text=[g]:d.text=g}d.contentHeight=d.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var _=d.contentHeight/d.rowSpan;d.rowSpan>1&&t.count*t.height<_*d.rowSpan?t={height:_,count:d.rowSpan}:t&&t.count>0&&t.height>_&&(_=t.height),_>s.height&&(s.height=_)}}t.count--}}function VI(n,e,t,r,i){return n.map(function(s){return NW(s,e,t,r,i)})}function NW(n,e,t,r,i){var s=1e4*r.scaleFactor();if(e=Math.ceil(e*s)/s,e>=Rv(n,t,r))return n;for(;e<Rv(n+i,t,r)&&!(n.length<=1);)n=n.substring(0,n.length-1);return n.trim()+i}function SW(n,e){var t=new Hf(n),r=IW(e,t.scaleFactor()),i=new _W(e,r);return xW(t,i),t.applyStyles(t.userStyles),i}function IW(n,e){var t=n.content,r=RW(t.columns);if(t.head.length===0){var i=BI(r,"head");i&&t.head.push(i)}if(t.foot.length===0){var i=BI(r,"foot");i&&t.foot.push(i)}var s=n.settings.theme,a=n.styles;return{columns:r,head:$2("head",t.head,r,a,s,e),body:$2("body",t.body,r,a,s,e),foot:$2("foot",t.foot,r,a,s,e)}}function $2(n,e,t,r,i,s){var a={},c=e.map(function(u,d){for(var p=0,g={},_=0,w=0,P=0,O=t;P<O.length;P++){var L=O[P];if(a[L.index]==null||a[L.index].left===0)if(w===0){var B=void 0;Array.isArray(u)?B=u[L.index-_-p]:B=u[L.dataKey];var K={};typeof B=="object"&&!Array.isArray(B)&&(K=(B==null?void 0:B.styles)||{});var W=PW(n,L,d,i,r,s,K),J=new yD(B,W,n);g[L.dataKey]=J,g[L.index]=J,w=J.colSpan-1,a[L.index]={left:J.rowSpan-1,times:w}}else w--,_++;else a[L.index].left--,w=a[L.index].times,p++}return new gD(u,d,n,g)});return c}function BI(n,e){var t={};return n.forEach(function(r){if(r.raw!=null){var i=CW(e,r.raw);i!=null&&(t[r.dataKey]=i)}}),Object.keys(t).length>0?t:null}function CW(n,e){if(n==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(n==="foot"&&typeof e=="object")return e.footer;return null}function RW(n){return n.map(function(e,t){var r,i;return typeof e=="object"?i=(r=e.dataKey)!==null&&r!==void 0?r:t:i=t,new bW(i,e,t)})}function PW(n,e,t,r,i,s,a){var c=iW(r),u;n==="head"?u=i.headStyles:n==="body"?u=i.bodyStyles:n==="foot"&&(u=i.footStyles);var d=Oc({},c.table,c[n],i.styles,u),p=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},g=n==="body"?p:{},_=n==="body"&&t%2===0?Oc({},c.alternateRow,i.alternateRowStyles):{},w=rW(s),P=Oc({},w,d,_,g);return Oc(P,a)}function kW(n,e,t){var r;t===void 0&&(t={});var i=fD(n,e),s=new Map,a=[],c=[],u=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?u=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(u=[e.settings.horizontalPageBreakRepeat]),u.forEach(function(_){var w=e.columns.find(function(P){return P.dataKey===_||P.index===_});w&&!s.has(w.index)&&(s.set(w.index,!0),a.push(w.index),c.push(e.columns[w.index]),i-=w.wrappedWidth)});for(var d=!0,p=(r=t==null?void 0:t.start)!==null&&r!==void 0?r:0;p<e.columns.length;){if(s.has(p)){p++;continue}var g=e.columns[p].wrappedWidth;if(d||i>=g)d=!1,a.push(p),c.push(e.columns[p]),i-=g;else break;p++}return{colIndexes:a,columns:c,lastIndex:p-1}}function DW(n,e){for(var t=[],r=0;r<e.columns.length;r++){var i=kW(n,e,{start:r});i.columns.length&&(t.push(i),r=i.lastIndex)}return t}function LW(n,e){var t=e.settings,r=t.startY,i=t.margin,s={x:i.left,y:r},a=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),c=r+i.bottom+a;if(t.pageBreak==="avoid"){var u=e.body,d=u.reduce(function(_,w){return _+w.height},0);c+=d}var p=new Hf(n);(t.pageBreak==="always"||t.startY!=null&&c>p.pageSize().height)&&(_D(p),s.y=i.top),e.callWillDrawPageHooks(p,s);var g=Oc({},s);e.startPageNumber=p.pageNumber(),t.horizontalPageBreak?MW(p,e,g,s):(p.applyStyles(p.userStyles),(t.showHead==="firstPage"||t.showHead==="everyPage")&&e.head.forEach(function(_){return zc(p,e,_,s,e.columns)}),p.applyStyles(p.userStyles),e.body.forEach(function(_,w){var P=w===e.body.length-1;Pv(p,e,_,P,g,s,e.columns)}),p.applyStyles(p.userStyles),(t.showFoot==="lastPage"||t.showFoot==="everyPage")&&e.foot.forEach(function(_){return zc(p,e,_,s,e.columns)})),dD(p,e,g,s),e.callEndPageHooks(p,s),e.finalY=s.y,n.lastAutoTable=e,p.applyStyles(p.userStyles)}function MW(n,e,t,r){var i=DW(n,e),s=e.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(d,p){n.applyStyles(n.userStyles),p>0?cg(n,e,t,r,d.columns,!0):qI(n,e,r,d.columns),OW(n,e,t,r,d.columns),Y2(n,e,r,d.columns)});else for(var a=-1,c=i[0],u=function(){var d=a;if(c){n.applyStyles(n.userStyles);var p=c.columns;a>=0?cg(n,e,t,r,p,!0):qI(n,e,r,p),d=GI(n,e,a+1,r,p),Y2(n,e,r,p)}var g=d-a;i.slice(1).forEach(function(_){n.applyStyles(n.userStyles),cg(n,e,t,r,_.columns,!0),GI(n,e,a+1,r,_.columns,g),Y2(n,e,r,_.columns)}),a=d};a<e.body.length-1;)u()}function qI(n,e,t,r){var i=e.settings;n.applyStyles(n.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(s){return zc(n,e,s,t,r)})}function OW(n,e,t,r,i){n.applyStyles(n.userStyles),e.body.forEach(function(s,a){var c=a===e.body.length-1;Pv(n,e,s,c,t,r,i)})}function GI(n,e,t,r,i,s){n.applyStyles(n.userStyles),s=s??e.body.length;var a=Math.min(t+s,e.body.length),c=-1;return e.body.slice(t,a).forEach(function(u,d){var p=t+d===e.body.length-1,g=vD(n,e,p,r);u.canEntireRowFit(g,i)&&(zc(n,e,u,r,i),c=t+d)}),c}function Y2(n,e,t,r){var i=e.settings;n.applyStyles(n.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(s){return zc(n,e,s,t,r)})}function FW(n,e,t){var r=t.getLineHeight(n.styles.fontSize),i=n.padding("vertical"),s=Math.floor((e-i)/r);return Math.max(0,s)}function UW(n,e,t,r){var i={};n.spansMultiplePages=!0,n.height=0;for(var s=0,a=0,c=t.columns;a<c.length;a++){var u=c[a],d=n.cells[u.index];if(d){Array.isArray(d.text)||(d.text=[d.text]);var p=new yD(d.raw,d.styles,d.section);p=Oc(p,d),p.text=[];var g=FW(d,e,r);d.text.length>g&&(p.text=d.text.splice(g,d.text.length));var _=r.scaleFactor(),w=r.getLineHeightFactor();d.contentHeight=d.getContentHeight(_,w),d.contentHeight>=e&&(d.contentHeight=e,p.styles.minCellHeight-=e),d.contentHeight>n.height&&(n.height=d.contentHeight),p.contentHeight=p.getContentHeight(_,w),p.contentHeight>s&&(s=p.contentHeight),i[u.index]=p}}var P=new gD(n.raw,-1,n.section,i,!0);P.height=s;for(var O=0,L=t.columns;O<L.length;O++){var u=L[O],p=P.cells[u.index];p&&(p.height=P.height);var d=n.cells[u.index];d&&(d.height=n.height)}return P}function jW(n,e,t,r){var i=n.pageSize().height,s=r.settings.margin,a=s.top+s.bottom,c=i-a;e.section==="body"&&(c-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var u=e.getMinimumRowHeight(r.columns,n),d=u<t;if(u>c)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!d)return!1;var p=e.hasRowSpan(r.columns),g=e.getMaxCellHeight(r.columns)>c;return g?(p&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(p||r.settings.rowPageBreak==="avoid")}function Pv(n,e,t,r,i,s,a){var c=vD(n,e,r,s);if(t.canEntireRowFit(c,a))zc(n,e,t,s,a);else if(jW(n,t,c,e)){var u=UW(t,c,e,n);zc(n,e,t,s,a),cg(n,e,i,s,a),Pv(n,e,u,r,i,s,a)}else cg(n,e,i,s,a),Pv(n,e,t,r,i,s,a)}function zc(n,e,t,r,i){r.x=e.settings.margin.left;for(var s=0,a=i;s<a.length;s++){var c=a[s],u=t.cells[c.index];if(!u){r.x+=c.width;continue}n.applyStyles(u.styles),u.x=r.x,u.y=r.y;var d=e.callCellHooks(n,e.hooks.willDrawCell,u,t,c,r);if(d===!1){r.x+=c.width;continue}VW(n,u,r);var p=u.getTextPos();lD(u.text,p.x,p.y,{halign:u.styles.halign,valign:u.styles.valign,maxWidth:Math.ceil(u.width-u.padding("left")-u.padding("right"))},n.getDocument()),e.callCellHooks(n,e.hooks.didDrawCell,u,t,c,r),r.x+=c.width}r.y+=t.height}function VW(n,e,t){var r=e.styles;if(n.getDocument().setFillColor(n.getDocument().getFillColor()),typeof r.lineWidth=="number"){var i=hD(r.lineWidth,r.fillColor);i&&n.rect(e.x,t.y,e.width,e.height,i)}else typeof r.lineWidth=="object"&&(r.fillColor&&n.rect(e.x,t.y,e.width,e.height,"F"),BW(n,e,t,r.lineWidth))}function BW(n,e,t,r){var i,s,a,c;r.top&&(i=t.x,s=t.y,a=t.x+e.width,c=t.y,r.right&&(a+=.5*r.right),r.left&&(i-=.5*r.left),u(r.top,i,s,a,c)),r.bottom&&(i=t.x,s=t.y+e.height,a=t.x+e.width,c=t.y+e.height,r.right&&(a+=.5*r.right),r.left&&(i-=.5*r.left),u(r.bottom,i,s,a,c)),r.left&&(i=t.x,s=t.y,a=t.x,c=t.y+e.height,r.top&&(s-=.5*r.top),r.bottom&&(c+=.5*r.bottom),u(r.left,i,s,a,c)),r.right&&(i=t.x+e.width,s=t.y,a=t.x+e.width,c=t.y+e.height,r.top&&(s-=.5*r.top),r.bottom&&(c+=.5*r.bottom),u(r.right,i,s,a,c));function u(d,p,g,_,w){n.getDocument().setLineWidth(d),n.getDocument().line(p,g,_,w,"S")}}function vD(n,e,t,r){var i=e.settings.margin.bottom,s=e.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&t)&&(i+=e.getFootHeight(e.columns)),n.pageSize().height-r.y-i}function cg(n,e,t,r,i,s){i===void 0&&(i=[]),s===void 0&&(s=!1),n.applyStyles(n.userStyles),e.settings.showFoot==="everyPage"&&!s&&e.foot.forEach(function(c){return zc(n,e,c,r,i)}),e.callEndPageHooks(n,r);var a=e.settings.margin;dD(n,e,t,r),_D(n),e.pageNumber++,r.x=a.left,r.y=a.top,t.y=a.top,e.callWillDrawPageHooks(n,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(c){return zc(n,e,c,r,i)}),n.applyStyles(n.userStyles))}function _D(n){var e=n.pageNumber();n.setPage(e+1);var t=n.pageNumber();return t===e?(n.addPage(),!0):!1}function qW(n){n.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0],i=dW(this,r),s=SW(this,i);return LW(this,s),this},n.API.lastAutoTable=!1,n.API.autoTableText=function(e,t,r,i){lD(e,t,r,i,this)},n.API.autoTableSetDefaults=function(e){return Hf.setDefaults(e,this),this},n.autoTableSetDefaults=function(e,t){Hf.setDefaults(e,t)},n.API.autoTableHtmlToJson=function(e,t){var r;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new Hf(this),s=mD(i,e,window,t,!1),a=s.head,c=s.body,u=((r=a[0])===null||r===void 0?void 0:r.map(function(d){return d.content}))||[];return{columns:u,rows:c,data:c}}}var W2;try{if(typeof window<"u"&&window){var HI=window,zI=HI.jsPDF||((W2=HI.jspdf)===null||W2===void 0?void 0:W2.jsPDF);zI&&qW(zI)}}catch(n){console.error("Could not apply autoTable plugin",n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let GW,HW;function zW(){return{geminiUrl:GW,vertexUrl:HW}}function $W(n,e,t,r){var i,s;if(!(n!=null&&n.baseUrl)){const a=zW();return e?(i=a.vertexUrl)!==null&&i!==void 0?i:t:(s=a.geminiUrl)!==null&&s!==void 0?s:r}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ru{}function xt(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const s=e[i];return s!=null?String(s):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function x(n,e,t){for(let s=0;s<e.length-1;s++){const a=e[s];if(a.endsWith("[]")){const c=a.slice(0,-2);if(!(c in n))if(Array.isArray(t))n[c]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(n[c])){const u=n[c];if(Array.isArray(t))for(let d=0;d<u.length;d++){const p=u[d];x(p,e.slice(s+1),t[d])}else for(const d of u)x(d,e.slice(s+1),t)}return}else if(a.endsWith("[0]")){const c=a.slice(0,-3);c in n||(n[c]=[{}]);const u=n[c];x(u[0],e.slice(s+1),t);return}(!n[a]||typeof n[a]!="object")&&(n[a]={}),n=n[a]}const r=e[e.length-1],i=n[r];if(i!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===i)return;if(typeof i=="object"&&typeof t=="object"&&i!==null&&t!==null)Object.assign(i,t);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[r]=t}function y(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let r=0;r<e.length;r++){if(typeof n!="object"||n===null)return t;const i=e[r];if(i.endsWith("[]")){const s=i.slice(0,-2);if(s in n){const a=n[s];return Array.isArray(a)?a.map(c=>y(c,e.slice(r+1),t)):t}else return t}else n=n[i]}return n}catch(r){if(r instanceof TypeError)return t;throw r}}function YW(n,e){for(const[t,r]of Object.entries(e)){const i=t.split("."),s=r.split("."),a=new Set;let c=-1;for(let u=0;u<i.length;u++)if(i[u]==="*"){c=u;break}if(c!==-1&&s.length>c)for(let u=c;u<s.length;u++){const d=s[u];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&a.add(d)}nx(n,i,s,0,a)}}function nx(n,e,t,r,i){if(r>=e.length||typeof n!="object"||n===null)return;const s=e[r];if(s.endsWith("[]")){const a=s.slice(0,-2),c=n;if(a in c&&Array.isArray(c[a]))for(const u of c[a])nx(u,e,t,r+1,i)}else if(s==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const a=n,c=Object.keys(a).filter(d=>!d.startsWith("_")&&!i.has(d)),u={};for(const d of c)u[d]=a[d];for(const[d,p]of Object.entries(u)){const g=[];for(const _ of t.slice(r))_==="*"?g.push(d):g.push(_);x(a,g,p)}for(const d of c)delete a[d]}}else{const a=n;s in a&&nx(a[s],e,t,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function d5(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WW(n){const e={},t=y(n,["operationName"]);t!=null&&x(e,["operationName"],t);const r=y(n,["resourceName"]);return r!=null&&x(e,["_url","resourceName"],r),e}function KW(n){const e={},t=y(n,["name"]);t!=null&&x(e,["name"],t);const r=y(n,["metadata"]);r!=null&&x(e,["metadata"],r);const i=y(n,["done"]);i!=null&&x(e,["done"],i);const s=y(n,["error"]);s!=null&&x(e,["error"],s);const a=y(n,["response","generateVideoResponse"]);return a!=null&&x(e,["response"],QW(a)),e}function JW(n){const e={},t=y(n,["name"]);t!=null&&x(e,["name"],t);const r=y(n,["metadata"]);r!=null&&x(e,["metadata"],r);const i=y(n,["done"]);i!=null&&x(e,["done"],i);const s=y(n,["error"]);s!=null&&x(e,["error"],s);const a=y(n,["response"]);return a!=null&&x(e,["response"],XW(a)),e}function QW(n){const e={},t=y(n,["generatedSamples"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>ZW(a))),x(e,["generatedVideos"],s)}const r=y(n,["raiMediaFilteredCount"]);r!=null&&x(e,["raiMediaFilteredCount"],r);const i=y(n,["raiMediaFilteredReasons"]);return i!=null&&x(e,["raiMediaFilteredReasons"],i),e}function XW(n){const e={},t=y(n,["videos"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>eK(a))),x(e,["generatedVideos"],s)}const r=y(n,["raiMediaFilteredCount"]);r!=null&&x(e,["raiMediaFilteredCount"],r);const i=y(n,["raiMediaFilteredReasons"]);return i!=null&&x(e,["raiMediaFilteredReasons"],i),e}function ZW(n){const e={},t=y(n,["video"]);return t!=null&&x(e,["video"],oK(t)),e}function eK(n){const e={},t=y(n,["_self"]);return t!=null&&x(e,["video"],aK(t)),e}function tK(n){const e={},t=y(n,["operationName"]);return t!=null&&x(e,["_url","operationName"],t),e}function nK(n){const e={},t=y(n,["operationName"]);return t!=null&&x(e,["_url","operationName"],t),e}function rK(n){const e={},t=y(n,["name"]);t!=null&&x(e,["name"],t);const r=y(n,["metadata"]);r!=null&&x(e,["metadata"],r);const i=y(n,["done"]);i!=null&&x(e,["done"],i);const s=y(n,["error"]);s!=null&&x(e,["error"],s);const a=y(n,["response"]);return a!=null&&x(e,["response"],iK(a)),e}function iK(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=y(n,["parent"]);r!=null&&x(e,["parent"],r);const i=y(n,["documentName"]);return i!=null&&x(e,["documentName"],i),e}function bD(n){const e={},t=y(n,["name"]);t!=null&&x(e,["name"],t);const r=y(n,["metadata"]);r!=null&&x(e,["metadata"],r);const i=y(n,["done"]);i!=null&&x(e,["done"],i);const s=y(n,["error"]);s!=null&&x(e,["error"],s);const a=y(n,["response"]);return a!=null&&x(e,["response"],sK(a)),e}function sK(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=y(n,["parent"]);r!=null&&x(e,["parent"],r);const i=y(n,["documentName"]);return i!=null&&x(e,["documentName"],i),e}function oK(n){const e={},t=y(n,["uri"]);t!=null&&x(e,["uri"],t);const r=y(n,["encodedVideo"]);r!=null&&x(e,["videoBytes"],d5(r));const i=y(n,["encoding"]);return i!=null&&x(e,["mimeType"],i),e}function aK(n){const e={},t=y(n,["gcsUri"]);t!=null&&x(e,["uri"],t);const r=y(n,["bytesBase64Encoded"]);r!=null&&x(e,["videoBytes"],d5(r));const i=y(n,["mimeType"]);return i!=null&&x(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var $I;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})($I||($I={}));var YI;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(YI||(YI={}));var WI;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(WI||(WI={}));var Yu;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Yu||(Yu={}));var KI;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(KI||(KI={}));var JI;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(JI||(JI={}));var QI;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(QI||(QI={}));var XI;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(XI||(XI={}));var ZI;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(ZI||(ZI={}));var eC;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.HIGH="HIGH"})(eC||(eC={}));var tC;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(tC||(tC={}));var nC;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(nC||(nC={}));var rC;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(rC||(rC={}));var iC;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(iC||(iC={}));var sC;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(sC||(sC={}));var oC;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(oC||(oC={}));var aC;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(aC||(aC={}));var lC;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(lC||(lC={}));var cC;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(cC||(cC={}));var kv;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(kv||(kv={}));var uC;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(uC||(uC={}));var dC;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(dC||(dC={}));var hC;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(hC||(hC={}));var rx;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(rx||(rx={}));var fC;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(fC||(fC={}));var pC;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(pC||(pC={}));var mC;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(mC||(mC={}));var gC;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(gC||(gC={}));var yC;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(yC||(yC={}));var vC;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(vC||(vC={}));var _C;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(_C||(_C={}));var bC;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(bC||(bC={}));var xC;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(xC||(xC={}));var wC;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(wC||(wC={}));var EC;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(EC||(EC={}));var TC;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(TC||(TC={}));var AC;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(AC||(AC={}));var NC;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(NC||(NC={}));var SC;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(SC||(SC={}));var IC;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(IC||(IC={}));var CC;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(CC||(CC={}));var RC;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(RC||(RC={}));var PC;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(PC||(PC={}));var kC;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(kC||(kC={}));var DC;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(DC||(DC={}));var LC;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(LC||(LC={}));var MC;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(MC||(MC={}));var OC;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(OC||(OC={}));var FC;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(FC||(FC={}));var UC;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(UC||(UC={}));var jC;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(jC||(jC={}));var VC;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(VC||(VC={}));var BC;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(BC||(BC={}));var qC;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(qC||(qC={}));var Df;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Df||(Df={}));class ix{constructor(e){const t={};for(const r of e.headers.entries())t[r[0]]=r[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Mm{get text(){var e,t,r,i,s,a,c,u;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",p=!1;const g=[];for(const _ of(u=(c=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)!==null&&u!==void 0?u:[]){for(const[w,P]of Object.entries(_))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(P!==null||P!==void 0)&&g.push(w);if(typeof _.text=="string"){if(typeof _.thought=="boolean"&&_.thought)continue;p=!0,d+=_.text}}return g.length>0&&console.warn(`there are non-text parts ${g} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?d:void 0}get data(){var e,t,r,i,s,a,c,u;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const p=[];for(const g of(u=(c=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)!==null&&u!==void 0?u:[]){for(const[_,w]of Object.entries(g))_!=="inlineData"&&(w!==null||w!==void 0)&&p.push(_);g.inlineData&&typeof g.inlineData.data=="string"&&(d+=atob(g.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,t,r,i,s,a,c,u;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(u=(c=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)===null||u===void 0?void 0:u.filter(p=>p.functionCall).map(p=>p.functionCall).filter(p=>p!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,t,r,i,s,a,c,u,d;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const p=(u=(c=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)===null||u===void 0?void 0:u.filter(g=>g.executableCode).map(g=>g.executableCode).filter(g=>g!==void 0);if((p==null?void 0:p.length)!==0)return(d=p==null?void 0:p[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,t,r,i,s,a,c,u,d;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const p=(u=(c=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)===null||u===void 0?void 0:u.filter(g=>g.codeExecutionResult).map(g=>g.codeExecutionResult).filter(g=>g!==void 0);if((p==null?void 0:p.length)!==0)return(d=p==null?void 0:p[0])===null||d===void 0?void 0:d.output}}class GC{}class HC{}class lK{}class cK{}class uK{}class dK{}class zC{}class $C{}class YC{}class hK{}class Dv{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const r=new Dv;let i;const s=e;return t?i=JW(s):i=KW(s),Object.assign(r,i),r}}class WC{}class KC{}class JC{}class QC{}class fK{}class pK{}class mK{}class h5{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const r=new h5,s=rK(e);return Object.assign(r,s),r}}class gK{}class yK{}class vK{}class XC{}class _K{get text(){var e,t,r;let i="",s=!1;const a=[];for(const c of(r=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&r!==void 0?r:[]){for(const[u,d]of Object.entries(c))u!=="text"&&u!=="thought"&&d!==null&&a.push(u);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;s=!0,i+=c.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?i:void 0}get data(){var e,t,r;let i="";const s=[];for(const a of(r=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&r!==void 0?r:[]){for(const[c,u]of Object.entries(a))c!=="inlineData"&&u!==null&&s.push(c);a.inlineData&&typeof a.inlineData.data=="string"&&(i+=atob(a.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class bK{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class f5{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const r=new f5,s=bD(e);return Object.assign(r,s),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jn(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function xD(n,e){const t=Jn(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function wD(n){return Array.isArray(n)?n.map(e=>Lv(e)):[Lv(n)]}function Lv(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function ED(n){const e=Lv(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function TD(n){const e=Lv(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function ZC(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function AD(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>ZC(e)):[ZC(n)]}function sx(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function eR(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function tR(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function eo(n){if(n==null)throw new Error("ContentUnion is required");return sx(n)?n:{role:"user",parts:AD(n)}}function p5(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const r=eo(t);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(n.isVertexAI()){const t=eo(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>eo(t)):[eo(e)]}function Oa(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(eR(n)||tR(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[eo(n)]}const e=[],t=[],r=sx(n[0]);for(const i of n){const s=sx(i);if(s!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(i);else{if(eR(i)||tR(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(i)}}return r||e.push({role:"user",parts:AD(t)}),e}function xK(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(r=>r!=="null");if(t.length===1)e.type=Object.values(Yu).includes(t[0].toUpperCase())?t[0].toUpperCase():Yu.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of t)e.anyOf.push({type:Object.values(Yu).includes(r.toUpperCase())?r.toUpperCase():Yu.TYPE_UNSPECIFIED})}}function zf(n){const e={},t=["items"],r=["anyOf"],i=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=n.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,n=s[1]):s[1].type==="null"&&(e.nullable=!0,n=s[0])),n.type instanceof Array&&xK(n.type,e);for(const[a,c]of Object.entries(n))if(c!=null)if(a=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(Yu).includes(c.toUpperCase())?c.toUpperCase():Yu.TYPE_UNSPECIFIED}else if(t.includes(a))e[a]=zf(c);else if(r.includes(a)){const u=[];for(const d of c){if(d.type=="null"){e.nullable=!0;continue}u.push(zf(d))}e[a]=u}else if(i.includes(a)){const u={};for(const[d,p]of Object.entries(c))u[d]=zf(p);e[a]=u}else{if(a==="additionalProperties")continue;e[a]=c}return e}function m5(n){return zf(n)}function g5(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function y5(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Up(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=zf(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=zf(e.response));return n}function jp(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function wK(n,e,t,r=1){const i=!e.startsWith(`${t}/`)&&e.split("/").length===r;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:i?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:i?`${t}/${e}`:e}function iu(n,e){if(typeof e!="string")throw new Error("name must be a string");return wK(n,e,"cachedContents")}function ND(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function _d(n){return d5(n)}function EK(n){return n!=null&&typeof n=="object"&&"name"in n}function TK(n){return n!=null&&typeof n=="object"&&"video"in n}function AK(n){return n!=null&&typeof n=="object"&&"uri"in n}function SD(n){var e;let t;if(EK(n)&&(t=n.name),!(AK(n)&&(t=n.uri,t===void 0))&&!(TK(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const i=t.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${t}`);t=i[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function ID(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function CD(n){for(const e of["models","tunedModels","publisherModels"])if(NK(n,e))return n[e];return[]}function NK(n,e){return n!==null&&typeof n=="object"&&e in n}function SK(n,e={}){const t=n,r={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(r.responseJsonSchema=t.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function IK(n,e={}){const t=[],r=new Set;for(const i of n){const s=i.name;if(r.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);r.add(s);const a=SK(i,e);a.functionDeclarations&&t.push(...a.functionDeclarations)}return{functionDeclarations:t}}function RD(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const r=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,i=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function CK(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function PD(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const i=t.inlinedResponses;if(!Array.isArray(i)||i.length===0)return n;let s=!1;for(const a of i){if(typeof a!="object"||a===null)continue;const u=a.response;if(typeof u!="object"||u===null)continue;if(u.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Vp(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function kD(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RK(n){const e={},t=y(n,["responsesFile"]);t!=null&&x(e,["fileName"],t);const r=y(n,["inlinedResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>uJ(a))),x(e,["inlinedResponses"],s)}const i=y(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),x(e,["inlinedEmbedContentResponses"],s)}return e}function PK(n){const e={},t=y(n,["predictionsFormat"]);t!=null&&x(e,["format"],t);const r=y(n,["gcsDestination","outputUriPrefix"]);r!=null&&x(e,["gcsUri"],r);const i=y(n,["bigqueryDestination","outputUri"]);return i!=null&&x(e,["bigqueryUri"],i),e}function kK(n){const e={},t=y(n,["format"]);t!=null&&x(e,["predictionsFormat"],t);const r=y(n,["gcsUri"]);r!=null&&x(e,["gcsDestination","outputUriPrefix"],r);const i=y(n,["bigqueryUri"]);if(i!=null&&x(e,["bigqueryDestination","outputUri"],i),y(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(y(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(y(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Qy(n){const e={},t=y(n,["name"]);t!=null&&x(e,["name"],t);const r=y(n,["metadata","displayName"]);r!=null&&x(e,["displayName"],r);const i=y(n,["metadata","state"]);i!=null&&x(e,["state"],kD(i));const s=y(n,["metadata","createTime"]);s!=null&&x(e,["createTime"],s);const a=y(n,["metadata","endTime"]);a!=null&&x(e,["endTime"],a);const c=y(n,["metadata","updateTime"]);c!=null&&x(e,["updateTime"],c);const u=y(n,["metadata","model"]);u!=null&&x(e,["model"],u);const d=y(n,["metadata","output"]);return d!=null&&x(e,["dest"],RK(PD(d))),e}function ox(n){const e={},t=y(n,["name"]);t!=null&&x(e,["name"],t);const r=y(n,["displayName"]);r!=null&&x(e,["displayName"],r);const i=y(n,["state"]);i!=null&&x(e,["state"],kD(i));const s=y(n,["error"]);s!=null&&x(e,["error"],s);const a=y(n,["createTime"]);a!=null&&x(e,["createTime"],a);const c=y(n,["startTime"]);c!=null&&x(e,["startTime"],c);const u=y(n,["endTime"]);u!=null&&x(e,["endTime"],u);const d=y(n,["updateTime"]);d!=null&&x(e,["updateTime"],d);const p=y(n,["model"]);p!=null&&x(e,["model"],p);const g=y(n,["inputConfig"]);g!=null&&x(e,["src"],DK(g));const _=y(n,["outputConfig"]);_!=null&&x(e,["dest"],PK(PD(_)));const w=y(n,["completionStats"]);return w!=null&&x(e,["completionStats"],w),e}function DK(n){const e={},t=y(n,["instancesFormat"]);t!=null&&x(e,["format"],t);const r=y(n,["gcsSource","uris"]);r!=null&&x(e,["gcsUri"],r);const i=y(n,["bigquerySource","inputUri"]);return i!=null&&x(e,["bigqueryUri"],i),e}function LK(n,e){const t={};if(y(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(y(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(y(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=y(e,["fileName"]);r!=null&&x(t,["fileName"],r);const i=y(e,["inlinedRequests"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>cJ(n,a))),x(t,["requests","requests"],s)}return t}function MK(n){const e={},t=y(n,["format"]);t!=null&&x(e,["instancesFormat"],t);const r=y(n,["gcsUri"]);r!=null&&x(e,["gcsSource","uris"],r);const i=y(n,["bigqueryUri"]);if(i!=null&&x(e,["bigquerySource","inputUri"],i),y(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(y(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function OK(n){const e={},t=y(n,["data"]);if(t!=null&&x(e,["data"],t),y(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=y(n,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function FK(n,e){const t={},r=y(e,["name"]);return r!=null&&x(t,["_url","name"],Vp(n,r)),t}function UK(n,e){const t={},r=y(e,["name"]);return r!=null&&x(t,["_url","name"],Vp(n,r)),t}function jK(n){const e={},t=y(n,["content"]);t!=null&&x(e,["content"],t);const r=y(n,["citationMetadata"]);r!=null&&x(e,["citationMetadata"],VK(r));const i=y(n,["tokenCount"]);i!=null&&x(e,["tokenCount"],i);const s=y(n,["finishReason"]);s!=null&&x(e,["finishReason"],s);const a=y(n,["avgLogprobs"]);a!=null&&x(e,["avgLogprobs"],a);const c=y(n,["groundingMetadata"]);c!=null&&x(e,["groundingMetadata"],c);const u=y(n,["index"]);u!=null&&x(e,["index"],u);const d=y(n,["logprobsResult"]);d!=null&&x(e,["logprobsResult"],d);const p=y(n,["safetyRatings"]);if(p!=null){let _=p;Array.isArray(_)&&(_=_.map(w=>w)),x(e,["safetyRatings"],_)}const g=y(n,["urlContextMetadata"]);return g!=null&&x(e,["urlContextMetadata"],g),e}function VK(n){const e={},t=y(n,["citationSources"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>i)),x(e,["citations"],r)}return e}function DD(n){const e={},t=y(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>yJ(s))),x(e,["parts"],i)}const r=y(n,["role"]);return r!=null&&x(e,["role"],r),e}function BK(n,e){const t={},r=y(n,["displayName"]);if(e!==void 0&&r!=null&&x(e,["batch","displayName"],r),y(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function qK(n,e){const t={},r=y(n,["displayName"]);e!==void 0&&r!=null&&x(e,["displayName"],r);const i=y(n,["dest"]);return e!==void 0&&i!=null&&x(e,["outputConfig"],kK(CK(i))),t}function nR(n,e){const t={},r=y(e,["model"]);r!=null&&x(t,["_url","model"],Jn(n,r));const i=y(e,["src"]);i!=null&&x(t,["batch","inputConfig"],LK(n,RD(n,i)));const s=y(e,["config"]);return s!=null&&BK(s,t),t}function GK(n,e){const t={},r=y(e,["model"]);r!=null&&x(t,["model"],Jn(n,r));const i=y(e,["src"]);i!=null&&x(t,["inputConfig"],MK(RD(n,i)));const s=y(e,["config"]);return s!=null&&qK(s,t),t}function HK(n,e){const t={},r=y(n,["displayName"]);return e!==void 0&&r!=null&&x(e,["batch","displayName"],r),t}function zK(n,e){const t={},r=y(e,["model"]);r!=null&&x(t,["_url","model"],Jn(n,r));const i=y(e,["src"]);i!=null&&x(t,["batch","inputConfig"],XK(n,i));const s=y(e,["config"]);return s!=null&&HK(s,t),t}function $K(n,e){const t={},r=y(e,["name"]);return r!=null&&x(t,["_url","name"],Vp(n,r)),t}function YK(n,e){const t={},r=y(e,["name"]);return r!=null&&x(t,["_url","name"],Vp(n,r)),t}function WK(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=y(n,["name"]);r!=null&&x(e,["name"],r);const i=y(n,["done"]);i!=null&&x(e,["done"],i);const s=y(n,["error"]);return s!=null&&x(e,["error"],s),e}function KK(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=y(n,["name"]);r!=null&&x(e,["name"],r);const i=y(n,["done"]);i!=null&&x(e,["done"],i);const s=y(n,["error"]);return s!=null&&x(e,["error"],s),e}function JK(n,e){const t={},r=y(e,["contents"]);if(r!=null){let s=p5(n,r);Array.isArray(s)&&(s=s.map(a=>a)),x(t,["requests[]","request","content"],s)}const i=y(e,["config"]);return i!=null&&(x(t,["_self"],QK(i,t)),YW(t,{"requests[].*":"requests[].request.*"})),t}function QK(n,e){const t={},r=y(n,["taskType"]);e!==void 0&&r!=null&&x(e,["requests[]","taskType"],r);const i=y(n,["title"]);e!==void 0&&i!=null&&x(e,["requests[]","title"],i);const s=y(n,["outputDimensionality"]);if(e!==void 0&&s!=null&&x(e,["requests[]","outputDimensionality"],s),y(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(y(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function XK(n,e){const t={},r=y(e,["fileName"]);r!=null&&x(t,["file_name"],r);const i=y(e,["inlinedRequests"]);return i!=null&&x(t,["requests"],JK(n,i)),t}function ZK(n){const e={};if(y(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=y(n,["fileUri"]);t!=null&&x(e,["fileUri"],t);const r=y(n,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function eJ(n){const e={},t=y(n,["id"]);t!=null&&x(e,["id"],t);const r=y(n,["args"]);r!=null&&x(e,["args"],r);const i=y(n,["name"]);if(i!=null&&x(e,["name"],i),y(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(y(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function tJ(n){const e={},t=y(n,["mode"]);t!=null&&x(e,["mode"],t);const r=y(n,["allowedFunctionNames"]);if(r!=null&&x(e,["allowedFunctionNames"],r),y(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function nJ(n,e,t){const r={},i=y(e,["systemInstruction"]);t!==void 0&&i!=null&&x(t,["systemInstruction"],DD(eo(i)));const s=y(e,["temperature"]);s!=null&&x(r,["temperature"],s);const a=y(e,["topP"]);a!=null&&x(r,["topP"],a);const c=y(e,["topK"]);c!=null&&x(r,["topK"],c);const u=y(e,["candidateCount"]);u!=null&&x(r,["candidateCount"],u);const d=y(e,["maxOutputTokens"]);d!=null&&x(r,["maxOutputTokens"],d);const p=y(e,["stopSequences"]);p!=null&&x(r,["stopSequences"],p);const g=y(e,["responseLogprobs"]);g!=null&&x(r,["responseLogprobs"],g);const _=y(e,["logprobs"]);_!=null&&x(r,["logprobs"],_);const w=y(e,["presencePenalty"]);w!=null&&x(r,["presencePenalty"],w);const P=y(e,["frequencyPenalty"]);P!=null&&x(r,["frequencyPenalty"],P);const O=y(e,["seed"]);O!=null&&x(r,["seed"],O);const L=y(e,["responseMimeType"]);L!=null&&x(r,["responseMimeType"],L);const B=y(e,["responseSchema"]);B!=null&&x(r,["responseSchema"],m5(B));const K=y(e,["responseJsonSchema"]);if(K!=null&&x(r,["responseJsonSchema"],K),y(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(y(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const W=y(e,["safetySettings"]);if(t!==void 0&&W!=null){let M=W;Array.isArray(M)&&(M=M.map(Q=>vJ(Q))),x(t,["safetySettings"],M)}const J=y(e,["tools"]);if(t!==void 0&&J!=null){let M=jp(J);Array.isArray(M)&&(M=M.map(Q=>bJ(Up(Q)))),x(t,["tools"],M)}const ae=y(e,["toolConfig"]);if(t!==void 0&&ae!=null&&x(t,["toolConfig"],_J(ae)),y(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const le=y(e,["cachedContent"]);t!==void 0&&le!=null&&x(t,["cachedContent"],iu(n,le));const U=y(e,["responseModalities"]);U!=null&&x(r,["responseModalities"],U);const C=y(e,["mediaResolution"]);C!=null&&x(r,["mediaResolution"],C);const N=y(e,["speechConfig"]);if(N!=null&&x(r,["speechConfig"],g5(N)),y(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const F=y(e,["thinkingConfig"]);F!=null&&x(r,["thinkingConfig"],F);const S=y(e,["imageConfig"]);S!=null&&x(r,["imageConfig"],lJ(S));const k=y(e,["enableEnhancedCivicAnswers"]);return k!=null&&x(r,["enableEnhancedCivicAnswers"],k),r}function rJ(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=y(n,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>jK(d))),x(e,["candidates"],u)}const i=y(n,["modelVersion"]);i!=null&&x(e,["modelVersion"],i);const s=y(n,["promptFeedback"]);s!=null&&x(e,["promptFeedback"],s);const a=y(n,["responseId"]);a!=null&&x(e,["responseId"],a);const c=y(n,["usageMetadata"]);return c!=null&&x(e,["usageMetadata"],c),e}function iJ(n,e){const t={},r=y(e,["name"]);return r!=null&&x(t,["_url","name"],Vp(n,r)),t}function sJ(n,e){const t={},r=y(e,["name"]);return r!=null&&x(t,["_url","name"],Vp(n,r)),t}function oJ(n){const e={};if(y(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=y(n,["enableWidget"]);return t!=null&&x(e,["enableWidget"],t),e}function aJ(n){const e={};if(y(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(y(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=y(n,["timeRangeFilter"]);return t!=null&&x(e,["timeRangeFilter"],t),e}function lJ(n){const e={},t=y(n,["aspectRatio"]);t!=null&&x(e,["aspectRatio"],t);const r=y(n,["imageSize"]);if(r!=null&&x(e,["imageSize"],r),y(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(y(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function cJ(n,e){const t={},r=y(e,["model"]);r!=null&&x(t,["request","model"],Jn(n,r));const i=y(e,["contents"]);if(i!=null){let c=Oa(i);Array.isArray(c)&&(c=c.map(u=>DD(u))),x(t,["request","contents"],c)}const s=y(e,["metadata"]);s!=null&&x(t,["metadata"],s);const a=y(e,["config"]);return a!=null&&x(t,["request","generationConfig"],nJ(n,a,y(t,["request"],{}))),t}function uJ(n){const e={},t=y(n,["response"]);t!=null&&x(e,["response"],rJ(t));const r=y(n,["error"]);return r!=null&&x(e,["error"],r),e}function dJ(n,e){const t={},r=y(n,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const i=y(n,["pageToken"]);if(e!==void 0&&i!=null&&x(e,["_query","pageToken"],i),y(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function hJ(n,e){const t={},r=y(n,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const i=y(n,["pageToken"]);e!==void 0&&i!=null&&x(e,["_query","pageToken"],i);const s=y(n,["filter"]);return e!==void 0&&s!=null&&x(e,["_query","filter"],s),t}function fJ(n){const e={},t=y(n,["config"]);return t!=null&&dJ(t,e),e}function pJ(n){const e={},t=y(n,["config"]);return t!=null&&hJ(t,e),e}function mJ(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=y(n,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const i=y(n,["operations"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>Qy(a))),x(e,["batchJobs"],s)}return e}function gJ(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=y(n,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const i=y(n,["batchPredictionJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>ox(a))),x(e,["batchJobs"],s)}return e}function yJ(n){const e={},t=y(n,["mediaResolution"]);t!=null&&x(e,["mediaResolution"],t);const r=y(n,["codeExecutionResult"]);r!=null&&x(e,["codeExecutionResult"],r);const i=y(n,["executableCode"]);i!=null&&x(e,["executableCode"],i);const s=y(n,["fileData"]);s!=null&&x(e,["fileData"],ZK(s));const a=y(n,["functionCall"]);a!=null&&x(e,["functionCall"],eJ(a));const c=y(n,["functionResponse"]);c!=null&&x(e,["functionResponse"],c);const u=y(n,["inlineData"]);u!=null&&x(e,["inlineData"],OK(u));const d=y(n,["text"]);d!=null&&x(e,["text"],d);const p=y(n,["thought"]);p!=null&&x(e,["thought"],p);const g=y(n,["thoughtSignature"]);g!=null&&x(e,["thoughtSignature"],g);const _=y(n,["videoMetadata"]);return _!=null&&x(e,["videoMetadata"],_),e}function vJ(n){const e={},t=y(n,["category"]);if(t!=null&&x(e,["category"],t),y(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=y(n,["threshold"]);return r!=null&&x(e,["threshold"],r),e}function _J(n){const e={},t=y(n,["functionCallingConfig"]);t!=null&&x(e,["functionCallingConfig"],tJ(t));const r=y(n,["retrievalConfig"]);return r!=null&&x(e,["retrievalConfig"],r),e}function bJ(n){const e={},t=y(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(g=>g)),x(e,["functionDeclarations"],p)}if(y(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=y(n,["googleSearchRetrieval"]);r!=null&&x(e,["googleSearchRetrieval"],r);const i=y(n,["computerUse"]);i!=null&&x(e,["computerUse"],i);const s=y(n,["fileSearch"]);s!=null&&x(e,["fileSearch"],s);const a=y(n,["codeExecution"]);if(a!=null&&x(e,["codeExecution"],a),y(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=y(n,["googleMaps"]);c!=null&&x(e,["googleMaps"],oJ(c));const u=y(n,["googleSearch"]);u!=null&&x(e,["googleSearch"],aJ(u));const d=y(n,["urlContext"]);return d!=null&&x(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var $c;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})($c||($c={}));class Rh{constructor(e,t,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,r,i)}init(e,t,r){var i,s;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!r||Object.keys(r).length===0?a={config:{}}:typeof r=="object"?a=Object.assign({},r):a=r,a.config&&(a.config.pageToken=t.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(s=(i=a.config)===null||i===void 0?void 0:i.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xJ extends ru{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Rh($c.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=nR(this.apiClient,e),r=t._url,i=xt("{model}:batchGenerateContent",r),c=t.batch.inputConfig.requests,u=c.requests,d=[];for(const p of u){const g=Object.assign({},p);if(g.systemInstruction){const _=g.systemInstruction;delete g.systemInstruction;const w=g.request;w.systemInstruction=_,g.request=w}d.push(g)}return c.requests=d,delete t.config,delete t._url,delete t._query,{path:i,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const r=t?Object.assign({},t):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const s=this.getGcsUri(e),a=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?r.dest=`${s.slice(0,-6)}/dest`:r.dest=`${s}_dest_${i}`;else if(a)r.dest=`${a}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var t,r,i,s;let a,c="",u={};if(this.apiClient.isVertexAI()){const d=GK(this.apiClient,e);return c=xt("batchPredictionJobs",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),a.then(p=>ox(p))}else{const d=nR(this.apiClient,e);return c=xt("{model}:batchGenerateContent",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>Qy(p))}}async createEmbeddingsInternal(e){var t,r;let i,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=zK(this.apiClient,e);return s=xt("{model}:asyncBatchEmbedContent",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>Qy(u))}}async get(e){var t,r,i,s;let a,c="",u={};if(this.apiClient.isVertexAI()){const d=sJ(this.apiClient,e);return c=xt("batchPredictionJobs/{name}",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),a.then(p=>ox(p))}else{const d=iJ(this.apiClient,e);return c=xt("batches/{name}",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>Qy(p))}}async cancel(e){var t,r,i,s;let a="",c={};if(this.apiClient.isVertexAI()){const u=UK(this.apiClient,e);a=xt("batchPredictionJobs/{name}:cancel",u._url),c=u._query,delete u._url,delete u._query,await this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const u=FK(this.apiClient,e);a=xt("batches/{name}:cancel",u._url),c=u._query,delete u._url,delete u._query,await this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,r,i,s;let a,c="",u={};if(this.apiClient.isVertexAI()){const d=pJ(e);return c=xt("batchPredictionJobs",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:p.headers},_})),a.then(p=>{const g=gJ(p),_=new XC;return Object.assign(_,g),_})}else{const d=fJ(e);return c=xt("batches",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:p.headers},_})),a.then(p=>{const g=mJ(p),_=new XC;return Object.assign(_,g),_})}}async delete(e){var t,r,i,s;let a,c="",u={};if(this.apiClient.isVertexAI()){const d=YK(this.apiClient,e);return c=xt("batchPredictionJobs/{name}",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:p.headers},_})),a.then(p=>KK(p))}else{const d=$K(this.apiClient,e);return c=xt("batches/{name}",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:p.headers},_})),a.then(p=>WK(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wJ(n){const e={},t=y(n,["data"]);if(t!=null&&x(e,["data"],t),y(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=y(n,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function rR(n){const e={},t=y(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>zJ(s))),x(e,["parts"],i)}const r=y(n,["role"]);return r!=null&&x(e,["role"],r),e}function EJ(n,e){const t={},r=y(n,["ttl"]);e!==void 0&&r!=null&&x(e,["ttl"],r);const i=y(n,["expireTime"]);e!==void 0&&i!=null&&x(e,["expireTime"],i);const s=y(n,["displayName"]);e!==void 0&&s!=null&&x(e,["displayName"],s);const a=y(n,["contents"]);if(e!==void 0&&a!=null){let p=Oa(a);Array.isArray(p)&&(p=p.map(g=>rR(g))),x(e,["contents"],p)}const c=y(n,["systemInstruction"]);e!==void 0&&c!=null&&x(e,["systemInstruction"],rR(eo(c)));const u=y(n,["tools"]);if(e!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(g=>YJ(g))),x(e,["tools"],p)}const d=y(n,["toolConfig"]);if(e!==void 0&&d!=null&&x(e,["toolConfig"],$J(d)),y(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function TJ(n,e){const t={},r=y(n,["ttl"]);e!==void 0&&r!=null&&x(e,["ttl"],r);const i=y(n,["expireTime"]);e!==void 0&&i!=null&&x(e,["expireTime"],i);const s=y(n,["displayName"]);e!==void 0&&s!=null&&x(e,["displayName"],s);const a=y(n,["contents"]);if(e!==void 0&&a!=null){let g=Oa(a);Array.isArray(g)&&(g=g.map(_=>_)),x(e,["contents"],g)}const c=y(n,["systemInstruction"]);e!==void 0&&c!=null&&x(e,["systemInstruction"],eo(c));const u=y(n,["tools"]);if(e!==void 0&&u!=null){let g=u;Array.isArray(g)&&(g=g.map(_=>WJ(_))),x(e,["tools"],g)}const d=y(n,["toolConfig"]);e!==void 0&&d!=null&&x(e,["toolConfig"],d);const p=y(n,["kmsKeyName"]);return e!==void 0&&p!=null&&x(e,["encryption_spec","kmsKeyName"],p),t}function AJ(n,e){const t={},r=y(e,["model"]);r!=null&&x(t,["model"],xD(n,r));const i=y(e,["config"]);return i!=null&&EJ(i,t),t}function NJ(n,e){const t={},r=y(e,["model"]);r!=null&&x(t,["model"],xD(n,r));const i=y(e,["config"]);return i!=null&&TJ(i,t),t}function SJ(n,e){const t={},r=y(e,["name"]);return r!=null&&x(t,["_url","name"],iu(n,r)),t}function IJ(n,e){const t={},r=y(e,["name"]);return r!=null&&x(t,["_url","name"],iu(n,r)),t}function CJ(n){const e={},t=y(n,["sdkHttpResponse"]);return t!=null&&x(e,["sdkHttpResponse"],t),e}function RJ(n){const e={},t=y(n,["sdkHttpResponse"]);return t!=null&&x(e,["sdkHttpResponse"],t),e}function PJ(n){const e={};if(y(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=y(n,["fileUri"]);t!=null&&x(e,["fileUri"],t);const r=y(n,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function kJ(n){const e={},t=y(n,["id"]);t!=null&&x(e,["id"],t);const r=y(n,["args"]);r!=null&&x(e,["args"],r);const i=y(n,["name"]);if(i!=null&&x(e,["name"],i),y(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(y(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function DJ(n){const e={},t=y(n,["mode"]);t!=null&&x(e,["mode"],t);const r=y(n,["allowedFunctionNames"]);if(r!=null&&x(e,["allowedFunctionNames"],r),y(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function LJ(n){const e={};if(y(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=y(n,["description"]);t!=null&&x(e,["description"],t);const r=y(n,["name"]);r!=null&&x(e,["name"],r);const i=y(n,["parameters"]);i!=null&&x(e,["parameters"],i);const s=y(n,["parametersJsonSchema"]);s!=null&&x(e,["parametersJsonSchema"],s);const a=y(n,["response"]);a!=null&&x(e,["response"],a);const c=y(n,["responseJsonSchema"]);return c!=null&&x(e,["responseJsonSchema"],c),e}function MJ(n,e){const t={},r=y(e,["name"]);return r!=null&&x(t,["_url","name"],iu(n,r)),t}function OJ(n,e){const t={},r=y(e,["name"]);return r!=null&&x(t,["_url","name"],iu(n,r)),t}function FJ(n){const e={};if(y(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=y(n,["enableWidget"]);return t!=null&&x(e,["enableWidget"],t),e}function UJ(n){const e={};if(y(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(y(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=y(n,["timeRangeFilter"]);return t!=null&&x(e,["timeRangeFilter"],t),e}function jJ(n,e){const t={},r=y(n,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const i=y(n,["pageToken"]);return e!==void 0&&i!=null&&x(e,["_query","pageToken"],i),t}function VJ(n,e){const t={},r=y(n,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const i=y(n,["pageToken"]);return e!==void 0&&i!=null&&x(e,["_query","pageToken"],i),t}function BJ(n){const e={},t=y(n,["config"]);return t!=null&&jJ(t,e),e}function qJ(n){const e={},t=y(n,["config"]);return t!=null&&VJ(t,e),e}function GJ(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=y(n,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const i=y(n,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),x(e,["cachedContents"],s)}return e}function HJ(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=y(n,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const i=y(n,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),x(e,["cachedContents"],s)}return e}function zJ(n){const e={},t=y(n,["mediaResolution"]);t!=null&&x(e,["mediaResolution"],t);const r=y(n,["codeExecutionResult"]);r!=null&&x(e,["codeExecutionResult"],r);const i=y(n,["executableCode"]);i!=null&&x(e,["executableCode"],i);const s=y(n,["fileData"]);s!=null&&x(e,["fileData"],PJ(s));const a=y(n,["functionCall"]);a!=null&&x(e,["functionCall"],kJ(a));const c=y(n,["functionResponse"]);c!=null&&x(e,["functionResponse"],c);const u=y(n,["inlineData"]);u!=null&&x(e,["inlineData"],wJ(u));const d=y(n,["text"]);d!=null&&x(e,["text"],d);const p=y(n,["thought"]);p!=null&&x(e,["thought"],p);const g=y(n,["thoughtSignature"]);g!=null&&x(e,["thoughtSignature"],g);const _=y(n,["videoMetadata"]);return _!=null&&x(e,["videoMetadata"],_),e}function $J(n){const e={},t=y(n,["functionCallingConfig"]);t!=null&&x(e,["functionCallingConfig"],DJ(t));const r=y(n,["retrievalConfig"]);return r!=null&&x(e,["retrievalConfig"],r),e}function YJ(n){const e={},t=y(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(g=>g)),x(e,["functionDeclarations"],p)}if(y(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=y(n,["googleSearchRetrieval"]);r!=null&&x(e,["googleSearchRetrieval"],r);const i=y(n,["computerUse"]);i!=null&&x(e,["computerUse"],i);const s=y(n,["fileSearch"]);s!=null&&x(e,["fileSearch"],s);const a=y(n,["codeExecution"]);if(a!=null&&x(e,["codeExecution"],a),y(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=y(n,["googleMaps"]);c!=null&&x(e,["googleMaps"],FJ(c));const u=y(n,["googleSearch"]);u!=null&&x(e,["googleSearch"],UJ(u));const d=y(n,["urlContext"]);return d!=null&&x(e,["urlContext"],d),e}function WJ(n){const e={},t=y(n,["functionDeclarations"]);if(t!=null){let g=t;Array.isArray(g)&&(g=g.map(_=>LJ(_))),x(e,["functionDeclarations"],g)}const r=y(n,["retrieval"]);r!=null&&x(e,["retrieval"],r);const i=y(n,["googleSearchRetrieval"]);i!=null&&x(e,["googleSearchRetrieval"],i);const s=y(n,["computerUse"]);if(s!=null&&x(e,["computerUse"],s),y(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=y(n,["codeExecution"]);a!=null&&x(e,["codeExecution"],a);const c=y(n,["enterpriseWebSearch"]);c!=null&&x(e,["enterpriseWebSearch"],c);const u=y(n,["googleMaps"]);u!=null&&x(e,["googleMaps"],u);const d=y(n,["googleSearch"]);d!=null&&x(e,["googleSearch"],d);const p=y(n,["urlContext"]);return p!=null&&x(e,["urlContext"],p),e}function KJ(n,e){const t={},r=y(n,["ttl"]);e!==void 0&&r!=null&&x(e,["ttl"],r);const i=y(n,["expireTime"]);return e!==void 0&&i!=null&&x(e,["expireTime"],i),t}function JJ(n,e){const t={},r=y(n,["ttl"]);e!==void 0&&r!=null&&x(e,["ttl"],r);const i=y(n,["expireTime"]);return e!==void 0&&i!=null&&x(e,["expireTime"],i),t}function QJ(n,e){const t={},r=y(e,["name"]);r!=null&&x(t,["_url","name"],iu(n,r));const i=y(e,["config"]);return i!=null&&KJ(i,t),t}function XJ(n,e){const t={},r=y(e,["name"]);r!=null&&x(t,["_url","name"],iu(n,r));const i=y(e,["config"]);return i!=null&&JJ(i,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZJ extends ru{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Rh($c.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(t),t)}async create(e){var t,r,i,s;let a,c="",u={};if(this.apiClient.isVertexAI()){const d=NJ(this.apiClient,e);return c=xt("cachedContents",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),a.then(p=>p)}else{const d=AJ(this.apiClient,e);return c=xt("cachedContents",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async get(e){var t,r,i,s;let a,c="",u={};if(this.apiClient.isVertexAI()){const d=OJ(this.apiClient,e);return c=xt("{name}",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),a.then(p=>p)}else{const d=MJ(this.apiClient,e);return c=xt("{name}",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async delete(e){var t,r,i,s;let a,c="",u={};if(this.apiClient.isVertexAI()){const d=IJ(this.apiClient,e);return c=xt("{name}",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:p.headers},_})),a.then(p=>{const g=RJ(p),_=new JC;return Object.assign(_,g),_})}else{const d=SJ(this.apiClient,e);return c=xt("{name}",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:p.headers},_})),a.then(p=>{const g=CJ(p),_=new JC;return Object.assign(_,g),_})}}async update(e){var t,r,i,s;let a,c="",u={};if(this.apiClient.isVertexAI()){const d=XJ(this.apiClient,e);return c=xt("{name}",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),a.then(p=>p)}else{const d=QJ(this.apiClient,e);return c=xt("{name}",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async listInternal(e){var t,r,i,s;let a,c="",u={};if(this.apiClient.isVertexAI()){const d=qJ(e);return c=xt("cachedContents",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:p.headers},_})),a.then(p=>{const g=HJ(p),_=new QC;return Object.assign(_,g),_})}else{const d=BJ(e);return c=xt("cachedContents",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:p.headers},_})),a.then(p=>{const g=GJ(p),_=new QC;return Object.assign(_,g),_})}}}function iR(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Lr(n){return this instanceof Lr?(this.v=n,this):new Lr(n)}function $f(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(w){return function(P){return Promise.resolve(P).then(w,g)}}function c(w,P){r[w]&&(i[w]=function(O){return new Promise(function(L,B){s.push([w,O,L,B])>1||u(w,O)})},P&&(i[w]=P(i[w])))}function u(w,P){try{d(r[w](P))}catch(O){_(s[0][3],O)}}function d(w){w.value instanceof Lr?Promise.resolve(w.value.v).then(p,g):_(s[0][2],w)}function p(w){u("next",w)}function g(w){u("throw",w)}function _(w,P){w(P),s.shift(),s.length&&u(s[0][0],s[0][1])}}function ug(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof iR=="function"?iR(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(a){return new Promise(function(c,u){a=n[s](a),i(c,u,a.done,a.value)})}}function i(s,a,c,u){Promise.resolve(u).then(function(d){s({value:d,done:c})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eQ(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:LD(t)}function LD(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function tQ(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function sR(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let r=0;for(;r<t;)if(n[r].role==="user")e.push(n[r]),r++;else{const i=[];let s=!0;for(;r<t&&n[r].role==="model";)i.push(n[r]),s&&!LD(n[r])&&(s=!1),r++;s?e.push(...i):e.pop()}return e}class nQ{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new rQ(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class rQ{constructor(e,t,r,i={},s=[]){this.apiClient=e,this.modelsModule=t,this.model=r,this.config=i,this.history=s,this.sendPromise=Promise.resolve(),tQ(s)}async sendMessage(e){var t;await this.sendPromise;const r=eo(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var s,a,c;const u=await i,d=(a=(s=u.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content,p=u.automaticFunctionCallingHistory,g=this.getHistory(!0).length;let _=[];p!=null&&(_=(c=p.slice(g))!==null&&c!==void 0?c:[]);const w=d?[d]:[];this.recordHistory(r,w,_)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var t;await this.sendPromise;const r=eo(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const s=await i;return this.processStreamResponse(s,r)}getHistory(e=!1){const t=e?sR(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return $f(this,arguments,function*(){var i,s,a,c,u,d;const p=[];try{for(var g=!0,_=ug(e),w;w=yield Lr(_.next()),i=w.done,!i;g=!0){c=w.value,g=!1;const P=c;if(eQ(P)){const O=(d=(u=P.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content;O!==void 0&&p.push(O)}yield yield Lr(P)}}catch(P){s={error:P}}finally{try{!g&&!i&&(a=_.return)&&(yield Lr(a.call(_)))}finally{if(s)throw s.error}}this.recordHistory(t,p)})}recordHistory(e,t,r){let i=[];t.length>0&&t.every(s=>s.role!==void 0)?i=t:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...sR(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class C1 extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,C1.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iQ(n){const e={},t=y(n,["file"]);return t!=null&&x(e,["file"],t),e}function sQ(n){const e={},t=y(n,["sdkHttpResponse"]);return t!=null&&x(e,["sdkHttpResponse"],t),e}function oQ(n){const e={},t=y(n,["name"]);return t!=null&&x(e,["_url","file"],SD(t)),e}function aQ(n){const e={},t=y(n,["sdkHttpResponse"]);return t!=null&&x(e,["sdkHttpResponse"],t),e}function lQ(n){const e={},t=y(n,["name"]);return t!=null&&x(e,["_url","file"],SD(t)),e}function cQ(n,e){const t={},r=y(n,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const i=y(n,["pageToken"]);return e!==void 0&&i!=null&&x(e,["_query","pageToken"],i),t}function uQ(n){const e={},t=y(n,["config"]);return t!=null&&cQ(t,e),e}function dQ(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=y(n,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const i=y(n,["files"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),x(e,["files"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hQ extends ru{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Rh($c.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,r;let i,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=uQ(e);return s=xt("files",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:u.headers},p})),i.then(u=>{const d=dQ(u),p=new gK;return Object.assign(p,d),p})}}async createInternal(e){var t,r;let i,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=iQ(e);return s=xt("upload/v1beta/files",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const d=sQ(u),p=new yK;return Object.assign(p,d),p})}}async get(e){var t,r;let i,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=lQ(e);return s=xt("files/{file}",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async delete(e){var t,r;let i,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=oQ(e);return s=xt("files/{file}",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:u.headers},p})),i.then(u=>{const d=aQ(u),p=new vK;return Object.assign(p,d),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xy(n){const e={},t=y(n,["data"]);if(t!=null&&x(e,["data"],t),y(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=y(n,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function fQ(n){const e={},t=y(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>CQ(s))),x(e,["parts"],i)}const r=y(n,["role"]);return r!=null&&x(e,["role"],r),e}function pQ(n){const e={};if(y(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=y(n,["fileUri"]);t!=null&&x(e,["fileUri"],t);const r=y(n,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function mQ(n){const e={},t=y(n,["id"]);t!=null&&x(e,["id"],t);const r=y(n,["args"]);r!=null&&x(e,["args"],r);const i=y(n,["name"]);if(i!=null&&x(e,["name"],i),y(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(y(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function gQ(n){const e={};if(y(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=y(n,["description"]);t!=null&&x(e,["description"],t);const r=y(n,["name"]);r!=null&&x(e,["name"],r);const i=y(n,["parameters"]);i!=null&&x(e,["parameters"],i);const s=y(n,["parametersJsonSchema"]);s!=null&&x(e,["parametersJsonSchema"],s);const a=y(n,["response"]);a!=null&&x(e,["response"],a);const c=y(n,["responseJsonSchema"]);return c!=null&&x(e,["responseJsonSchema"],c),e}function yQ(n){const e={},t=y(n,["modelSelectionConfig"]);t!=null&&x(e,["modelConfig"],t);const r=y(n,["responseJsonSchema"]);r!=null&&x(e,["responseJsonSchema"],r);const i=y(n,["audioTimestamp"]);i!=null&&x(e,["audioTimestamp"],i);const s=y(n,["candidateCount"]);s!=null&&x(e,["candidateCount"],s);const a=y(n,["enableAffectiveDialog"]);a!=null&&x(e,["enableAffectiveDialog"],a);const c=y(n,["frequencyPenalty"]);c!=null&&x(e,["frequencyPenalty"],c);const u=y(n,["logprobs"]);u!=null&&x(e,["logprobs"],u);const d=y(n,["maxOutputTokens"]);d!=null&&x(e,["maxOutputTokens"],d);const p=y(n,["mediaResolution"]);p!=null&&x(e,["mediaResolution"],p);const g=y(n,["presencePenalty"]);g!=null&&x(e,["presencePenalty"],g);const _=y(n,["responseLogprobs"]);_!=null&&x(e,["responseLogprobs"],_);const w=y(n,["responseMimeType"]);w!=null&&x(e,["responseMimeType"],w);const P=y(n,["responseModalities"]);P!=null&&x(e,["responseModalities"],P);const O=y(n,["responseSchema"]);O!=null&&x(e,["responseSchema"],O);const L=y(n,["routingConfig"]);L!=null&&x(e,["routingConfig"],L);const B=y(n,["seed"]);B!=null&&x(e,["seed"],B);const K=y(n,["speechConfig"]);K!=null&&x(e,["speechConfig"],MD(K));const W=y(n,["stopSequences"]);W!=null&&x(e,["stopSequences"],W);const J=y(n,["temperature"]);J!=null&&x(e,["temperature"],J);const ae=y(n,["thinkingConfig"]);ae!=null&&x(e,["thinkingConfig"],ae);const le=y(n,["topK"]);le!=null&&x(e,["topK"],le);const U=y(n,["topP"]);if(U!=null&&x(e,["topP"],U),y(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function vQ(n){const e={};if(y(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=y(n,["enableWidget"]);return t!=null&&x(e,["enableWidget"],t),e}function _Q(n){const e={};if(y(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(y(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=y(n,["timeRangeFilter"]);return t!=null&&x(e,["timeRangeFilter"],t),e}function bQ(n,e){const t={},r=y(n,["generationConfig"]);e!==void 0&&r!=null&&x(e,["setup","generationConfig"],r);const i=y(n,["responseModalities"]);e!==void 0&&i!=null&&x(e,["setup","generationConfig","responseModalities"],i);const s=y(n,["temperature"]);e!==void 0&&s!=null&&x(e,["setup","generationConfig","temperature"],s);const a=y(n,["topP"]);e!==void 0&&a!=null&&x(e,["setup","generationConfig","topP"],a);const c=y(n,["topK"]);e!==void 0&&c!=null&&x(e,["setup","generationConfig","topK"],c);const u=y(n,["maxOutputTokens"]);e!==void 0&&u!=null&&x(e,["setup","generationConfig","maxOutputTokens"],u);const d=y(n,["mediaResolution"]);e!==void 0&&d!=null&&x(e,["setup","generationConfig","mediaResolution"],d);const p=y(n,["seed"]);e!==void 0&&p!=null&&x(e,["setup","generationConfig","seed"],p);const g=y(n,["speechConfig"]);e!==void 0&&g!=null&&x(e,["setup","generationConfig","speechConfig"],y5(g));const _=y(n,["thinkingConfig"]);e!==void 0&&_!=null&&x(e,["setup","generationConfig","thinkingConfig"],_);const w=y(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&x(e,["setup","generationConfig","enableAffectiveDialog"],w);const P=y(n,["systemInstruction"]);e!==void 0&&P!=null&&x(e,["setup","systemInstruction"],fQ(eo(P)));const O=y(n,["tools"]);if(e!==void 0&&O!=null){let le=jp(O);Array.isArray(le)&&(le=le.map(U=>PQ(Up(U)))),x(e,["setup","tools"],le)}const L=y(n,["sessionResumption"]);e!==void 0&&L!=null&&x(e,["setup","sessionResumption"],RQ(L));const B=y(n,["inputAudioTranscription"]);e!==void 0&&B!=null&&x(e,["setup","inputAudioTranscription"],B);const K=y(n,["outputAudioTranscription"]);e!==void 0&&K!=null&&x(e,["setup","outputAudioTranscription"],K);const W=y(n,["realtimeInputConfig"]);e!==void 0&&W!=null&&x(e,["setup","realtimeInputConfig"],W);const J=y(n,["contextWindowCompression"]);e!==void 0&&J!=null&&x(e,["setup","contextWindowCompression"],J);const ae=y(n,["proactivity"]);return e!==void 0&&ae!=null&&x(e,["setup","proactivity"],ae),t}function xQ(n,e){const t={},r=y(n,["generationConfig"]);e!==void 0&&r!=null&&x(e,["setup","generationConfig"],yQ(r));const i=y(n,["responseModalities"]);e!==void 0&&i!=null&&x(e,["setup","generationConfig","responseModalities"],i);const s=y(n,["temperature"]);e!==void 0&&s!=null&&x(e,["setup","generationConfig","temperature"],s);const a=y(n,["topP"]);e!==void 0&&a!=null&&x(e,["setup","generationConfig","topP"],a);const c=y(n,["topK"]);e!==void 0&&c!=null&&x(e,["setup","generationConfig","topK"],c);const u=y(n,["maxOutputTokens"]);e!==void 0&&u!=null&&x(e,["setup","generationConfig","maxOutputTokens"],u);const d=y(n,["mediaResolution"]);e!==void 0&&d!=null&&x(e,["setup","generationConfig","mediaResolution"],d);const p=y(n,["seed"]);e!==void 0&&p!=null&&x(e,["setup","generationConfig","seed"],p);const g=y(n,["speechConfig"]);e!==void 0&&g!=null&&x(e,["setup","generationConfig","speechConfig"],MD(y5(g)));const _=y(n,["thinkingConfig"]);e!==void 0&&_!=null&&x(e,["setup","generationConfig","thinkingConfig"],_);const w=y(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&x(e,["setup","generationConfig","enableAffectiveDialog"],w);const P=y(n,["systemInstruction"]);e!==void 0&&P!=null&&x(e,["setup","systemInstruction"],eo(P));const O=y(n,["tools"]);if(e!==void 0&&O!=null){let le=jp(O);Array.isArray(le)&&(le=le.map(U=>kQ(Up(U)))),x(e,["setup","tools"],le)}const L=y(n,["sessionResumption"]);e!==void 0&&L!=null&&x(e,["setup","sessionResumption"],L);const B=y(n,["inputAudioTranscription"]);e!==void 0&&B!=null&&x(e,["setup","inputAudioTranscription"],B);const K=y(n,["outputAudioTranscription"]);e!==void 0&&K!=null&&x(e,["setup","outputAudioTranscription"],K);const W=y(n,["realtimeInputConfig"]);e!==void 0&&W!=null&&x(e,["setup","realtimeInputConfig"],W);const J=y(n,["contextWindowCompression"]);e!==void 0&&J!=null&&x(e,["setup","contextWindowCompression"],J);const ae=y(n,["proactivity"]);return e!==void 0&&ae!=null&&x(e,["setup","proactivity"],ae),t}function wQ(n,e){const t={},r=y(e,["model"]);r!=null&&x(t,["setup","model"],Jn(n,r));const i=y(e,["config"]);return i!=null&&x(t,["config"],bQ(i,t)),t}function EQ(n,e){const t={},r=y(e,["model"]);r!=null&&x(t,["setup","model"],Jn(n,r));const i=y(e,["config"]);return i!=null&&x(t,["config"],xQ(i,t)),t}function TQ(n){const e={},t=y(n,["musicGenerationConfig"]);return t!=null&&x(e,["musicGenerationConfig"],t),e}function AQ(n){const e={},t=y(n,["weightedPrompts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>i)),x(e,["weightedPrompts"],r)}return e}function NQ(n){const e={},t=y(n,["media"]);if(t!=null){let d=wD(t);Array.isArray(d)&&(d=d.map(p=>Xy(p))),x(e,["mediaChunks"],d)}const r=y(n,["audio"]);r!=null&&x(e,["audio"],Xy(TD(r)));const i=y(n,["audioStreamEnd"]);i!=null&&x(e,["audioStreamEnd"],i);const s=y(n,["video"]);s!=null&&x(e,["video"],Xy(ED(s)));const a=y(n,["text"]);a!=null&&x(e,["text"],a);const c=y(n,["activityStart"]);c!=null&&x(e,["activityStart"],c);const u=y(n,["activityEnd"]);return u!=null&&x(e,["activityEnd"],u),e}function SQ(n){const e={},t=y(n,["media"]);if(t!=null){let d=wD(t);Array.isArray(d)&&(d=d.map(p=>p)),x(e,["mediaChunks"],d)}const r=y(n,["audio"]);r!=null&&x(e,["audio"],TD(r));const i=y(n,["audioStreamEnd"]);i!=null&&x(e,["audioStreamEnd"],i);const s=y(n,["video"]);s!=null&&x(e,["video"],ED(s));const a=y(n,["text"]);a!=null&&x(e,["text"],a);const c=y(n,["activityStart"]);c!=null&&x(e,["activityStart"],c);const u=y(n,["activityEnd"]);return u!=null&&x(e,["activityEnd"],u),e}function IQ(n){const e={},t=y(n,["setupComplete"]);t!=null&&x(e,["setupComplete"],t);const r=y(n,["serverContent"]);r!=null&&x(e,["serverContent"],r);const i=y(n,["toolCall"]);i!=null&&x(e,["toolCall"],i);const s=y(n,["toolCallCancellation"]);s!=null&&x(e,["toolCallCancellation"],s);const a=y(n,["usageMetadata"]);a!=null&&x(e,["usageMetadata"],DQ(a));const c=y(n,["goAway"]);c!=null&&x(e,["goAway"],c);const u=y(n,["sessionResumptionUpdate"]);return u!=null&&x(e,["sessionResumptionUpdate"],u),e}function CQ(n){const e={},t=y(n,["mediaResolution"]);t!=null&&x(e,["mediaResolution"],t);const r=y(n,["codeExecutionResult"]);r!=null&&x(e,["codeExecutionResult"],r);const i=y(n,["executableCode"]);i!=null&&x(e,["executableCode"],i);const s=y(n,["fileData"]);s!=null&&x(e,["fileData"],pQ(s));const a=y(n,["functionCall"]);a!=null&&x(e,["functionCall"],mQ(a));const c=y(n,["functionResponse"]);c!=null&&x(e,["functionResponse"],c);const u=y(n,["inlineData"]);u!=null&&x(e,["inlineData"],Xy(u));const d=y(n,["text"]);d!=null&&x(e,["text"],d);const p=y(n,["thought"]);p!=null&&x(e,["thought"],p);const g=y(n,["thoughtSignature"]);g!=null&&x(e,["thoughtSignature"],g);const _=y(n,["videoMetadata"]);return _!=null&&x(e,["videoMetadata"],_),e}function RQ(n){const e={},t=y(n,["handle"]);if(t!=null&&x(e,["handle"],t),y(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function MD(n){const e={},t=y(n,["voiceConfig"]);t!=null&&x(e,["voiceConfig"],t);const r=y(n,["languageCode"]);if(r!=null&&x(e,["languageCode"],r),y(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function PQ(n){const e={},t=y(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(g=>g)),x(e,["functionDeclarations"],p)}if(y(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=y(n,["googleSearchRetrieval"]);r!=null&&x(e,["googleSearchRetrieval"],r);const i=y(n,["computerUse"]);i!=null&&x(e,["computerUse"],i);const s=y(n,["fileSearch"]);s!=null&&x(e,["fileSearch"],s);const a=y(n,["codeExecution"]);if(a!=null&&x(e,["codeExecution"],a),y(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=y(n,["googleMaps"]);c!=null&&x(e,["googleMaps"],vQ(c));const u=y(n,["googleSearch"]);u!=null&&x(e,["googleSearch"],_Q(u));const d=y(n,["urlContext"]);return d!=null&&x(e,["urlContext"],d),e}function kQ(n){const e={},t=y(n,["functionDeclarations"]);if(t!=null){let g=t;Array.isArray(g)&&(g=g.map(_=>gQ(_))),x(e,["functionDeclarations"],g)}const r=y(n,["retrieval"]);r!=null&&x(e,["retrieval"],r);const i=y(n,["googleSearchRetrieval"]);i!=null&&x(e,["googleSearchRetrieval"],i);const s=y(n,["computerUse"]);if(s!=null&&x(e,["computerUse"],s),y(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=y(n,["codeExecution"]);a!=null&&x(e,["codeExecution"],a);const c=y(n,["enterpriseWebSearch"]);c!=null&&x(e,["enterpriseWebSearch"],c);const u=y(n,["googleMaps"]);u!=null&&x(e,["googleMaps"],u);const d=y(n,["googleSearch"]);d!=null&&x(e,["googleSearch"],d);const p=y(n,["urlContext"]);return p!=null&&x(e,["urlContext"],p),e}function DQ(n){const e={},t=y(n,["promptTokenCount"]);t!=null&&x(e,["promptTokenCount"],t);const r=y(n,["cachedContentTokenCount"]);r!=null&&x(e,["cachedContentTokenCount"],r);const i=y(n,["candidatesTokenCount"]);i!=null&&x(e,["responseTokenCount"],i);const s=y(n,["toolUsePromptTokenCount"]);s!=null&&x(e,["toolUsePromptTokenCount"],s);const a=y(n,["thoughtsTokenCount"]);a!=null&&x(e,["thoughtsTokenCount"],a);const c=y(n,["totalTokenCount"]);c!=null&&x(e,["totalTokenCount"],c);const u=y(n,["promptTokensDetails"]);if(u!=null){let w=u;Array.isArray(w)&&(w=w.map(P=>P)),x(e,["promptTokensDetails"],w)}const d=y(n,["cacheTokensDetails"]);if(d!=null){let w=d;Array.isArray(w)&&(w=w.map(P=>P)),x(e,["cacheTokensDetails"],w)}const p=y(n,["candidatesTokensDetails"]);if(p!=null){let w=p;Array.isArray(w)&&(w=w.map(P=>P)),x(e,["responseTokensDetails"],w)}const g=y(n,["toolUsePromptTokensDetails"]);if(g!=null){let w=g;Array.isArray(w)&&(w=w.map(P=>P)),x(e,["toolUsePromptTokensDetails"],w)}const _=y(n,["trafficType"]);return _!=null&&x(e,["trafficType"],_),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LQ(n){const e={},t=y(n,["data"]);if(t!=null&&x(e,["data"],t),y(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=y(n,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function MQ(n){const e={},t=y(n,["content"]);t!=null&&x(e,["content"],t);const r=y(n,["citationMetadata"]);r!=null&&x(e,["citationMetadata"],OQ(r));const i=y(n,["tokenCount"]);i!=null&&x(e,["tokenCount"],i);const s=y(n,["finishReason"]);s!=null&&x(e,["finishReason"],s);const a=y(n,["avgLogprobs"]);a!=null&&x(e,["avgLogprobs"],a);const c=y(n,["groundingMetadata"]);c!=null&&x(e,["groundingMetadata"],c);const u=y(n,["index"]);u!=null&&x(e,["index"],u);const d=y(n,["logprobsResult"]);d!=null&&x(e,["logprobsResult"],d);const p=y(n,["safetyRatings"]);if(p!=null){let _=p;Array.isArray(_)&&(_=_.map(w=>w)),x(e,["safetyRatings"],_)}const g=y(n,["urlContextMetadata"]);return g!=null&&x(e,["urlContextMetadata"],g),e}function OQ(n){const e={},t=y(n,["citationSources"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>i)),x(e,["citations"],r)}return e}function FQ(n,e){const t={},r=y(e,["model"]);r!=null&&x(t,["_url","model"],Jn(n,r));const i=y(e,["contents"]);if(i!=null){let s=Oa(i);Array.isArray(s)&&(s=s.map(a=>a)),x(t,["contents"],s)}return t}function UQ(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=y(n,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),x(e,["tokensInfo"],i)}return e}function jQ(n){const e={},t=y(n,["values"]);t!=null&&x(e,["values"],t);const r=y(n,["statistics"]);return r!=null&&x(e,["statistics"],VQ(r)),e}function VQ(n){const e={},t=y(n,["truncated"]);t!=null&&x(e,["truncated"],t);const r=y(n,["token_count"]);return r!=null&&x(e,["tokenCount"],r),e}function R1(n){const e={},t=y(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>KX(s))),x(e,["parts"],i)}const r=y(n,["role"]);return r!=null&&x(e,["role"],r),e}function BQ(n){const e={},t=y(n,["controlType"]);t!=null&&x(e,["controlType"],t);const r=y(n,["enableControlImageComputation"]);return r!=null&&x(e,["computeControl"],r),e}function qQ(n){const e={};if(y(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(y(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(y(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function GQ(n,e){const t={},r=y(n,["systemInstruction"]);e!==void 0&&r!=null&&x(e,["systemInstruction"],eo(r));const i=y(n,["tools"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>VD(c))),x(e,["tools"],a)}const s=y(n,["generationConfig"]);return e!==void 0&&s!=null&&x(e,["generationConfig"],LX(s)),t}function HQ(n,e){const t={},r=y(e,["model"]);r!=null&&x(t,["_url","model"],Jn(n,r));const i=y(e,["contents"]);if(i!=null){let a=Oa(i);Array.isArray(a)&&(a=a.map(c=>R1(c))),x(t,["contents"],a)}const s=y(e,["config"]);return s!=null&&qQ(s),t}function zQ(n,e){const t={},r=y(e,["model"]);r!=null&&x(t,["_url","model"],Jn(n,r));const i=y(e,["contents"]);if(i!=null){let a=Oa(i);Array.isArray(a)&&(a=a.map(c=>c)),x(t,["contents"],a)}const s=y(e,["config"]);return s!=null&&GQ(s,t),t}function $Q(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=y(n,["totalTokens"]);r!=null&&x(e,["totalTokens"],r);const i=y(n,["cachedContentTokenCount"]);return i!=null&&x(e,["cachedContentTokenCount"],i),e}function YQ(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=y(n,["totalTokens"]);return r!=null&&x(e,["totalTokens"],r),e}function WQ(n,e){const t={},r=y(e,["model"]);return r!=null&&x(t,["_url","name"],Jn(n,r)),t}function KQ(n,e){const t={},r=y(e,["model"]);return r!=null&&x(t,["_url","name"],Jn(n,r)),t}function JQ(n){const e={},t=y(n,["sdkHttpResponse"]);return t!=null&&x(e,["sdkHttpResponse"],t),e}function QQ(n){const e={},t=y(n,["sdkHttpResponse"]);return t!=null&&x(e,["sdkHttpResponse"],t),e}function XQ(n,e){const t={},r=y(n,["outputGcsUri"]);e!==void 0&&r!=null&&x(e,["parameters","storageUri"],r);const i=y(n,["negativePrompt"]);e!==void 0&&i!=null&&x(e,["parameters","negativePrompt"],i);const s=y(n,["numberOfImages"]);e!==void 0&&s!=null&&x(e,["parameters","sampleCount"],s);const a=y(n,["aspectRatio"]);e!==void 0&&a!=null&&x(e,["parameters","aspectRatio"],a);const c=y(n,["guidanceScale"]);e!==void 0&&c!=null&&x(e,["parameters","guidanceScale"],c);const u=y(n,["seed"]);e!==void 0&&u!=null&&x(e,["parameters","seed"],u);const d=y(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&x(e,["parameters","safetySetting"],d);const p=y(n,["personGeneration"]);e!==void 0&&p!=null&&x(e,["parameters","personGeneration"],p);const g=y(n,["includeSafetyAttributes"]);e!==void 0&&g!=null&&x(e,["parameters","includeSafetyAttributes"],g);const _=y(n,["includeRaiReason"]);e!==void 0&&_!=null&&x(e,["parameters","includeRaiReason"],_);const w=y(n,["language"]);e!==void 0&&w!=null&&x(e,["parameters","language"],w);const P=y(n,["outputMimeType"]);e!==void 0&&P!=null&&x(e,["parameters","outputOptions","mimeType"],P);const O=y(n,["outputCompressionQuality"]);e!==void 0&&O!=null&&x(e,["parameters","outputOptions","compressionQuality"],O);const L=y(n,["addWatermark"]);e!==void 0&&L!=null&&x(e,["parameters","addWatermark"],L);const B=y(n,["labels"]);e!==void 0&&B!=null&&x(e,["labels"],B);const K=y(n,["editMode"]);e!==void 0&&K!=null&&x(e,["parameters","editMode"],K);const W=y(n,["baseSteps"]);return e!==void 0&&W!=null&&x(e,["parameters","editConfig","baseSteps"],W),t}function ZQ(n,e){const t={},r=y(e,["model"]);r!=null&&x(t,["_url","model"],Jn(n,r));const i=y(e,["prompt"]);i!=null&&x(t,["instances[0]","prompt"],i);const s=y(e,["referenceImages"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(u=>tZ(u))),x(t,["instances[0]","referenceImages"],c)}const a=y(e,["config"]);return a!=null&&XQ(a,t),t}function eX(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=y(n,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>P1(s))),x(e,["generatedImages"],i)}return e}function tX(n,e){const t={},r=y(n,["taskType"]);e!==void 0&&r!=null&&x(e,["requests[]","taskType"],r);const i=y(n,["title"]);e!==void 0&&i!=null&&x(e,["requests[]","title"],i);const s=y(n,["outputDimensionality"]);if(e!==void 0&&s!=null&&x(e,["requests[]","outputDimensionality"],s),y(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(y(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function nX(n,e){const t={},r=y(n,["taskType"]);e!==void 0&&r!=null&&x(e,["instances[]","task_type"],r);const i=y(n,["title"]);e!==void 0&&i!=null&&x(e,["instances[]","title"],i);const s=y(n,["outputDimensionality"]);e!==void 0&&s!=null&&x(e,["parameters","outputDimensionality"],s);const a=y(n,["mimeType"]);e!==void 0&&a!=null&&x(e,["instances[]","mimeType"],a);const c=y(n,["autoTruncate"]);return e!==void 0&&c!=null&&x(e,["parameters","autoTruncate"],c),t}function rX(n,e){const t={},r=y(e,["model"]);r!=null&&x(t,["_url","model"],Jn(n,r));const i=y(e,["contents"]);if(i!=null){let c=p5(n,i);Array.isArray(c)&&(c=c.map(u=>u)),x(t,["requests[]","content"],c)}const s=y(e,["config"]);s!=null&&tX(s,t);const a=y(e,["model"]);return a!==void 0&&x(t,["requests[]","model"],Jn(n,a)),t}function iX(n,e){const t={},r=y(e,["model"]);r!=null&&x(t,["_url","model"],Jn(n,r));const i=y(e,["contents"]);if(i!=null){let a=p5(n,i);Array.isArray(a)&&(a=a.map(c=>c)),x(t,["instances[]","content"],a)}const s=y(e,["config"]);return s!=null&&nX(s,t),t}function sX(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=y(n,["embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),x(e,["embeddings"],s)}const i=y(n,["metadata"]);return i!=null&&x(e,["metadata"],i),e}function oX(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=y(n,["predictions[]","embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>jQ(a))),x(e,["embeddings"],s)}const i=y(n,["metadata"]);return i!=null&&x(e,["metadata"],i),e}function aX(n){const e={},t=y(n,["endpoint"]);t!=null&&x(e,["name"],t);const r=y(n,["deployedModelId"]);return r!=null&&x(e,["deployedModelId"],r),e}function lX(n){const e={};if(y(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=y(n,["fileUri"]);t!=null&&x(e,["fileUri"],t);const r=y(n,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function cX(n){const e={},t=y(n,["id"]);t!=null&&x(e,["id"],t);const r=y(n,["args"]);r!=null&&x(e,["args"],r);const i=y(n,["name"]);if(i!=null&&x(e,["name"],i),y(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(y(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function uX(n){const e={},t=y(n,["mode"]);t!=null&&x(e,["mode"],t);const r=y(n,["allowedFunctionNames"]);if(r!=null&&x(e,["allowedFunctionNames"],r),y(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function dX(n){const e={};if(y(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=y(n,["description"]);t!=null&&x(e,["description"],t);const r=y(n,["name"]);r!=null&&x(e,["name"],r);const i=y(n,["parameters"]);i!=null&&x(e,["parameters"],i);const s=y(n,["parametersJsonSchema"]);s!=null&&x(e,["parametersJsonSchema"],s);const a=y(n,["response"]);a!=null&&x(e,["response"],a);const c=y(n,["responseJsonSchema"]);return c!=null&&x(e,["responseJsonSchema"],c),e}function hX(n,e,t){const r={},i=y(e,["systemInstruction"]);t!==void 0&&i!=null&&x(t,["systemInstruction"],R1(eo(i)));const s=y(e,["temperature"]);s!=null&&x(r,["temperature"],s);const a=y(e,["topP"]);a!=null&&x(r,["topP"],a);const c=y(e,["topK"]);c!=null&&x(r,["topK"],c);const u=y(e,["candidateCount"]);u!=null&&x(r,["candidateCount"],u);const d=y(e,["maxOutputTokens"]);d!=null&&x(r,["maxOutputTokens"],d);const p=y(e,["stopSequences"]);p!=null&&x(r,["stopSequences"],p);const g=y(e,["responseLogprobs"]);g!=null&&x(r,["responseLogprobs"],g);const _=y(e,["logprobs"]);_!=null&&x(r,["logprobs"],_);const w=y(e,["presencePenalty"]);w!=null&&x(r,["presencePenalty"],w);const P=y(e,["frequencyPenalty"]);P!=null&&x(r,["frequencyPenalty"],P);const O=y(e,["seed"]);O!=null&&x(r,["seed"],O);const L=y(e,["responseMimeType"]);L!=null&&x(r,["responseMimeType"],L);const B=y(e,["responseSchema"]);B!=null&&x(r,["responseSchema"],m5(B));const K=y(e,["responseJsonSchema"]);if(K!=null&&x(r,["responseJsonSchema"],K),y(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(y(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const W=y(e,["safetySettings"]);if(t!==void 0&&W!=null){let M=W;Array.isArray(M)&&(M=M.map(Q=>nZ(Q))),x(t,["safetySettings"],M)}const J=y(e,["tools"]);if(t!==void 0&&J!=null){let M=jp(J);Array.isArray(M)&&(M=M.map(Q=>cZ(Up(Q)))),x(t,["tools"],M)}const ae=y(e,["toolConfig"]);if(t!==void 0&&ae!=null&&x(t,["toolConfig"],lZ(ae)),y(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const le=y(e,["cachedContent"]);t!==void 0&&le!=null&&x(t,["cachedContent"],iu(n,le));const U=y(e,["responseModalities"]);U!=null&&x(r,["responseModalities"],U);const C=y(e,["mediaResolution"]);C!=null&&x(r,["mediaResolution"],C);const N=y(e,["speechConfig"]);if(N!=null&&x(r,["speechConfig"],g5(N)),y(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const F=y(e,["thinkingConfig"]);F!=null&&x(r,["thinkingConfig"],F);const S=y(e,["imageConfig"]);S!=null&&x(r,["imageConfig"],jX(S));const k=y(e,["enableEnhancedCivicAnswers"]);return k!=null&&x(r,["enableEnhancedCivicAnswers"],k),r}function fX(n,e,t){const r={},i=y(e,["systemInstruction"]);t!==void 0&&i!=null&&x(t,["systemInstruction"],eo(i));const s=y(e,["temperature"]);s!=null&&x(r,["temperature"],s);const a=y(e,["topP"]);a!=null&&x(r,["topP"],a);const c=y(e,["topK"]);c!=null&&x(r,["topK"],c);const u=y(e,["candidateCount"]);u!=null&&x(r,["candidateCount"],u);const d=y(e,["maxOutputTokens"]);d!=null&&x(r,["maxOutputTokens"],d);const p=y(e,["stopSequences"]);p!=null&&x(r,["stopSequences"],p);const g=y(e,["responseLogprobs"]);g!=null&&x(r,["responseLogprobs"],g);const _=y(e,["logprobs"]);_!=null&&x(r,["logprobs"],_);const w=y(e,["presencePenalty"]);w!=null&&x(r,["presencePenalty"],w);const P=y(e,["frequencyPenalty"]);P!=null&&x(r,["frequencyPenalty"],P);const O=y(e,["seed"]);O!=null&&x(r,["seed"],O);const L=y(e,["responseMimeType"]);L!=null&&x(r,["responseMimeType"],L);const B=y(e,["responseSchema"]);B!=null&&x(r,["responseSchema"],m5(B));const K=y(e,["responseJsonSchema"]);K!=null&&x(r,["responseJsonSchema"],K);const W=y(e,["routingConfig"]);W!=null&&x(r,["routingConfig"],W);const J=y(e,["modelSelectionConfig"]);J!=null&&x(r,["modelConfig"],J);const ae=y(e,["safetySettings"]);if(t!==void 0&&ae!=null){let se=ae;Array.isArray(se)&&(se=se.map(ve=>ve)),x(t,["safetySettings"],se)}const le=y(e,["tools"]);if(t!==void 0&&le!=null){let se=jp(le);Array.isArray(se)&&(se=se.map(ve=>VD(Up(ve)))),x(t,["tools"],se)}const U=y(e,["toolConfig"]);t!==void 0&&U!=null&&x(t,["toolConfig"],U);const C=y(e,["labels"]);t!==void 0&&C!=null&&x(t,["labels"],C);const N=y(e,["cachedContent"]);t!==void 0&&N!=null&&x(t,["cachedContent"],iu(n,N));const F=y(e,["responseModalities"]);F!=null&&x(r,["responseModalities"],F);const S=y(e,["mediaResolution"]);S!=null&&x(r,["mediaResolution"],S);const k=y(e,["speechConfig"]);k!=null&&x(r,["speechConfig"],jD(g5(k)));const M=y(e,["audioTimestamp"]);M!=null&&x(r,["audioTimestamp"],M);const Q=y(e,["thinkingConfig"]);Q!=null&&x(r,["thinkingConfig"],Q);const pe=y(e,["imageConfig"]);if(pe!=null&&x(r,["imageConfig"],VX(pe)),y(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function oR(n,e){const t={},r=y(e,["model"]);r!=null&&x(t,["_url","model"],Jn(n,r));const i=y(e,["contents"]);if(i!=null){let a=Oa(i);Array.isArray(a)&&(a=a.map(c=>R1(c))),x(t,["contents"],a)}const s=y(e,["config"]);return s!=null&&x(t,["generationConfig"],hX(n,s,t)),t}function aR(n,e){const t={},r=y(e,["model"]);r!=null&&x(t,["_url","model"],Jn(n,r));const i=y(e,["contents"]);if(i!=null){let a=Oa(i);Array.isArray(a)&&(a=a.map(c=>c)),x(t,["contents"],a)}const s=y(e,["config"]);return s!=null&&x(t,["generationConfig"],fX(n,s,t)),t}function lR(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=y(n,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>MQ(d))),x(e,["candidates"],u)}const i=y(n,["modelVersion"]);i!=null&&x(e,["modelVersion"],i);const s=y(n,["promptFeedback"]);s!=null&&x(e,["promptFeedback"],s);const a=y(n,["responseId"]);a!=null&&x(e,["responseId"],a);const c=y(n,["usageMetadata"]);return c!=null&&x(e,["usageMetadata"],c),e}function cR(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=y(n,["candidates"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>p)),x(e,["candidates"],d)}const i=y(n,["createTime"]);i!=null&&x(e,["createTime"],i);const s=y(n,["modelVersion"]);s!=null&&x(e,["modelVersion"],s);const a=y(n,["promptFeedback"]);a!=null&&x(e,["promptFeedback"],a);const c=y(n,["responseId"]);c!=null&&x(e,["responseId"],c);const u=y(n,["usageMetadata"]);return u!=null&&x(e,["usageMetadata"],u),e}function pX(n,e){const t={};if(y(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(y(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=y(n,["numberOfImages"]);e!==void 0&&r!=null&&x(e,["parameters","sampleCount"],r);const i=y(n,["aspectRatio"]);e!==void 0&&i!=null&&x(e,["parameters","aspectRatio"],i);const s=y(n,["guidanceScale"]);if(e!==void 0&&s!=null&&x(e,["parameters","guidanceScale"],s),y(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=y(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&x(e,["parameters","safetySetting"],a);const c=y(n,["personGeneration"]);e!==void 0&&c!=null&&x(e,["parameters","personGeneration"],c);const u=y(n,["includeSafetyAttributes"]);e!==void 0&&u!=null&&x(e,["parameters","includeSafetyAttributes"],u);const d=y(n,["includeRaiReason"]);e!==void 0&&d!=null&&x(e,["parameters","includeRaiReason"],d);const p=y(n,["language"]);e!==void 0&&p!=null&&x(e,["parameters","language"],p);const g=y(n,["outputMimeType"]);e!==void 0&&g!=null&&x(e,["parameters","outputOptions","mimeType"],g);const _=y(n,["outputCompressionQuality"]);if(e!==void 0&&_!=null&&x(e,["parameters","outputOptions","compressionQuality"],_),y(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(y(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=y(n,["imageSize"]);if(e!==void 0&&w!=null&&x(e,["parameters","sampleImageSize"],w),y(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function mX(n,e){const t={},r=y(n,["outputGcsUri"]);e!==void 0&&r!=null&&x(e,["parameters","storageUri"],r);const i=y(n,["negativePrompt"]);e!==void 0&&i!=null&&x(e,["parameters","negativePrompt"],i);const s=y(n,["numberOfImages"]);e!==void 0&&s!=null&&x(e,["parameters","sampleCount"],s);const a=y(n,["aspectRatio"]);e!==void 0&&a!=null&&x(e,["parameters","aspectRatio"],a);const c=y(n,["guidanceScale"]);e!==void 0&&c!=null&&x(e,["parameters","guidanceScale"],c);const u=y(n,["seed"]);e!==void 0&&u!=null&&x(e,["parameters","seed"],u);const d=y(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&x(e,["parameters","safetySetting"],d);const p=y(n,["personGeneration"]);e!==void 0&&p!=null&&x(e,["parameters","personGeneration"],p);const g=y(n,["includeSafetyAttributes"]);e!==void 0&&g!=null&&x(e,["parameters","includeSafetyAttributes"],g);const _=y(n,["includeRaiReason"]);e!==void 0&&_!=null&&x(e,["parameters","includeRaiReason"],_);const w=y(n,["language"]);e!==void 0&&w!=null&&x(e,["parameters","language"],w);const P=y(n,["outputMimeType"]);e!==void 0&&P!=null&&x(e,["parameters","outputOptions","mimeType"],P);const O=y(n,["outputCompressionQuality"]);e!==void 0&&O!=null&&x(e,["parameters","outputOptions","compressionQuality"],O);const L=y(n,["addWatermark"]);e!==void 0&&L!=null&&x(e,["parameters","addWatermark"],L);const B=y(n,["labels"]);e!==void 0&&B!=null&&x(e,["labels"],B);const K=y(n,["imageSize"]);e!==void 0&&K!=null&&x(e,["parameters","sampleImageSize"],K);const W=y(n,["enhancePrompt"]);return e!==void 0&&W!=null&&x(e,["parameters","enhancePrompt"],W),t}function gX(n,e){const t={},r=y(e,["model"]);r!=null&&x(t,["_url","model"],Jn(n,r));const i=y(e,["prompt"]);i!=null&&x(t,["instances[0]","prompt"],i);const s=y(e,["config"]);return s!=null&&pX(s,t),t}function yX(n,e){const t={},r=y(e,["model"]);r!=null&&x(t,["_url","model"],Jn(n,r));const i=y(e,["prompt"]);i!=null&&x(t,["instances[0]","prompt"],i);const s=y(e,["config"]);return s!=null&&mX(s,t),t}function vX(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=y(n,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>RX(a))),x(e,["generatedImages"],s)}const i=y(n,["positivePromptSafetyAttributes"]);return i!=null&&x(e,["positivePromptSafetyAttributes"],FD(i)),e}function _X(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=y(n,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>P1(a))),x(e,["generatedImages"],s)}const i=y(n,["positivePromptSafetyAttributes"]);return i!=null&&x(e,["positivePromptSafetyAttributes"],UD(i)),e}function bX(n,e){const t={},r=y(n,["numberOfVideos"]);if(e!==void 0&&r!=null&&x(e,["parameters","sampleCount"],r),y(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(y(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=y(n,["durationSeconds"]);if(e!==void 0&&i!=null&&x(e,["parameters","durationSeconds"],i),y(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=y(n,["aspectRatio"]);e!==void 0&&s!=null&&x(e,["parameters","aspectRatio"],s);const a=y(n,["resolution"]);e!==void 0&&a!=null&&x(e,["parameters","resolution"],a);const c=y(n,["personGeneration"]);if(e!==void 0&&c!=null&&x(e,["parameters","personGeneration"],c),y(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=y(n,["negativePrompt"]);e!==void 0&&u!=null&&x(e,["parameters","negativePrompt"],u);const d=y(n,["enhancePrompt"]);if(e!==void 0&&d!=null&&x(e,["parameters","enhancePrompt"],d),y(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const p=y(n,["lastFrame"]);e!==void 0&&p!=null&&x(e,["instances[0]","lastFrame"],k1(p));const g=y(n,["referenceImages"]);if(e!==void 0&&g!=null){let _=g;Array.isArray(_)&&(_=_.map(w=>wZ(w))),x(e,["instances[0]","referenceImages"],_)}if(y(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(y(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function xX(n,e){const t={},r=y(n,["numberOfVideos"]);e!==void 0&&r!=null&&x(e,["parameters","sampleCount"],r);const i=y(n,["outputGcsUri"]);e!==void 0&&i!=null&&x(e,["parameters","storageUri"],i);const s=y(n,["fps"]);e!==void 0&&s!=null&&x(e,["parameters","fps"],s);const a=y(n,["durationSeconds"]);e!==void 0&&a!=null&&x(e,["parameters","durationSeconds"],a);const c=y(n,["seed"]);e!==void 0&&c!=null&&x(e,["parameters","seed"],c);const u=y(n,["aspectRatio"]);e!==void 0&&u!=null&&x(e,["parameters","aspectRatio"],u);const d=y(n,["resolution"]);e!==void 0&&d!=null&&x(e,["parameters","resolution"],d);const p=y(n,["personGeneration"]);e!==void 0&&p!=null&&x(e,["parameters","personGeneration"],p);const g=y(n,["pubsubTopic"]);e!==void 0&&g!=null&&x(e,["parameters","pubsubTopic"],g);const _=y(n,["negativePrompt"]);e!==void 0&&_!=null&&x(e,["parameters","negativePrompt"],_);const w=y(n,["enhancePrompt"]);e!==void 0&&w!=null&&x(e,["parameters","enhancePrompt"],w);const P=y(n,["generateAudio"]);e!==void 0&&P!=null&&x(e,["parameters","generateAudio"],P);const O=y(n,["lastFrame"]);e!==void 0&&O!=null&&x(e,["instances[0]","lastFrame"],yl(O));const L=y(n,["referenceImages"]);if(e!==void 0&&L!=null){let W=L;Array.isArray(W)&&(W=W.map(J=>EZ(J))),x(e,["instances[0]","referenceImages"],W)}const B=y(n,["mask"]);e!==void 0&&B!=null&&x(e,["instances[0]","mask"],xZ(B));const K=y(n,["compressionQuality"]);return e!==void 0&&K!=null&&x(e,["parameters","compressionQuality"],K),t}function wX(n){const e={},t=y(n,["name"]);t!=null&&x(e,["name"],t);const r=y(n,["metadata"]);r!=null&&x(e,["metadata"],r);const i=y(n,["done"]);i!=null&&x(e,["done"],i);const s=y(n,["error"]);s!=null&&x(e,["error"],s);const a=y(n,["response","generateVideoResponse"]);return a!=null&&x(e,["response"],NX(a)),e}function EX(n){const e={},t=y(n,["name"]);t!=null&&x(e,["name"],t);const r=y(n,["metadata"]);r!=null&&x(e,["metadata"],r);const i=y(n,["done"]);i!=null&&x(e,["done"],i);const s=y(n,["error"]);s!=null&&x(e,["error"],s);const a=y(n,["response"]);return a!=null&&x(e,["response"],SX(a)),e}function TX(n,e){const t={},r=y(e,["model"]);r!=null&&x(t,["_url","model"],Jn(n,r));const i=y(e,["prompt"]);i!=null&&x(t,["instances[0]","prompt"],i);const s=y(e,["image"]);s!=null&&x(t,["instances[0]","image"],k1(s));const a=y(e,["video"]);a!=null&&x(t,["instances[0]","video"],BD(a));const c=y(e,["source"]);c!=null&&IX(c,t);const u=y(e,["config"]);return u!=null&&bX(u,t),t}function AX(n,e){const t={},r=y(e,["model"]);r!=null&&x(t,["_url","model"],Jn(n,r));const i=y(e,["prompt"]);i!=null&&x(t,["instances[0]","prompt"],i);const s=y(e,["image"]);s!=null&&x(t,["instances[0]","image"],yl(s));const a=y(e,["video"]);a!=null&&x(t,["instances[0]","video"],qD(a));const c=y(e,["source"]);c!=null&&CX(c,t);const u=y(e,["config"]);return u!=null&&xX(u,t),t}function NX(n){const e={},t=y(n,["generatedSamples"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>kX(a))),x(e,["generatedVideos"],s)}const r=y(n,["raiMediaFilteredCount"]);r!=null&&x(e,["raiMediaFilteredCount"],r);const i=y(n,["raiMediaFilteredReasons"]);return i!=null&&x(e,["raiMediaFilteredReasons"],i),e}function SX(n){const e={},t=y(n,["videos"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>DX(a))),x(e,["generatedVideos"],s)}const r=y(n,["raiMediaFilteredCount"]);r!=null&&x(e,["raiMediaFilteredCount"],r);const i=y(n,["raiMediaFilteredReasons"]);return i!=null&&x(e,["raiMediaFilteredReasons"],i),e}function IX(n,e){const t={},r=y(n,["prompt"]);e!==void 0&&r!=null&&x(e,["instances[0]","prompt"],r);const i=y(n,["image"]);e!==void 0&&i!=null&&x(e,["instances[0]","image"],k1(i));const s=y(n,["video"]);return e!==void 0&&s!=null&&x(e,["instances[0]","video"],BD(s)),t}function CX(n,e){const t={},r=y(n,["prompt"]);e!==void 0&&r!=null&&x(e,["instances[0]","prompt"],r);const i=y(n,["image"]);e!==void 0&&i!=null&&x(e,["instances[0]","image"],yl(i));const s=y(n,["video"]);return e!==void 0&&s!=null&&x(e,["instances[0]","video"],qD(s)),t}function RX(n){const e={},t=y(n,["_self"]);t!=null&&x(e,["image"],BX(t));const r=y(n,["raiFilteredReason"]);r!=null&&x(e,["raiFilteredReason"],r);const i=y(n,["_self"]);return i!=null&&x(e,["safetyAttributes"],FD(i)),e}function P1(n){const e={},t=y(n,["_self"]);t!=null&&x(e,["image"],OD(t));const r=y(n,["raiFilteredReason"]);r!=null&&x(e,["raiFilteredReason"],r);const i=y(n,["_self"]);i!=null&&x(e,["safetyAttributes"],UD(i));const s=y(n,["prompt"]);return s!=null&&x(e,["enhancedPrompt"],s),e}function PX(n){const e={},t=y(n,["_self"]);t!=null&&x(e,["mask"],OD(t));const r=y(n,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),x(e,["labels"],i)}return e}function kX(n){const e={},t=y(n,["video"]);return t!=null&&x(e,["video"],_Z(t)),e}function DX(n){const e={},t=y(n,["_self"]);return t!=null&&x(e,["video"],bZ(t)),e}function LX(n){const e={},t=y(n,["modelSelectionConfig"]);t!=null&&x(e,["modelConfig"],t);const r=y(n,["responseJsonSchema"]);r!=null&&x(e,["responseJsonSchema"],r);const i=y(n,["audioTimestamp"]);i!=null&&x(e,["audioTimestamp"],i);const s=y(n,["candidateCount"]);s!=null&&x(e,["candidateCount"],s);const a=y(n,["enableAffectiveDialog"]);a!=null&&x(e,["enableAffectiveDialog"],a);const c=y(n,["frequencyPenalty"]);c!=null&&x(e,["frequencyPenalty"],c);const u=y(n,["logprobs"]);u!=null&&x(e,["logprobs"],u);const d=y(n,["maxOutputTokens"]);d!=null&&x(e,["maxOutputTokens"],d);const p=y(n,["mediaResolution"]);p!=null&&x(e,["mediaResolution"],p);const g=y(n,["presencePenalty"]);g!=null&&x(e,["presencePenalty"],g);const _=y(n,["responseLogprobs"]);_!=null&&x(e,["responseLogprobs"],_);const w=y(n,["responseMimeType"]);w!=null&&x(e,["responseMimeType"],w);const P=y(n,["responseModalities"]);P!=null&&x(e,["responseModalities"],P);const O=y(n,["responseSchema"]);O!=null&&x(e,["responseSchema"],O);const L=y(n,["routingConfig"]);L!=null&&x(e,["routingConfig"],L);const B=y(n,["seed"]);B!=null&&x(e,["seed"],B);const K=y(n,["speechConfig"]);K!=null&&x(e,["speechConfig"],jD(K));const W=y(n,["stopSequences"]);W!=null&&x(e,["stopSequences"],W);const J=y(n,["temperature"]);J!=null&&x(e,["temperature"],J);const ae=y(n,["thinkingConfig"]);ae!=null&&x(e,["thinkingConfig"],ae);const le=y(n,["topK"]);le!=null&&x(e,["topK"],le);const U=y(n,["topP"]);if(U!=null&&x(e,["topP"],U),y(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function MX(n,e){const t={},r=y(e,["model"]);return r!=null&&x(t,["_url","name"],Jn(n,r)),t}function OX(n,e){const t={},r=y(e,["model"]);return r!=null&&x(t,["_url","name"],Jn(n,r)),t}function FX(n){const e={};if(y(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=y(n,["enableWidget"]);return t!=null&&x(e,["enableWidget"],t),e}function UX(n){const e={};if(y(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(y(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=y(n,["timeRangeFilter"]);return t!=null&&x(e,["timeRangeFilter"],t),e}function jX(n){const e={},t=y(n,["aspectRatio"]);t!=null&&x(e,["aspectRatio"],t);const r=y(n,["imageSize"]);if(r!=null&&x(e,["imageSize"],r),y(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(y(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function VX(n){const e={},t=y(n,["aspectRatio"]);t!=null&&x(e,["aspectRatio"],t);const r=y(n,["imageSize"]);r!=null&&x(e,["imageSize"],r);const i=y(n,["outputMimeType"]);i!=null&&x(e,["imageOutputOptions","mimeType"],i);const s=y(n,["outputCompressionQuality"]);return s!=null&&x(e,["imageOutputOptions","compressionQuality"],s),e}function BX(n){const e={},t=y(n,["bytesBase64Encoded"]);t!=null&&x(e,["imageBytes"],_d(t));const r=y(n,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function OD(n){const e={},t=y(n,["gcsUri"]);t!=null&&x(e,["gcsUri"],t);const r=y(n,["bytesBase64Encoded"]);r!=null&&x(e,["imageBytes"],_d(r));const i=y(n,["mimeType"]);return i!=null&&x(e,["mimeType"],i),e}function k1(n){const e={};if(y(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=y(n,["imageBytes"]);t!=null&&x(e,["bytesBase64Encoded"],_d(t));const r=y(n,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function yl(n){const e={},t=y(n,["gcsUri"]);t!=null&&x(e,["gcsUri"],t);const r=y(n,["imageBytes"]);r!=null&&x(e,["bytesBase64Encoded"],_d(r));const i=y(n,["mimeType"]);return i!=null&&x(e,["mimeType"],i),e}function qX(n,e,t){const r={},i=y(e,["pageSize"]);t!==void 0&&i!=null&&x(t,["_query","pageSize"],i);const s=y(e,["pageToken"]);t!==void 0&&s!=null&&x(t,["_query","pageToken"],s);const a=y(e,["filter"]);t!==void 0&&a!=null&&x(t,["_query","filter"],a);const c=y(e,["queryBase"]);return t!==void 0&&c!=null&&x(t,["_url","models_url"],ID(n,c)),r}function GX(n,e,t){const r={},i=y(e,["pageSize"]);t!==void 0&&i!=null&&x(t,["_query","pageSize"],i);const s=y(e,["pageToken"]);t!==void 0&&s!=null&&x(t,["_query","pageToken"],s);const a=y(e,["filter"]);t!==void 0&&a!=null&&x(t,["_query","filter"],a);const c=y(e,["queryBase"]);return t!==void 0&&c!=null&&x(t,["_url","models_url"],ID(n,c)),r}function HX(n,e){const t={},r=y(e,["config"]);return r!=null&&qX(n,r,t),t}function zX(n,e){const t={},r=y(e,["config"]);return r!=null&&GX(n,r,t),t}function $X(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=y(n,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const i=y(n,["_self"]);if(i!=null){let s=CD(i);Array.isArray(s)&&(s=s.map(a=>ax(a))),x(e,["models"],s)}return e}function YX(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=y(n,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const i=y(n,["_self"]);if(i!=null){let s=CD(i);Array.isArray(s)&&(s=s.map(a=>lx(a))),x(e,["models"],s)}return e}function WX(n){const e={},t=y(n,["maskMode"]);t!=null&&x(e,["maskMode"],t);const r=y(n,["segmentationClasses"]);r!=null&&x(e,["maskClasses"],r);const i=y(n,["maskDilation"]);return i!=null&&x(e,["dilation"],i),e}function ax(n){const e={},t=y(n,["name"]);t!=null&&x(e,["name"],t);const r=y(n,["displayName"]);r!=null&&x(e,["displayName"],r);const i=y(n,["description"]);i!=null&&x(e,["description"],i);const s=y(n,["version"]);s!=null&&x(e,["version"],s);const a=y(n,["_self"]);a!=null&&x(e,["tunedModelInfo"],uZ(a));const c=y(n,["inputTokenLimit"]);c!=null&&x(e,["inputTokenLimit"],c);const u=y(n,["outputTokenLimit"]);u!=null&&x(e,["outputTokenLimit"],u);const d=y(n,["supportedGenerationMethods"]);d!=null&&x(e,["supportedActions"],d);const p=y(n,["temperature"]);p!=null&&x(e,["temperature"],p);const g=y(n,["maxTemperature"]);g!=null&&x(e,["maxTemperature"],g);const _=y(n,["topP"]);_!=null&&x(e,["topP"],_);const w=y(n,["topK"]);w!=null&&x(e,["topK"],w);const P=y(n,["thinking"]);return P!=null&&x(e,["thinking"],P),e}function lx(n){const e={},t=y(n,["name"]);t!=null&&x(e,["name"],t);const r=y(n,["displayName"]);r!=null&&x(e,["displayName"],r);const i=y(n,["description"]);i!=null&&x(e,["description"],i);const s=y(n,["versionId"]);s!=null&&x(e,["version"],s);const a=y(n,["deployedModels"]);if(a!=null){let g=a;Array.isArray(g)&&(g=g.map(_=>aX(_))),x(e,["endpoints"],g)}const c=y(n,["labels"]);c!=null&&x(e,["labels"],c);const u=y(n,["_self"]);u!=null&&x(e,["tunedModelInfo"],dZ(u));const d=y(n,["defaultCheckpointId"]);d!=null&&x(e,["defaultCheckpointId"],d);const p=y(n,["checkpoints"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(_=>_)),x(e,["checkpoints"],g)}return e}function KX(n){const e={},t=y(n,["mediaResolution"]);t!=null&&x(e,["mediaResolution"],t);const r=y(n,["codeExecutionResult"]);r!=null&&x(e,["codeExecutionResult"],r);const i=y(n,["executableCode"]);i!=null&&x(e,["executableCode"],i);const s=y(n,["fileData"]);s!=null&&x(e,["fileData"],lX(s));const a=y(n,["functionCall"]);a!=null&&x(e,["functionCall"],cX(a));const c=y(n,["functionResponse"]);c!=null&&x(e,["functionResponse"],c);const u=y(n,["inlineData"]);u!=null&&x(e,["inlineData"],LQ(u));const d=y(n,["text"]);d!=null&&x(e,["text"],d);const p=y(n,["thought"]);p!=null&&x(e,["thought"],p);const g=y(n,["thoughtSignature"]);g!=null&&x(e,["thoughtSignature"],g);const _=y(n,["videoMetadata"]);return _!=null&&x(e,["videoMetadata"],_),e}function JX(n){const e={},t=y(n,["productImage"]);return t!=null&&x(e,["image"],yl(t)),e}function QX(n,e){const t={},r=y(n,["numberOfImages"]);e!==void 0&&r!=null&&x(e,["parameters","sampleCount"],r);const i=y(n,["baseSteps"]);e!==void 0&&i!=null&&x(e,["parameters","baseSteps"],i);const s=y(n,["outputGcsUri"]);e!==void 0&&s!=null&&x(e,["parameters","storageUri"],s);const a=y(n,["seed"]);e!==void 0&&a!=null&&x(e,["parameters","seed"],a);const c=y(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&x(e,["parameters","safetySetting"],c);const u=y(n,["personGeneration"]);e!==void 0&&u!=null&&x(e,["parameters","personGeneration"],u);const d=y(n,["addWatermark"]);e!==void 0&&d!=null&&x(e,["parameters","addWatermark"],d);const p=y(n,["outputMimeType"]);e!==void 0&&p!=null&&x(e,["parameters","outputOptions","mimeType"],p);const g=y(n,["outputCompressionQuality"]);e!==void 0&&g!=null&&x(e,["parameters","outputOptions","compressionQuality"],g);const _=y(n,["enhancePrompt"]);e!==void 0&&_!=null&&x(e,["parameters","enhancePrompt"],_);const w=y(n,["labels"]);return e!==void 0&&w!=null&&x(e,["labels"],w),t}function XX(n,e){const t={},r=y(e,["model"]);r!=null&&x(t,["_url","model"],Jn(n,r));const i=y(e,["source"]);i!=null&&eZ(i,t);const s=y(e,["config"]);return s!=null&&QX(s,t),t}function ZX(n){const e={},t=y(n,["predictions"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>P1(i))),x(e,["generatedImages"],r)}return e}function eZ(n,e){const t={},r=y(n,["prompt"]);e!==void 0&&r!=null&&x(e,["instances[0]","prompt"],r);const i=y(n,["personImage"]);e!==void 0&&i!=null&&x(e,["instances[0]","personImage","image"],yl(i));const s=y(n,["productImages"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>JX(c))),x(e,["instances[0]","productImages"],a)}return t}function tZ(n){const e={},t=y(n,["referenceImage"]);t!=null&&x(e,["referenceImage"],yl(t));const r=y(n,["referenceId"]);r!=null&&x(e,["referenceId"],r);const i=y(n,["referenceType"]);i!=null&&x(e,["referenceType"],i);const s=y(n,["maskImageConfig"]);s!=null&&x(e,["maskImageConfig"],WX(s));const a=y(n,["controlImageConfig"]);a!=null&&x(e,["controlImageConfig"],BQ(a));const c=y(n,["styleImageConfig"]);c!=null&&x(e,["styleImageConfig"],c);const u=y(n,["subjectImageConfig"]);return u!=null&&x(e,["subjectImageConfig"],u),e}function FD(n){const e={},t=y(n,["safetyAttributes","categories"]);t!=null&&x(e,["categories"],t);const r=y(n,["safetyAttributes","scores"]);r!=null&&x(e,["scores"],r);const i=y(n,["contentType"]);return i!=null&&x(e,["contentType"],i),e}function UD(n){const e={},t=y(n,["safetyAttributes","categories"]);t!=null&&x(e,["categories"],t);const r=y(n,["safetyAttributes","scores"]);r!=null&&x(e,["scores"],r);const i=y(n,["contentType"]);return i!=null&&x(e,["contentType"],i),e}function nZ(n){const e={},t=y(n,["category"]);if(t!=null&&x(e,["category"],t),y(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=y(n,["threshold"]);return r!=null&&x(e,["threshold"],r),e}function rZ(n){const e={},t=y(n,["image"]);return t!=null&&x(e,["image"],yl(t)),e}function iZ(n,e){const t={},r=y(n,["mode"]);e!==void 0&&r!=null&&x(e,["parameters","mode"],r);const i=y(n,["maxPredictions"]);e!==void 0&&i!=null&&x(e,["parameters","maxPredictions"],i);const s=y(n,["confidenceThreshold"]);e!==void 0&&s!=null&&x(e,["parameters","confidenceThreshold"],s);const a=y(n,["maskDilation"]);e!==void 0&&a!=null&&x(e,["parameters","maskDilation"],a);const c=y(n,["binaryColorThreshold"]);e!==void 0&&c!=null&&x(e,["parameters","binaryColorThreshold"],c);const u=y(n,["labels"]);return e!==void 0&&u!=null&&x(e,["labels"],u),t}function sZ(n,e){const t={},r=y(e,["model"]);r!=null&&x(t,["_url","model"],Jn(n,r));const i=y(e,["source"]);i!=null&&aZ(i,t);const s=y(e,["config"]);return s!=null&&iZ(s,t),t}function oZ(n){const e={},t=y(n,["predictions"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>PX(i))),x(e,["generatedMasks"],r)}return e}function aZ(n,e){const t={},r=y(n,["prompt"]);e!==void 0&&r!=null&&x(e,["instances[0]","prompt"],r);const i=y(n,["image"]);e!==void 0&&i!=null&&x(e,["instances[0]","image"],yl(i));const s=y(n,["scribbleImage"]);return e!==void 0&&s!=null&&x(e,["instances[0]","scribble"],rZ(s)),t}function jD(n){const e={},t=y(n,["voiceConfig"]);t!=null&&x(e,["voiceConfig"],t);const r=y(n,["languageCode"]);if(r!=null&&x(e,["languageCode"],r),y(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function lZ(n){const e={},t=y(n,["functionCallingConfig"]);t!=null&&x(e,["functionCallingConfig"],uX(t));const r=y(n,["retrievalConfig"]);return r!=null&&x(e,["retrievalConfig"],r),e}function cZ(n){const e={},t=y(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(g=>g)),x(e,["functionDeclarations"],p)}if(y(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=y(n,["googleSearchRetrieval"]);r!=null&&x(e,["googleSearchRetrieval"],r);const i=y(n,["computerUse"]);i!=null&&x(e,["computerUse"],i);const s=y(n,["fileSearch"]);s!=null&&x(e,["fileSearch"],s);const a=y(n,["codeExecution"]);if(a!=null&&x(e,["codeExecution"],a),y(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=y(n,["googleMaps"]);c!=null&&x(e,["googleMaps"],FX(c));const u=y(n,["googleSearch"]);u!=null&&x(e,["googleSearch"],UX(u));const d=y(n,["urlContext"]);return d!=null&&x(e,["urlContext"],d),e}function VD(n){const e={},t=y(n,["functionDeclarations"]);if(t!=null){let g=t;Array.isArray(g)&&(g=g.map(_=>dX(_))),x(e,["functionDeclarations"],g)}const r=y(n,["retrieval"]);r!=null&&x(e,["retrieval"],r);const i=y(n,["googleSearchRetrieval"]);i!=null&&x(e,["googleSearchRetrieval"],i);const s=y(n,["computerUse"]);if(s!=null&&x(e,["computerUse"],s),y(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=y(n,["codeExecution"]);a!=null&&x(e,["codeExecution"],a);const c=y(n,["enterpriseWebSearch"]);c!=null&&x(e,["enterpriseWebSearch"],c);const u=y(n,["googleMaps"]);u!=null&&x(e,["googleMaps"],u);const d=y(n,["googleSearch"]);d!=null&&x(e,["googleSearch"],d);const p=y(n,["urlContext"]);return p!=null&&x(e,["urlContext"],p),e}function uZ(n){const e={},t=y(n,["baseModel"]);t!=null&&x(e,["baseModel"],t);const r=y(n,["createTime"]);r!=null&&x(e,["createTime"],r);const i=y(n,["updateTime"]);return i!=null&&x(e,["updateTime"],i),e}function dZ(n){const e={},t=y(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&x(e,["baseModel"],t);const r=y(n,["createTime"]);r!=null&&x(e,["createTime"],r);const i=y(n,["updateTime"]);return i!=null&&x(e,["updateTime"],i),e}function hZ(n,e){const t={},r=y(n,["displayName"]);e!==void 0&&r!=null&&x(e,["displayName"],r);const i=y(n,["description"]);e!==void 0&&i!=null&&x(e,["description"],i);const s=y(n,["defaultCheckpointId"]);return e!==void 0&&s!=null&&x(e,["defaultCheckpointId"],s),t}function fZ(n,e){const t={},r=y(n,["displayName"]);e!==void 0&&r!=null&&x(e,["displayName"],r);const i=y(n,["description"]);e!==void 0&&i!=null&&x(e,["description"],i);const s=y(n,["defaultCheckpointId"]);return e!==void 0&&s!=null&&x(e,["defaultCheckpointId"],s),t}function pZ(n,e){const t={},r=y(e,["model"]);r!=null&&x(t,["_url","name"],Jn(n,r));const i=y(e,["config"]);return i!=null&&hZ(i,t),t}function mZ(n,e){const t={},r=y(e,["model"]);r!=null&&x(t,["_url","model"],Jn(n,r));const i=y(e,["config"]);return i!=null&&fZ(i,t),t}function gZ(n,e){const t={},r=y(n,["outputGcsUri"]);e!==void 0&&r!=null&&x(e,["parameters","storageUri"],r);const i=y(n,["safetyFilterLevel"]);e!==void 0&&i!=null&&x(e,["parameters","safetySetting"],i);const s=y(n,["personGeneration"]);e!==void 0&&s!=null&&x(e,["parameters","personGeneration"],s);const a=y(n,["includeRaiReason"]);e!==void 0&&a!=null&&x(e,["parameters","includeRaiReason"],a);const c=y(n,["outputMimeType"]);e!==void 0&&c!=null&&x(e,["parameters","outputOptions","mimeType"],c);const u=y(n,["outputCompressionQuality"]);e!==void 0&&u!=null&&x(e,["parameters","outputOptions","compressionQuality"],u);const d=y(n,["enhanceInputImage"]);e!==void 0&&d!=null&&x(e,["parameters","upscaleConfig","enhanceInputImage"],d);const p=y(n,["imagePreservationFactor"]);e!==void 0&&p!=null&&x(e,["parameters","upscaleConfig","imagePreservationFactor"],p);const g=y(n,["labels"]);e!==void 0&&g!=null&&x(e,["labels"],g);const _=y(n,["numberOfImages"]);e!==void 0&&_!=null&&x(e,["parameters","sampleCount"],_);const w=y(n,["mode"]);return e!==void 0&&w!=null&&x(e,["parameters","mode"],w),t}function yZ(n,e){const t={},r=y(e,["model"]);r!=null&&x(t,["_url","model"],Jn(n,r));const i=y(e,["image"]);i!=null&&x(t,["instances[0]","image"],yl(i));const s=y(e,["upscaleFactor"]);s!=null&&x(t,["parameters","upscaleConfig","upscaleFactor"],s);const a=y(e,["config"]);return a!=null&&gZ(a,t),t}function vZ(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=y(n,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>P1(s))),x(e,["generatedImages"],i)}return e}function _Z(n){const e={},t=y(n,["uri"]);t!=null&&x(e,["uri"],t);const r=y(n,["encodedVideo"]);r!=null&&x(e,["videoBytes"],_d(r));const i=y(n,["encoding"]);return i!=null&&x(e,["mimeType"],i),e}function bZ(n){const e={},t=y(n,["gcsUri"]);t!=null&&x(e,["uri"],t);const r=y(n,["bytesBase64Encoded"]);r!=null&&x(e,["videoBytes"],_d(r));const i=y(n,["mimeType"]);return i!=null&&x(e,["mimeType"],i),e}function xZ(n){const e={},t=y(n,["image"]);t!=null&&x(e,["_self"],yl(t));const r=y(n,["maskMode"]);return r!=null&&x(e,["maskMode"],r),e}function wZ(n){const e={},t=y(n,["image"]);t!=null&&x(e,["image"],k1(t));const r=y(n,["referenceType"]);return r!=null&&x(e,["referenceType"],r),e}function EZ(n){const e={},t=y(n,["image"]);t!=null&&x(e,["image"],yl(t));const r=y(n,["referenceType"]);return r!=null&&x(e,["referenceType"],r),e}function BD(n){const e={},t=y(n,["uri"]);t!=null&&x(e,["uri"],t);const r=y(n,["videoBytes"]);r!=null&&x(e,["encodedVideo"],_d(r));const i=y(n,["mimeType"]);return i!=null&&x(e,["encoding"],i),e}function qD(n){const e={},t=y(n,["uri"]);t!=null&&x(e,["gcsUri"],t);const r=y(n,["videoBytes"]);r!=null&&x(e,["bytesBase64Encoded"],_d(r));const i=y(n,["mimeType"]);return i!=null&&x(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TZ(n,e){const t={},r=y(n,["displayName"]);return e!==void 0&&r!=null&&x(e,["displayName"],r),t}function AZ(n){const e={},t=y(n,["config"]);return t!=null&&TZ(t,e),e}function NZ(n,e){const t={},r=y(n,["force"]);return e!==void 0&&r!=null&&x(e,["_query","force"],r),t}function SZ(n){const e={},t=y(n,["name"]);t!=null&&x(e,["_url","name"],t);const r=y(n,["config"]);return r!=null&&NZ(r,e),e}function IZ(n){const e={},t=y(n,["name"]);return t!=null&&x(e,["_url","name"],t),e}function CZ(n,e){const t={},r=y(n,["customMetadata"]);if(e!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),x(e,["customMetadata"],s)}const i=y(n,["chunkingConfig"]);return e!==void 0&&i!=null&&x(e,["chunkingConfig"],i),t}function RZ(n){const e={},t=y(n,["name"]);t!=null&&x(e,["name"],t);const r=y(n,["metadata"]);r!=null&&x(e,["metadata"],r);const i=y(n,["done"]);i!=null&&x(e,["done"],i);const s=y(n,["error"]);s!=null&&x(e,["error"],s);const a=y(n,["response"]);return a!=null&&x(e,["response"],kZ(a)),e}function PZ(n){const e={},t=y(n,["fileSearchStoreName"]);t!=null&&x(e,["_url","file_search_store_name"],t);const r=y(n,["fileName"]);r!=null&&x(e,["fileName"],r);const i=y(n,["config"]);return i!=null&&CZ(i,e),e}function kZ(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=y(n,["parent"]);r!=null&&x(e,["parent"],r);const i=y(n,["documentName"]);return i!=null&&x(e,["documentName"],i),e}function DZ(n,e){const t={},r=y(n,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const i=y(n,["pageToken"]);return e!==void 0&&i!=null&&x(e,["_query","pageToken"],i),t}function LZ(n){const e={},t=y(n,["config"]);return t!=null&&DZ(t,e),e}function MZ(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=y(n,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const i=y(n,["fileSearchStores"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),x(e,["fileSearchStores"],s)}return e}function GD(n,e){const t={},r=y(n,["mimeType"]);e!==void 0&&r!=null&&x(e,["mimeType"],r);const i=y(n,["displayName"]);e!==void 0&&i!=null&&x(e,["displayName"],i);const s=y(n,["customMetadata"]);if(e!==void 0&&s!=null){let c=s;Array.isArray(c)&&(c=c.map(u=>u)),x(e,["customMetadata"],c)}const a=y(n,["chunkingConfig"]);return e!==void 0&&a!=null&&x(e,["chunkingConfig"],a),t}function OZ(n){const e={},t=y(n,["fileSearchStoreName"]);t!=null&&x(e,["_url","file_search_store_name"],t);const r=y(n,["config"]);return r!=null&&GD(r,e),e}function FZ(n){const e={},t=y(n,["sdkHttpResponse"]);return t!=null&&x(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const UZ="Content-Type",jZ="X-Server-Timeout",VZ="User-Agent",cx="x-goog-api-client",BZ="1.32.0",qZ=`google-genai-sdk/${BZ}`,GZ="v1beta1",HZ="v1beta";class zZ{constructor(e){var t,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:GZ,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:HZ,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,r){const i=[this.getRequestUrlInternal(t)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,r);if(e.queryParams)for(const[a,c]of Object.entries(e.queryParams))i.searchParams.append(a,String(c));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,t,i.toString(),e.abortSignal),this.unaryApiCall(i,s,e.httpMethod)}patchHttpOptions(e,t){const r=JSON.parse(JSON.stringify(e));for(const[i,s]of Object.entries(t))typeof s=="object"?r[i]=Object.assign(Object.assign({},r[i]),s):s!==void 0&&(r[i]=s);return r}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,t,i.toString(),e.abortSignal),this.streamApiCall(i,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,r,i){if(t&&t.timeout||i){const s=new AbortController,a=s.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const c=setTimeout(()=>s.abort(),t.timeout);c&&typeof c.unref=="function"&&c.unref()}i&&i.addEventListener("abort",()=>{s.abort()}),e.signal=a}return t&&t.extraBody!==null&&$Z(e,t.extraBody),e.headers=await this.getHeadersInternal(t,r),e}async unaryApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async i=>(await uR(i),new ix(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async i=>(await uR(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return $f(this,arguments,function*(){var r;const i=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),s=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let a="";const c="data:",u=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:d,value:p}=yield Lr(i.read());if(d){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const g=s.decode(p,{stream:!0});try{const P=JSON.parse(g);if("error"in P){const O=JSON.parse(JSON.stringify(P.error)),L=O.status,B=O.code,K=`got status: ${L}. ${JSON.stringify(P)}`;if(B>=400&&B<600)throw new C1({message:K,status:B})}}catch(P){if(P.name==="ApiError")throw P}a+=g;let _=-1,w=0;for(;;){_=-1,w=0;for(const L of u){const B=a.indexOf(L);B!==-1&&(_===-1||B<_)&&(_=B,w=L.length)}if(_===-1)break;const P=a.substring(0,_);a=a.substring(_+w);const O=P.trim();if(O.startsWith(c)){const L=O.substring(c.length).trim();try{const B=new Response(L,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Lr(new ix(B))}catch(B){throw new Error(`exception parsing stream chunk ${L}. ${B}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},t=qZ+" "+this.clientOptions.userAgentExtra;return e[VZ]=t,e[cx]=t,e[UZ]="application/json",e}async getHeadersInternal(e,t){const r=new Headers;if(e&&e.headers){for(const[i,s]of Object.entries(e.headers))r.append(i,s);e.timeout&&e.timeout>0&&r.append(jZ,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,t),r}getFileName(e){var t;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(t=r.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),r}async uploadFile(e,t){var r;const i={};t!=null&&(i.mimeType=t.mimeType,i.name=t.name,i.displayName=t.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const s=this.clientOptions.uploader,a=await s.stat(e);i.sizeBytes=String(a.size);const c=(r=t==null?void 0:t.mimeType)!==null&&r!==void 0?r:a.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=c;const u={file:i},d=this.getFileName(e),p=xt("upload/v1beta/files",u._url),g=await this.fetchUploadUrl(p,i.sizeBytes,i.mimeType,d,u,t==null?void 0:t.httpOptions);return s.upload(e,g,this)}async uploadFileToFileSearchStore(e,t,r){var i;const s=this.clientOptions.uploader,a=await s.stat(t),c=String(a.size),u=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:a.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,p=this.getFileName(t),g={};r!=null&&GD(r,g);const _=await this.fetchUploadUrl(d,c,u,p,g,r==null?void 0:r.httpOptions);return s.uploadToFileSearchStore(t,_,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,r,i,s,a){var c;let u={};a?u=a:u={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const d=await this.request({path:e,body:JSON.stringify(s),httpMethod:"POST",httpOptions:u});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(c=d==null?void 0:d.headers)===null||c===void 0?void 0:c["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function uR(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let r;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await n.json():r={error:{message:await n.text(),code:n.status,status:n.statusText}};const i=JSON.stringify(r);throw t>=400&&t<600?new C1({message:i,status:t}):new Error(i)}}function $Z(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const s=JSON.parse(n.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))t=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(s,a){const c=Object.assign({},s);for(const u in a)if(Object.prototype.hasOwnProperty.call(a,u)){const d=a[u],p=c[u];d&&typeof d=="object"&&!Array.isArray(d)&&p&&typeof p=="object"&&!Array.isArray(p)?c[u]=r(p,d):(p&&d&&typeof p!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${u}". Original type: ${typeof p}, New type: ${typeof d}. Overwriting.`),c[u]=d)}return c}const i=r(t,e);n.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const YZ="mcp_used/unknown";let WZ=!1;function HD(n){for(const e of n)if(KZ(e)||typeof e=="object"&&"inputSchema"in e)return!0;return WZ}function zD(n){var e;const t=(e=n[cx])!==null&&e!==void 0?e:"";n[cx]=(t+` ${YZ}`).trimStart()}function KZ(n){return n!==null&&typeof n=="object"&&n instanceof v5}function JZ(n){return $f(this,arguments,function*(t,r=100){let i,s=0;for(;s<r;){const a=yield Lr(t.listTools({cursor:i}));for(const c of a.tools)yield yield Lr(c),s++;if(!a.nextCursor)break;i=a.nextCursor}})}class v5{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new v5(e,t)}async initialize(){var e,t,r,i;if(this.mcpTools.length>0)return;const s={},a=[];for(const p of this.mcpClients)try{for(var c=!0,u=(t=void 0,ug(JZ(p))),d;d=await u.next(),e=d.done,!e;c=!0){i=d.value,c=!1;const g=i;a.push(g);const _=g.name;if(s[_])throw new Error(`Duplicate function name ${_} found in MCP tools. Please ensure function names are unique.`);s[_]=p}}catch(g){t={error:g}}finally{try{!c&&!e&&(r=u.return)&&await r.call(u)}finally{if(t)throw t.error}}this.mcpTools=a,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),IK(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const a=await i.callTool({name:r.name,arguments:r.args},void 0,s);t.push({functionResponse:{name:r.name,response:a.isError?{error:a}:a}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function QZ(n,e,t){const r=new bK;let i;t.data instanceof Blob?i=JSON.parse(await t.data.text()):i=JSON.parse(t.data),Object.assign(r,i),e(r)}class XZ{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r}async connect(e){var t,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),a=tee(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),u=`${i}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${c}`;let d=()=>{};const p=new Promise(W=>{d=W}),g=e.callbacks,_=function(){d({})},w=this.apiClient,P={onopen:_,onmessage:W=>{QZ(w,g.onmessage,W)},onerror:(t=g==null?void 0:g.onerror)!==null&&t!==void 0?t:function(W){},onclose:(r=g==null?void 0:g.onclose)!==null&&r!==void 0?r:function(W){}},O=this.webSocketFactory.create(u,eee(a),P);O.connect(),await p;const K={setup:{model:Jn(this.apiClient,e.model)}};return O.send(JSON.stringify(K)),new ZZ(O,this.apiClient)}}class ZZ{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=AQ(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=TQ(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Df.PLAY)}pause(){this.sendPlaybackControl(Df.PAUSE)}stop(){this.sendPlaybackControl(Df.STOP)}resetContext(){this.sendPlaybackControl(Df.RESET_CONTEXT)}close(){this.conn.close()}}function eee(n){const e={};return n.forEach((t,r)=>{e[r]=t}),e}function tee(n){const e=new Headers;for(const[t,r]of Object.entries(n))e.append(t,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nee="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function ree(n,e,t){const r=new _K;let i;t.data instanceof Blob?i=await t.data.text():t.data instanceof ArrayBuffer?i=new TextDecoder().decode(t.data):i=t.data;const s=JSON.parse(i);if(n.isVertexAI()){const a=IQ(s);Object.assign(r,a)}else Object.assign(r,s);e(r)}class iee{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r,this.music=new XZ(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,r,i,s,a,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const u=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let p;const g=this.apiClient.getHeaders();e.config&&e.config.tools&&HD(e.config.tools)&&zD(g);const _=lee(g);if(this.apiClient.isVertexAI())p=`${u}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(_,p);else{const N=this.apiClient.getApiKey();let F="BidiGenerateContent",S="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),F="BidiGenerateContentConstrained",S="access_token"),p=`${u}/ws/google.ai.generativelanguage.${d}.GenerativeService.${F}?${S}=${N}`}let w=()=>{};const P=new Promise(N=>{w=N}),O=e.callbacks,L=function(){var N;(N=O==null?void 0:O.onopen)===null||N===void 0||N.call(O),w({})},B=this.apiClient,K={onopen:L,onmessage:N=>{ree(B,O.onmessage,N)},onerror:(t=O==null?void 0:O.onerror)!==null&&t!==void 0?t:function(N){},onclose:(r=O==null?void 0:O.onclose)!==null&&r!==void 0?r:function(N){}},W=this.webSocketFactory.create(p,aee(_),K);W.connect(),await P;let J=Jn(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&J.startsWith("publishers/")){const N=this.apiClient.getProject(),F=this.apiClient.getLocation();J=`projects/${N}/locations/${F}/`+J}let ae={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[kv.AUDIO]}:e.config.responseModalities=[kv.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const le=(c=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&c!==void 0?c:[],U=[];for(const N of le)if(this.isCallableTool(N)){const F=N;U.push(await F.tool())}else U.push(N);U.length>0&&(e.config.tools=U);const C={model:J,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ae=EQ(this.apiClient,C):ae=wQ(this.apiClient,C),delete ae.config,W.send(JSON.stringify(ae)),new oee(W,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const see={turnComplete:!0};class oee{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let r=[];try{r=Oa(t.turns),e.isVertexAI()||(r=r.map(i=>R1(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:r,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let r=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?r=t.functionResponses:r=[t.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const s of r){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(nee)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},see),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:SQ(e)}:t={realtimeInput:NQ(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function aee(n){const e={};return n.forEach((t,r)=>{e[r]=t}),e}function lee(n){const e=new Headers;for(const[t,r]of Object.entries(n))e.append(t,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dR=10;function hR(n){var e,t,r;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const a of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Yf(a)){i=!0;break}if(!i)return!0;const s=(r=n==null?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function Yf(n){return"callTool"in n&&typeof n.callTool=="function"}function cee(n){var e,t,r;return(r=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(i=>Yf(i)))!==null&&r!==void 0?r:!1}function fR(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((r,i)=>{if(Yf(r))return;const s=r;s.functionDeclarations&&s.functionDeclarations.length>0&&t.push(i)}),t}function pR(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uee extends ru{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var r,i,s,a,c;const u=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!cee(t)||hR(t.config))return await this.generateContentInternal(u);const d=fR(t);if(d.length>0){const O=d.map(L=>`tools[${L}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${O}.`)}let p,g;const _=Oa(u.contents),w=(s=(i=(r=u.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:dR;let P=0;for(;P<w&&(p=await this.generateContentInternal(u),!(!p.functionCalls||p.functionCalls.length===0));){const O=p.candidates[0].content,L=[];for(const B of(c=(a=t.config)===null||a===void 0?void 0:a.tools)!==null&&c!==void 0?c:[])if(Yf(B)){const W=await B.callTool(p.functionCalls);L.push(...W)}P++,g={role:"user",parts:L},u.contents=Oa(u.contents),u.contents.push(O),u.contents.push(g),pR(u.config)&&(_.push(O),_.push(g))}return pR(u.config)&&(p.automaticFunctionCallingHistory=_),p},this.generateContentStream=async t=>{var r,i,s,a,c;if(this.maybeMoveToResponseJsonSchem(t),hR(t.config)){const g=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(g)}const u=fR(t);if(u.length>0){const g=u.map(_=>`tools[${_}]`).join(", ");throw new Error(`Incompatible tools found at ${g}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(s=(i=(r=t==null?void 0:t.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,p=(c=(a=t==null?void 0:t.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||c===void 0?void 0:c.disable;if(d&&!p)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(r=>{var i;let s;const a=[];if(r!=null&&r.generatedImages)for(const u of r.generatedImages)u&&(u!=null&&u.safetyAttributes)&&((i=u==null?void 0:u.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?s=u==null?void 0:u.safetyAttributes:a.push(u);let c;return s?c={generatedImages:a,positivePromptSafetyAttributes:s,sdkHttpResponse:r.sdkHttpResponse}:c={generatedImages:a,sdkHttpResponse:r.sdkHttpResponse},c}),this.list=async t=>{var r;const a={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((r=a.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new Rh($c.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(a),a)},this.editImage=async t=>{const r={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(r.referenceImages=t.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async t=>{let r={numberOfImages:1,mode:"upscale"};t.config&&(r=Object.assign(Object.assign({},r),t.config));const i={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async t=>{var r,i,s,a,c,u;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=t.video)===null||r===void 0)&&r.uri&&(!((i=t.video)===null||i===void 0)&&i.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((a=(s=t.source)===null||s===void 0?void 0:s.video)===null||a===void 0)&&a.uri&&(!((u=(c=t.source)===null||c===void 0?void 0:c.video)===null||u===void 0)&&u.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,r,i;const s=(t=e.config)===null||t===void 0?void 0:t.tools;if(!s)return e;const a=await Promise.all(s.map(async u=>Yf(u)?await u.tool():u)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(c.config.tools=a,e.config&&e.config.tools&&HD(e.config.tools)){const u=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let d=Object.assign({},u);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),zD(d),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return c}async initAfcToolsMap(e){var t,r,i;const s=new Map;for(const a of(r=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&r!==void 0?r:[])if(Yf(a)){const c=a,u=await c.tool();for(const d of(i=u.functionDeclarations)!==null&&i!==void 0?i:[]){if(!d.name)throw new Error("Function declaration name is required.");if(s.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);s.set(d.name,c)}}return s}async processAfcStream(e){var t,r,i;const s=(i=(r=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:dR;let a=!1,c=0;const u=await this.initAfcToolsMap(e);return(function(d,p,g){return $f(this,arguments,function*(){for(var _,w,P,O,L,B;c<s;){a&&(c++,a=!1);const ae=yield Lr(d.processParamsMaybeAddMcpUsage(g)),le=yield Lr(d.generateContentStreamInternal(ae)),U=[],C=[];try{for(var K=!0,W=(w=void 0,ug(le)),J;J=yield Lr(W.next()),_=J.done,!_;K=!0){O=J.value,K=!1;const N=O;if(yield yield Lr(N),N.candidates&&(!((L=N.candidates[0])===null||L===void 0)&&L.content)){C.push(N.candidates[0].content);for(const F of(B=N.candidates[0].content.parts)!==null&&B!==void 0?B:[])if(c<s&&F.functionCall){if(!F.functionCall.name)throw new Error("Function call name was not returned by the model.");if(p.has(F.functionCall.name)){const S=yield Lr(p.get(F.functionCall.name).callTool([F.functionCall]));U.push(...S)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${p.keys()}, mising tool: ${F.functionCall.name}`)}}}}catch(N){w={error:N}}finally{try{!K&&!_&&(P=W.return)&&(yield Lr(P.call(W)))}finally{if(w)throw w.error}}if(U.length>0){a=!0;const N=new Mm;N.candidates=[{content:{role:"user",parts:U}}],yield yield Lr(N);const F=[];F.push(...C),F.push({role:"user",parts:U});const S=Oa(g.contents).concat(F);g.contents=S}else break}})})(this,u,e)}async generateContentInternal(e){var t,r,i,s;let a,c="",u={};if(this.apiClient.isVertexAI()){const d=aR(this.apiClient,e);return c=xt("{model}:generateContent",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:p.headers},_})),a.then(p=>{const g=cR(p),_=new Mm;return Object.assign(_,g),_})}else{const d=oR(this.apiClient,e);return c=xt("{model}:generateContent",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:p.headers},_})),a.then(p=>{const g=lR(p),_=new Mm;return Object.assign(_,g),_})}}async generateContentStreamInternal(e){var t,r,i,s;let a,c="",u={};if(this.apiClient.isVertexAI()){const d=aR(this.apiClient,e);return c=xt("{model}:streamGenerateContent?alt=sse",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.requestStream({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),a.then(function(g){return $f(this,arguments,function*(){var _,w,P,O;try{for(var L=!0,B=ug(g),K;K=yield Lr(B.next()),_=K.done,!_;L=!0){O=K.value,L=!1;const W=O,J=cR(yield Lr(W.json()));J.sdkHttpResponse={headers:W.headers};const ae=new Mm;Object.assign(ae,J),yield yield Lr(ae)}}catch(W){w={error:W}}finally{try{!L&&!_&&(P=B.return)&&(yield Lr(P.call(B)))}finally{if(w)throw w.error}}})})}else{const d=oR(this.apiClient,e);return c=xt("{model}:streamGenerateContent?alt=sse",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.requestStream({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),a.then(function(g){return $f(this,arguments,function*(){var _,w,P,O;try{for(var L=!0,B=ug(g),K;K=yield Lr(B.next()),_=K.done,!_;L=!0){O=K.value,L=!1;const W=O,J=lR(yield Lr(W.json()));J.sdkHttpResponse={headers:W.headers};const ae=new Mm;Object.assign(ae,J),yield yield Lr(ae)}}catch(W){w={error:W}}finally{try{!L&&!_&&(P=B.return)&&(yield Lr(P.call(B)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var t,r,i,s;let a,c="",u={};if(this.apiClient.isVertexAI()){const d=iX(this.apiClient,e);return c=xt("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:p.headers},_})),a.then(p=>{const g=oX(p),_=new GC;return Object.assign(_,g),_})}else{const d=rX(this.apiClient,e);return c=xt("{model}:batchEmbedContents",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:p.headers},_})),a.then(p=>{const g=sX(p),_=new GC;return Object.assign(_,g),_})}}async generateImagesInternal(e){var t,r,i,s;let a,c="",u={};if(this.apiClient.isVertexAI()){const d=yX(this.apiClient,e);return c=xt("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:p.headers},_})),a.then(p=>{const g=_X(p),_=new HC;return Object.assign(_,g),_})}else{const d=gX(this.apiClient,e);return c=xt("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:p.headers},_})),a.then(p=>{const g=vX(p),_=new HC;return Object.assign(_,g),_})}}async editImageInternal(e){var t,r;let i,s="",a={};if(this.apiClient.isVertexAI()){const c=ZQ(this.apiClient,e);return s=xt("{model}:predict",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:u.headers},p})),i.then(u=>{const d=eX(u),p=new lK;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,r;let i,s="",a={};if(this.apiClient.isVertexAI()){const c=yZ(this.apiClient,e);return s=xt("{model}:predict",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:u.headers},p})),i.then(u=>{const d=vZ(u),p=new cK;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,r;let i,s="",a={};if(this.apiClient.isVertexAI()){const c=XX(this.apiClient,e);return s=xt("{model}:predict",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const d=ZX(u),p=new uK;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,r;let i,s="",a={};if(this.apiClient.isVertexAI()){const c=sZ(this.apiClient,e);return s=xt("{model}:predict",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const d=oZ(u),p=new dK;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,r,i,s;let a,c="",u={};if(this.apiClient.isVertexAI()){const d=OX(this.apiClient,e);return c=xt("{name}",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),a.then(p=>lx(p))}else{const d=MX(this.apiClient,e);return c=xt("{name}",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>ax(p))}}async listInternal(e){var t,r,i,s;let a,c="",u={};if(this.apiClient.isVertexAI()){const d=zX(this.apiClient,e);return c=xt("{models_url}",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:p.headers},_})),a.then(p=>{const g=YX(p),_=new zC;return Object.assign(_,g),_})}else{const d=HX(this.apiClient,e);return c=xt("{models_url}",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:p.headers},_})),a.then(p=>{const g=$X(p),_=new zC;return Object.assign(_,g),_})}}async update(e){var t,r,i,s;let a,c="",u={};if(this.apiClient.isVertexAI()){const d=mZ(this.apiClient,e);return c=xt("{model}",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),a.then(p=>lx(p))}else{const d=pZ(this.apiClient,e);return c=xt("{name}",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>ax(p))}}async delete(e){var t,r,i,s;let a,c="",u={};if(this.apiClient.isVertexAI()){const d=KQ(this.apiClient,e);return c=xt("{name}",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:p.headers},_})),a.then(p=>{const g=QQ(p),_=new $C;return Object.assign(_,g),_})}else{const d=WQ(this.apiClient,e);return c=xt("{name}",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:p.headers},_})),a.then(p=>{const g=JQ(p),_=new $C;return Object.assign(_,g),_})}}async countTokens(e){var t,r,i,s;let a,c="",u={};if(this.apiClient.isVertexAI()){const d=zQ(this.apiClient,e);return c=xt("{model}:countTokens",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:p.headers},_})),a.then(p=>{const g=YQ(p),_=new YC;return Object.assign(_,g),_})}else{const d=HQ(this.apiClient,e);return c=xt("{model}:countTokens",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:p.headers},_})),a.then(p=>{const g=$Q(p),_=new YC;return Object.assign(_,g),_})}}async computeTokens(e){var t,r;let i,s="",a={};if(this.apiClient.isVertexAI()){const c=FQ(this.apiClient,e);return s=xt("{model}:computeTokens",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:u.headers},p})),i.then(u=>{const d=UQ(u),p=new hK;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,r,i,s;let a,c="",u={};if(this.apiClient.isVertexAI()){const d=AX(this.apiClient,e);return c=xt("{model}:predictLongRunning",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),a.then(p=>{const g=EX(p),_=new Dv;return Object.assign(_,g),_})}else{const d=TX(this.apiClient,e);return c=xt("{model}:predictLongRunning",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const g=wX(p),_=new Dv;return Object.assign(_,g),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dee extends ru{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,r=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=t.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:i,config:{httpOptions:s}});return t._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:t.name,config:r});return t._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const t=e.operation,r=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=t.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:i,config:{httpOptions:s}});return t._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:t.name,config:r});return t._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,r,i,s;let a,c="",u={};if(this.apiClient.isVertexAI()){const d=nK(e);return c=xt("{operationName}",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),a}else{const d=tK(e);return c=xt("{operationName}",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a}}async fetchPredictVideosOperationInternal(e){var t,r;let i,s="",a={};if(this.apiClient.isVertexAI()){const c=WW(e);return s=xt("{resourceName}:fetchPredictOperation",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hee(n){const e={},t=y(n,["data"]);if(t!=null&&x(e,["data"],t),y(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=y(n,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function fee(n){const e={},t=y(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>wee(s))),x(e,["parts"],i)}const r=y(n,["role"]);return r!=null&&x(e,["role"],r),e}function pee(n,e,t){const r={},i=y(e,["expireTime"]);t!==void 0&&i!=null&&x(t,["expireTime"],i);const s=y(e,["newSessionExpireTime"]);t!==void 0&&s!=null&&x(t,["newSessionExpireTime"],s);const a=y(e,["uses"]);t!==void 0&&a!=null&&x(t,["uses"],a);const c=y(e,["liveConnectConstraints"]);t!==void 0&&c!=null&&x(t,["bidiGenerateContentSetup"],xee(n,c));const u=y(e,["lockAdditionalFields"]);return t!==void 0&&u!=null&&x(t,["fieldMask"],u),r}function mee(n,e){const t={},r=y(e,["config"]);return r!=null&&x(t,["config"],pee(n,r,t)),t}function gee(n){const e={};if(y(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=y(n,["fileUri"]);t!=null&&x(e,["fileUri"],t);const r=y(n,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function yee(n){const e={},t=y(n,["id"]);t!=null&&x(e,["id"],t);const r=y(n,["args"]);r!=null&&x(e,["args"],r);const i=y(n,["name"]);if(i!=null&&x(e,["name"],i),y(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(y(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function vee(n){const e={};if(y(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=y(n,["enableWidget"]);return t!=null&&x(e,["enableWidget"],t),e}function _ee(n){const e={};if(y(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(y(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=y(n,["timeRangeFilter"]);return t!=null&&x(e,["timeRangeFilter"],t),e}function bee(n,e){const t={},r=y(n,["generationConfig"]);e!==void 0&&r!=null&&x(e,["setup","generationConfig"],r);const i=y(n,["responseModalities"]);e!==void 0&&i!=null&&x(e,["setup","generationConfig","responseModalities"],i);const s=y(n,["temperature"]);e!==void 0&&s!=null&&x(e,["setup","generationConfig","temperature"],s);const a=y(n,["topP"]);e!==void 0&&a!=null&&x(e,["setup","generationConfig","topP"],a);const c=y(n,["topK"]);e!==void 0&&c!=null&&x(e,["setup","generationConfig","topK"],c);const u=y(n,["maxOutputTokens"]);e!==void 0&&u!=null&&x(e,["setup","generationConfig","maxOutputTokens"],u);const d=y(n,["mediaResolution"]);e!==void 0&&d!=null&&x(e,["setup","generationConfig","mediaResolution"],d);const p=y(n,["seed"]);e!==void 0&&p!=null&&x(e,["setup","generationConfig","seed"],p);const g=y(n,["speechConfig"]);e!==void 0&&g!=null&&x(e,["setup","generationConfig","speechConfig"],y5(g));const _=y(n,["thinkingConfig"]);e!==void 0&&_!=null&&x(e,["setup","generationConfig","thinkingConfig"],_);const w=y(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&x(e,["setup","generationConfig","enableAffectiveDialog"],w);const P=y(n,["systemInstruction"]);e!==void 0&&P!=null&&x(e,["setup","systemInstruction"],fee(eo(P)));const O=y(n,["tools"]);if(e!==void 0&&O!=null){let le=jp(O);Array.isArray(le)&&(le=le.map(U=>Tee(Up(U)))),x(e,["setup","tools"],le)}const L=y(n,["sessionResumption"]);e!==void 0&&L!=null&&x(e,["setup","sessionResumption"],Eee(L));const B=y(n,["inputAudioTranscription"]);e!==void 0&&B!=null&&x(e,["setup","inputAudioTranscription"],B);const K=y(n,["outputAudioTranscription"]);e!==void 0&&K!=null&&x(e,["setup","outputAudioTranscription"],K);const W=y(n,["realtimeInputConfig"]);e!==void 0&&W!=null&&x(e,["setup","realtimeInputConfig"],W);const J=y(n,["contextWindowCompression"]);e!==void 0&&J!=null&&x(e,["setup","contextWindowCompression"],J);const ae=y(n,["proactivity"]);return e!==void 0&&ae!=null&&x(e,["setup","proactivity"],ae),t}function xee(n,e){const t={},r=y(e,["model"]);r!=null&&x(t,["setup","model"],Jn(n,r));const i=y(e,["config"]);return i!=null&&x(t,["config"],bee(i,t)),t}function wee(n){const e={},t=y(n,["mediaResolution"]);t!=null&&x(e,["mediaResolution"],t);const r=y(n,["codeExecutionResult"]);r!=null&&x(e,["codeExecutionResult"],r);const i=y(n,["executableCode"]);i!=null&&x(e,["executableCode"],i);const s=y(n,["fileData"]);s!=null&&x(e,["fileData"],gee(s));const a=y(n,["functionCall"]);a!=null&&x(e,["functionCall"],yee(a));const c=y(n,["functionResponse"]);c!=null&&x(e,["functionResponse"],c);const u=y(n,["inlineData"]);u!=null&&x(e,["inlineData"],hee(u));const d=y(n,["text"]);d!=null&&x(e,["text"],d);const p=y(n,["thought"]);p!=null&&x(e,["thought"],p);const g=y(n,["thoughtSignature"]);g!=null&&x(e,["thoughtSignature"],g);const _=y(n,["videoMetadata"]);return _!=null&&x(e,["videoMetadata"],_),e}function Eee(n){const e={},t=y(n,["handle"]);if(t!=null&&x(e,["handle"],t),y(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Tee(n){const e={},t=y(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(g=>g)),x(e,["functionDeclarations"],p)}if(y(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=y(n,["googleSearchRetrieval"]);r!=null&&x(e,["googleSearchRetrieval"],r);const i=y(n,["computerUse"]);i!=null&&x(e,["computerUse"],i);const s=y(n,["fileSearch"]);s!=null&&x(e,["fileSearch"],s);const a=y(n,["codeExecution"]);if(a!=null&&x(e,["codeExecution"],a),y(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=y(n,["googleMaps"]);c!=null&&x(e,["googleMaps"],vee(c));const u=y(n,["googleSearch"]);u!=null&&x(e,["googleSearch"],_ee(u));const d=y(n,["urlContext"]);return d!=null&&x(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Aee(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const r=n[t];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(s=>`${t}.${s}`);e.push(...i)}else e.push(t)}return e.join(",")}function Nee(n,e){let t=null;const r=n.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const s=r.setup;typeof s=="object"&&s!==null?(n.bidiGenerateContentSetup=s,t=s):delete n.bidiGenerateContentSetup}else r!==void 0&&delete n.bidiGenerateContentSetup;const i=n.fieldMask;if(t){const s=Aee(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?n.fieldMask=s:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];i.length>0&&(c=i.map(d=>a.includes(d)?`generationConfig.${d}`:d));const u=[];s&&u.push(s),c.length>0&&u.push(...c),u.length>0?n.fieldMask=u.join(","):delete n.fieldMask}else delete n.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?n.fieldMask=i.join(","):delete n.fieldMask;return n}class See extends ru{constructor(e){super(),this.apiClient=e}async create(e){var t,r;let i,s="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=mee(this.apiClient,e);s=xt("auth_tokens",c._url),a=c._query,delete c.config,delete c._url,delete c._query;const u=Nee(c,e.config);return i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Iee(n,e){const t={},r=y(n,["force"]);return e!==void 0&&r!=null&&x(e,["_query","force"],r),t}function Cee(n){const e={},t=y(n,["name"]);t!=null&&x(e,["_url","name"],t);const r=y(n,["config"]);return r!=null&&Iee(r,e),e}function Ree(n){const e={},t=y(n,["name"]);return t!=null&&x(e,["_url","name"],t),e}function Pee(n,e){const t={},r=y(n,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const i=y(n,["pageToken"]);return e!==void 0&&i!=null&&x(e,["_query","pageToken"],i),t}function kee(n){const e={},t=y(n,["parent"]);t!=null&&x(e,["_url","parent"],t);const r=y(n,["config"]);return r!=null&&Pee(r,e),e}function Dee(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=y(n,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const i=y(n,["documents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),x(e,["documents"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lee extends ru{constructor(e){super(),this.apiClient=e,this.list=async t=>new Rh($c.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:t.parent,config:r.config}),await this.listInternal(t),t)}async get(e){var t,r;let i,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Ree(e);return s=xt("{name}",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async delete(e){var t,r;let i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Cee(e);i=xt("{name}",a._url),s=a._query,delete a._url,delete a._query,await this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var t,r;let i,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=kee(e);return s=xt("{parent}/documents",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const d=Dee(u),p=new fK;return Object.assign(p,d),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mee extends ru{constructor(e,t=new Lee(e)){super(),this.apiClient=e,this.documents=t,this.list=async(r={})=>new Rh($c.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,r;let i,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=AZ(e);return s=xt("fileSearchStores",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async get(e){var t,r;let i,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=IZ(e);return s=xt("{name}",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async delete(e){var t,r;let i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=SZ(e);i=xt("{name}",a._url),s=a._query,delete a._url,delete a._query,await this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var t,r;let i,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=LZ(e);return s=xt("fileSearchStores",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const d=MZ(u),p=new pK;return Object.assign(p,d),p})}}async uploadToFileSearchStoreInternal(e){var t,r;let i,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=OZ(e);return s=xt("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const d=FZ(u),p=new mK;return Object.assign(p,d),p})}}async importFile(e){var t,r;let i,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=PZ(e);return s=xt("{file_search_store_name}:importFile",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const d=RZ(u),p=new h5;return Object.assign(p,d),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Oee(n,e){const t={},r=y(n,["name"]);return r!=null&&x(t,["_url","name"],r),t}function Fee(n,e){const t={},r=y(n,["name"]);return r!=null&&x(t,["_url","name"],r),t}function Uee(n,e){const t={},r=y(n,["sdkHttpResponse"]);return r!=null&&x(t,["sdkHttpResponse"],r),t}function jee(n,e){const t={},r=y(n,["sdkHttpResponse"]);return r!=null&&x(t,["sdkHttpResponse"],r),t}function Vee(n,e,t){const r={};if(y(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=y(n,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&x(e,["displayName"],i),y(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=y(n,["epochCount"]);e!==void 0&&s!=null&&x(e,["tuningTask","hyperparameters","epochCount"],s);const a=y(n,["learningRateMultiplier"]);if(a!=null&&x(r,["tuningTask","hyperparameters","learningRateMultiplier"],a),y(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(y(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(y(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=y(n,["batchSize"]);e!==void 0&&c!=null&&x(e,["tuningTask","hyperparameters","batchSize"],c);const u=y(n,["learningRate"]);if(e!==void 0&&u!=null&&x(e,["tuningTask","hyperparameters","learningRate"],u),y(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(y(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function Bee(n,e,t){const r={};let i=y(t,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const w=y(n,["validationDataset"]);e!==void 0&&w!=null&&x(e,["supervisedTuningSpec"],mR(w))}else if(i==="PREFERENCE_TUNING"){const w=y(n,["validationDataset"]);e!==void 0&&w!=null&&x(e,["preferenceOptimizationSpec"],mR(w))}const s=y(n,["tunedModelDisplayName"]);e!==void 0&&s!=null&&x(e,["tunedModelDisplayName"],s);const a=y(n,["description"]);e!==void 0&&a!=null&&x(e,["description"],a);let c=y(t,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const w=y(n,["epochCount"]);e!==void 0&&w!=null&&x(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(c==="PREFERENCE_TUNING"){const w=y(n,["epochCount"]);e!==void 0&&w!=null&&x(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let u=y(t,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const w=y(n,["learningRateMultiplier"]);e!==void 0&&w!=null&&x(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(u==="PREFERENCE_TUNING"){const w=y(n,["learningRateMultiplier"]);e!==void 0&&w!=null&&x(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let d=y(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const w=y(n,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&x(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(d==="PREFERENCE_TUNING"){const w=y(n,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&x(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let p=y(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const w=y(n,["adapterSize"]);e!==void 0&&w!=null&&x(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(p==="PREFERENCE_TUNING"){const w=y(n,["adapterSize"]);e!==void 0&&w!=null&&x(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(y(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(y(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const g=y(n,["labels"]);e!==void 0&&g!=null&&x(e,["labels"],g);const _=y(n,["beta"]);return e!==void 0&&_!=null&&x(e,["preferenceOptimizationSpec","hyperParameters","beta"],_),r}function qee(n,e){const t={},r=y(n,["baseModel"]);r!=null&&x(t,["baseModel"],r);const i=y(n,["preTunedModel"]);i!=null&&x(t,["preTunedModel"],i);const s=y(n,["trainingDataset"]);s!=null&&Zee(s);const a=y(n,["config"]);return a!=null&&Vee(a,t),t}function Gee(n,e){const t={},r=y(n,["baseModel"]);r!=null&&x(t,["baseModel"],r);const i=y(n,["preTunedModel"]);i!=null&&x(t,["preTunedModel"],i);const s=y(n,["trainingDataset"]);s!=null&&ete(s,t,e);const a=y(n,["config"]);return a!=null&&Bee(a,t,e),t}function Hee(n,e){const t={},r=y(n,["name"]);return r!=null&&x(t,["_url","name"],r),t}function zee(n,e){const t={},r=y(n,["name"]);return r!=null&&x(t,["_url","name"],r),t}function $ee(n,e,t){const r={},i=y(n,["pageSize"]);e!==void 0&&i!=null&&x(e,["_query","pageSize"],i);const s=y(n,["pageToken"]);e!==void 0&&s!=null&&x(e,["_query","pageToken"],s);const a=y(n,["filter"]);return e!==void 0&&a!=null&&x(e,["_query","filter"],a),r}function Yee(n,e,t){const r={},i=y(n,["pageSize"]);e!==void 0&&i!=null&&x(e,["_query","pageSize"],i);const s=y(n,["pageToken"]);e!==void 0&&s!=null&&x(e,["_query","pageToken"],s);const a=y(n,["filter"]);return e!==void 0&&a!=null&&x(e,["_query","filter"],a),r}function Wee(n,e){const t={},r=y(n,["config"]);return r!=null&&$ee(r,t),t}function Kee(n,e){const t={},r=y(n,["config"]);return r!=null&&Yee(r,t),t}function Jee(n,e){const t={},r=y(n,["sdkHttpResponse"]);r!=null&&x(t,["sdkHttpResponse"],r);const i=y(n,["nextPageToken"]);i!=null&&x(t,["nextPageToken"],i);const s=y(n,["tunedModels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>$D(c))),x(t,["tuningJobs"],a)}return t}function Qee(n,e){const t={},r=y(n,["sdkHttpResponse"]);r!=null&&x(t,["sdkHttpResponse"],r);const i=y(n,["nextPageToken"]);i!=null&&x(t,["nextPageToken"],i);const s=y(n,["tuningJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>ux(c))),x(t,["tuningJobs"],a)}return t}function Xee(n,e){const t={},r=y(n,["name"]);r!=null&&x(t,["model"],r);const i=y(n,["name"]);return i!=null&&x(t,["endpoint"],i),t}function Zee(n,e){const t={};if(y(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(y(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=y(n,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),x(t,["examples","examples"],i)}return t}function ete(n,e,t){const r={};let i=y(t,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const a=y(n,["gcsUri"]);e!==void 0&&a!=null&&x(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(i==="PREFERENCE_TUNING"){const a=y(n,["gcsUri"]);e!==void 0&&a!=null&&x(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}let s=y(t,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const a=y(n,["vertexDatasetResource"]);e!==void 0&&a!=null&&x(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(s==="PREFERENCE_TUNING"){const a=y(n,["vertexDatasetResource"]);e!==void 0&&a!=null&&x(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}if(y(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function $D(n,e){const t={},r=y(n,["sdkHttpResponse"]);r!=null&&x(t,["sdkHttpResponse"],r);const i=y(n,["name"]);i!=null&&x(t,["name"],i);const s=y(n,["state"]);s!=null&&x(t,["state"],ND(s));const a=y(n,["createTime"]);a!=null&&x(t,["createTime"],a);const c=y(n,["tuningTask","startTime"]);c!=null&&x(t,["startTime"],c);const u=y(n,["tuningTask","completeTime"]);u!=null&&x(t,["endTime"],u);const d=y(n,["updateTime"]);d!=null&&x(t,["updateTime"],d);const p=y(n,["description"]);p!=null&&x(t,["description"],p);const g=y(n,["baseModel"]);g!=null&&x(t,["baseModel"],g);const _=y(n,["_self"]);return _!=null&&x(t,["tunedModel"],Xee(_)),t}function ux(n,e){const t={},r=y(n,["sdkHttpResponse"]);r!=null&&x(t,["sdkHttpResponse"],r);const i=y(n,["name"]);i!=null&&x(t,["name"],i);const s=y(n,["state"]);s!=null&&x(t,["state"],ND(s));const a=y(n,["createTime"]);a!=null&&x(t,["createTime"],a);const c=y(n,["startTime"]);c!=null&&x(t,["startTime"],c);const u=y(n,["endTime"]);u!=null&&x(t,["endTime"],u);const d=y(n,["updateTime"]);d!=null&&x(t,["updateTime"],d);const p=y(n,["error"]);p!=null&&x(t,["error"],p);const g=y(n,["description"]);g!=null&&x(t,["description"],g);const _=y(n,["baseModel"]);_!=null&&x(t,["baseModel"],_);const w=y(n,["tunedModel"]);w!=null&&x(t,["tunedModel"],w);const P=y(n,["preTunedModel"]);P!=null&&x(t,["preTunedModel"],P);const O=y(n,["supervisedTuningSpec"]);O!=null&&x(t,["supervisedTuningSpec"],O);const L=y(n,["preferenceOptimizationSpec"]);L!=null&&x(t,["preferenceOptimizationSpec"],L);const B=y(n,["tuningDataStats"]);B!=null&&x(t,["tuningDataStats"],B);const K=y(n,["encryptionSpec"]);K!=null&&x(t,["encryptionSpec"],K);const W=y(n,["partnerModelTuningSpec"]);W!=null&&x(t,["partnerModelTuningSpec"],W);const J=y(n,["customBaseModel"]);J!=null&&x(t,["customBaseModel"],J);const ae=y(n,["experiment"]);ae!=null&&x(t,["experiment"],ae);const le=y(n,["labels"]);le!=null&&x(t,["labels"],le);const U=y(n,["outputUri"]);U!=null&&x(t,["outputUri"],U);const C=y(n,["pipelineJob"]);C!=null&&x(t,["pipelineJob"],C);const N=y(n,["serviceAccount"]);N!=null&&x(t,["serviceAccount"],N);const F=y(n,["tunedModelDisplayName"]);F!=null&&x(t,["tunedModelDisplayName"],F);const S=y(n,["veoTuningSpec"]);return S!=null&&x(t,["veoTuningSpec"],S),t}function tte(n,e){const t={},r=y(n,["sdkHttpResponse"]);r!=null&&x(t,["sdkHttpResponse"],r);const i=y(n,["name"]);i!=null&&x(t,["name"],i);const s=y(n,["metadata"]);s!=null&&x(t,["metadata"],s);const a=y(n,["done"]);a!=null&&x(t,["done"],a);const c=y(n,["error"]);return c!=null&&x(t,["error"],c),t}function mR(n,e){const t={},r=y(n,["gcsUri"]);r!=null&&x(t,["validationDatasetUri"],r);const i=y(n,["vertexDatasetResource"]);return i!=null&&x(t,["validationDatasetUri"],i),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nte extends ru{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Rh($c.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var r;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const i={tunedModelName:t.baseModel};!((r=t.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=t.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},t),{preTunedModel:i});return s.baseModel=void 0,await this.tuneInternal(s)}else{const i=Object.assign({},t);return await this.tuneInternal(i)}else{const i=Object.assign({},t),s=await this.tuneMldevInternal(i);let a="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?a=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(a=s.name.split("/operations/")[0]),{name:a,state:rx.JOB_STATE_QUEUED}}}}async getInternal(e){var t,r,i,s;let a,c="",u={};if(this.apiClient.isVertexAI()){const d=zee(e);return c=xt("{name}",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:p.headers},_})),a.then(p=>ux(p))}else{const d=Hee(e);return c=xt("{name}",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:p.headers},_})),a.then(p=>$D(p))}}async listInternal(e){var t,r,i,s;let a,c="",u={};if(this.apiClient.isVertexAI()){const d=Kee(e);return c=xt("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:p.headers},_})),a.then(p=>{const g=Qee(p),_=new WC;return Object.assign(_,g),_})}else{const d=Wee(e);return c=xt("tunedModels",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:p.headers},_})),a.then(p=>{const g=Jee(p),_=new WC;return Object.assign(_,g),_})}}async cancel(e){var t,r,i,s;let a,c="",u={};if(this.apiClient.isVertexAI()){const d=Fee(e);return c=xt("{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:p.headers},_})),a.then(p=>{const g=jee(p),_=new KC;return Object.assign(_,g),_})}else{const d=Oee(e);return c=xt("{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:p.headers},_})),a.then(p=>{const g=Uee(p),_=new KC;return Object.assign(_,g),_})}}async tuneInternal(e){var t,r;let i,s="",a={};if(this.apiClient.isVertexAI()){const c=Gee(e,e);return s=xt("tuningJobs",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:u.headers},p})),i.then(u=>ux(u))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,r;let i,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=qee(e);return s=xt("tunedModels",c._url),a=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:u.headers},p})),i.then(u=>tte(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rte{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const ite=1024*1024*8,ste=3,ote=1e3,ate=2,Mv="x-goog-upload-status";async function lte(n,e,t){var r;const i=await YD(n,e,t),s=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[Mv])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function cte(n,e,t){var r;const i=await YD(n,e,t),s=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[Mv])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const a=bD(s),c=new f5;return Object.assign(c,a),c}async function YD(n,e,t){var r,i;let s=0,a=0,c=new ix(new Response),u="upload";for(s=n.size;a<s;){const d=Math.min(ite,s-a),p=n.slice(a,a+d);a+d>=s&&(u+=", finalize");let g=0,_=ote;for(;g<ste&&(c=await t.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(a),"Content-Length":String(d)}}}),!(!((r=c==null?void 0:c.headers)===null||r===void 0)&&r[Mv]));)g++,await dte(_),_=_*ate;if(a+=d,((i=c==null?void 0:c.headers)===null||i===void 0?void 0:i[Mv])!=="active")break;if(s<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return c}async function ute(n){return{size:n.size,type:n.type}}function dte(n){return new Promise(e=>setTimeout(e,n))}class hte{async upload(e,t,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await lte(e,t,r)}async uploadToFileSearchStore(e,t,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await cte(e,t,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await ute(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fte{create(e,t,r){return new pte(e,t,r)}}class pte{constructor(e,t,r){this.url=e,this.headers=t,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gR="x-goog-api-key";class mte{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(gR)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(gR,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gte="gl-node/";class yte{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const r=$W(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new mte(this.apiKey);this.apiClient=new zZ({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:gte+"web",uploader:new hte,downloader:new rte}),this.models=new uee(this.apiClient),this.live=new iee(this.apiClient,i,new fte),this.batches=new xJ(this.apiClient),this.chats=new nQ(this.models,this.apiClient),this.caches=new ZJ(this.apiClient),this.files=new hQ(this.apiClient),this.operations=new dee(this.apiClient),this.authTokens=new See(this.apiClient),this.tunings=new nte(this.apiClient),this.fileSearchStores=new Mee(this.apiClient)}}/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vte=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_te=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),yR=n=>{const e=_te(n);return e.charAt(0).toUpperCase()+e.slice(1)},WD=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),bte=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xte={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wte=Ee.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...c},u)=>Ee.createElement("svg",{ref:u,...xte,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:WD("lucide",i),...!s&&!bte(c)&&{"aria-hidden":"true"},...c},[...a.map(([d,p])=>Ee.createElement(d,p)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=(n,e)=>{const t=Ee.forwardRef(({className:r,...i},s)=>Ee.createElement(wte,{ref:s,iconNode:e,className:WD(`lucide-${vte(yR(n))}`,`lucide-${n}`,r),...i}));return t.displayName=yR(n),t};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ete=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],_5=$t("activity",Ete);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tte=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],Ate=$t("arrow-down-right",Tte);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nte=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Yc=$t("arrow-left",Nte);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ste=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Vg=$t("arrow-right",Ste);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ite=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],Cte=$t("arrow-up-right",Ite);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rte=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],KD=$t("bell",Rte);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pte=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],kte=$t("calendar-clock",Pte);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dte=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Lte=$t("calendar",Dte);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mte=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Ote=$t("chart-column",Mte);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fte=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ov=$t("check",Fte);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ute=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],jte=$t("chevron-down",Ute);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vte=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],b5=$t("chevron-right",Vte);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bte=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],x5=$t("circle-alert",Bte);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qte=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],hl=$t("circle-check",qte);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gte=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],bp=$t("circle-x",Gte);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hte=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],w5=$t("clipboard-list",Hte);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zte=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$te=$t("clock",zte);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yte=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Wte=$t("credit-card",Yte);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kte=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Jte=$t("database",Kte);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qte=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Wc=$t("dollar-sign",Qte);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xte=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Zte=$t("download",Xte);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ene=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],tne=$t("eye",ene);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nne=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 18v-2",key:"qcmpov"}],["path",{d:"M12 18v-4",key:"q1q25u"}],["path",{d:"M16 18v-6",key:"15y0np"}]],E5=$t("file-chart-column-increasing",nne);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rne=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],Wf=$t("file-check",rne);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ine=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],JD=$t("file-spreadsheet",ine);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sne=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],v0=$t("file-text",sne);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const one=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],QD=$t("flask-conical",one);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ane=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],T5=$t("history",ane);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lne=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],XD=$t("info",lne);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cne=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],_0=$t("layout-dashboard",cne);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const une=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],dx=$t("list",une);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dne=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],wh=$t("loader-circle",dne);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hne=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],fne=$t("log-out",hne);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pne=[["path",{d:"M6 18h8",key:"1borvv"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M14 22a7 7 0 1 0 0-14h-1",key:"1jwaiy"}],["path",{d:"M9 14h2",key:"197e7h"}],["path",{d:"M9 12a2 2 0 0 1-2-2V6h6v4a2 2 0 0 1-2 2Z",key:"1bmzmy"}],["path",{d:"M12 6V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3",key:"1drr47"}]],Kf=$t("microscope",pne);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mne=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Vc=$t("package",mne);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gne=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],yne=$t("pen",gne);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vne=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],vR=$t("phone",vne);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ne=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Fc=$t("plus",_ne);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bne=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Kc=$t("printer",bne);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xne=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],wne=$t("qr-code",xne);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ene=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Tne=$t("save",Ene);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ane=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],Nne=$t("scroll-text",Ane);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sne=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],dg=$t("search",Sne);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ine=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Bg=$t("settings",Ine);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cne=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ZD=$t("shield",Cne);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rne=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Pne=$t("sparkles",Rne);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kne=[["path",{d:"m18 2 4 4",key:"22kx64"}],["path",{d:"m17 7 3-3",key:"1w1zoj"}],["path",{d:"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5",key:"1exhtz"}],["path",{d:"m9 11 4 4",key:"rovt3i"}],["path",{d:"m5 19-3 3",key:"59f2uf"}],["path",{d:"m14 4 6 6",key:"yqp9t2"}]],D1=$t("syringe",kne);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dne=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],Lne=$t("test-tube",Dne);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mne=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],hg=$t("trash-2",Mne);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const One=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Fne=$t("trending-up",One);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Une=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],qg=$t("triangle-alert",Une);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jne=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],fg=$t("truck",jne);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vne=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],L1=$t("user-plus",Vne);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bne=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],qne=$t("user",Bne);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gne=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],M1=$t("users",Gne);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hne=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],eL=$t("wallet",Hne);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zne=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],xp=$t("x",zne);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ne=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Yne=$t("zap",$ne),hi=n=>{if(!n)return"--";try{if(n!=null&&n.toDate&&typeof n.toDate=="function")return n.toDate().toLocaleString();if(n instanceof Date)return n.toLocaleString();const e=new Date(n);return isNaN(e.getTime())?"--":e.toLocaleString()}catch{return"--"}},O1=n=>{if(!n)return"--:--";try{return(n.toDate?n.toDate():new Date(n)).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return"--:--"}};class Wne extends Gg.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}render(){return this.state.hasError?f.jsx("div",{className:"p-8 text-center text-red-500",children:"Something went wrong in this module. Please refresh or contact support."}):this.props.children}}const Jf=n=>{if(!n)return 0;const e=new Date(n),t=Date.now()-e.getTime(),r=new Date(t);return Math.abs(r.getUTCFullYear()-1970)},j={RICH_BLACK:"#F0F9FF",MIDNIGHT_GREEN:"#FFFFFF",PERSIAN_GREEN:"#0EA5E9",GAMBOGE:"#0EA5E9",ALLOY_ORANGE:"#06B6D4",CITRON:"#0F172A",TIFFANY_BLUE:"#334155",RUST:"#B91C1C",RUFOUS:"#991B1B",RUBY_RED:"#7F1D1D",SUCCESS:"#15803d",WARNING:"#c2410c",INFO:"#1d4ed8"},Kne=({user:n,onLogout:e})=>{const t=Ep(),r=$g(),s=(c=>c==="/"||c==="/dashboard"?"dashboard":c.substring(1))(r.pathname),a=[{id:"dashboard",label:"Dashboard",icon:_0},{id:"reception",label:"Reception",icon:w5},{id:"collection",label:"Phlebotomy",icon:D1},{id:"lab_tech",label:"Technician",icon:Kf},{id:"lab_path",label:"Pathologist",icon:Wf},{id:"admin",label:"Admin",icon:Bg}];return f.jsxs("div",{className:"w-full h-16 flex items-center justify-between px-6 shadow-md z-50 shrink-0",style:{backgroundColor:j.RICH_BLACK,borderBottom:`1px solid ${j.MIDNIGHT_GREEN}`},children:[f.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>t("/dashboard"),children:[f.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center shadow-lg transform transition-transform hover:scale-105",style:{backgroundColor:j.PERSIAN_GREEN},children:f.jsx(_5,{className:"w-6 h-6 text-white"})}),f.jsxs("div",{children:[f.jsxs("h1",{className:"text-xl font-bold tracking-tight",style:{color:j.TIFFANY_BLUE},children:["LabPro ",f.jsx("span",{style:{color:j.GAMBOGE},children:"Plus"})]}),f.jsx("p",{className:"text-[10px] uppercase tracking-widest font-bold opacity-60",style:{color:j.CITRON},children:"Diagnostic OS"})]})]}),f.jsx("div",{className:"flex items-center gap-2 p-1.5 rounded-full border backdrop-blur-sm",style:{backgroundColor:`${j.MIDNIGHT_GREEN}`,borderColor:`${j.PERSIAN_GREEN}40`},children:a.map(c=>{const u=s===c.id||c.id==="admin"&&s.startsWith("admin_");return f.jsxs("button",{onClick:()=>t(`/${c.id==="dashboard"?"":c.id}`),className:`px-4 py-2 rounded-full flex items-center gap-2 text-sm font-bold transition-all duration-300 ${u?"shadow-md transform scale-105":""}`,style:{backgroundColor:u?j.PERSIAN_GREEN:"transparent",color:u?"#fff":j.TIFFANY_BLUE},onMouseEnter:d=>{u||(d.currentTarget.style.backgroundColor=`${j.PERSIAN_GREEN}15`)},onMouseLeave:d=>{u||(d.currentTarget.style.backgroundColor="transparent")},children:[f.jsx(c.icon,{className:`w-4 h-4 ${u?"animate-pulse":""}`}),f.jsx("span",{className:"hidden xl:inline",children:c.label})]},c.id)})}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("div",{className:"text-right hidden sm:block",children:[f.jsx("p",{className:"text-sm font-bold truncate max-w-[150px]",style:{color:j.CITRON},children:n==null?void 0:n.email}),f.jsx("p",{className:"text-xs opacity-70",style:{color:j.TIFFANY_BLUE},children:(n==null?void 0:n.role)||"Staff"})]}),f.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-red-500/20 transition-colors group",title:"Logout",children:f.jsx(fne,{className:"w-5 h-5 group-hover:text-red-400",style:{color:j.RUST}})})]})]})},Jne=({toasts:n,onClose:e})=>f.jsx("div",{className:"fixed top-4 right-4 z-[9999] space-y-2",children:n.map(t=>{const r={success:f.jsx(hl,{className:"w-5 h-5"}),error:f.jsx(bp,{className:"w-5 h-5"}),warning:f.jsx(qg,{className:"w-5 h-5"}),info:f.jsx(XD,{className:"w-5 h-5"})},i={success:"bg-green-100 border-green-300 text-green-900",error:"bg-red-100 border-red-300 text-red-900",warning:"bg-amber-100 border-amber-300 text-amber-900",info:"bg-blue-100 border-blue-300 text-blue-900"};return f.jsxs("div",{className:`${i[t.type]} border rounded-lg shadow-lg p-4 min-w-[300px] max-w-md animate-in slide-in-from-right-5 flex items-start gap-3`,children:[r[t.type],f.jsx("p",{className:"flex-1 text-sm font-medium",children:t.message}),f.jsx("button",{onClick:()=>e(t.id),className:"hover:opacity-70",children:f.jsx(xp,{className:"w-4 h-4"})})]},t.id)})}),Qne=({isOpen:n,type:e,title:t,message:r,onClose:i})=>{if(!n)return null;const s={success:{icon:hl,color:"text-emerald-600",bg:"bg-emerald-50",border:"border-emerald-200"},error:{icon:bp,color:"text-red-600",bg:"bg-red-50",border:"border-red-200"},warning:{icon:qg,color:"text-amber-600",bg:"bg-amber-50",border:"border-amber-200"},info:{icon:XD,color:"text-sky-600",bg:"bg-sky-50",border:"border-sky-200"}},a=s[e]||s.info,c=a.icon;return f.jsx("div",{className:"fixed inset-0 bg-black/50 z-[9998] flex items-center justify-center p-4 animate-in fade-in",onClick:i,children:f.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full animate-in zoom-in-95",onClick:u=>u.stopPropagation(),children:[f.jsxs("div",{className:`${a.bg} ${a.border} border-b p-4 rounded-t-xl flex items-center gap-3`,children:[f.jsx(c,{className:`w-6 h-6 ${a.color}`}),f.jsx("h3",{className:"font-bold text-lg text-slate-800",children:t||e.charAt(0).toUpperCase()+e.slice(1)})]}),f.jsx("div",{className:"p-6",children:f.jsx("p",{className:"text-slate-700 leading-relaxed",children:r})}),f.jsx("div",{className:"p-4 bg-slate-50 rounded-b-xl flex justify-end",children:f.jsx("button",{onClick:i,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg font-bold hover:bg-indigo-700 transition-colors",children:"OK"})})]})})},Xne=({isOpen:n,title:e,message:t,confirmText:r="Confirm",cancelText:i="Cancel",type:s="primary",onConfirm:a,onCancel:c})=>{if(!n)return null;const u={danger:"bg-red-600 hover:bg-red-700",primary:"bg-indigo-600 hover:bg-indigo-700",warning:"bg-amber-600 hover:bg-amber-700"};return f.jsx("div",{className:"fixed inset-0 bg-black/50 z-[9998] flex items-center justify-center p-4 animate-in fade-in",onClick:c,children:f.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full animate-in zoom-in-95",onClick:d=>d.stopPropagation(),children:[f.jsxs("div",{className:"p-6",children:[e&&f.jsx("h3",{className:"font-bold text-xl text-slate-800 mb-4",children:e}),f.jsx("p",{className:"text-slate-700 leading-relaxed",children:t})]}),f.jsxs("div",{className:"p-4 bg-slate-50 rounded-b-xl flex justify-end gap-3",children:[f.jsx("button",{onClick:c,className:"px-6 py-2 text-slate-600 hover:bg-slate-200 rounded-lg font-bold transition-colors",children:i}),f.jsx("button",{onClick:a,className:`px-6 py-2 ${u[s]} text-white rounded-lg font-bold transition-colors`,children:r})]})]})})},Zne=({isOpen:n,title:e,message:t,defaultValue:r="",placeholder:i,onConfirm:s,onCancel:a})=>{const[c,u]=Ee.useState(r);if(Ee.useEffect(()=>{n&&u(r)},[n,r]),!n)return null;const d=()=>{c.trim()&&(s(c),u(""))};return f.jsx("div",{className:"fixed inset-0 bg-black/50 z-[9998] flex items-center justify-center p-4 animate-in fade-in",onClick:a,children:f.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full animate-in zoom-in-95",onClick:p=>p.stopPropagation(),children:[f.jsxs("div",{className:"p-6",children:[e&&f.jsx("h3",{className:"font-bold text-xl text-slate-800 mb-4",children:e}),f.jsx("p",{className:"text-slate-700 leading-relaxed mb-4",children:t}),f.jsx("input",{type:"text",value:c,onChange:p=>u(p.target.value),onKeyDown:p=>p.key==="Enter"&&d(),placeholder:i,className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none",autoFocus:!0})]}),f.jsxs("div",{className:"p-4 bg-slate-50 rounded-b-xl flex justify-end gap-3",children:[f.jsx("button",{onClick:a,className:"px-6 py-2 text-slate-600 hover:bg-slate-200 rounded-lg font-bold transition-colors",children:"Cancel"}),f.jsx("button",{onClick:d,disabled:!c.trim(),className:"px-6 py-2 bg-indigo-600 text-white rounded-lg font-bold hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"OK"})]})]})})},tL={admin:["dashboard","admin_users","admin_tests","finance","admin_reports","inventory","admin_logs","admin_settings","reception","collection","lab_tech","lab_path"],receptionist:["dashboard","patients","reception"],phlebotomist:["dashboard","patients","collection"],technician:["dashboard","lab_tech"],pathologist:["dashboard","lab_path","patients","admin_reports"],accountant:["dashboard","finance"],inventory_manager:["dashboard","inventory","admin_reports"]},ere=["Test Reagent","Consumable","Equipment","Packaging","PPE","General","Machinery","Electric","Stationary","Furniture","Other"],tre=n=>n==="admin"||n==="inventory_manager",nL=[{id:"admin",label:"System Administrator",icon:ZD},{id:"receptionist",label:"Receptionist",icon:M1},{id:"phlebotomist",label:"Sample Collection",icon:D1},{id:"technician",label:"Lab Technologist",icon:Kf},{id:"pathologist",label:"Pathologist",icon:Wf},{id:"accountant",label:"Finance Manager",icon:Wc},{id:"inventory_manager",label:"Inventory Manager",icon:Vc},{id:"doctor",label:"Referring Doctor",icon:L1,disabled:!0,disabledReason:"Portal coming soon"}],Zd=async(n,e,t,r)=>{try{await ut.collection("audit_logs").add({action:n,module:e,details:t,userId:r.uid||"unknown",userName:r.email||r.username||"System",timestamp:an.firestore.Timestamp.now()})}catch(i){console.error("Audit log failed",i)}},nre=(n,e)=>{const t=new Date,r=String(t.getDate()).padStart(2,"0"),i=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getFullYear()).slice(-2),a=n?n.slice(-4).toUpperCase():"XXXX";return`${r}${i}${s}-${a}-${e+1}`},Hm=(n,e)=>{if(!n.length)return;const t=Object.keys(n[0]),r=[t.join(","),...n.map(a=>t.map(c=>JSON.stringify(a[c],(u,d)=>d===null?"":d)).join(","))].join(`
`),i=new Blob([r],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a");s.href=URL.createObjectURL(i),s.download=e,s.click()},rre=({data:n,color:e="bg-indigo-500"})=>{const t=Math.max(...n.map(i=>Math.abs(i.value)))||1,r=160;return f.jsx("div",{className:"flex items-end gap-2 w-full pt-6",style:{height:`${r+40}px`},children:n.map((i,s)=>{const a=Math.max(Math.abs(i.value)/t*r,4),c=i.color||(i.value<0?"bg-red-500":e);return f.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2 group relative min-w-[40px]",children:[f.jsx("div",{className:"relative w-full flex justify-center items-end flex-1",style:{minHeight:`${r}px`},children:f.jsx("div",{style:{height:`${a}px`},className:`w-full max-w-[40px] ${c} opacity-90 group-hover:opacity-100 transition-all rounded-t relative shadow-sm`,children:f.jsxs("div",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 bg-slate-900 text-white text-[10px] px-2 py-1 rounded pointer-events-none whitespace-nowrap z-20 shadow-lg transition-opacity font-bold",children:["$",i.value.toLocaleString()]})})}),f.jsxs("div",{className:"text-center w-full overflow-hidden",children:[f.jsx("span",{className:"text-[10px] text-slate-500 block truncate px-1",title:i.label,children:i.label}),f.jsx("span",{className:`text-[10px] font-bold block mt-0.5 ${i.value<0?"text-red-600":"text-slate-700"}`,children:Math.abs(i.value)>=1e3?"$"+(i.value/1e3).toFixed(1)+"k":"$"+i.value})]})]},s)})})},ire=({data:n})=>{const e=n.reduce((r,i)=>r+i.value,0)||1;let t=0;return f.jsxs("div",{className:"relative w-32 h-32 mx-auto",children:[f.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full rotate-[-90deg]",children:[n.map((r,i)=>{const s=r.value/e*360,a=50+40*Math.cos(Math.PI*t/180),c=50+40*Math.sin(Math.PI*t/180),u=50+40*Math.cos(Math.PI*(t+s)/180),d=50+40*Math.sin(Math.PI*(t+s)/180),p=s>180?1:0,g=`M 50 50 L ${a} ${c} A 40 40 0 ${p} 1 ${u} ${d} Z`;return t+=s,f.jsx("path",{d:g,fill:r.color,className:"hover:opacity-80 transition-opacity",title:`${r.label}: ${r.value}`},i)}),f.jsx("circle",{cx:"50",cy:"50",r:"25",fill:"white"})]}),f.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:f.jsx("span",{className:"text-[10px] font-bold text-slate-400",children:"Total"})})]})},rL=({isOpen:n,onClose:e,userId:t,userName:r,userRole:i})=>{const{showAlert:s,showConfirm:a,showToast:c}=kh(),[u,d]=Ee.useState("new"),[p,g]=Ee.useState([]),[_,w]=Ee.useState([]),[P,O]=Ee.useState(""),[L,B]=Ee.useState(1),[K,W]=Ee.useState(""),[J,ae]=Ee.useState(!1);Ee.useEffect(()=>{if(!n)return;const C=ut.collection("inventory_items").where("status","!=","out_of_stock").orderBy("name").onSnapshot(F=>g(F.docs.map(S=>({id:S.id,...S.data()})))),N=ut.collection("inventory_requests").where("requesterId","==",t).orderBy("createdAt","desc").limit(20).onSnapshot(F=>w(F.docs.map(S=>({id:S.id,...S.data()}))));return()=>{C(),N()}},[n,t]);const le=async()=>{if(!P||L<=0||!K){s("warning","Please fill all required fields.","Incomplete Form");return}const C=p.find(N=>N.id===P);if(C){ae(!0);try{await ut.collection("inventory_requests").add({requesterId:t,requesterName:r,requesterRole:i,itemId:C.id,itemName:C.name,quantity:L,purpose:K,status:"pending",createdAt:an.firestore.Timestamp.now()}),c("success","Request submitted successfully!"),d("history"),O(""),B(1),W("")}catch(N){console.error(N),s("error","Failed to submit request. Please try again.")}finally{ae(!1)}}},U=async C=>{if(!await a(`Confirm receipt of ${C.releasedQuantity} x ${C.itemName}? This will deduct items from stock.`,{title:"Confirm Receipt",confirmText:"Confirm Receipt",type:"primary"}))return;const F=ut.batch(),S=ut.collection("inventory_requests").doc(C.id);F.update(S,{status:"completed",completedAt:an.firestore.Timestamp.now()});const Q=((await ut.collection("inventory_items").doc(C.itemId).get()).data().purchasePrice||0)*(C.releasedQuantity||0),pe=ut.collection("inventory_items").doc(C.itemId);F.update(pe,{quantity:an.firestore.FieldValue.increment(-(C.releasedQuantity||0))});const se=ut.collection("inventory_transactions").doc();F.set(se,{itemId:C.itemId,itemName:C.itemName,type:"issue",quantity:-(C.releasedQuantity||0),cost:Q,performedBy:t,reason:`Staff Request: ${C.purpose}`,timestamp:an.firestore.Timestamp.now()});try{await F.commit(),c("success","Receipt confirmed & stock deducted")}catch(ve){console.error(ve),s("error","Failed to confirm receipt. Please try again.")}};return n?f.jsx("div",{className:"fixed inset-0 bg-black/70 z-[100] flex items-center justify-center p-4",children:f.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl h-[80vh] flex flex-col overflow-hidden",children:[f.jsxs("div",{className:"p-4 border-b bg-slate-50 flex justify-between items-center",children:[f.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[f.jsx(fg,{className:"w-5 h-5 text-indigo-600"})," Request Inventory"]}),f.jsx("button",{onClick:e,children:f.jsx(xp,{className:"w-5 h-5 text-slate-500 hover:text-red-500"})})]}),f.jsxs("div",{className:"flex border-b border-slate-200",children:[f.jsx("button",{onClick:()=>d("new"),className:`flex-1 py-3 text-sm font-bold border-b-2 transition-colors ${u==="new"?"border-indigo-600 text-indigo-600 bg-indigo-50/50":"border-transparent text-slate-500 hover:bg-slate-50"}`,children:"New Request"}),f.jsxs("button",{onClick:()=>d("history"),className:`flex-1 py-3 text-sm font-bold border-b-2 transition-colors ${u==="history"?"border-indigo-600 text-indigo-600 bg-indigo-50/50":"border-transparent text-slate-500 hover:bg-slate-50"}`,children:["My Requests ",_.filter(C=>C.status==="released").length>0&&f.jsx("span",{className:"ml-1 bg-red-500 text-white text-[10px] px-1.5 py-0.5 rounded-full",children:_.filter(C=>C.status==="released").length})]})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-50/50",children:[u==="new"&&f.jsxs("div",{className:"space-y-4 max-w-lg mx-auto bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Select Item"}),f.jsxs("select",{className:"w-full p-2.5 border border-slate-200 rounded-lg outline-none focus:ring-2 focus:ring-indigo-500",value:P,onChange:C=>O(C.target.value),children:[f.jsx("option",{value:"",children:"-- Choose Item --"}),p.map(C=>f.jsxs("option",{value:C.id,children:[C.name," (",C.quantity," ",C.unit," avail)"]},C.id))]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Quantity Needed"}),f.jsx("input",{type:"number",min:"1",className:"w-full p-2.5 border border-slate-200 rounded-lg outline-none focus:ring-2 focus:ring-indigo-500",value:L,onChange:C=>B(parseInt(C.target.value))})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Purpose / Reason"}),f.jsx("textarea",{className:"w-full p-2.5 border border-slate-200 rounded-lg outline-none focus:ring-2 focus:ring-indigo-500 h-24 resize-none",placeholder:"e.g. Restocking Phlebotomy Room 2",value:K,onChange:C=>W(C.target.value)})]}),f.jsxs("button",{onClick:le,disabled:J,className:"w-full bg-indigo-600 text-white py-3 rounded-lg font-bold shadow-md hover:bg-indigo-700 disabled:opacity-50 flex justify-center items-center gap-2",children:[J?f.jsx(wh,{className:"w-5 h-5 animate-spin"}):f.jsx(hl,{className:"w-5 h-5"})," Submit Request"]})]}),u==="history"&&f.jsxs("div",{className:"space-y-3",children:[_.map(C=>f.jsxs("div",{className:"bg-white p-4 rounded-lg border border-slate-200 shadow-sm flex flex-col md:flex-row gap-4 items-start md:items-center justify-between",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("h4",{className:"font-bold text-slate-800",children:C.itemName}),f.jsxs("span",{className:"text-sm font-medium bg-slate-100 px-2 py-0.5 rounded",children:["x",C.quantity]})]}),f.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Requested: ",hi(C.createdAt),"  Reason: ",C.purpose]}),C.status==="released"&&f.jsxs("div",{className:"mt-2 bg-green-50 p-2 rounded border border-green-100 text-xs",children:[f.jsx("p",{className:"font-bold text-green-800",children:"Ready for Pickup!"}),f.jsxs("p",{className:"text-green-700",children:["Manager released ",C.releasedQuantity," items."]})]}),C.status==="rejected"&&f.jsxs("div",{className:"mt-2 bg-red-50 p-2 rounded border border-red-100 text-xs",children:[f.jsx("p",{className:"font-bold text-red-800",children:"Request Rejected"}),f.jsxs("p",{className:"text-red-700",children:["Reason: ",C.rejectionReason||"No reason provided"]}),C.rejectedAt&&f.jsxs("p",{className:"text-red-600 mt-1",children:["Rejected on: ",hi(C.rejectedAt)]})]})]}),f.jsxs("div",{className:"shrink-0 flex items-center gap-3",children:[f.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase ${C.status==="pending"?"bg-blue-100 text-blue-700":C.status==="released"?"bg-amber-100 text-amber-700 animate-pulse":C.status==="completed"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:C.status==="released"?"Ready to Pick":C.status}),C.status==="released"&&f.jsxs("button",{onClick:()=>U(C),className:"bg-green-600 text-white px-3 py-1.5 rounded-lg text-xs font-bold shadow hover:bg-green-700 flex items-center gap-1",children:[f.jsx(Ov,{className:"w-3 h-3"})," Confirm Received"]})]})]},C.id)),_.length===0&&f.jsx("p",{className:"text-center text-slate-400 py-8 italic",children:"No request history."})]})]})]})}):null},sre=({onLoginSuccess:n})=>{const[e,t]=Ee.useState(""),[r,i]=Ee.useState(""),[s,a]=Ee.useState(!1),[c,u]=Ee.useState(""),[d,p]=Ee.useState("receptionist"),g=async _=>{if(_.preventDefault(),!e||!r){u("Please enter username and password.");return}a(!0),u("");try{if(await xr.setPersistence(an.auth.Auth.Persistence.LOCAL),e==="admin"&&r==="admin"){try{await xr.signInAnonymously()}catch(P){console.warn("Anonymous auth failed:",P)}n("admin",{uid:"sys-admin",email:"System Admin",username:"admin"}),await Zd("LOGIN","Auth","Admin logged in",{uid:"sys-admin",username:"admin"});return}const w=await ut.collection("users").where("username","==",e).where("password","==",r).where("status","==","active").limit(1).get();if(!w.empty){const P=w.docs[0].data();if(P.role!==d&&P.role!=="admin"){u(`Credentials valid, but this user is a ${P.role}, not a ${d}.`),a(!1);return}try{await xr.signInAnonymously()}catch(O){console.warn("Anonymous auth failed:",O)}n(P.role,{uid:w.docs[0].id,email:P.username,...P}),await Zd("LOGIN","Auth",`User logged in as ${P.role}`,{uid:w.docs[0].id,username:P.username});return}u("Invalid credentials.")}catch(w){console.error(w),u("Login failed. Please try again.")}finally{a(!1)}};return f.jsxs("div",{className:"min-h-screen flex flex-col font-sans",style:{backgroundColor:j.RICH_BLACK},children:[f.jsx("header",{className:"shadow-sm sticky top-0 z-40",style:{backgroundColor:j.MIDNIGHT_GREEN,borderBottom:`1px solid ${j.PERSIAN_GREEN}20`},children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-center",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center shadow-lg",style:{backgroundColor:j.PERSIAN_GREEN},children:f.jsx(_5,{className:"w-6 h-6 text-white"})}),f.jsxs("div",{children:[f.jsxs("h1",{className:"text-2xl font-bold tracking-tight",style:{color:j.CITRON},children:["LabPro ",f.jsx("span",{style:{color:j.PERSIAN_GREEN},children:"Plus"})]}),f.jsx("p",{className:"text-[10px] uppercase tracking-widest font-bold",style:{color:j.TIFFANY_BLUE},children:"Diagnostic Management System"})]})]})})}),f.jsx("main",{className:"flex-1 flex items-center justify-center p-4",children:f.jsx("div",{className:"w-full max-w-md",children:f.jsxs("div",{className:"rounded-2xl shadow-2xl p-8",style:{backgroundColor:j.MIDNIGHT_GREEN},children:[f.jsxs("div",{className:"mb-8 text-center",children:[f.jsx("h3",{className:"text-2xl font-bold mb-2",style:{color:j.CITRON},children:"System Login"}),f.jsx("p",{className:"text-sm",style:{color:j.TIFFANY_BLUE},children:"Select role and enter credentials"})]}),f.jsxs("form",{onSubmit:g,className:"space-y-5",autoComplete:"on",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:j.TIFFANY_BLUE},children:"Select Role"}),f.jsxs("div",{className:"relative",children:[f.jsx("select",{value:d,onChange:_=>p(_.target.value),className:"w-full p-3.5 border-2 rounded-xl outline-none appearance-none font-medium transition-all",style:{backgroundColor:j.RICH_BLACK,borderColor:`${j.PERSIAN_GREEN}30`,color:j.CITRON},onFocus:_=>_.target.style.borderColor=j.PERSIAN_GREEN,onBlur:_=>_.target.style.borderColor=`${j.PERSIAN_GREEN}30`,name:"role",children:nL.filter(_=>!_.disabled).map(_=>f.jsx("option",{value:_.id,children:_.label},_.id))}),f.jsx(jte,{className:"absolute right-4 top-4 w-4 h-4 pointer-events-none",style:{color:j.TIFFANY_BLUE}})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:j.TIFFANY_BLUE},children:"Username"}),f.jsx("input",{type:"text",value:e,onChange:_=>t(_.target.value),className:"w-full p-3.5 border-2 rounded-xl outline-none transition-all",style:{backgroundColor:j.RICH_BLACK,borderColor:`${j.PERSIAN_GREEN}30`,color:j.CITRON},onFocus:_=>_.target.style.borderColor=j.PERSIAN_GREEN,onBlur:_=>_.target.style.borderColor=`${j.PERSIAN_GREEN}30`,placeholder:"Enter username",autoFocus:!0,name:"username",autoComplete:"username"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:j.TIFFANY_BLUE},children:"Password"}),f.jsx("input",{type:"password",value:r,onChange:_=>i(_.target.value),className:"w-full p-3.5 border-2 rounded-xl outline-none transition-all",style:{backgroundColor:j.RICH_BLACK,borderColor:`${j.PERSIAN_GREEN}30`,color:j.CITRON},onFocus:_=>_.target.style.borderColor=j.PERSIAN_GREEN,onBlur:_=>_.target.style.borderColor=`${j.PERSIAN_GREEN}30`,placeholder:"",name:"password",autoComplete:"current-password"})]}),c&&f.jsxs("div",{className:"border-2 p-3 rounded-xl text-sm flex items-start gap-2 animate-in fade-in slide-in-from-top-2",style:{backgroundColor:"#FEE2E2",borderColor:"#FCA5A5",color:"#991B1B"},children:[f.jsx(x5,{className:"w-4 h-4 mt-0.5 shrink-0"}),f.jsx("span",{className:"leading-snug",children:c})]}),f.jsx("button",{type:"submit",disabled:s||!e||!r,className:"w-full py-3.5 rounded-xl font-bold transition-all disabled:opacity-50 shadow-lg flex justify-center items-center gap-2 text-white",style:{backgroundColor:j.PERSIAN_GREEN,boxShadow:`0 4px 14px 0 ${j.PERSIAN_GREEN}40`},onMouseEnter:_=>_.currentTarget.style.transform="translateY(-1px)",onMouseLeave:_=>_.currentTarget.style.transform="translateY(0)",children:s?f.jsx(wh,{className:"w-5 h-5 animate-spin"}):"Secure Login"})]})]})})}),f.jsx("footer",{className:"py-6",style:{backgroundColor:j.MIDNIGHT_GREEN,borderTop:`1px solid ${j.PERSIAN_GREEN}20`},children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 text-center",children:[f.jsxs("p",{className:"text-sm font-medium mb-2",style:{color:j.CITRON},children:["Developed by ",f.jsx("span",{className:"font-bold",style:{color:j.PERSIAN_GREEN},children:"ABS TECH Bahawalpur"})]}),f.jsxs("p",{className:"text-sm mb-2",style:{color:j.TIFFANY_BLUE},children:["Contact Us at ",f.jsx("span",{className:"font-bold",style:{color:j.PERSIAN_GREEN},children:"03009686545"})]}),f.jsx("p",{className:"text-xs",style:{color:j.TIFFANY_BLUE},children:"All Rights Reserved  ABS BAHAWALPUR"})]})})]})},ore=({expenses:n})=>{const[e,t]=Ee.useState("due"),[r,i]=Ee.useState(!1),[s,a]=Ee.useState({category:"General",isRecurring:!1,status:"pending"}),[c,u]=Ee.useState("month"),d=async()=>{var _;if(!(!s.title||!s.amount||!s.dueDate))try{await ut.collection("expenses").add({...s,date:an.firestore.Timestamp.now(),createdBy:((_=xr.currentUser)==null?void 0:_.email)||"admin"}),await Zd("ADD_EXPENSE","Finance",`Added expense: ${s.title} ($${s.amount})`,xr.currentUser),i(!1),a({category:"General",isRecurring:!1,status:"pending"})}catch(w){console.error(w)}},p=async _=>{var w;try{await ut.collection("expenses").doc(_.id).update({status:"paid",paidAt:an.firestore.Timestamp.now(),paidBy:((w=xr.currentUser)==null?void 0:w.email)||"admin"})}catch(P){console.error(P)}},g=Ee.useMemo(()=>{if(e==="due")return n.filter(w=>w.status!=="paid");const _=new Date;return n.filter(w=>{if(w.status!=="paid")return!1;const P=w.paidAt?w.paidAt.toDate?w.paidAt.toDate():new Date(w.paidAt):new Date(w.date);return c==="day"?P.toDateString()===_.toDateString():c==="week"?P>new Date(_.setDate(_.getDate()-7)):c==="month"?P.getMonth()===_.getMonth()&&P.getFullYear()===_.getFullYear():c==="year"?P.getFullYear()===_.getFullYear():!0})},[n,e,c]);return f.jsxs("div",{className:"h-full flex flex-col",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Expense Management"}),f.jsxs("div",{className:"flex gap-2 mt-2",children:[f.jsx("button",{onClick:()=>t("due"),className:`px-3 py-1 text-sm rounded-full font-bold ${e==="due"?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-500"}`,children:"Due Expenses"}),f.jsx("button",{onClick:()=>t("paid"),className:`px-3 py-1 text-sm rounded-full font-bold ${e==="paid"?"bg-green-100 text-green-700":"bg-slate-100 text-slate-500"}`,children:"Paid History"})]})]}),f.jsxs("div",{className:"flex gap-2",children:[e==="paid"&&f.jsxs(f.Fragment,{children:[f.jsxs("select",{value:c,onChange:_=>u(_.target.value),className:"p-2 border rounded text-sm font-bold bg-white",children:[f.jsx("option",{value:"day",children:"Today"}),f.jsx("option",{value:"week",children:"This Week"}),f.jsx("option",{value:"month",children:"This Month"}),f.jsx("option",{value:"year",children:"This Year"})]}),f.jsx("button",{onClick:()=>Hm(g,"paid_expenses.csv"),className:"bg-slate-200 p-2 rounded hover:bg-slate-300",title:"Export Excel",children:f.jsx(JD,{className:"w-5 h-5"})}),f.jsx("button",{onClick:()=>window.print(),className:"bg-slate-200 p-2 rounded hover:bg-slate-300",title:"Print",children:f.jsx(Kc,{className:"w-5 h-5"})})]}),f.jsxs("button",{onClick:()=>i(!0),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2",children:[f.jsx(Fc,{className:"w-4 h-4"})," Add Expense"]})]})]}),r&&f.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200 mb-6 animate-in slide-in-from-top-4",children:[f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[f.jsx("input",{className:"p-2 border rounded",placeholder:"Title / Description",value:s.title||"",onChange:_=>a({...s,title:_.target.value})}),f.jsx("input",{className:"p-2 border rounded",type:"number",placeholder:"Amount",value:s.amount||"",onChange:_=>a({...s,amount:parseFloat(_.target.value)})}),f.jsxs("select",{className:"p-2 border rounded",value:s.category,onChange:_=>a({...s,category:_.target.value}),children:[f.jsx("option",{children:"General"}),f.jsx("option",{children:"Rent"}),f.jsx("option",{children:"Utilities"}),f.jsx("option",{children:"Salaries"}),f.jsx("option",{children:"Inventory"}),f.jsx("option",{children:"Maintenance"})]}),f.jsx("input",{className:"p-2 border rounded",type:"date",placeholder:"Due Date",value:s.dueDate||"",onChange:_=>a({...s,dueDate:_.target.value})})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("input",{className:"p-2 border rounded w-64",placeholder:"Vendor (Optional)",value:s.vendor||"",onChange:_=>a({...s,vendor:_.target.value})}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>i(!1),className:"px-4 py-2 text-slate-500",children:"Cancel"}),f.jsx("button",{onClick:d,className:"bg-green-600 text-white px-4 py-2 rounded font-bold",children:"Save Record"})]})]})]}),f.jsx("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm flex-1 overflow-hidden flex flex-col",children:f.jsx("div",{className:"overflow-y-auto",children:f.jsxs("table",{className:"w-full text-left text-sm",children:[f.jsx("thead",{className:"bg-slate-50 border-b sticky top-0",children:f.jsxs("tr",{children:[f.jsx("th",{className:"p-4",children:e==="due"?"Due Date":"Paid Date"}),f.jsx("th",{className:"p-4",children:"Description"}),f.jsx("th",{className:"p-4",children:"Category"}),f.jsx("th",{className:"p-4",children:"Vendor"}),f.jsx("th",{className:"p-4 text-right",children:"Amount"}),e==="due"&&f.jsx("th",{className:"p-4 text-center",children:"Action"})]})}),f.jsxs("tbody",{className:"divide-y divide-slate-100",children:[g.map(_=>f.jsxs("tr",{className:"hover:bg-slate-50",children:[f.jsx("td",{className:"p-4 text-slate-500 text-xs font-mono",children:e==="due"?_.dueDate:hi(_.paidAt)}),f.jsx("td",{className:"p-4 font-bold text-slate-700",children:_.title}),f.jsx("td",{className:"p-4",children:f.jsx("span",{className:"bg-slate-100 px-2 py-1 rounded text-xs",children:_.category})}),f.jsx("td",{className:"p-4 text-slate-500",children:_.vendor||"-"}),f.jsxs("td",{className:"p-4 text-right font-bold text-slate-800",children:["$",_.amount.toFixed(2)]}),e==="due"&&f.jsx("td",{className:"p-4 text-center",children:f.jsx("button",{onClick:()=>p(_),className:"bg-green-500 text-white px-3 py-1 rounded text-xs font-bold shadow hover:bg-green-600 transition-colors",children:"Mark Paid"})})]},_.id)),g.length===0&&f.jsx("tr",{children:f.jsx("td",{colSpan:6,className:"p-8 text-center text-slate-400",children:"No expenses found."})})]})]})})})]})},are=({doctors:n,orders:e})=>{const{showAlert:t,showConfirm:r,showToast:i}=kh(),[s,a]=Ee.useState(!1),[c,u]=Ee.useState({status:"active",commissionRate:0}),d=async()=>{if(c.name)try{await ut.collection("doctors").add(c),a(!1),u({status:"active",commissionRate:0})}catch(g){console.error(g)}},p=async g=>{var _;try{console.log("Attempting to pay commission for:",g.name);const w=e.filter(K=>K.doctorId===g.id&&!K.commissionPaid);if(console.log("Unpaid orders count:",w.length),w.length===0){t("info","No unpaid orders found for this doctor in the current view.","No Pending Commissions");return}const P=w.reduce((K,W)=>K+(W.doctorCommission||0),0);if(!await r(`Mark $${P.toFixed(2)} as paid to Dr. ${g.name}? This will create a specific expense record.`,{title:"Confirm Commission Payment",confirmText:"Mark Paid",type:"primary"}))return;const L=ut.batch(),B=ut.collection("expenses").doc();L.set(B,{title:`Commission - ${g.name}`,category:"Commission",amount:P,status:"paid",date:an.firestore.Timestamp.now(),paidAt:an.firestore.Timestamp.now(),paidBy:((_=xr.currentUser)==null?void 0:_.email)||"admin",createdBy:"system"}),w.forEach(K=>{const W=ut.collection("orders").doc(K.id);L.update(W,{commissionPaid:!0})}),await L.commit(),i("success",`Commission of $${P.toFixed(2)} paid & expense logged`)}catch(w){console.error("Payment failed",w),t("error","Failed to pay commission: "+(w instanceof Error?w.message:String(w)),"Payment Failed")}};return f.jsxs("div",{className:"h-full flex flex-col",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Doctor Referral Program"}),f.jsxs("button",{onClick:()=>a(!0),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2",children:[f.jsx(L1,{className:"w-4 h-4"})," Add Doctor"]})]}),s&&f.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200 mb-6",children:[f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[f.jsx("input",{className:"p-2 border rounded",placeholder:"Doctor Name",value:c.name||"",onChange:g=>u({...c,name:g.target.value})}),f.jsx("input",{className:"p-2 border rounded",placeholder:"Clinic / Hospital",value:c.clinic||"",onChange:g=>u({...c,clinic:g.target.value})}),f.jsx("input",{className:"p-2 border rounded",placeholder:"Phone",value:c.phone||"",onChange:g=>u({...c,phone:g.target.value})}),f.jsx("input",{className:"p-2 border rounded",type:"number",placeholder:"Commission %",value:c.commissionRate||"",onChange:g=>u({...c,commissionRate:parseFloat(g.target.value)})})]}),f.jsxs("div",{className:"flex justify-end gap-2",children:[f.jsx("button",{onClick:()=>a(!1),className:"px-4 py-2 text-slate-500",children:"Cancel"}),f.jsx("button",{onClick:d,className:"bg-green-600 text-white px-4 py-2 rounded font-bold",children:"Save Doctor"})]})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-full min-h-0",children:[f.jsx("div",{className:"lg:col-span-2 bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden flex flex-col",children:f.jsx("div",{className:"overflow-y-auto",children:f.jsxs("table",{className:"w-full text-left text-sm",children:[f.jsx("thead",{className:"bg-slate-50 border-b sticky top-0",children:f.jsxs("tr",{children:[f.jsx("th",{className:"p-4",children:"Doctor"}),f.jsx("th",{className:"p-4",children:"Clinic"}),f.jsx("th",{className:"p-4",children:"Comm. Rate"}),f.jsx("th",{className:"p-4 text-right",children:"Revenue Generated"})]})}),f.jsx("tbody",{className:"divide-y divide-slate-100",children:n.map(g=>{const _=e.filter(w=>w.doctorId===g.id).reduce((w,P)=>w+P.totalAmount,0);return f.jsxs("tr",{className:"hover:bg-slate-50",children:[f.jsx("td",{className:"p-4 font-bold text-slate-800",children:g.name}),f.jsx("td",{className:"p-4 text-slate-500",children:g.clinic}),f.jsxs("td",{className:"p-4 font-mono text-indigo-600 font-bold",children:[g.commissionRate,"%"]}),f.jsxs("td",{className:"p-4 text-right font-bold text-green-600",children:["$",_.toLocaleString()]})]},g.id)})})]})})}),f.jsxs("div",{className:"bg-indigo-50 p-6 rounded-xl border border-indigo-100 overflow-y-auto",children:[f.jsx("h4",{className:"font-bold text-indigo-900 mb-4",children:"Outstanding Commission Liabilities"}),f.jsxs("div",{className:"space-y-4",children:[n.map(g=>{const _=e.filter(w=>w.doctorId===g.id&&!w.commissionPaid).reduce((w,P)=>w+(P.doctorCommission||0),0);return _<=0?null:f.jsxs("div",{className:"bg-white p-3 rounded border border-indigo-100 flex justify-between items-center shadow-sm",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-bold text-slate-700 text-sm",children:g.name}),f.jsx("p",{className:"text-xs text-slate-400",children:g.clinic})]}),f.jsxs("div",{className:"text-right",children:[f.jsxs("p",{className:"font-bold text-indigo-600",children:["$",_.toFixed(2)]}),f.jsx("button",{onClick:()=>p(g),className:"text-[10px] bg-green-100 text-green-700 font-bold px-2 py-1 rounded hover:bg-green-200 mt-1 transition-colors",children:"Mark Paid"})]})]},g.id)}),n.every(g=>e.filter(_=>_.doctorId===g.id&&!_.commissionPaid).reduce((_,w)=>_+(w.doctorCommission||0),0)<=0)&&f.jsx("p",{className:"text-center text-indigo-400 text-sm py-4",children:"No pending commissions."})]})]})]})]})},iL=({onBack:n})=>{const{showToast:e}=kh(),[t,r]=Ee.useState("dashboard"),[i,s]=Ee.useState([]),[a,c]=Ee.useState([]),[u,d]=Ee.useState([]),[p,g]=Ee.useState(0),[_,w]=Ee.useState([]),[P,O]=Ee.useState("month");Ee.useEffect(()=>{const le=ut.collection("orders").orderBy("createdAt","desc").limit(200).onSnapshot(S=>s(S.docs.map(k=>({id:k.id,...k.data()})))),U=ut.collection("expenses").orderBy("date","desc").limit(200).onSnapshot(S=>c(S.docs.map(k=>({id:k.id,...k.data()})))),C=ut.collection("doctors").onSnapshot(S=>d(S.docs.map(k=>({id:k.id,...k.data()})))),N=ut.collection("inventory_items").onSnapshot(S=>{const k=S.docs.reduce((M,Q)=>{const pe=Q.data();return M+pe.quantity*(pe.purchasePrice||0)},0);g(k)}),F=ut.collection("inventory_transactions").orderBy("timestamp","desc").limit(100).onSnapshot(S=>w(S.docs.map(k=>({id:k.id,...k.data()}))));return()=>{le(),U(),C(),N(),F()}},[]);const L=le=>{const U=le.toDate?le.toDate():new Date(le),C=new Date;return P==="today"?U.toDateString()===C.toDateString():P==="week"?U>new Date(C.setDate(C.getDate()-7)):P==="month"?U.getMonth()===C.getMonth()&&U.getFullYear()===C.getFullYear():P==="year"?U.getFullYear()===C.getFullYear():!0},B=Ee.useMemo(()=>i.filter(le=>L(le.createdAt)),[i,P]),K=Ee.useMemo(()=>a.filter(le=>le.status==="paid"&&L(le.paidAt)),[a,P]),W=Ee.useMemo(()=>_.filter(le=>(le.type==="issue"||le.type==="deduction")&&L(le.timestamp)),[_,P]),J=Ee.useMemo(()=>{const le=B.reduce((S,k)=>S+k.totalAmount,0),U=K.reduce((S,k)=>S+k.amount,0),C=W.reduce((S,k)=>S+(k.cost||0),0),N=i.filter(S=>!S.commissionPaid).reduce((S,k)=>S+(k.doctorCommission||0),0),F=le-U-C;return{revenue:le,paidExpenses:U,invUsageCost:C,pendingCommissions:N,profit:F}},[B,K,W,i]),ae=()=>{t!=="dashboard"?r("dashboard"):n&&n()};return f.jsxs("div",{className:"h-full flex flex-col bg-slate-50",children:[f.jsxs("div",{className:"bg-white border-b border-slate-200 px-6 py-3 flex justify-between items-center shrink-0",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[n&&f.jsx("button",{onClick:ae,className:"p-2 rounded-full hover:bg-slate-100 transition-colors",children:f.jsx(Yc,{className:"w-5 h-5 text-indigo-600"})}),f.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[f.jsx(Wc,{className:"w-6 h-6 text-indigo-600"})," Financial Dashboard"]})]}),f.jsx("div",{className:"flex bg-slate-100 p-1 rounded-lg",children:[{id:"dashboard",label:"Overview",icon:_0},{id:"sales",label:"Sales",icon:v0},{id:"expenses",label:"Expenses",icon:eL},{id:"doctors",label:"Referrals",icon:L1},{id:"inventory",label:"Inventory Finance",icon:Vc}].map(le=>f.jsxs("button",{onClick:()=>r(le.id),className:`px-3 py-1.5 rounded-md text-sm font-bold flex items-center gap-2 transition-all ${t===le.id?"bg-white text-indigo-600 shadow-sm":"text-slate-500 hover:text-slate-800"}`,children:[f.jsx(le.icon,{className:"w-4 h-4"})," ",f.jsx("span",{className:"hidden sm:inline",children:le.label})]},le.id))})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[f.jsx("div",{className:"flex justify-end mb-6",children:f.jsxs("select",{value:P,onChange:le=>O(le.target.value),className:"p-2 border rounded-lg text-sm bg-white font-bold text-slate-700",children:[f.jsx("option",{value:"today",children:"Today"}),f.jsx("option",{value:"week",children:"This Week"}),f.jsx("option",{value:"month",children:"This Month"}),f.jsx("option",{value:"year",children:"This Year"})]})}),t==="dashboard"&&f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[f.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[f.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase",children:"Total Revenue"}),f.jsxs("p",{className:"text-3xl font-bold text-slate-800 mt-2",children:["$",J.revenue.toLocaleString()]}),f.jsxs("p",{className:"text-xs text-green-600 mt-1 font-bold flex items-center gap-1",children:[f.jsx(Fne,{className:"w-3 h-3"})," Income"]})]}),f.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[f.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase",children:"Paid Expenses"}),f.jsxs("p",{className:"text-3xl font-bold text-slate-800 mt-2",children:["$",J.paidExpenses.toLocaleString()]}),f.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Operational & Paid Comms"})]}),f.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[f.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase",children:"Inventory Usage Cost"}),f.jsxs("p",{className:"text-3xl font-bold text-slate-800 mt-2",children:["$",J.invUsageCost.toLocaleString()]}),f.jsx("p",{className:"text-xs text-amber-600 mt-1 font-bold",children:"Cost of Goods Sold"})]}),f.jsxs("div",{className:`p-6 rounded-xl border shadow-lg text-white ${J.profit>=0?"bg-green-600 border-green-700 shadow-green-200":"bg-red-600 border-red-700 shadow-red-200"}`,children:[f.jsx("p",{className:"text-white/80 text-xs font-bold uppercase",children:"Net Profit"}),f.jsxs("p",{className:"text-3xl font-bold mt-2",children:["$",J.profit.toLocaleString()]}),f.jsx("p",{className:"text-xs text-white/70 mt-1 opacity-80",children:"Rev - (Exp + Inv. Usage)"})]})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[f.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[f.jsx("h3",{className:"font-bold text-slate-800 mb-4",children:"Financial Overview"}),[J.revenue,J.paidExpenses,J.invUsageCost].some(le=>le>0)?f.jsxs(f.Fragment,{children:[f.jsx(rre,{data:[{label:"Revenue",value:J.revenue,color:"bg-green-500"},{label:"Paid Exp",value:J.paidExpenses,color:"bg-red-500"},{label:"Inv. Usage",value:J.invUsageCost,color:"bg-orange-500"},{label:"Profit",value:J.profit,color:J.profit>=0?"bg-green-600":"bg-red-600"}]}),f.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2 text-xs",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-3 h-3 bg-green-500 rounded"}),f.jsx("span",{className:"text-slate-600",children:"Revenue"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-3 h-3 bg-red-500 rounded"}),f.jsx("span",{className:"text-slate-600",children:"Expenses"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded"}),f.jsx("span",{className:"text-slate-600",children:"Inventory"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:`w-3 h-3 rounded ${J.profit>=0?"bg-green-600":"bg-red-600"}`}),f.jsx("span",{className:"text-slate-600",children:"Net Profit"})]})]})]}):f.jsx("div",{className:"h-40 flex items-center justify-center text-slate-400 text-sm",children:"No financial data for selected period"})]}),f.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[f.jsx("h3",{className:"font-bold text-slate-800 mb-4",children:"Expense Breakdown (Paid)"}),K.length>0||W.length>0?f.jsxs(f.Fragment,{children:[f.jsx(ire,{data:(()=>{const le=K.reduce((C,N)=>({...C,[N.category]:(C[N.category]||0)+N.amount}),{}),U=W.reduce((C,N)=>C+(N.cost||0),0);return U>0&&(le.Inventory=U),Object.entries(le).map(([C,N],F)=>({label:C,value:N,color:["#6366f1","#ec4899","#f59e0b","#10b981","#8b5cf6"][F%5]}))})()}),f.jsx("div",{className:"mt-4 grid grid-cols-2 gap-2 text-xs",children:(()=>{const le=K.reduce((C,N)=>({...C,[N.category]:(C[N.category]||0)+N.amount}),{}),U=W.reduce((C,N)=>C+(N.cost||0),0);return U>0&&(le.Inventory=U),Object.entries(le).map(([C,N],F)=>f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:["#6366f1","#ec4899","#f59e0b","#10b981","#8b5cf6"][F%5]}}),f.jsxs("span",{className:"text-slate-600",children:[C,": $",N.toFixed(0)]})]},C))})()})]}):f.jsx("div",{className:"h-40 flex items-center justify-center text-slate-400 text-sm",children:"No paid expenses for selected period"})]})]}),f.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[f.jsx("div",{className:"flex justify-between items-center mb-4",children:f.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[f.jsx(E5,{className:"w-5 h-5 text-indigo-600"})," Financial Reports"]})}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[f.jsxs("button",{onClick:()=>{const le=new Date,U=i.filter(F=>(F.createdAt.toDate?F.createdAt.toDate():new Date(F.createdAt)).toDateString()===le.toDateString()),C=a.filter(F=>F.status==="paid"&&F.paidAt&&(F.paidAt.toDate?F.paidAt.toDate():new Date(F.paidAt)).toDateString()===le.toDateString()),N=`DAILY FINANCIAL REPORT - ${le.toDateString()}

REVENUE
Total Sales: $${U.reduce((F,S)=>F+S.totalAmount,0).toFixed(2)}
Number of Orders: ${U.length}

EXPENSES
Total Paid: $${C.reduce((F,S)=>F+S.amount,0).toFixed(2)}
Number of Expenses: ${C.length}

NET: $${(U.reduce((F,S)=>F+S.totalAmount,0)-C.reduce((F,S)=>F+S.amount,0)).toFixed(2)}`;Hm([{Report:N}],`daily_report_${le.toISOString().split("T")[0]}.csv`),e("success","Daily report exported!")},className:"p-4 border-2 border-slate-200 rounded-lg hover:border-indigo-500 hover:bg-indigo-50 transition-all text-left group",children:[f.jsx(Lte,{className:"w-6 h-6 text-indigo-600 mb-2"}),f.jsx("p",{className:"font-bold text-slate-800 group-hover:text-indigo-600",children:"Daily Report"}),f.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Today's summary"})]}),f.jsxs("button",{onClick:()=>{const le=new Date,U=new Date(le.setDate(le.getDate()-7)),C=i.filter(N=>(N.createdAt.toDate?N.createdAt.toDate():new Date(N.createdAt))>U);a.filter(N=>N.status==="paid"&&N.paidAt&&(N.paidAt.toDate?N.paidAt.toDate():new Date(N.paidAt))>U),Hm(C.map(N=>({Date:hi(N.createdAt),Patient:N.patientName,Amount:N.totalAmount})),`weekly_sales_${new Date().toISOString().split("T")[0]}.csv`),e("success","Weekly report exported!")},className:"p-4 border-2 border-slate-200 rounded-lg hover:border-indigo-500 hover:bg-indigo-50 transition-all text-left group",children:[f.jsx(kte,{className:"w-6 h-6 text-indigo-600 mb-2"}),f.jsx("p",{className:"font-bold text-slate-800 group-hover:text-indigo-600",children:"Weekly Report"}),f.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Last 7 days"})]}),f.jsxs("button",{onClick:()=>{const le=new Date,U=i.filter(C=>{const N=C.createdAt.toDate?C.createdAt.toDate():new Date(C.createdAt);return N.getMonth()===le.getMonth()&&N.getFullYear()===le.getFullYear()});a.filter(C=>{if(C.status!=="paid"||!C.paidAt)return!1;const N=C.paidAt.toDate?C.paidAt.toDate():new Date(C.paidAt);return N.getMonth()===le.getMonth()&&N.getFullYear()===le.getFullYear()}),Hm(U.map(C=>({Date:hi(C.createdAt),Patient:C.patientName,Amount:C.totalAmount})),`monthly_sales_${le.getFullYear()}_${le.getMonth()+1}.csv`),e("success","Monthly report exported!")},className:"p-4 border-2 border-slate-200 rounded-lg hover:border-indigo-500 hover:bg-indigo-50 transition-all text-left group",children:[f.jsx(Ote,{className:"w-6 h-6 text-indigo-600 mb-2"}),f.jsx("p",{className:"font-bold text-slate-800 group-hover:text-indigo-600",children:"Monthly Report"}),f.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Current month"})]}),f.jsxs("button",{onClick:()=>{const le={Generated:new Date().toLocaleString(),Period:P,"Total Revenue":J.revenue,"Total Expenses":J.paidExpenses,"Inventory Cost":J.invUsageCost,"Net Profit":J.profit,"Pending Commissions":J.pendingCommissions,"Total Orders":B.length,"Paid Expenses Count":K.length},U=[...B.map(C=>({Type:"Revenue",Date:hi(C.createdAt),Description:`Order - ${C.patientName}`,Amount:C.totalAmount})),...K.map(C=>({Type:"Expense",Date:hi(C.paidAt),Description:`${C.category} - ${C.title}`,Amount:-C.amount}))];Hm([le,...U],`master_financial_report_${new Date().toISOString().split("T")[0]}.csv`),e("success","Master report with all financial data exported!")},className:"p-4 border-2 border-indigo-500 bg-indigo-50 rounded-lg hover:bg-indigo-100 transition-all text-left group",children:[f.jsx(JD,{className:"w-6 h-6 text-indigo-600 mb-2"}),f.jsx("p",{className:"font-bold text-indigo-800",children:"Master Report"}),f.jsx("p",{className:"text-xs text-indigo-600 mt-1 font-medium",children:"Complete financial data"})]})]}),f.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200 flex items-center justify-between",children:[f.jsx("p",{className:"text-xs text-slate-500",children:"All reports are exported as CSV files for Excel/Sheets"}),f.jsxs("button",{onClick:()=>window.print(),className:"text-sm font-bold text-indigo-600 hover:text-indigo-800 flex items-center gap-1",children:[f.jsx(Kc,{className:"w-4 h-4"})," Print Dashboard"]})]})]}),f.jsxs("div",{className:"bg-amber-50 p-4 rounded-xl border border-amber-100 flex justify-between items-center",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-bold text-amber-900",children:"Outstanding Liabilities"}),f.jsxs("p",{className:"text-sm text-amber-700",children:["Pending Commissions: ",f.jsxs("b",{children:["$",J.pendingCommissions.toLocaleString()]}),"  Due Expenses: ",f.jsxs("b",{children:["$",a.filter(le=>le.status!=="paid").reduce((le,U)=>le+U.amount,0).toLocaleString()]})]})]}),f.jsx("button",{onClick:()=>r("expenses"),className:"px-4 py-2 bg-white text-amber-700 text-sm font-bold rounded shadow-sm hover:bg-amber-100",children:"Manage Due Expenses"})]})]}),t==="expenses"&&f.jsx(ore,{expenses:a}),t==="doctors"&&f.jsx(are,{doctors:u,orders:i}),t==="sales"&&f.jsx("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:f.jsxs("table",{className:"w-full text-left text-sm",children:[f.jsx("thead",{className:"bg-slate-50 border-b",children:f.jsxs("tr",{children:[f.jsx("th",{className:"p-4",children:"Date"}),f.jsx("th",{className:"p-4",children:"Bill #"}),f.jsx("th",{className:"p-4",children:"Patient"}),f.jsx("th",{className:"p-4",children:"Referred By"}),f.jsx("th",{className:"p-4 text-right",children:"Amount"})]})}),f.jsx("tbody",{className:"divide-y divide-slate-100",children:B.map(le=>f.jsxs("tr",{className:"hover:bg-slate-50",children:[f.jsx("td",{className:"p-4 text-xs font-mono text-slate-500",children:hi(le.createdAt)}),f.jsx("td",{className:"p-4 text-xs font-bold",children:le.id.slice(0,8).toUpperCase()}),f.jsx("td",{className:"p-4 font-bold text-slate-800",children:le.patientName}),f.jsx("td",{className:"p-4 text-slate-600",children:le.doctorName||"Self"}),f.jsxs("td",{className:"p-4 text-right font-bold text-slate-800",children:["$",le.totalAmount]})]},le.id))})]})}),t==="inventory"&&f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{className:"bg-indigo-50 p-6 rounded-xl border border-indigo-100",children:[f.jsx("h3",{className:"font-bold text-indigo-900 mb-2",children:"Total Current Inventory Value"}),f.jsxs("p",{className:"text-4xl font-bold text-indigo-600",children:["$",p.toLocaleString()]}),f.jsx("p",{className:"text-sm text-indigo-400 mt-2",children:"Valuation of current stock (Purchase Price  Quantity)."})]}),f.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[f.jsxs("h3",{className:"font-bold text-slate-800 mb-4",children:["Inventory Usage Cost (",P,")"]}),f.jsxs("p",{className:"text-4xl font-bold text-slate-800 mb-4",children:["$",J.invUsageCost.toLocaleString()]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex justify-between text-sm",children:[f.jsx("span",{className:"text-slate-500",children:"Used in Tests"}),f.jsxs("span",{className:"font-bold",children:["$",W.filter(le=>le.type==="deduction").reduce((le,U)=>le+(U.cost||0),0).toFixed(2)]})]}),f.jsxs("div",{className:"flex justify-between text-sm",children:[f.jsx("span",{className:"text-slate-500",children:"Issued to Staff"}),f.jsxs("span",{className:"font-bold",children:["$",W.filter(le=>le.type==="issue").reduce((le,U)=>le+(U.cost||0),0).toFixed(2)]})]})]})]})]}),f.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[f.jsx("div",{className:"p-4 border-b bg-slate-50 font-bold text-slate-700",children:"Inventory Cost Ledger"}),f.jsxs("table",{className:"w-full text-left text-sm",children:[f.jsx("thead",{className:"border-b",children:f.jsxs("tr",{children:[f.jsx("th",{className:"p-4",children:"Date"}),f.jsx("th",{className:"p-4",children:"Item"}),f.jsx("th",{className:"p-4",children:"Type"}),f.jsx("th",{className:"p-4",children:"Reason"}),f.jsx("th",{className:"p-4 text-right",children:"Cost"})]})}),f.jsx("tbody",{className:"divide-y divide-slate-100",children:W.map(le=>f.jsxs("tr",{className:"hover:bg-slate-50",children:[f.jsx("td",{className:"p-4 text-xs font-mono text-slate-500",children:hi(le.timestamp)}),f.jsx("td",{className:"p-4 font-bold text-slate-700",children:le.itemName}),f.jsx("td",{className:"p-4",children:f.jsx("span",{className:"bg-slate-100 px-2 py-1 rounded text-xs uppercase",children:le.type})}),f.jsx("td",{className:"p-4 text-slate-600",children:le.reason}),f.jsxs("td",{className:"p-4 text-right font-bold text-slate-800",children:["$",(le.cost||0).toFixed(2)]})]},le.id))})]})]})]})]})]})},lre=({onViewDetails:n,onPrintReport:e})=>{const[t,r]=Ee.useState([]);Ee.useEffect(()=>{const s=ut.collection("orders").orderBy("createdAt","desc").limit(50).onSnapshot(a=>r(a.docs.map(c=>({id:c.id,...c.data()}))));return()=>s()},[]);const i=n||e;return f.jsx("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:f.jsxs("table",{className:"w-full text-left text-sm",children:[f.jsx("thead",{className:"bg-slate-50 border-b",children:f.jsxs("tr",{children:[f.jsx("th",{className:"p-4",children:"Date"}),f.jsx("th",{className:"p-4",children:"Order ID"}),f.jsx("th",{className:"p-4",children:"Patient"}),f.jsx("th",{className:"p-4",children:"Amount"}),f.jsx("th",{className:"p-4",children:"Status"}),i&&f.jsx("th",{className:"p-4 text-right",children:"Action"})]})}),f.jsxs("tbody",{className:"divide-y divide-slate-50",children:[t.map(s=>f.jsxs("tr",{className:"hover:bg-slate-50",children:[f.jsx("td",{className:"p-4 text-xs text-slate-500",children:hi(s.createdAt)}),f.jsx("td",{className:"p-4 font-mono text-xs font-bold",children:s.id.slice(0,8).toUpperCase()}),f.jsx("td",{className:"p-4 font-bold text-slate-800",children:s.patientName}),f.jsxs("td",{className:"p-4 font-bold text-slate-800",children:["$",s.totalAmount]}),f.jsx("td",{className:"p-4",children:f.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold uppercase ${s.status==="completed"?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:s.status})}),i&&f.jsx("td",{className:"p-4 text-right",children:f.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e&&f.jsx("button",{onClick:()=>e(s.id),className:"p-1.5 text-indigo-600 hover:bg-indigo-50 rounded border border-indigo-200",title:"Reprint Report",children:f.jsx(Kc,{className:"w-4 h-4"})}),n&&f.jsxs("button",{onClick:()=>n(s.patientId),className:"px-3 py-1.5 border border-slate-200 text-slate-600 rounded text-xs font-bold hover:bg-slate-50 flex items-center gap-1",children:[f.jsx(T5,{className:"w-3 h-3"})," Details"]})]})})]},s.id)),t.length===0&&f.jsx("tr",{children:f.jsx("td",{colSpan:i?6:5,className:"p-8 text-center text-slate-400",children:"No recent orders found."})})]})]})})},cre=({onPrint:n})=>{const[e,t]=Ee.useState([]);Ee.useEffect(()=>{const i=ut.collection("samples").where("status","==","reported").orderBy("reportedAt","desc").limit(50).onSnapshot(s=>t(s.docs.map(a=>({id:a.id,...a.data()}))));return()=>i()},[]);const r=Ee.useMemo(()=>{const i={};return e.forEach(s=>{const a=s.orderId||s.patientId;i[a]||(i[a]=[]),i[a].push(s)}),Object.values(i).sort((s,a)=>{var d,p,g,_;const c=(p=(d=s[0])==null?void 0:d.reportedAt)!=null&&p.toDate?s[0].reportedAt.toDate():new Date;return((_=(g=a[0])==null?void 0:g.reportedAt)!=null&&_.toDate?a[0].reportedAt.toDate():new Date).getTime()-c.getTime()})},[e]);return f.jsx("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:f.jsxs("table",{className:"w-full text-left text-sm",children:[f.jsx("thead",{className:"bg-slate-50 border-b",children:f.jsxs("tr",{children:[f.jsx("th",{className:"p-4",children:"Reported Date"}),f.jsx("th",{className:"p-4",children:"Patient"}),f.jsx("th",{className:"p-4",children:"Tests Included"}),f.jsx("th",{className:"p-4 text-right",children:"Action"})]})}),f.jsxs("tbody",{className:"divide-y divide-slate-50",children:[r.map((i,s)=>{const a=i[0],c=i.map(u=>u.testName).join(", ");return f.jsxs("tr",{className:"hover:bg-slate-50",children:[f.jsx("td",{className:"p-4 text-xs text-slate-500",children:hi(a.reportedAt)}),f.jsxs("td",{className:"p-4 font-bold text-slate-800",children:[a.patientName,f.jsxs("div",{className:"text-xs font-normal text-slate-500",children:[a.patientAge," Y / ",a.patientGender]})]}),f.jsxs("td",{className:"p-4 text-slate-600",children:[f.jsxs("span",{className:"font-medium text-slate-900",children:[i.length," Test(s):"]})," ",c]}),f.jsx("td",{className:"p-4 text-right",children:f.jsxs("button",{onClick:()=>n(i),className:"bg-indigo-50 text-indigo-600 px-3 py-1.5 rounded text-xs font-bold hover:bg-indigo-100 flex items-center gap-1 ml-auto transition-colors",children:[f.jsx(Kc,{className:"w-3 h-3"})," Print Report"]})})]},s)}),r.length===0&&f.jsx("tr",{children:f.jsx("td",{colSpan:4,className:"p-8 text-center text-slate-400",children:"No completed reports yet."})})]})]})})},ure=({onSelect:n,onViewDetails:e})=>{const[t,r]=Ee.useState(""),[i,s]=Ee.useState([]),[a,c]=Ee.useState(!1),u=async()=>{if(t){c(!0);try{const d=await ut.collection("patients").where("fullName",">=",t).where("fullName","<=",t+"").limit(20).get();s(d.docs.map(p=>({id:p.id,...p.data()})))}catch(d){console.error(d)}c(!1)}};return f.jsxs("div",{className:"p-6 h-full flex flex-col bg-white rounded-xl border border-slate-200 shadow-sm",children:[f.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:"Search Patient Database"}),f.jsxs("div",{className:"flex gap-2 mb-6",children:[f.jsxs("div",{className:"relative flex-1",children:[f.jsx(dg,{className:"absolute left-3 top-3 text-slate-400 w-4 h-4"}),f.jsx("input",{className:"w-full pl-9 p-3 border border-slate-200 rounded-lg text-sm outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter Patient Name...",value:t,onChange:d=>r(d.target.value),onKeyDown:d=>d.key==="Enter"&&u()})]}),f.jsx("button",{onClick:u,disabled:a,className:"px-6 bg-indigo-600 text-white rounded-lg font-bold shadow hover:bg-indigo-700 disabled:opacity-50",children:a?f.jsx(wh,{className:"w-4 h-4 animate-spin"}):"Search"})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto",children:[i.map(d=>f.jsxs("div",{className:"p-4 border-b border-slate-100 last:border-0 hover:bg-slate-50 flex justify-between items-center transition-colors",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-bold text-slate-800",children:d.fullName}),f.jsxs("p",{className:"text-xs text-slate-500",children:[d.phone,"  ",d.gender,"  ",Jf(d.dob)," yrs"]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>n(d),className:"px-3 py-1.5 bg-indigo-50 text-indigo-700 rounded text-xs font-bold hover:bg-indigo-100",children:"Select"}),e&&f.jsxs("button",{onClick:()=>e(d),className:"px-3 py-1.5 border border-slate-200 text-slate-600 rounded text-xs font-bold hover:bg-slate-50 flex items-center gap-1",children:[f.jsx(T5,{className:"w-3 h-3"})," Details"]})]})]},d.id)),i.length===0&&!a&&f.jsxs("div",{className:"p-12 text-center text-slate-400 flex flex-col items-center",children:[f.jsx(dg,{className:"w-8 h-8 mb-2 opacity-20"}),f.jsx("p",{children:"No patients found. Search by name."})]})]})]})},dre=({patient:n,onClose:e})=>{const[t,r]=Ee.useState([]),[i,s]=Ee.useState(!0);return Ee.useEffect(()=>{ut.collection("orders").where("patientId","==",n.id).limit(20).get().then(a=>{const c=a.docs.map(u=>({id:u.id,...u.data()}));c.sort((u,d)=>{var _,w;const p=(_=u.createdAt)!=null&&_.toDate?u.createdAt.toDate().getTime():new Date(u.createdAt||0).getTime();return((w=d.createdAt)!=null&&w.toDate?d.createdAt.toDate().getTime():new Date(d.createdAt||0).getTime())-p}),r(c),s(!1)})},[n]),f.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-in fade-in",children:f.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl h-[80vh] flex flex-col",children:[f.jsxs("div",{className:"p-6 border-b flex justify-between items-center bg-slate-50 rounded-t-xl",children:[f.jsxs("div",{children:[f.jsxs("h2",{className:"text-xl font-bold text-slate-800",children:["Patient Details: ",n.fullName]}),f.jsxs("p",{className:"text-sm text-slate-500",children:[n.phone,"  ",n.gender,"  ",Jf(n.dob)," yrs"]})]}),f.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-200 rounded-full",children:f.jsx(bp,{className:"w-6 h-6 text-slate-500"})})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[f.jsxs("h3",{className:"font-bold text-slate-700 mb-4 flex items-center gap-2",children:[f.jsx(T5,{className:"w-5 h-5 text-indigo-500"})," Recent Visits & Tests"]}),i?f.jsx("p",{className:"text-center p-10 text-slate-400",children:"Loading history..."}):f.jsx("div",{className:"space-y-4",children:t.length>0?t.map(a=>f.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-sm transition-all",children:[f.jsxs("div",{className:"flex justify-between items-start mb-2",children:[f.jsxs("div",{children:[f.jsxs("p",{className:"font-bold text-indigo-900",children:["Visit: ",hi(a.createdAt)," ",f.jsxs("span",{className:"text-slate-400 text-xs font-normal",children:["at ",O1(a.createdAt)]})]}),f.jsxs("p",{className:"text-xs text-slate-500 font-mono",children:["Order ID: ",a.id]})]}),f.jsxs("div",{className:"text-right",children:[f.jsxs("p",{className:"font-bold text-slate-800",children:["$",a.totalAmount]}),f.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded font-bold uppercase ${a.status==="completed"?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:a.status})]})]}),f.jsxs("div",{className:"bg-slate-50 p-3 rounded text-sm text-slate-700 border border-slate-100",children:[f.jsx("p",{className:"font-bold text-xs text-slate-500 uppercase mb-1",children:"Tests Included:"}),f.jsx(hre,{orderId:a.id})]})]},a.id)):f.jsx("p",{className:"text-center text-slate-400 italic",children:"No history found."})})]})]})})},hre=({orderId:n})=>{const[e,t]=Ee.useState([]),[r,i]=Ee.useState(!1);Ee.useEffect(()=>{ut.collection("samples").where("orderId","==",n).get().then(c=>{t(c.docs.map(u=>u.data())),i(!0)})},[n]);const[s,a]=Ee.useState(!1);return r?f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"font-medium",children:e.map(c=>c.testName).join(", ")}),e.some(c=>c.status==="reported")&&f.jsxs("button",{onClick:()=>a(!0),className:"text-xs bg-white border border-indigo-200 text-indigo-600 px-3 py-1 rounded font-bold hover:bg-indigo-50 flex items-center gap-1 shadow-sm",children:[f.jsx(Kc,{className:"w-3 h-3"})," Print Report"]}),s&&f.jsx(A5,{data:e.filter(c=>c.status==="reported"),onClose:()=>a(!1)})]}):f.jsx("span",{className:"text-xs text-slate-400 animate-pulse",children:"Loading tests..."})},fre=({onBack:n})=>{const[e,t]=Ee.useState([]);return Ee.useEffect(()=>{const r=ut.collection("patients").orderBy("createdAt","desc").limit(50).onSnapshot(i=>t(i.docs.map(s=>({id:s.id,...s.data()}))));return()=>r()},[]),f.jsxs("div",{className:"h-full flex flex-col",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[n&&f.jsx("button",{onClick:n,className:"p-2 rounded-full hover:bg-slate-100 transition-colors",children:f.jsx(Yc,{className:"w-6 h-6 text-indigo-600"})}),f.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[f.jsx(M1,{className:"w-6 h-6 text-indigo-600"})," Patient Directory"]})]}),f.jsx("div",{className:"bg-white rounded-xl border border-slate-200 flex-1 overflow-hidden shadow-sm flex flex-col",children:f.jsx("div",{className:"overflow-y-auto flex-1",children:f.jsxs("table",{className:"w-full text-left text-sm",children:[f.jsx("thead",{className:"bg-slate-50 border-b sticky top-0",children:f.jsxs("tr",{children:[f.jsx("th",{className:"p-4",children:"Name"}),f.jsx("th",{className:"p-4",children:"Phone"}),f.jsx("th",{className:"p-4",children:"Gender"}),f.jsx("th",{className:"p-4",children:"Age"}),f.jsx("th",{className:"p-4",children:"Registered"})]})}),f.jsx("tbody",{className:"divide-y divide-slate-50",children:e.map(r=>f.jsxs("tr",{className:"hover:bg-slate-50",children:[f.jsx("td",{className:"p-4 font-bold text-slate-800",children:r.fullName}),f.jsx("td",{className:"p-4 text-slate-600",children:r.phone}),f.jsx("td",{className:"p-4 capitalize text-slate-600",children:r.gender}),f.jsxs("td",{className:"p-4 text-slate-600",children:[Jf(r.dob)," yrs"]}),f.jsx("td",{className:"p-4 text-slate-500 text-xs",children:hi(r.createdAt)})]},r.id))})]})})})]})},pre=({role:n,onBack:e})=>{const{showAlert:t,showConfirm:r,showPrompt:i,showToast:s}=kh(),a=n?tre(n):!1,[c,u]=Ee.useState(a?"dashboard":"requests"),[d,p]=Ee.useState([]),[g,_]=Ee.useState([]),[w,P]=Ee.useState([]),[O,L]=Ee.useState([]),[B,K]=Ee.useState(!1),[W,J]=Ee.useState(null),[ae,le]=Ee.useState({category:"General",unit:"pcs",status:"in_stock"}),[U,C]=Ee.useState(null),[N,F]=Ee.useState(!1),[S,k]=Ee.useState(null),[M,Q]=Ee.useState({quantity:0,unitPrice:0,vendorName:"",vendorPhone:"",invoiceNumber:"",expiryDate:"",manufactureDate:"",remarks:""});Ee.useEffect(()=>{const Y=ut.collection("inventory_items").onSnapshot(we=>p(we.docs.map(Ie=>({id:Ie.id,...Ie.data()})))),fe=ut.collection("inventory_requests").orderBy("createdAt","desc").limit(50).onSnapshot(we=>_(we.docs.map(Ie=>({id:Ie.id,...Ie.data()})))),ge=ut.collection("vendors").onSnapshot(we=>P(we.docs.map(Ie=>({id:Ie.id,...Ie.data()})))),xe=ut.collection("inventory_wastages").orderBy("reportedAt","desc").limit(50).onSnapshot(we=>L(we.docs.map(Ie=>({id:Ie.id,...Ie.data()}))));return()=>{Y(),fe(),ge(),xe()}},[]);const pe=Ee.useMemo(()=>{const Y=new Date,fe=d.length,ge=d.filter(it=>it.quantity<it.minLevel).length,xe=d.filter(it=>it.quantity===0).length,we=d.filter(it=>it.expiryDate?(it.expiryDate.toDate?it.expiryDate.toDate():new Date(it.expiryDate))<Y:!1).length,Ie=d.filter(it=>{if(!it.expiryDate)return!1;const vt=((it.expiryDate.toDate?it.expiryDate.toDate():new Date(it.expiryDate)).getTime()-Y.getTime())/(1e3*3600*24);return vt>0&&vt<=30}).length,Ge=d.reduce((it,dt)=>it+(dt.purchasePrice||0)*dt.quantity,0),Qe=g.filter(it=>it.status==="pending").length;return{totalItems:fe,lowStock:ge,outOfStock:xe,expired:we,expiringSoon:Ie,totalValue:Ge,pendingRequests:Qe}},[d,g]),se=async()=>{var fe,ge,xe,we,Ie,Ge,Qe,it,dt,vt,ce,ht;const Y=[];if((fe=ae.name)!=null&&fe.trim()||Y.push("Item Name"),ae.category||Y.push("Category"),(ge=ae.unit)!=null&&ge.trim()||Y.push("Unit"),(ae.quantity===void 0||ae.quantity===null)&&Y.push("Quantity"),(ae.minLevel===void 0||ae.minLevel===null)&&Y.push("Min Level"),(!ae.purchasePrice||ae.purchasePrice<=0)&&Y.push("Purchase Price"),(xe=ae.vendorName)!=null&&xe.trim()||Y.push("Vendor Name"),(we=ae.batchNumber)!=null&&we.trim()||Y.push("Batch Number"),!((Ie=ae.barcode)!=null&&Ie.trim())&&!((Ge=ae.sku)!=null&&Ge.trim())&&Y.push("Barcode or SKU (at least one is required)"),Y.length>0){t("error",`Please fill in the following required fields:

${Y.map(Bt=>` ${Bt}`).join(`
`)}`,"Missing Required Fields");return}if(ae.quantity<0){t("error","Quantity cannot be negative","Invalid Quantity");return}if(ae.minLevel<0){t("error","Min Level cannot be negative","Invalid Min Level");return}try{const Bt=an.firestore.Timestamp.now(),Mt={...ae,name:(Qe=ae.name)==null?void 0:Qe.trim(),vendorName:(it=ae.vendorName)==null?void 0:it.trim(),batchNumber:(dt=ae.batchNumber)==null?void 0:dt.trim(),barcode:((vt=ae.barcode)==null?void 0:vt.trim())||void 0,sku:((ce=ae.sku)==null?void 0:ce.trim())||void 0,updatedAt:Bt,status:(ae.quantity||0)===0?"out_of_stock":(ae.quantity||0)<(ae.minLevel||0)?"low_stock":"in_stock",createdBy:((ht=xr.currentUser)==null?void 0:ht.email)||"admin"};W?(await ut.collection("inventory_items").doc(W.id).update(Mt),await Zd("UPDATE_INVENTORY","Inventory",`Updated item: ${ae.name}`,xr.currentUser),s("success","Inventory item updated successfully")):(await ut.collection("inventory_items").add({...Mt,createdAt:Bt}),await Zd("ADD_INVENTORY","Inventory",`Added new item: ${ae.name}`,xr.currentUser),s("success","Inventory item added successfully")),K(!1),J(null),le({category:"General",unit:"pcs",status:"in_stock"})}catch(Bt){console.error(Bt),t("error","Failed to save item: "+(Bt instanceof Error?Bt.message:String(Bt)),"Save Failed")}},ve=Y=>{k(Y),Q({quantity:0,unitPrice:Y.purchasePrice||0,vendorName:Y.vendorName||"",vendorPhone:Y.vendorPhone||"",invoiceNumber:"",expiryDate:"",manufactureDate:"",remarks:""}),F(!0)},me=async Y=>{var Ie,Ge;const fe=d.find(Qe=>Qe.id===Y.itemId);if(!fe){t("error","Item not found","Error");return}if(fe.quantity<Y.quantity){t("warning",`Insufficient stock. Available: ${fe.quantity} ${fe.unit}`,"Low Stock");return}const ge=Math.min(Y.quantity,fe.quantity),xe=await i(`Approve and release quantity (max ${ge}):`,{title:"Approve Request",defaultValue:ge.toString(),placeholder:"Enter quantity"});if(!xe)return;const we=parseInt(xe);if(isNaN(we)||we<=0||we>ge){t("error",`Invalid quantity. Must be between 1 and ${ge}`,"Invalid Input");return}try{const Qe=ut.batch(),it=ut.collection("inventory_requests").doc(Y.id);Qe.update(it,{status:"released",releasedQuantity:we,releasedAt:an.firestore.Timestamp.now(),respondedBy:((Ie=xr.currentUser)==null?void 0:Ie.email)||"manager"});const dt=ut.collection("inventory_items").doc(Y.itemId);Qe.update(dt,{quantity:an.firestore.FieldValue.increment(-we)});const vt=ut.collection("inventory_transactions").doc(),ce=(fe.purchasePrice||0)*we;Qe.set(vt,{itemId:Y.itemId,itemName:Y.itemName,type:"issue",quantity:-we,cost:ce,performedBy:((Ge=xr.currentUser)==null?void 0:Ge.uid)||"manager",reason:`Approved request from ${Y.requesterName}: ${Y.purpose}`,timestamp:an.firestore.Timestamp.now()}),await Qe.commit(),await Zd("APPROVE_REQUEST","Inventory",`Approved & released ${we} x ${Y.itemName} to ${Y.requesterName}`,xr.currentUser),s("success",`Request approved! ${we} items released from stock`)}catch(Qe){console.error(Qe),t("error","Failed to approve request: "+(Qe instanceof Error?Qe.message:String(Qe)),"Approval Failed")}},Se=async Y=>{var xe;if(!await r(`Reject inventory request from ${Y.requesterName} for ${Y.quantity} ${Y.itemName}?`,{title:"Confirm Rejection",confirmText:"Reject",cancelText:"Cancel",type:"danger"}))return;const ge=await i("Enter reason for rejection:",{title:"Rejection Reason",placeholder:"Why is this request being rejected?",defaultValue:""});if(!(ge!=null&&ge.trim())){t("warning","Rejection cancelled - reason is required","No Reason Provided");return}try{await ut.collection("inventory_requests").doc(Y.id).update({status:"rejected",rejectionReason:ge.trim(),rejectedAt:an.firestore.Timestamp.now(),respondedBy:((xe=xr.currentUser)==null?void 0:xe.email)||"manager"}),await Zd("REJECT_REQUEST","Inventory",`Rejected request from ${Y.requesterName}: ${ge}`,xr.currentUser),s("success",`Request rejected. ${Y.requesterName} will be notified.`)}catch(we){console.error(we),t("error","Failed to reject request: "+(we instanceof Error?we.message:String(we)),"Rejection Failed")}},Ve=()=>f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[f.jsxs("div",{className:"p-6 rounded-xl border shadow-sm",style:{backgroundColor:j.MIDNIGHT_GREEN,borderColor:`${j.PERSIAN_GREEN}40`},children:[f.jsxs("div",{className:"flex justify-between items-start mb-2",children:[f.jsx("p",{className:"text-xs font-bold uppercase",style:{color:j.TIFFANY_BLUE},children:"Total Items"}),f.jsx(Vc,{className:"w-5 h-5",style:{color:j.PERSIAN_GREEN}})]}),f.jsx("p",{className:"text-3xl font-bold",style:{color:j.CITRON},children:pe.totalItems})]}),f.jsxs("div",{className:"p-6 rounded-xl border shadow-sm",style:{backgroundColor:j.MIDNIGHT_GREEN,borderColor:`${j.PERSIAN_GREEN}40`},children:[f.jsxs("div",{className:"flex justify-between items-start mb-2",children:[f.jsx("p",{className:"text-xs font-bold uppercase",style:{color:j.TIFFANY_BLUE},children:"Low Stock"}),f.jsx(qg,{className:"w-5 h-5 text-amber-500"})]}),f.jsx("p",{className:"text-3xl font-bold text-amber-500",children:pe.lowStock})]}),f.jsxs("div",{className:"p-6 rounded-xl border shadow-sm",style:{backgroundColor:j.MIDNIGHT_GREEN,borderColor:`${j.PERSIAN_GREEN}40`},children:[f.jsxs("div",{className:"flex justify-between items-start mb-2",children:[f.jsx("p",{className:"text-xs font-bold uppercase",style:{color:j.TIFFANY_BLUE},children:"Expired Items"}),f.jsx(bp,{className:"w-5 h-5 text-red-500"})]}),f.jsx("p",{className:"text-3xl font-bold text-red-500",children:pe.expired})]}),f.jsxs("div",{className:"p-6 rounded-xl border shadow-sm",style:{backgroundColor:j.MIDNIGHT_GREEN,borderColor:`${j.PERSIAN_GREEN}40`},children:[f.jsxs("div",{className:"flex justify-between items-start mb-2",children:[f.jsx("p",{className:"text-xs font-bold uppercase",style:{color:j.TIFFANY_BLUE},children:"Total Value"}),f.jsx(Wc,{className:"w-5 h-5 text-green-500"})]}),f.jsxs("p",{className:"text-3xl font-bold text-green-500",children:["$",pe.totalValue.toLocaleString()]})]})]}),(pe.lowStock>0||pe.expired>0||pe.expiringSoon>0)&&f.jsxs("div",{className:"p-4 rounded-xl border",style:{backgroundColor:"#78350f30",borderColor:"#f59e0b40"},children:[f.jsxs("h3",{className:"font-bold mb-3 flex items-center gap-2",style:{color:"#fbbf24"},children:[f.jsx(KD,{className:"w-4 h-4"})," Inventory Alerts"]}),f.jsxs("div",{className:"space-y-2",children:[pe.lowStock>0&&f.jsxs("p",{className:"text-sm",style:{color:"#fcd34d"},children:[" ",pe.lowStock," items below minimum stock level"]}),pe.expired>0&&f.jsxs("p",{className:"text-sm",style:{color:"#fca5a5"},children:[" ",pe.expired," items have expired"]}),pe.expiringSoon>0&&f.jsxs("p",{className:"text-sm",style:{color:"#fcd34d"},children:[" ",pe.expiringSoon," items expiring within 30 days"]})]}),f.jsx("button",{onClick:()=>u("items"),className:"mt-3 text-sm font-bold hover:underline",style:{color:"#fbbf24"},children:"View Items "})]}),pe.pendingRequests>0&&f.jsxs("div",{className:"p-4 rounded-xl border",style:{backgroundColor:"#312e8130",borderColor:"#6366f140"},children:[f.jsxs("h3",{className:"font-bold mb-2 flex items-center gap-2",style:{color:"#818cf8"},children:[f.jsx(fg,{className:"w-4 h-4"})," Pending Requests"]}),f.jsxs("p",{className:"text-sm",style:{color:"#c7d2fe"},children:[pe.pendingRequests," requests awaiting your approval"]}),f.jsx("button",{onClick:()=>u("requests"),className:"mt-2 text-sm font-bold hover:underline",style:{color:"#818cf8"},children:"Review Requests "})]})]}),ne=()=>f.jsxs("div",{className:"h-full flex flex-col",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h3",{className:"text-xl font-bold",style:{color:j.CITRON},children:"Inventory Items"}),f.jsxs("button",{onClick:()=>{J(null),le({category:"General",unit:"pcs"}),K(!0)},className:"text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 hover:opacity-90",style:{backgroundColor:j.GAMBOGE},children:[f.jsx(Fc,{className:"w-4 h-4"})," Add Item"]})]}),B&&f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 backdrop-blur-sm",style:{backgroundColor:"#00000080"},children:f.jsxs("div",{className:"rounded-xl shadow-2xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",style:{backgroundColor:j.MIDNIGHT_GREEN,border:`1px solid ${j.PERSIAN_GREEN}40`},children:[f.jsx("h3",{className:"font-bold text-lg mb-4",style:{color:j.CITRON},children:W?"Edit Item":"Add New Item"}),f.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[f.jsxs("div",{className:"col-span-2",children:[f.jsx("label",{className:"text-xs font-bold uppercase",style:{color:j.TIFFANY_BLUE},children:"Item Name *"}),f.jsx("input",{className:"w-full p-2 border rounded outline-none focus:ring-1 focus:ring-[#00b4d8]",style:{backgroundColor:j.RICH_BLACK,color:j.CITRON,borderColor:`${j.PERSIAN_GREEN}40`},value:ae.name||"",onChange:Y=>le({...ae,name:Y.target.value})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-bold uppercase",style:{color:j.TIFFANY_BLUE},children:"Category"}),f.jsx("select",{className:"w-full p-2 border rounded outline-none",style:{backgroundColor:j.RICH_BLACK,color:j.CITRON,borderColor:`${j.PERSIAN_GREEN}40`},value:ae.category,onChange:Y=>le({...ae,category:Y.target.value}),children:ere.map(Y=>f.jsx("option",{value:Y,children:Y},Y))})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-bold uppercase",style:{color:j.TIFFANY_BLUE},children:"Unit"}),f.jsx("input",{className:"w-full p-2 border rounded outline-none focus:ring-1 focus:ring-[#00b4d8]",style:{backgroundColor:j.RICH_BLACK,color:j.CITRON,borderColor:`${j.PERSIAN_GREEN}40`},placeholder:"e.g., pcs, ml, boxes",value:ae.unit||"",onChange:Y=>le({...ae,unit:Y.target.value})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-bold uppercase",style:{color:j.TIFFANY_BLUE},children:"Quantity *"}),f.jsx("input",{type:"number",className:"w-full p-2 border rounded outline-none focus:ring-1 focus:ring-[#00b4d8]",style:{backgroundColor:j.RICH_BLACK,color:j.CITRON,borderColor:`${j.PERSIAN_GREEN}40`},value:ae.quantity||"",onChange:Y=>le({...ae,quantity:parseInt(Y.target.value)||0})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-bold uppercase",style:{color:j.TIFFANY_BLUE},children:"Min Level"}),f.jsx("input",{type:"number",className:"w-full p-2 border rounded outline-none focus:ring-1 focus:ring-[#00b4d8]",style:{backgroundColor:j.RICH_BLACK,color:j.CITRON,borderColor:`${j.PERSIAN_GREEN}40`},value:ae.minLevel||"",onChange:Y=>le({...ae,minLevel:parseInt(Y.target.value)||0})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-bold uppercase",style:{color:j.TIFFANY_BLUE},children:"Purchase Price ($)"}),f.jsx("input",{type:"number",step:"0.01",className:"w-full p-2 border rounded outline-none focus:ring-1 focus:ring-[#00b4d8]",style:{backgroundColor:j.RICH_BLACK,color:j.CITRON,borderColor:`${j.PERSIAN_GREEN}40`},value:ae.purchasePrice||"",onChange:Y=>le({...ae,purchasePrice:parseFloat(Y.target.value)||0})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-bold uppercase",style:{color:j.TIFFANY_BLUE},children:"Batch Number"}),f.jsx("input",{className:"w-full p-2 border rounded outline-none focus:ring-1 focus:ring-[#00b4d8]",style:{backgroundColor:j.RICH_BLACK,color:j.CITRON,borderColor:`${j.PERSIAN_GREEN}40`},value:ae.batchNumber||"",onChange:Y=>le({...ae,batchNumber:Y.target.value})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-bold uppercase",style:{color:j.TIFFANY_BLUE},children:"Expiry Date"}),f.jsx("input",{type:"date",className:"w-full p-2 border rounded outline-none focus:ring-1 focus:ring-[#00b4d8]",style:{backgroundColor:j.RICH_BLACK,color:j.CITRON,borderColor:`${j.PERSIAN_GREEN}40`},value:ae.expiryDate&&ae.expiryDate.toDate?ae.expiryDate.toDate().toISOString().split("T")[0]:"",onChange:Y=>le({...ae,expiryDate:Y.target.value?an.firestore.Timestamp.fromDate(new Date(Y.target.value)):void 0})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-bold uppercase",style:{color:j.TIFFANY_BLUE},children:"Barcode/SKU"}),f.jsx("input",{className:"w-full p-2 border rounded outline-none focus:ring-1 focus:ring-[#00b4d8]",style:{backgroundColor:j.RICH_BLACK,color:j.CITRON,borderColor:`${j.PERSIAN_GREEN}40`},value:ae.barcode||ae.sku||"",onChange:Y=>le({...ae,barcode:Y.target.value})})]}),f.jsxs("div",{className:"col-span-2",children:[f.jsx("label",{className:"text-xs font-bold uppercase",style:{color:j.TIFFANY_BLUE},children:"Vendor"}),f.jsx("input",{className:"w-full p-2 border rounded outline-none focus:ring-1 focus:ring-[#00b4d8]",style:{backgroundColor:j.RICH_BLACK,color:j.CITRON,borderColor:`${j.PERSIAN_GREEN}40`},value:ae.vendorName||"",onChange:Y=>le({...ae,vendorName:Y.target.value})})]})]}),f.jsxs("div",{className:"flex justify-end gap-2 border-t pt-4",style:{borderColor:`${j.PERSIAN_GREEN}20`},children:[f.jsx("button",{onClick:()=>K(!1),className:"px-4 py-2 hover:opacity-80",style:{color:j.TIFFANY_BLUE},children:"Cancel"}),f.jsx("button",{onClick:se,className:"text-white px-4 py-2 rounded font-bold hover:opacity-90",style:{backgroundColor:j.GAMBOGE},children:"Save"})]})]})}),f.jsx("div",{className:"rounded-xl border shadow-sm flex-1 overflow-hidden flex flex-col",style:{backgroundColor:j.MIDNIGHT_GREEN,borderColor:`${j.PERSIAN_GREEN}40`},children:f.jsx("div",{className:"overflow-y-auto flex-1 custom-scrollbar",children:f.jsxs("table",{className:"w-full text-left text-sm",children:[f.jsx("thead",{className:"border-b sticky top-0 z-10",style:{backgroundColor:`${j.RICH_BLACK}90`,borderColor:`${j.PERSIAN_GREEN}40`,backdropFilter:"blur(4px)"},children:f.jsxs("tr",{children:[f.jsx("th",{className:"p-4",style:{color:j.TIFFANY_BLUE},children:"Item Name"}),f.jsx("th",{className:"p-4",style:{color:j.TIFFANY_BLUE},children:"Category"}),f.jsx("th",{className:"p-4",style:{color:j.TIFFANY_BLUE},children:"Stock"}),f.jsx("th",{className:"p-4",style:{color:j.TIFFANY_BLUE},children:"Batch"}),f.jsx("th",{className:"p-4",style:{color:j.TIFFANY_BLUE},children:"Expiry"}),f.jsx("th",{className:"p-4",style:{color:j.TIFFANY_BLUE},children:"Value"}),f.jsx("th",{className:"p-4",style:{color:j.TIFFANY_BLUE},children:"Status"}),f.jsx("th",{className:"p-4 text-right",style:{color:j.TIFFANY_BLUE},children:"Actions"})]})}),f.jsx("tbody",{className:"divide-y",style:{divideColor:`${j.PERSIAN_GREEN}20`},children:d.map(Y=>{const fe=Y.expiryDate&&(Y.expiryDate.toDate?Y.expiryDate.toDate():new Date(Y.expiryDate))<new Date;return f.jsxs("tr",{className:"hover:bg-white/5 transition-colors",children:[f.jsxs("td",{className:"p-4 font-bold",style:{color:j.CITRON},children:[Y.name,f.jsx("div",{className:"text-xs font-normal",style:{color:j.TIFFANY_BLUE},children:Y.vendorName||"No vendor"})]}),f.jsx("td",{className:"p-4",style:{color:j.TIFFANY_BLUE},children:Y.category}),f.jsxs("td",{className:"p-4 font-mono font-bold",style:{color:j.CITRON},children:[Y.quantity," ",f.jsx("span",{className:"text-xs font-normal",style:{color:j.TIFFANY_BLUE},children:Y.unit})]}),f.jsx("td",{className:"p-4 text-xs opacity-70",style:{color:j.TIFFANY_BLUE},children:Y.batchNumber||"-"}),f.jsx("td",{className:"p-4 text-xs opacity-70",style:{color:j.TIFFANY_BLUE},children:Y.expiryDate?hi(Y.expiryDate):"-"}),f.jsxs("td",{className:"p-4 font-mono",style:{color:j.CITRON},children:["$",((Y.purchasePrice||0)*Y.quantity).toLocaleString()]}),f.jsx("td",{className:"p-4",children:f.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold uppercase ${fe?"bg-red-900/40 text-red-300":Y.quantity===0?"bg-slate-700 text-slate-400":Y.quantity<Y.minLevel?"bg-amber-900/40 text-amber-300":"bg-green-900/40 text-green-300"}`,children:fe?"Expired":Y.quantity===0?"Out":Y.quantity<Y.minLevel?"Low":"OK"})}),f.jsx("td",{className:"p-4 text-right",children:f.jsxs("button",{onClick:()=>ve(Y),className:"hover:bg-green-900/20 p-2 rounded font-bold text-sm flex items-center gap-1 ml-auto transition-colors",style:{color:"#4ade80"},children:[f.jsx(Fc,{className:"w-4 h-4"})," Purchase More"]})})]},Y.id)})})]})})})]}),H=()=>{var ge,xe;const Y=a?g:g.filter(we=>{var Ie;return we.requesterId===(((Ie=xr.currentUser)==null?void 0:Ie.uid)||"")}),fe=a?g.filter(we=>we.status==="pending"):[];return f.jsxs("div",{className:"space-y-6",children:[!a&&f.jsx(rL,{isOpen:!0,onClose:()=>{},userId:((ge=xr.currentUser)==null?void 0:ge.uid)||"user",userName:((xe=xr.currentUser)==null?void 0:xe.email)||"User",userRole:n}),a&&fe.length>0&&f.jsxs("div",{children:[f.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:["Pending Approvals (",fe.length,")"]}),f.jsx("div",{className:"space-y-3",children:fe.map(we=>{const Ie=d.find(Qe=>Qe.id===we.itemId),Ge=Ie?Ie.quantity:0;return f.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex justify-between items-start",children:[f.jsxs("div",{children:[f.jsxs("p",{className:"font-bold text-slate-800",children:[we.itemName," ",f.jsxs("span",{className:"text-sm font-normal text-slate-500",children:["(x",we.quantity,")"]})]}),f.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Requested by: ",we.requesterName," (",we.requesterRole,")"]}),f.jsxs("p",{className:"text-xs text-slate-500",children:["Reason: ",we.purpose]}),f.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:["Available: ",Ge," ",(Ie==null?void 0:Ie.unit)||"units"]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("button",{onClick:()=>me(we),className:"bg-green-600 text-white px-3 py-1.5 rounded text-xs font-bold hover:bg-green-700",children:[f.jsx(Ov,{className:"w-3 h-3 inline mr-1"})," Approve"]}),f.jsxs("button",{onClick:()=>Se(we),className:"bg-red-600 text-white px-3 py-1.5 rounded text-xs font-bold hover:bg-red-700",children:[f.jsx(bp,{className:"w-3 h-3 inline mr-1"})," Reject"]})]})]},we.id)})})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:a?"All Requests":"My Request History"}),f.jsx("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:f.jsxs("table",{className:"w-full text-left text-sm",children:[f.jsx("thead",{className:"bg- slate-50 border-b",children:f.jsxs("tr",{children:[f.jsx("th",{className:"p-4",children:"Date"}),f.jsx("th",{className:"p-4",children:"Item"}),f.jsx("th",{className:"p-4",children:"Qty"}),a&&f.jsx("th",{className:"p-4",children:"Requester"}),f.jsx("th",{className:"p-4",children:"Purpose"}),f.jsx("th",{className:"p-4",children:"Status"})]})}),f.jsx("tbody",{className:"divide-y",children:Y.map(we=>f.jsxs("tr",{className:"hover:bg-slate-50",children:[f.jsx("td",{className:"p-4 text-xs text-slate-500",children:hi(we.createdAt)}),f.jsx("td",{className:"p-4 font-bold text-slate-700",children:we.itemName}),f.jsx("td",{className:"p-4",children:we.quantity}),a&&f.jsx("td",{className:"p-4 text-slate-600",children:we.requesterName}),f.jsx("td",{className:"p-4 text-slate-600 text-xs",children:we.purpose}),f.jsx("td",{className:"p-4",children:f.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold uppercase ${we.status==="pending"?"bg-blue-100 text-blue-700":we.status==="released"?"bg-green-100 text-green-700":we.status==="rejected"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:we.status})})]},we.id))})]})})]})]})};if(!a)return f.jsxs("div",{className:"p-6 h-full",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e&&f.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-slate-200 transition-colors",children:f.jsx(Yc,{className:"w-6 h-6 text-slate-800"})}),f.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[f.jsx(fg,{className:"w-6 h-6 text-indigo-600"})," Request Inventory"]})]}),H()]});const te=()=>{c!=="dashboard"?u("dashboard"):e&&e()};return f.jsxs("div",{className:"p-6 h-full flex flex-col",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[e&&f.jsx("button",{onClick:te,className:"p-2 rounded-full hover:bg-slate-200 transition-colors",children:f.jsx(Yc,{className:"w-6 h-6 text-slate-800"})}),f.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[f.jsx(Vc,{className:"w-6 h-6 text-indigo-600"})," Inventory Management"]})]}),f.jsx("div",{className:"flex bg-slate-100 p-1 rounded-lg",children:[{id:"dashboard",label:"Dashboard",icon:_0},{id:"items",label:"Items",icon:Vc},{id:"requests",label:"Requests",icon:fg},{id:"wastage",label:"Wastage",icon:x5}].map(Y=>f.jsxs("button",{onClick:()=>u(Y.id),className:`px-3 py-1.5 rounded-md text-sm font-bold flex items-center gap-2 transition-all ${c===Y.id?"bg-white text-indigo-600 shadow-sm":"text-slate-500 hover:text-slate-800"}`,children:[f.jsx(Y.icon,{className:"w-4 h-4"})," ",f.jsx("span",{children:Y.label})]},Y.id))})]}),f.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto",children:[c==="dashboard"&&Ve(),c==="items"&&ne(),c==="requests"&&H(),c==="wastage"&&f.jsx("div",{className:"bg-white p-8 rounded-xl border text-center text-slate-400",children:"Wastage tracking coming soon..."})]})]})},Ph=({activeTab:n})=>{const e=Ep(),t=[{id:"dashboard",label:"Dashboard",icon:_0,path:"/admin"},{id:"users",label:"Users",icon:M1,path:"/admin_users"},{id:"tests",label:"Tests",icon:QD,path:"/admin_tests"},{id:"finance",label:"Finance",icon:Wc,path:"/admin_finance"},{id:"reports",label:"Reports",icon:E5,path:"/admin_reports"},{id:"logs",label:"Logs",icon:Nne,path:"/admin_logs"},{id:"settings",label:"Settings",icon:Bg,path:"/admin_settings"}];return f.jsxs("div",{className:"bg-white border-b border-slate-200 px-6 py-3 flex justify-between items-center shrink-0 mb-4 shadow-sm z-30",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("button",{onClick:()=>e("/admin"),className:"p-2 rounded-full hover:bg-slate-100 text-slate-500 transition-colors",title:"Back to Dashboard",children:f.jsx(Yc,{className:"w-5 h-5"})}),f.jsx("div",{className:"h-6 w-px bg-slate-200"}),f.jsx("h2",{className:"text-xl font-bold text-slate-800 hidden md:block",children:"Administration"})]}),f.jsx("div",{className:"flex bg-slate-100 p-1 rounded-lg overflow-x-auto custom-scrollbar",children:t.map(r=>f.jsxs("button",{onClick:()=>e(r.path),className:`px-3 py-1.5 rounded-md text-sm font-bold flex items-center gap-2 transition-all whitespace-nowrap ${n===r.id?"bg-white text-indigo-600 shadow-sm":"text-slate-500 hover:text-slate-800 hover:bg-slate-200/50"}`,children:[f.jsx(r.icon,{className:"w-4 h-4"}),f.jsx("span",{className:"hidden xl:inline",children:r.label})]},r.id))})]})},mre=({onBack:n})=>{const[e,t]=Ee.useState([]),[r,i]=Ee.useState(!1),[s,a]=Ee.useState({role:"receptionist",status:"active"});Ee.useEffect(()=>{const d=ut.collection("users").onSnapshot(p=>t(p.docs.map(g=>({id:g.id,...g.data()}))));return()=>d()},[]);const c=async()=>{if(!(!s.username||!s.password))try{await ut.collection("users").add({...s,createdAt:an.firestore.Timestamp.now()}),i(!1),a({role:"receptionist",status:"active"})}catch(d){console.error(d)}},u=async d=>{window.confirm("Remove user?")&&await ut.collection("users").doc(d).delete()};return f.jsxs("div",{className:"h-full flex flex-col bg-slate-50",children:[f.jsx(Ph,{activeTab:"users"}),f.jsxs("div",{className:"flex justify-between items-center mb-6 px-6",children:[f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"User Management"})}),f.jsxs("button",{onClick:()=>i(!0),className:"text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 hover:opacity-90",style:{backgroundColor:j.GAMBOGE},children:[f.jsx(L1,{className:"w-4 h-4"})," Add User"]})]}),r&&f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 backdrop-blur-sm",style:{backgroundColor:"#00000080"},children:f.jsxs("div",{className:"rounded-xl shadow-2xl p-6 w-full max-w-md",style:{backgroundColor:j.MIDNIGHT_GREEN,border:`1px solid ${j.PERSIAN_GREEN}40`},children:[f.jsx("h3",{className:"font-bold text-lg mb-4",style:{color:j.CITRON},children:"Create New User"}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-bold uppercase",style:{color:j.TIFFANY_BLUE},children:"Full Name"}),f.jsx("input",{className:"w-full p-2 border rounded outline-none focus:ring-1 focus:ring-[#00b4d8]",style:{backgroundColor:j.RICH_BLACK,color:j.CITRON,borderColor:`${j.PERSIAN_GREEN}40`},value:s.fullName||"",onChange:d=>a({...s,fullName:d.target.value})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-bold uppercase",style:{color:j.TIFFANY_BLUE},children:"Username"}),f.jsx("input",{className:"w-full p-2 border rounded outline-none focus:ring-1 focus:ring-[#00b4d8]",style:{backgroundColor:j.RICH_BLACK,color:j.CITRON,borderColor:`${j.PERSIAN_GREEN}40`},value:s.username||"",onChange:d=>a({...s,username:d.target.value})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-bold uppercase",style:{color:j.TIFFANY_BLUE},children:"Password"}),f.jsx("input",{className:"w-full p-2 border rounded outline-none focus:ring-1 focus:ring-[#00b4d8]",style:{backgroundColor:j.RICH_BLACK,color:j.CITRON,borderColor:`${j.PERSIAN_GREEN}40`},type:"password",value:s.password||"",onChange:d=>a({...s,password:d.target.value})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-bold uppercase",style:{color:j.TIFFANY_BLUE},children:"Role"}),f.jsx("select",{className:"w-full p-2 border rounded outline-none",style:{backgroundColor:j.RICH_BLACK,color:j.CITRON,borderColor:`${j.PERSIAN_GREEN}40`},value:s.role,onChange:d=>a({...s,role:d.target.value}),children:nL.filter(d=>!d.disabled).map(d=>f.jsx("option",{value:d.id,children:d.label},d.id))})]})]}),f.jsxs("div",{className:"flex justify-end gap-2 mt-6 border-t pt-4",style:{borderColor:`${j.PERSIAN_GREEN}20`},children:[f.jsx("button",{onClick:()=>i(!1),className:"px-4 py-2 hover:opacity-80",style:{color:j.TIFFANY_BLUE},children:"Cancel"}),f.jsx("button",{onClick:c,className:"text-white px-4 py-2 rounded font-bold hover:opacity-90",style:{backgroundColor:j.GAMBOGE},children:"Create User"})]})]})}),f.jsx("div",{className:"rounded-xl shadow-sm border flex-1 overflow-hidden flex flex-col",style:{backgroundColor:j.MIDNIGHT_GREEN,borderColor:`${j.PERSIAN_GREEN}40`},children:f.jsx("div",{className:"overflow-y-auto flex-1 custom-scrollbar",children:f.jsxs("table",{className:"w-full text-left text-sm",children:[f.jsx("thead",{className:"border-b sticky top-0 z-10",style:{backgroundColor:`${j.RICH_BLACK}90`,borderColor:`${j.PERSIAN_GREEN}40`,backdropFilter:"blur(4px)"},children:f.jsxs("tr",{children:[f.jsx("th",{className:"p-4",style:{color:j.TIFFANY_BLUE},children:"Name"}),f.jsx("th",{className:"p-4",style:{color:j.TIFFANY_BLUE},children:"Username"}),f.jsx("th",{className:"p-4",style:{color:j.TIFFANY_BLUE},children:"Role"}),f.jsx("th",{className:"p-4",style:{color:j.TIFFANY_BLUE},children:"Status"}),f.jsx("th",{className:"p-4 text-right",style:{color:j.TIFFANY_BLUE},children:"Action"})]})}),f.jsx("tbody",{className:"divide-y",style:{divideColor:`${j.PERSIAN_GREEN}20`},children:e.map(d=>f.jsxs("tr",{className:"hover:bg-white/5 transition-colors",children:[f.jsx("td",{className:"p-4 font-bold",style:{color:j.CITRON},children:d.fullName}),f.jsx("td",{className:"p-4",style:{color:j.TIFFANY_BLUE},children:d.username}),f.jsx("td",{className:"p-4 capitalize",style:{color:j.TIFFANY_BLUE},children:d.role}),f.jsx("td",{className:"p-4",children:f.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold uppercase ${d.status==="active"?"bg-green-900/40 text-green-300":"bg-slate-700/50 text-slate-400"}`,children:d.status})}),f.jsx("td",{className:"p-4 text-right",children:f.jsx("button",{onClick:()=>u(d.id),className:"text-red-400 hover:bg-red-900/20 p-2 rounded transition-colors",children:f.jsx(hg,{className:"w-4 h-4"})})})]},d.id))})]})})})]})},gre=({onBack:n})=>{const[e,t]=Ee.useState([]),[r,i]=Ee.useState([]),[s,a]=Ee.useState(!1),[c,u]=Ee.useState("basic"),{showConfirm:d,showToast:p,showAlert:g}=kh(),_={isActive:!0,category:"General",sampleType:"Blood",parameters:[],inventoryRequirements:[],applyTat:!0,tatHours:24,urgentTatHours:4,gracePeriod:0},[w,P]=Ee.useState(_);Ee.useEffect(()=>{let N=null,F=null;try{N=ut.collection("tests").onSnapshot(S=>{t(S.docs.map(k=>({id:k.id,...k.data()})))},S=>{console.error("Error in tests snapshot:",S),t([])}),F=ut.collection("inventory_items").where("status","!=","out_of_stock").onSnapshot(S=>{i(S.docs.map(k=>({id:k.id,...k.data()})))},S=>{console.error("Error in inventory snapshot:",S),i([])})}catch(S){console.error("Error setting up listeners:",S)}return()=>{try{N&&N(),F&&F()}catch(S){console.error("Error cleaning up listeners:",S)}}},[]);const O=async()=>{if(!w.name||!w.code||!w.price){await g("Missing Fields","Please fill in all required fields (Name, Code, Price)");return}try{const N={...w,updatedAt:an.firestore.Timestamp.now()};w.id?await ut.collection("tests").doc(w.id).update(N):await ut.collection("tests").add({...N,createdAt:an.firestore.Timestamp.now()}),a(!1),P(_),u("basic"),p("Test saved successfully","success")}catch(N){console.error("Error saving test:",N),await g("Error","Failed to save test")}},L=N=>{P({...N}),a(!0),u("basic")},B=async N=>{await d("Delete Test","Are you sure you want to delete this test? This cannot be undone.")&&(await ut.collection("tests").doc(N).delete(),p("Test deleted successfully","success"))},K=async()=>{if(!await d("Load Common Tests","This will add 15 common lab tests to your database. Existing tests will not be affected. Continue?"))return;const F=[{code:"CBC",name:"Complete Blood Count",category:"Hematology",description:"Comprehensive blood cell analysis",isActive:!0,price:800,labCost:400,sampleType:"Blood",turnaroundTime:"4-6 Hours",tatHours:6,applyTat:!0,parameters:[{id:"wbc",name:"White Blood Cells (WBC)",unit:"10/L",type:"numeric",refRanges:[{type:"general",min:4,max:11,criticalMin:2,criticalMax:30}]},{id:"rbc",name:"Red Blood Cells (RBC)",unit:"10/L",type:"numeric",refRanges:[{type:"gender",gender:"male",min:4.5,max:5.9},{type:"gender",gender:"female",min:4.1,max:5.1}]},{id:"hgb",name:"Hemoglobin",unit:"g/dL",type:"numeric",refRanges:[{type:"gender",gender:"male",min:13.5,max:17.5},{type:"gender",gender:"female",min:12,max:15.5}]},{id:"plt",name:"Platelets",unit:"10/L",type:"numeric",refRanges:[{type:"general",min:150,max:400}]}]},{code:"LFT",name:"Liver Function Test",category:"Biochemistry",isActive:!0,price:1500,labCost:750,sampleType:"Serum",turnaroundTime:"6-8 Hours",tatHours:8,applyTat:!0,parameters:[{id:"alt",name:"ALT (SGPT)",unit:"U/L",type:"numeric",refRanges:[{type:"general",min:7,max:56}]},{id:"ast",name:"AST (SGOT)",unit:"U/L",type:"numeric",refRanges:[{type:"general",min:10,max:40}]},{id:"alp",name:"Alkaline Phosphatase",unit:"U/L",type:"numeric",refRanges:[{type:"general",min:44,max:147}]},{id:"bilirubin",name:"Total Bilirubin",unit:"mg/dL",type:"numeric",refRanges:[{type:"general",min:.3,max:1.2}]}]},{code:"RFT",name:"Renal Function Test",category:"Biochemistry",isActive:!0,price:1200,labCost:600,sampleType:"Serum",turnaroundTime:"6-8 Hours",tatHours:8,applyTat:!0,parameters:[{id:"creatinine",name:"Creatinine",unit:"mg/dL",type:"numeric",refRanges:[{type:"general",min:.7,max:1.3}]},{id:"urea",name:"Blood Urea",unit:"mg/dL",type:"numeric",refRanges:[{type:"general",min:7,max:20}]},{id:"uric_acid",name:"Uric Acid",unit:"mg/dL",type:"numeric",refRanges:[{type:"general",min:3.5,max:7.2}]}]},{code:"LIPID",name:"Lipid Profile",category:"Biochemistry",isActive:!0,price:1400,labCost:700,sampleType:"Serum",turnaroundTime:"6-8 Hours",tatHours:8,applyTat:!0,parameters:[{id:"cholesterol",name:"Total Cholesterol",unit:"mg/dL",type:"numeric",refRanges:[{type:"general",min:0,max:200}]},{id:"hdl",name:"HDL Cholesterol",unit:"mg/dL",type:"numeric",refRanges:[{type:"general",min:40,max:60}]},{id:"ldl",name:"LDL Cholesterol",unit:"mg/dL",type:"numeric",refRanges:[{type:"general",min:0,max:100}]},{id:"triglycerides",name:"Triglycerides",unit:"mg/dL",type:"numeric",refRanges:[{type:"general",min:0,max:150}]}]},{code:"FBS",name:"Fasting Blood Sugar",category:"Biochemistry",isActive:!0,price:250,labCost:125,sampleType:"Serum",turnaroundTime:"2-4 Hours",tatHours:4,applyTat:!0,parameters:[{id:"glucose",name:"Glucose (Fasting)",unit:"mg/dL",type:"numeric",refRanges:[{type:"general",min:70,max:100}]}]},{code:"RBS",name:"Random Blood Sugar",category:"Biochemistry",isActive:!0,price:250,labCost:125,sampleType:"Serum",turnaroundTime:"1-2 Hours",tatHours:2,applyTat:!0,parameters:[{id:"glucose_random",name:"Glucose (Random)",unit:"mg/dL",type:"numeric",refRanges:[{type:"general",min:70,max:140}]}]},{code:"HBA1C",name:"HbA1c (Glycated Hemoglobin)",category:"Biochemistry",isActive:!0,price:1800,labCost:900,sampleType:"Blood",turnaroundTime:"24 Hours",tatHours:24,applyTat:!0,parameters:[{id:"hba1c",name:"HbA1c",unit:"%",type:"numeric",refRanges:[{type:"general",min:4,max:5.6}]}]},{code:"TSH",name:"Thyroid Stimulating Hormone",category:"Hormones",isActive:!0,price:1200,labCost:600,sampleType:"Serum",turnaroundTime:"24 Hours",tatHours:24,applyTat:!0,parameters:[{id:"tsh",name:"TSH",unit:"IU/mL",type:"numeric",refRanges:[{type:"general",min:.4,max:4}]}]},{code:"HBSAG",name:"Hepatitis B Surface Antigen",category:"Serology",isActive:!0,price:800,labCost:400,sampleType:"Serum",turnaroundTime:"4-6 Hours",tatHours:6,applyTat:!0,parameters:[{id:"hbsag",name:"HBsAg",unit:"",type:"dropdown",options:["Negative","Positive"],refRanges:[{type:"general",textVal:"Negative"}]}]},{code:"HCV",name:"Hepatitis C Antibody",category:"Serology",isActive:!0,price:1200,labCost:600,sampleType:"Serum",turnaroundTime:"4-6 Hours",tatHours:6,applyTat:!0,parameters:[{id:"anti_hcv",name:"Anti-HCV",unit:"",type:"dropdown",options:["Negative","Positive"],refRanges:[{type:"general",textVal:"Negative"}]}]},{code:"URINE",name:"Urine Routine Examination",category:"Clinical Pathology",isActive:!0,price:400,labCost:200,sampleType:"Urine",turnaroundTime:"2-4 Hours",tatHours:4,applyTat:!0,parameters:[{id:"color",name:"Color",unit:"",type:"text",refRanges:[{type:"general",textVal:"Pale Yellow"}]},{id:"protein",name:"Protein",unit:"",type:"dropdown",options:["Nil","Trace","+","++","+++"],refRanges:[{type:"general",textVal:"Nil"}]},{id:"pus_cells",name:"Pus Cells",unit:"/HPF",type:"text",refRanges:[{type:"general",textVal:"0-5"}]}]}];try{p("info","Adding tests... Please wait");const S=ut.batch();let k=0;for(const M of F){const Q=ut.collection("tests").doc();S.set(Q,{...M,createdAt:an.firestore.Timestamp.now()}),k++}await S.commit(),p("success",`Successfully added ${k} common tests!`)}catch(S){console.error("Error loading tests:",S);const k=(S==null?void 0:S.message)||"Unknown error";g("error",`Failed to load tests: ${k}. 

Please check:
1. Firestore is enabled in Firebase Console
2. Security rules allow writes
3. You have internet connection`)}},W=()=>f.jsx("div",{className:"flex border-b border-slate-200 mb-6 bg-slate-50 rounded-t-xl overflow-hidden",children:[{id:"basic",label:"Basic Info",icon:v0},{id:"pricing",label:"Pricing",icon:Wc},{id:"tat",label:"Turnaround Time",icon:$te},{id:"params",label:"Parameters",icon:dx},{id:"inventory",label:"Inventory",icon:Vc}].map(N=>{const F=N.icon;return f.jsxs("button",{onClick:()=>u(N.id),className:`flex-1 py-3 px-4 flex items-center justify-center gap-2 text-sm font-bold transition-all ${c===N.id?"bg-white text-indigo-600 border-t-2 border-indigo-600 shadow-sm":"text-slate-500 hover:text-slate-700 hover:bg-slate-100"}`,children:[f.jsx(F,{className:"w-4 h-4"})," ",N.label]},N.id)})}),J=()=>f.jsxs("div",{className:"grid grid-cols-2 gap-6 animate-in fade-in",children:[f.jsxs("div",{className:"col-span-2",children:[f.jsxs("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:["Test Name ",f.jsx("span",{className:"text-red-500",children:"*"})]}),f.jsx("input",{className:"w-full p-2.5 border border-slate-200 rounded-lg outline-none focus:ring-2 focus:ring-indigo-500",value:w.name||"",onChange:N=>P({...w,name:N.target.value}),placeholder:"e.g. Complete Blood Count"})]}),f.jsxs("div",{children:[f.jsxs("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:["Test Code ",f.jsx("span",{className:"text-red-500",children:"*"})]}),f.jsx("input",{className:"w-full p-2.5 border border-slate-200 rounded-lg outline-none focus:ring-2 focus:ring-indigo-500 font-mono",value:w.code||"",onChange:N=>P({...w,code:N.target.value.toUpperCase()}),placeholder:"e.g. CBC"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Category"}),f.jsx("input",{className:"w-full p-2.5 border border-slate-200 rounded-lg outline-none focus:ring-2 focus:ring-indigo-500",value:w.category||"",onChange:N=>P({...w,category:N.target.value}),list:"categories"}),f.jsxs("datalist",{id:"categories",children:[f.jsx("option",{value:"Hematology"}),f.jsx("option",{value:"Biochemistry"}),f.jsx("option",{value:"Serology"}),f.jsx("option",{value:"Microbiology"}),f.jsx("option",{value:"Clinical Pathology"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Sample Type"}),f.jsxs("select",{className:"w-full p-2.5 border border-slate-200 rounded-lg outline-none focus:ring-2 focus:ring-indigo-500 bg-white",value:w.sampleType,onChange:N=>P({...w,sampleType:N.target.value}),children:[f.jsx("option",{children:"Blood"}),f.jsx("option",{children:"Serum"}),f.jsx("option",{children:"Plasma"}),f.jsx("option",{children:"Urine"}),f.jsx("option",{children:"Stool"}),f.jsx("option",{children:"Swab"}),f.jsx("option",{children:"Sputum"}),f.jsx("option",{children:"Tissue"}),f.jsx("option",{children:"Other"})]})]}),f.jsx("div",{className:"flex items-center gap-2 pt-6",children:f.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[f.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded text-indigo-600 focus:ring-indigo-500 border-gray-300",checked:w.isActive,onChange:N=>P({...w,isActive:N.target.checked})}),f.jsx("span",{className:"text-sm font-bold text-slate-700",children:"Test is Active"})]})}),f.jsxs("div",{className:"col-span-2",children:[f.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Description (Optional)"}),f.jsx("textarea",{className:"w-full p-2.5 border border-slate-200 rounded-lg outline-none focus:ring-2 focus:ring-indigo-500 h-20 resize-none",value:w.description||"",onChange:N=>P({...w,description:N.target.value}),placeholder:"Clinical details regarding the test..."})]})]}),ae=()=>f.jsxs("div",{className:"grid grid-cols-2 gap-6 animate-in fade-in",children:[f.jsxs("div",{className:"p-4 bg-green-50 rounded-xl border border-green-100 col-span-2 md:col-span-1",children:[f.jsxs("h4",{className:"font-bold text-green-900 mb-4 flex items-center gap-2",children:[f.jsx(Wc,{className:"w-4 h-4"})," Revenue Settings"]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsxs("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:["Customer Price ",f.jsx("span",{className:"text-red-500",children:"*"})]}),f.jsxs("div",{className:"relative",children:[f.jsx("span",{className:"absolute left-3 top-2.5 text-slate-400 font-bold",children:"$"}),f.jsx("input",{type:"number",className:"w-full pl-8 p-2.5 border border-slate-200 rounded-lg font-bold text-slate-800",value:w.price||"",onChange:N=>P({...w,price:parseFloat(N.target.value)})})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Urgent Fee (Optional)"}),f.jsxs("div",{className:"relative",children:[f.jsx("span",{className:"absolute left-3 top-2.5 text-slate-400 font-bold",children:"$"}),f.jsx("input",{type:"number",className:"w-full pl-8 p-2.5 border border-slate-200 rounded-lg",value:w.urgentPrice||"",onChange:N=>P({...w,urgentPrice:parseFloat(N.target.value)}),placeholder:"0.00"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Home Collection Fee (Optional)"}),f.jsxs("div",{className:"relative",children:[f.jsx("span",{className:"absolute left-3 top-2.5 text-slate-400 font-bold",children:"$"}),f.jsx("input",{type:"number",className:"w-full pl-8 p-2.5 border border-slate-200 rounded-lg",value:w.homeCollectionPrice||"",onChange:N=>P({...w,homeCollectionPrice:parseFloat(N.target.value)}),placeholder:"0.00"})]})]})]})]}),f.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-100 col-span-2 md:col-span-1",children:[f.jsxs("h4",{className:"font-bold text-slate-700 mb-4 flex items-center gap-2",children:[f.jsx(eL,{className:"w-4 h-4"})," Cost Analysis"]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Lab Cost (Internal)"}),f.jsxs("div",{className:"relative",children:[f.jsx("span",{className:"absolute left-3 top-2.5 text-slate-400 font-bold",children:"$"}),f.jsx("input",{type:"number",className:"w-full pl-8 p-2.5 border border-slate-200 rounded-lg",value:w.labCost||"",onChange:N=>P({...w,labCost:parseFloat(N.target.value)}),placeholder:"0.00"})]}),f.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"Estimated cost of reagents + labor per test."})]}),f.jsx("div",{className:"pt-4 mt-4 border-t border-slate-200",children:f.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[f.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-indigo-600 focus:ring-indigo-500 border-gray-300",checked:w.discountAllowed,onChange:N=>P({...w,discountAllowed:N.target.checked})}),f.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Allow Discounts on this test"})]})})]})]})]}),le=()=>f.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[f.jsx("div",{className:"flex items-center gap-4 mb-4",children:f.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-slate-100 px-4 py-2 rounded-lg hover:bg-slate-200 transition-colors",children:[f.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded text-indigo-600 focus:ring-indigo-500 border-gray-300",checked:w.applyTat,onChange:N=>P({...w,applyTat:N.target.checked})}),f.jsx("span",{className:"text-sm font-bold text-slate-700",children:"Enable Turnaround Time (TAT) Tracking"})]})}),w.applyTat&&f.jsxs("div",{className:"grid grid-cols-2 gap-6 p-6 bg-blue-50 rounded-xl border border-blue-100",children:[f.jsxs("div",{className:"col-span-2",children:[f.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Display Text"}),f.jsx("input",{className:"w-full p-2.5 border border-slate-200 rounded-lg outline-none focus:ring-2 focus:ring-indigo-500",value:w.turnaroundTime||"",onChange:N=>P({...w,turnaroundTime:N.target.value}),placeholder:"e.g. 24 Hours, Same Day"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Standard TAT (Hours)"}),f.jsx("input",{type:"number",className:"w-full p-2.5 border border-slate-200 rounded-lg outline-none focus:ring-2 focus:ring-indigo-500",value:w.tatHours||"",onChange:N=>P({...w,tatHours:parseFloat(N.target.value)})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Urgent TAT (Hours)"}),f.jsx("input",{type:"number",className:"w-full p-2.5 border border-slate-200 rounded-lg outline-none focus:ring-2 focus:ring-indigo-500",value:w.urgentTatHours||"",onChange:N=>P({...w,urgentTatHours:parseFloat(N.target.value)})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Grace Period (Minutes)"}),f.jsx("input",{type:"number",className:"w-full p-2.5 border border-slate-200 rounded-lg outline-none focus:ring-2 focus:ring-indigo-500",value:w.gracePeriod||"",onChange:N=>P({...w,gracePeriod:parseFloat(N.target.value)}),placeholder:"0"}),f.jsx("p",{className:"text-[10px] text-blue-400 mt-1",children:"Buffer time before marking as delayed."})]})]})]}),U=()=>{var M;const N=(Q,pe)=>{const se=[...w.parameters||[]];pe==="up"&&Q>0?[se[Q],se[Q-1]]=[se[Q-1],se[Q]]:pe==="down"&&Q<se.length-1&&([se[Q],se[Q+1]]=[se[Q+1],se[Q]]),P({...w,parameters:se})},F=async Q=>{if(await d("Remove Parameter","Remove this parameter?")){const se=[...w.parameters||[]];se.splice(Q,1),P({...w,parameters:se})}},S=()=>{const Q={id:Math.random().toString(36).substr(2,9),name:"",unit:"",type:"numeric",refRanges:[],isMandatory:!0};P({...w,parameters:[...w.parameters||[],Q]})},k=(Q,pe)=>{const se=[...w.parameters||[]];se[Q]={...se[Q],...pe},P({...w,parameters:se})};return f.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[f.jsxs("div",{className:"flex justify-between items-center bg-indigo-50 p-4 rounded-xl border border-indigo-100",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"font-bold text-indigo-900",children:"Parameter Configuration"}),f.jsx("p",{className:"text-sm text-indigo-700",children:"Define what values need to be entered for this test."})]}),f.jsxs("button",{onClick:S,className:"bg-indigo-600 text-white px-4 py-2 rounded-lg font-bold shadow hover:bg-indigo-700 flex items-center gap-2",children:[f.jsx(Fc,{className:"w-4 h-4"})," Add Parameter"]})]}),f.jsxs("div",{className:"space-y-4",children:[(w.parameters||[]).map((Q,pe)=>{var se,ve;return f.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm transition-all hover:shadow-md hover:border-indigo-300 group",children:[f.jsxs("div",{className:"flex justify-between items-start mb-4",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("div",{className:"flex flex-col gap-1",children:[f.jsx("button",{onClick:()=>N(pe,"up"),disabled:pe===0,className:"p-1 text-slate-400 hover:text-indigo-600 disabled:opacity-30",children:f.jsx(Cte,{className:"w-4 h-4 -rotate-45"})}),f.jsx("button",{onClick:()=>N(pe,"down"),disabled:pe===(((se=w.parameters)==null?void 0:se.length)||0)-1,className:"p-1 text-slate-400 hover:text-indigo-600 disabled:opacity-30",children:f.jsx(Ate,{className:"w-4 h-4 -rotate-45"})})]}),f.jsx("div",{className:"w-8 h-8 bg-indigo-100 text-indigo-700 rounded-lg flex items-center justify-center font-bold text-sm",children:pe+1}),f.jsxs("div",{children:[f.jsx("input",{className:"font-bold text-slate-800 border-none focus:ring-0 p-0 text-lg w-full placeholder-slate-300",value:Q.name,onChange:me=>k(pe,{name:me.target.value}),placeholder:"Parameter Name (e.g. Hemoglobin)"}),f.jsxs("div",{className:"flex gap-2 mt-1",children:[f.jsxs("select",{className:"text-xs bg-slate-50 border border-slate-200 rounded px-2 py-1 outline-none focus:border-indigo-500",value:Q.type,onChange:me=>k(pe,{type:me.target.value}),children:[f.jsx("option",{value:"numeric",children:"Numeric Value"}),f.jsx("option",{value:"text",children:"Text / String"}),f.jsx("option",{value:"dropdown",children:"Dropdown Options"}),f.jsx("option",{value:"boolean",children:"Yes / No"})]}),f.jsx("input",{className:"text-xs bg-slate-50 border border-slate-200 rounded px-2 py-1 outline-none w-24 focus:border-indigo-500",value:Q.unit,onChange:me=>k(pe,{unit:me.target.value}),placeholder:"Unit (e.g. g/dL)"}),f.jsxs("label",{className:"flex items-center gap-1 cursor-pointer bg-slate-50 px-2 rounded border border-slate-200",children:[f.jsx("input",{type:"checkbox",checked:Q.isMandatory,onChange:me=>k(pe,{isMandatory:me.target.checked})}),f.jsx("span",{className:"text-xs font-bold text-slate-600",children:"Required"})]})]})]})]}),f.jsx("button",{onClick:()=>F(pe),className:"text-slate-400 hover:text-red-500 p-2",children:f.jsx(hg,{className:"w-4 h-4"})})]}),f.jsxs("div",{className:"ml-12 pl-4 border-l-2 border-slate-100",children:[f.jsxs("h4",{className:"text-xs font-bold text-slate-500 uppercase mb-2 flex items-center gap-2",children:["Reference Ranges ",f.jsx("span",{className:"bg-slate-100 text-slate-600 px-1.5 py-0.5 rounded-full text-[10px]",children:Q.refRanges.length})]}),Q.type==="dropdown"&&f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Dropdown Options (comma separated)"}),f.jsx("input",{className:"w-full text-sm p-2 border border-slate-200 rounded bg-slate-50",value:((ve=Q.options)==null?void 0:ve.join(", "))||"",onChange:me=>k(pe,{options:me.target.value.split(",").map(Se=>Se.trim())}),placeholder:"e.g. Positive, Negative, Indeterminate"})]}),Q.type==="numeric"&&f.jsxs("div",{className:"space-y-2",children:[Q.refRanges.map((me,Se)=>f.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-200 text-sm grid grid-cols-12 gap-2 items-end",children:[f.jsxs("div",{className:"col-span-2",children:[f.jsx("label",{className:"text-[10px] font-bold text-slate-400 block",children:"Type"}),f.jsxs("select",{className:"w-full bg-white border border-slate-200 rounded px-2 py-1 text-xs",value:me.type,onChange:Ve=>{const ne=[...Q.refRanges];ne[Se].type=Ve.target.value,k(pe,{refRanges:ne})},children:[f.jsx("option",{value:"general",children:"General"}),f.jsx("option",{value:"gender",children:"Gender"}),f.jsx("option",{value:"age",children:"Age"})]})]}),me.type!=="general"&&f.jsxs("div",{className:"col-span-2",children:[f.jsx("label",{className:"text-[10px] font-bold text-slate-400 block",children:me.type==="gender"?"Gender":"Age (Yrs)"}),me.type==="gender"?f.jsxs("select",{className:"w-full bg-white border border-slate-200 rounded px-2 py-1 text-xs",value:me.gender,onChange:Ve=>{const ne=[...Q.refRanges];ne[Se].gender=Ve.target.value,k(pe,{refRanges:ne})},children:[f.jsx("option",{value:"male",children:"Male"}),f.jsx("option",{value:"female",children:"Female"})]}):f.jsxs("div",{className:"flex gap-1",children:[f.jsx("input",{className:"w-full bg-white border rounded px-1 py-1 text-xs",placeholder:"Min",type:"number",value:me.ageMin,onChange:Ve=>{const ne=[...Q.refRanges];ne[Se].ageMin=parseFloat(Ve.target.value),k(pe,{refRanges:ne})}}),f.jsx("input",{className:"w-full bg-white border rounded px-1 py-1 text-xs",placeholder:"Max",type:"number",value:me.ageMax,onChange:Ve=>{const ne=[...Q.refRanges];ne[Se].ageMax=parseFloat(Ve.target.value),k(pe,{refRanges:ne})}})]})]}),f.jsxs("div",{className:"col-span-3",children:[f.jsx("label",{className:"text-[10px] font-bold text-green-600 block",children:"Normal Range"}),f.jsxs("div",{className:"flex gap-1",children:[f.jsx("input",{className:"w-full bg-white border border-green-200 rounded px-2 py-1 text-xs",placeholder:"Min",type:"number",value:me.min,onChange:Ve=>{const ne=[...Q.refRanges];ne[Se].min=parseFloat(Ve.target.value),k(pe,{refRanges:ne})}}),f.jsx("input",{className:"w-full bg-white border border-green-200 rounded px-2 py-1 text-xs",placeholder:"Max",type:"number",value:me.max,onChange:Ve=>{const ne=[...Q.refRanges];ne[Se].max=parseFloat(Ve.target.value),k(pe,{refRanges:ne})}})]})]}),f.jsxs("div",{className:"col-span-3",children:[f.jsx("label",{className:"text-[10px] font-bold text-red-600 block",children:"Critical Range"}),f.jsxs("div",{className:"flex gap-1",children:[f.jsx("input",{className:"w-full bg-white border border-red-200 rounded px-2 py-1 text-xs",placeholder:"< Low",type:"number",value:me.criticalMin,onChange:Ve=>{const ne=[...Q.refRanges];ne[Se].criticalMin=parseFloat(Ve.target.value),k(pe,{refRanges:ne})}}),f.jsx("input",{className:"w-full bg-white border border-red-200 rounded px-2 py-1 text-xs",placeholder:"> High",type:"number",value:me.criticalMax,onChange:Ve=>{const ne=[...Q.refRanges];ne[Se].criticalMax=parseFloat(Ve.target.value),k(pe,{refRanges:ne})}})]})]}),f.jsx("div",{className:"col-span-1",children:f.jsx("button",{onClick:()=>{const Ve=[...Q.refRanges];Ve.splice(Se,1),k(pe,{refRanges:Ve})},className:"text-slate-400 hover:text-red-500 p-1",children:f.jsx(bp,{className:"w-4 h-4"})})})]},Se)),f.jsxs("button",{onClick:()=>k(pe,{refRanges:[...Q.refRanges,{type:"general"}]}),className:"text-xs font-bold text-indigo-600 hover:text-indigo-800 flex items-center gap-1 bg-indigo-50 px-3 py-1.5 rounded-lg border border-indigo-100",children:[f.jsx(Fc,{className:"w-3 h-3"})," Add Reference Range"]})]})]})]},Q.id)}),((M=w.parameters)==null?void 0:M.length)===0&&f.jsxs("div",{className:"text-center py-10 bg-slate-50 rounded-xl border border-dashed border-slate-300",children:[f.jsx(dx,{className:"w-10 h-10 text-slate-300 mx-auto mb-3"}),f.jsx("p",{className:"text-slate-500 font-bold",children:"No Parameters Defined"}),f.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"Add parameters to define what lab technicians need to test."}),f.jsx("button",{onClick:S,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg font-bold text-sm shadow hover:bg-indigo-700",children:"Add First Parameter"})]})]})]})},C=()=>{var k;const N=()=>{P({...w,inventoryRequirements:[...w.inventoryRequirements||[],{itemId:"",itemName:"",quantity:1}]})},F=(M,Q,pe)=>{const se=[...w.inventoryRequirements||[]];if(se[M]={...se[M],[Q]:pe},Q==="itemId"){const ve=r.find(me=>me.id===pe);ve&&(se[M].itemName=ve.name)}P({...w,inventoryRequirements:se})},S=M=>{const Q=[...w.inventoryRequirements||[]];Q.splice(M,1),P({...w,inventoryRequirements:Q})};return f.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[f.jsxs("div",{className:"flex justify-between items-center bg-orange-50 p-4 rounded-xl border border-orange-100",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"font-bold text-orange-900",children:"Inventory Mapping"}),f.jsx("p",{className:"text-sm text-orange-700",children:"Link inventory items to this test for automatic deduction."})]}),f.jsxs("button",{onClick:N,className:"bg-orange-600 text-white px-4 py-2 rounded-lg font-bold shadow hover:bg-orange-700 flex items-center gap-2",children:[f.jsx(Fc,{className:"w-4 h-4"})," Add Item"]})]}),f.jsxs("div",{className:"grid gap-4",children:[(w.inventoryRequirements||[]).map((M,Q)=>{const pe=r.find(se=>se.id===M.itemId);return f.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex items-end gap-4",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Item Name"}),f.jsxs("select",{className:"w-full p-2.5 border border-slate-200 rounded-lg outline-none focus:ring-2 focus:ring-indigo-500",value:M.itemId,onChange:se=>F(Q,"itemId",se.target.value),children:[f.jsx("option",{value:"",children:"Select Inventory Item..."}),r.map(se=>f.jsxs("option",{value:se.id,children:[se.name," (",se.unit,")"]},se.id))]})]}),f.jsxs("div",{className:"w-32",children:[f.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Quantity"}),f.jsx("input",{type:"number",className:"w-full p-2.5 border border-slate-200 rounded-lg outline-none focus:ring-2 focus:ring-indigo-500 font-bold",value:M.quantity,onChange:se=>F(Q,"quantity",parseFloat(se.target.value))})]}),f.jsx("div",{className:"flex-1",children:pe&&f.jsxs("div",{className:"p-2 bg-slate-50 rounded border border-slate-200",children:[f.jsx("p",{className:"text-xs text-slate-500",children:"Current Stock"}),f.jsxs("p",{className:`font-bold ${pe.quantity>0?"text-green-600":"text-red-500"}`,children:[pe.quantity," ",pe.unit]})]})}),f.jsx("button",{onClick:()=>S(Q),className:"p-3 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:f.jsx(hg,{className:"w-5 h-5"})})]},Q)}),((k=w.inventoryRequirements)==null?void 0:k.length)===0&&f.jsxs("div",{className:"text-center py-10 bg-slate-50 rounded-xl border border-dashed border-slate-300",children:[f.jsx(Vc,{className:"w-10 h-10 text-slate-300 mx-auto mb-3"}),f.jsx("p",{className:"text-slate-500 font-bold",children:"No Inventory Linked"}),f.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"Link items like tubes, needles, or reagents to deduct stock automatically."}),f.jsx("button",{onClick:N,className:"px-4 py-2 bg-orange-500 text-white rounded-lg font-bold text-sm shadow hover:bg-orange-600",children:"Link First Item"})]})]})]})};return f.jsxs("div",{className:"h-full flex flex-col bg-slate-50",children:[f.jsx(Ph,{activeTab:"tests"}),f.jsxs("div",{className:"flex justify-between items-center mb-6 px-6",children:[f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Test Catalog Management"})}),f.jsx("div",{className:"flex gap-2",children:s?f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>{a(!1),P(_)},className:"px-4 py-2 text-slate-500 font-bold hover:bg-slate-100 rounded-lg",children:"Cancel"}),f.jsxs("button",{onClick:O,className:"bg-indigo-600 text-white px-6 py-2 rounded-lg font-bold flex items-center gap-2 shadow-lg shadow-indigo-200 hover:bg-indigo-700 transition-all",children:[f.jsx(Tne,{className:"w-4 h-4"})," Save Test"]})]}):f.jsxs(f.Fragment,{children:[f.jsxs("button",{onClick:K,className:"px-4 py-2 rounded-lg font-bold flex items-center gap-2 shadow transition-all",style:{backgroundColor:j.ALLOY_ORANGE,color:"white"},children:[f.jsx(Jte,{className:"w-4 h-4"})," Load Common Tests"]}),f.jsxs("button",{onClick:()=>{a(!0),P(_)},className:"bg-indigo-600 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 shadow hover:bg-indigo-700",children:[f.jsx(Fc,{className:"w-4 h-4"})," Create New Test"]})]})})]}),s?f.jsxs("div",{className:"flex-1 bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden flex flex-col",children:[W(),f.jsxs("div",{className:"p-6 flex-1 overflow-y-auto",children:[c==="basic"&&J(),c==="pricing"&&ae(),c==="tat"&&le(),c==="params"&&U(),c==="inventory"&&C()]})]}):f.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 flex-1 overflow-hidden flex flex-col animate-in fade-in",children:f.jsx("div",{className:"overflow-y-auto flex-1",children:f.jsxs("table",{className:"w-full text-left text-sm",children:[f.jsx("thead",{className:"bg-slate-50 border-b sticky top-0",children:f.jsxs("tr",{children:[f.jsx("th",{className:"p-4",children:"Name"}),f.jsx("th",{className:"p-4",children:"Code"}),f.jsx("th",{className:"p-4",children:"Price"}),f.jsx("th",{className:"p-4",children:"Category"}),f.jsx("th",{className:"p-4",children:"Status"}),f.jsx("th",{className:"p-4 text-right",children:"Action"})]})}),f.jsx("tbody",{className:"divide-y divide-slate-50",children:e.map(N=>f.jsxs("tr",{className:"hover:bg-slate-50 group",children:[f.jsx("td",{className:"p-4 font-bold text-slate-800",children:N.name}),f.jsx("td",{className:"p-4 text-xs font-mono text-slate-500",children:N.code}),f.jsxs("td",{className:"p-4 font-bold text-slate-800",children:["$",N.price]}),f.jsx("td",{className:"p-4 text-slate-500",children:N.category}),f.jsx("td",{className:"p-4",children:f.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${N.isActive?"bg-green-100 text-green-700":"bg-slate-100 text-slate-500"}`,children:N.isActive?"Active":"Inactive"})}),f.jsxs("td",{className:"p-4 text-right flex justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[f.jsx("button",{onClick:()=>L(N),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded",children:f.jsx(yne,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>B(N.id),className:"p-2 text-red-500 hover:bg-red-50 rounded",children:f.jsx(hg,{className:"w-4 h-4"})})]})]},N.id))})]})})})]})},yre=({onBack:n,onNavigate:e})=>f.jsxs("div",{className:"h-full flex flex-col bg-slate-50",children:[f.jsx(Ph,{activeTab:"finance"}),f.jsx("div",{className:"flex-1 bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden mx-6 mb-6",children:f.jsx(iL,{})})]}),_R=({children:n,title:e})=>f.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm print:border-0 print:shadow-none break-inside-avoid mb-6",children:[f.jsx("h4",{className:"font-bold text-slate-700 mb-4 print:text-black",children:e}),n]}),Qs=({title:n,type:e,data:t,color:r=j.PERSIAN_GREEN,subtitle:i})=>{var s,a;return!t||t.length===0?f.jsx(_R,{title:n,children:f.jsx("div",{className:"h-48 flex items-center justify-center text-slate-400 text-sm italic border rounded-lg bg-slate-50",children:"No data available"})}):f.jsxs(_R,{title:n,children:[i&&f.jsx("p",{className:"text-xs text-slate-400 mb-4 -mt-2",children:i}),e==="kpi"&&f.jsxs("div",{className:"flex items-end gap-2 mt-2",children:[f.jsx("span",{className:"text-4xl font-bold",style:{color:r},children:(s=t[0])==null?void 0:s.value}),f.jsx("span",{className:"text-sm text-slate-500 mb-1.5",children:(a=t[0])==null?void 0:a.label})]}),e==="bar"&&f.jsx("div",{className:"mt-4 h-48 flex items-end gap-2 text-xs text-slate-500",children:t.map((c,u)=>{const d=Math.max(...t.map(_=>typeof _.value=="number"?_.value:0),1),p=typeof c.value=="number"?c.value:0,g=d===0?0:p/d*100;return f.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1 group relative",children:[f.jsxs("div",{className:"absolute bottom-full mb-1 bg-slate-800 text-white text-[10px] px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10",children:[c.label,": ",p]}),f.jsx("div",{className:"w-full rounded-t transition-all duration-500",style:{height:`${g}%`,backgroundColor:c.color||r,minHeight:g>0?"4px":"0"}}),f.jsx("span",{className:"truncate w-full text-center text-[10px]",children:c.label.substring(0,10)})]},u)})}),e==="line"&&f.jsxs("div",{className:"mt-4 h-48 relative border-l border-b border-slate-200",children:[f.jsxs("svg",{className:"absolute inset-0 w-full h-full overflow-visible",preserveAspectRatio:"none",children:[f.jsx("polyline",{points:t.map((c,u)=>{const d=Math.max(...t.map(w=>typeof w.value=="number"?w.value:0),1),p=typeof c.value=="number"?c.value:0,g=u/(t.length-1||1)*100,_=100-p/d*100;return`${g},${_}`}).join(" "),fill:"none",stroke:r,strokeWidth:"2",vectorEffect:"non-scaling-stroke"}),t.map((c,u)=>{const d=Math.max(...t.map(w=>typeof w.value=="number"?w.value:0),1),p=typeof c.value=="number"?c.value:0,g=u/(t.length-1||1)*100,_=100-p/d*100;return f.jsx("circle",{cx:`${g}%`,cy:`${_}%`,r:"3",fill:"white",stroke:r,strokeWidth:"2"},u)})]}),f.jsx("div",{className:"absolute top-100 w-full flex justify-between mt-2 text-[10px] text-slate-400",children:t.filter((c,u)=>u===0||u===t.length-1||u%Math.max(1,Math.floor(t.length/5))===0).map((c,u)=>f.jsx("span",{children:c.label},u))})]}),e==="pie"&&f.jsxs("div",{className:"mt-4 flex flex-wrap items-center justify-center gap-8",children:[f.jsx("div",{className:"w-32 h-32 rounded-full relative shrink-0",style:{background:`conic-gradient(${t.reduce((c,u,d)=>{const p=t.reduce((O,L)=>O+(typeof L.value=="number"?L.value:0),0);if(p===0)return c;const _=t.slice(0,d).reduce((O,L)=>O+(typeof L.value=="number"?L.value:0),0)/p*100,w=typeof u.value=="number"?u.value:0,P=_+w/p*100;return c.push(`${u.color||r} ${_}% ${P}%`),c},[]).join(", ")})`}}),f.jsx("div",{className:"space-y-1",children:t.map((c,u)=>f.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[f.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:c.color||r}}),f.jsxs("span",{className:"text-slate-600",children:[c.label," ",f.jsxs("span",{className:"font-bold",children:["(",c.value,")"]})]})]},u))})]})]})},vre=({onBack:n})=>{const[e,t]=Ee.useState("executive"),[r,i]=Ee.useState("month"),[s,a]=Ee.useState({start:"",end:""}),[c,u]=Ee.useState(!1),[d,p]=Ee.useState({}),[g,_]=Ee.useState({orders:[],patients:[],inventory:[],logs:[],expenses:[]});Ee.useEffect(()=>{u(!0);const U=[];try{U.push(ut.collection("orders").orderBy("createdAt","desc").limit(2e3).onSnapshot(C=>_(N=>({...N,orders:C.docs.map(F=>({id:F.id,...F.data()}))})),C=>console.error("Orders err",C))),U.push(ut.collection("patients").orderBy("registeredAt","desc").limit(2e3).onSnapshot(C=>_(N=>({...N,patients:C.docs.map(F=>({id:F.id,...F.data()}))})),C=>console.error("Patients err",C))),U.push(ut.collection("users").onSnapshot(C=>_(N=>({...N,users:C.docs.map(F=>({id:F.id,...F.data()}))})),C=>console.error("Users err",C))),U.push(ut.collection("inventory_items").onSnapshot(C=>_(N=>({...N,inventory:C.docs.map(F=>({id:F.id,...F.data()}))})),C=>console.error("Inv err",C))),U.push(ut.collection("expenses").orderBy("date","desc").limit(1e3).onSnapshot(C=>_(N=>({...N,expenses:C.docs.map(F=>({id:F.id,...F.data()}))})),C=>console.error("Exp err",C))),U.push(ut.collection("audit_logs").orderBy("timestamp","desc").limit(500).onSnapshot(C=>_(N=>({...N,logs:C.docs.map(F=>({id:F.id,...F.data()}))})),C=>console.error("Logs err",C)))}catch(C){console.error("Setup error",C)}return setTimeout(()=>u(!1),1e3),()=>U.forEach(C=>C())},[]);const w=U=>{try{if(!U)return!1;const C=U!=null&&U.toDate?U.toDate():new Date(U);if(isNaN(C.getTime()))return!1;const N=new Date,F=N.getFullYear(),S=N.getMonth();if(r==="daily")return C.toDateString()===N.toDateString();if(r==="weekly"){const k=new Date(N);return k.setDate(k.getDate()-7),C>=k}return r==="monthly"?C.getMonth()===S&&C.getFullYear()===F:r==="year"?C.getFullYear()===F:r==="custom"&&s.start&&s.end?C>=new Date(s.start)&&C<=new Date(s.end):!0}catch{return!1}},P=Ee.useMemo(()=>{try{const U=Array.isArray(g.orders)?g.orders.filter(Q=>w(Q.createdAt)):[],C=Array.isArray(g.patients)?g.patients.filter(Q=>w(Q.registeredAt)):[],N=Array.isArray(g.expenses)?g.expenses.filter(Q=>w(Q.date)):[],F=U.reduce((Q,pe)=>Q+(Number(pe.totalAmount)||0),0),S=N.reduce((Q,pe)=>Q+(Number(pe.amount)||0),0),k=F-S,M=U.reduce((Q,pe)=>Q+(Array.isArray(pe.tests)?pe.tests.length:0),0);return{fOrders:U,fPatients:C,fExpenses:N,totalRev:F,totalExp:S,netProfit:k,totalTests:M}}catch(U){return console.error("Metrics Calc Error",U),{fOrders:[],fPatients:[],fExpenses:[],totalRev:0,totalExp:0,netProfit:0,totalTests:0}}},[g,r,s]),O=()=>{try{const U={};P.fOrders.forEach(F=>{Array.isArray(F.tests)&&F.tests.forEach(S=>{S!=null&&S.name&&(U[S.name]=(U[S.name]||0)+(Number(S.price)||0))})});const C=Object.entries(U).map(([F,S])=>({label:F,value:Number(S)||0,color:j.GAMBOGE})).sort((F,S)=>S.value-F.value).slice(0,5),N=[{label:"Cash",value:P.fOrders.filter(F=>F.paymentMethod==="cash").length,color:"#10b981"},{label:"Card",value:P.fOrders.filter(F=>F.paymentMethod==="card").length,color:"#3b82f6"},{label:"Online",value:P.fOrders.filter(F=>F.paymentMethod==="online").length},{label:"Credit",value:P.fOrders.filter(F=>F.paymentMethod==="credit"||!F.paymentMethod).length,color:"#ef4444"}].filter(F=>F.value>0);return{topTests:C,paymentMethods:N}}catch(U){return console.error("Sales Gen Error",U),{topTests:[],paymentMethods:[]}}},L=()=>{try{const U=Array.isArray(g.inventory)?g.inventory:[],C={};U.forEach(S=>{const k=(Number(S.quantity)||0)*(Number(S.purchasePrice)||0),M=S.category||"Uncategorized";C[M]=(C[M]||0)+k});const N=Object.entries(C).map(([S,k])=>({label:S,value:k})),F=U.filter(S=>(Number(S.quantity)||0)<=(Number(S.minLevel)||5)).map(S=>({label:S.name,value:Number(S.quantity)||0,color:"#ef4444"}));return{valueShare:N,lowStock:F,inventory:U}}catch{return{valueShare:[],lowStock:[],inventory:[]}}},B=()=>{try{const U={},C={};return P.fOrders.forEach(N=>{var M;const F=[];N.processedBy&&F.push(N.processedBy),F.length===0&&N.status==="completed"&&F.push("Unassigned"),F.forEach(Q=>{var pe;return U[Q]=(U[Q]||0)+(((pe=N.tests)==null?void 0:pe.length)||1)});const S=new Date((M=N.createdAt)!=null&&M.toDate?N.createdAt.toDate():N.createdAt||new Date),k=isNaN(S.getTime())?"Unknown":S.toLocaleDateString();C[k]=(C[k]||0)+1}),{techLoad:Object.entries(U).map(([N,F])=>({label:N,value:F})),dailyVol:Object.entries(C).map(([N,F])=>({label:N,value:F}))}}catch{return{techLoad:[],dailyVol:[]}}},K=O(),W=L(),J=B(),ae=()=>{window.print()},le=()=>{try{const U=new zt;U.setFontSize(22),U.setTextColor(40,40,40),U.text("LABPRO DIAGNOSTICS",14,20),U.setFontSize(10),U.setTextColor(100,100,100),U.text("123 Medical Plaza, New York, NY 10001",14,26),U.text(`Report Period: ${r.toUpperCase()}`,14,32),U.text(`Generated: ${new Date().toLocaleString()}`,14,37),U.setDrawColor(200,200,200),U.line(14,42,196,42),U.setFontSize(14),U.setTextColor(0,0,0),U.text("Executive Summary",14,50),U.autoTable({startY:55,head:[["Key Metric","Value"]],body:[["Total Revenue",`$${P.totalRev.toLocaleString()}`],["Total Tests",P.totalTests],["Total Patients",P.fPatients.length],["Total Expenses",`$${P.totalExp.toLocaleString()}`],["Net Profit",`$${P.netProfit.toLocaleString()}`]],theme:"striped",headStyles:{fillColor:[63,81,181]},styles:{fontSize:10}});let C=U.lastAutoTable.finalY+15;if((e==="sales"||e==="executive")&&(U.text("Sales Analysis",14,C),U.autoTable({startY:C+5,head:[["Test Name","Revenue"]],body:K.topTests.map(F=>[F.label,`$${F.value.toLocaleString()}`]),theme:"grid",headStyles:{fillColor:[63,81,181]}}),C=U.lastAutoTable.finalY+10),e==="inventory"){U.addPage(),U.text("Inventory Report",14,20);const F=g.inventory.map(S=>[S.name,S.category||"-",S.quantity||0,`$${S.purchasePrice||0}`]);U.autoTable({startY:25,head:[["Item Name","Category","Qty","Unit Cost"]],body:F,theme:"grid"})}const N=U.internal.getNumberOfPages();for(let F=1;F<=N;F++)U.setPage(F),U.setFontSize(8),U.text(`Page ${F} of ${N}`,196,285,{align:"right"}),U.text("Confidential Report - LabPro Diagnostics",14,285);U.save(`LabPro_Report_${r}_${new Date().toISOString().split("T")[0]}.pdf`)}catch(U){console.error("PDF Export Error",U),alert("Failed to generate PDF. Please ensure libraries are loaded.")}};return f.jsxs("div",{className:"h-full flex flex-col bg-slate-50",children:[f.jsx("style",{children:`
                @media print {
                    @page { margin: 1cm; size: landscape; }
                    body { background: white !important; font-family: sans-serif; -webkit-print-color-adjust: exact; }
                    .no-print { display: none !important; }
                    .print-only { display: block !important; }
                    .print-break { page-break-before: always; }
                    .overflow-y-auto { overflow: visible !important; height: auto !important; }
                    table { border-collapse: collapse; width: 100%; font-size: 10pt; }
                    th, td { border: 1px solid #ddd; padding: 4px 8px; }
                    th { background-color: #f8f9fa !important; }
                    svg { max-height: 300px; }
                    .break-inside-avoid { break-inside: avoid; }
                    .print-footer { position: fixed; bottom: 0; width: 100%; border-top: 1px solid #ddd; padding-top: 8px; font-size: 10px; color: #94a3b8; background: white; }
                }
                .print-only { display: none; }
            `}),f.jsx("div",{className:"no-print",children:f.jsx(Ph,{activeTab:"reports"})}),f.jsxs("div",{className:"print-only p-8 text-center border-b mb-6",children:[f.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"LABPRO DIAGNOSTICS"}),f.jsx("p",{className:"text-slate-500",children:"Analytics & Performance Report"}),f.jsxs("p",{className:"text-sm mt-2 font-mono",children:[new Date().toLocaleDateString(),"  ",r.toUpperCase()]})]}),f.jsxs("div",{className:"px-6 pb-6 flex-1 flex flex-col overflow-hidden",children:[f.jsxs("div",{className:"flex flex-wrap justify-between items-center mb-6 gap-4 no-print",children:[f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Analytics & Reports"})}),f.jsx("div",{className:"flex gap-2 bg-white p-1 rounded-lg border border-slate-200 shadow-sm overflow-x-auto",children:["executive","patient","sales","financial","inventory","operational","quality"].map(U=>f.jsx("button",{onClick:()=>t(U),className:`px-3 py-1.5 rounded text-xs font-bold capitalize transition-colors ${e===U?"bg-indigo-600 text-white":"text-slate-500 hover:bg-slate-100"}`,children:U},U))}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("select",{className:"px-3 py-2 rounded-lg border text-sm font-bold bg-white",value:r,onChange:U=>i(U.target.value),children:[f.jsx("option",{value:"daily",children:"Daily"}),f.jsx("option",{value:"weekly",children:"Weekly"}),f.jsx("option",{value:"monthly",children:"Monthly"}),f.jsx("option",{value:"year",children:"Yearly"}),f.jsx("option",{value:"custom",children:"Custom"})]}),f.jsxs("button",{onClick:ae,className:"flex items-center gap-2 px-3 py-2 bg-white border border-slate-300 text-slate-700 rounded-lg font-bold text-sm hover:bg-slate-50",children:[f.jsx(Kc,{className:"w-4 h-4"})," Print View"]}),f.jsxs("button",{onClick:le,className:"flex items-center gap-2 px-3 py-2 bg-slate-800 text-white rounded-lg font-bold text-sm hover:bg-slate-900",children:[f.jsx(v0,{className:"w-4 h-4"})," Download PDF"]})]})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar pb-20",children:[f.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm mb-6 flex justify-between items-center text-sm break-inside-avoid",children:[f.jsxs("div",{children:[f.jsx("span",{className:"text-slate-400 block text-xs font-bold uppercase tracking-wider",children:"Selected Period"}),f.jsxs("span",{className:"font-bold text-lg capitalize text-slate-700",children:[r," Overview"]})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("span",{className:"text-slate-400 block text-xs font-bold uppercase tracking-wider",children:"Total Revenue"}),f.jsxs("span",{className:"font-bold text-xl text-emerald-600",children:["$",P.totalRev.toLocaleString()]})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("span",{className:"text-slate-400 block text-xs font-bold uppercase tracking-wider",children:"Total Tests"}),f.jsx("span",{className:"font-bold text-xl text-indigo-600",children:P.totalTests})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("span",{className:"text-slate-400 block text-xs font-bold uppercase tracking-wider",children:"New Patients"}),f.jsx("span",{className:"font-bold text-xl text-amber-500",children:P.fPatients.length})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e==="executive"&&f.jsxs(f.Fragment,{children:[f.jsx(Qs,{title:"Total Patients",type:"kpi",data:[{label:"Registered",value:P.fPatients.length}],color:j.GAMBOGE}),f.jsx(Qs,{title:"Net Profit",type:"kpi",data:[{label:"Net Earnings",value:"$"+P.netProfit.toLocaleString()}],color:j.ALLOY_ORANGE}),f.jsx(Qs,{title:"Inventory Worth",type:"kpi",data:[{label:"Current Assets",value:"$"+g.inventory.reduce((U,C)=>U+(C.quantity*C.purchasePrice||0),0).toLocaleString()}],color:j.PERSIAN_GREEN}),f.jsx("div",{className:"col-span-1 md:col-span-2 lg:col-span-3",children:f.jsx(Qs,{title:"Revenue Trend",type:"line",subtitle:"Income over selected period",data:Object.entries(P.fOrders.reduce((U,C)=>{const N=hi(C.createdAt).split(",")[0];return U[N]=(U[N]||0)+C.totalAmount,U},{})).map(([U,C])=>({label:U,value:C})),color:j.MIDNIGHT_GREEN})})]}),e==="patient"&&f.jsxs(f.Fragment,{children:[f.jsx(Qs,{title:"Gender Distribution",type:"pie",data:[{label:"Male",value:P.fPatients.filter(U=>U.gender==="Male").length,color:"#3b82f6"},{label:"Female",value:P.fPatients.filter(U=>U.gender==="Female").length,color:"#ec4899"}]}),f.jsx(Qs,{title:"Age Groups",type:"bar",data:[{label:"0-18",value:P.fPatients.filter(U=>U.age<18).length,color:"#818cf8"},{label:"19-40",value:P.fPatients.filter(U=>U.age>=19&&U.age<=40).length,color:"#6366f1"},{label:"41-60",value:P.fPatients.filter(U=>U.age>=41&&U.age<=60).length,color:"#4f46e5"},{label:"60+",value:P.fPatients.filter(U=>U.age>60).length,color:"#4338ca"}]}),f.jsx(Qs,{title:"Registration Source",type:"pie",data:[{label:"Walk-in",value:P.fOrders.filter(U=>!U.doctorId).length,color:"#10b981"},{label:"Referred",value:P.fOrders.filter(U=>U.doctorId).length,color:"#f59e0b"}]}),f.jsxs("div",{className:"col-span-full",children:[f.jsx("h4",{className:"font-bold mb-2",children:"Registration Trends"}),f.jsx(Qs,{title:"Registrations Over Time",type:"line",data:Object.entries(P.fPatients.reduce((U,C)=>{const N=hi(C.registeredAt).split(",")[0];return U[N]=(U[N]||0)+1,U},{})).map(([U,C])=>({label:U,value:C})),color:j.TIFFANY_BLUE})]})]}),e==="sales"&&f.jsxs(f.Fragment,{children:[f.jsx(Qs,{title:"Top Revenue Tests",type:"bar",data:K.topTests}),f.jsx(Qs,{title:"Payment Methods",type:"pie",data:K.paymentMethods}),f.jsxs("div",{className:"col-span-full bg-white rounded-xl border p-4 break-inside-avoid",children:[f.jsx("h4",{className:"font-bold mb-4",children:"Daily Sales Log"}),f.jsxs("table",{className:"w-full text-sm text-left",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"border-b",children:[f.jsx("th",{className:"pb-2",children:"Date"}),f.jsx("th",{className:"pb-2",children:"Patient"}),f.jsx("th",{className:"pb-2",children:"Tests"}),f.jsx("th",{className:"pb-2 text-right",children:"Amount"})]})}),f.jsx("tbody",{children:P.fOrders.slice(0,15).map(U=>f.jsxs("tr",{className:"border-b last:border-0",children:[f.jsx("td",{className:"py-2 text-xs",children:hi(U.createdAt)}),f.jsx("td",{className:"py-2 font-medium",children:U.patientName}),f.jsxs("td",{className:"py-2 text-xs text-slate-500",children:[U.tests.length," Tests"]}),f.jsxs("td",{className:"py-2 text-right font-bold text-emerald-600",children:["$",U.totalAmount]})]},U.id))})]})]})]}),e==="financial"&&f.jsxs(f.Fragment,{children:[f.jsx(Qs,{title:"Income vs Expenses",type:"bar",data:[{label:"Income",value:P.totalRev,color:"#10b981"},{label:"Expense",value:P.totalExp,color:"#ef4444"}]}),f.jsx(Qs,{title:"Expense Categories",type:"pie",data:Object.entries(P.fExpenses.reduce((U,C)=>(U[C.category]=(U[C.category]||0)+(Number(C.amount)||0),U),{})).map(([U,C])=>({label:U,value:C}))}),f.jsxs("div",{className:"col-span-full bg-white rounded-xl border p-4 break-inside-avoid",children:[f.jsx("h4",{className:"font-bold mb-4",children:"P&L Detailed View"}),f.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[f.jsxs("div",{className:"p-4 bg-green-50 rounded",children:[f.jsx("p",{className:"text-xs text-green-700 font-bold uppercase",children:"Gross Revenue"}),f.jsxs("p",{className:"text-xl font-bold text-green-800",children:["$",P.totalRev.toLocaleString()]})]}),f.jsxs("div",{className:"p-4 bg-red-50 rounded",children:[f.jsx("p",{className:"text-xs text-red-700 font-bold uppercase",children:"Total Expenses"}),f.jsxs("p",{className:"text-xl font-bold text-red-800",children:["$",P.totalExp.toLocaleString()]})]}),f.jsxs("div",{className:"p-4 bg-blue-50 rounded",children:[f.jsx("p",{className:"text-xs text-blue-700 font-bold uppercase",children:"Net Profit"}),f.jsxs("p",{className:"text-xl font-bold text-blue-800",children:["$",P.netProfit.toLocaleString()]})]})]})]})]}),e==="inventory"&&f.jsxs(f.Fragment,{children:[f.jsx(Qs,{title:"Stock Value Share",type:"pie",data:W.valueShare}),f.jsx("div",{className:"col-span-1 md:col-span-2",children:f.jsx(Qs,{title:"Low Stock Alerts",type:"bar",data:W.lowStock})}),f.jsxs("div",{className:"col-span-full bg-white rounded-xl border p-4",children:[f.jsx("h4",{className:"font-bold mb-2",children:"Stock Expiry Risk (Next 30 Days)"}),f.jsx("div",{className:"space-y-2",children:g.inventory.filter(U=>{if(!U.expiryDate)return!1;const N=((U.expiryDate.toDate?U.expiryDate.toDate():new Date(U.expiryDate)).getTime()-new Date().getTime())/(1e3*3600*24);return N>0&&N<30}).map(U=>f.jsxs("div",{className:"flex justify-between p-2 bg-amber-50 rounded border border-amber-200",children:[f.jsx("span",{className:"font-bold text-amber-900",children:U.name}),f.jsxs("span",{className:"text-amber-700",children:["Expires in ",Math.ceil((new Date(U.expiryDate.toDate()).getTime()-new Date().getTime())/(1e3*3600*24))," days"]})]},U.id))})]})]}),e==="operational"&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"col-span-full",children:f.jsx(Qs,{title:"Technician Workload",type:"bar",data:J.techLoad})}),f.jsx("div",{className:"col-span-full",children:f.jsx(Qs,{title:"Daily Sample Collections",type:"line",data:J.dailyVol})})]}),e==="quality"&&f.jsxs("div",{className:"col-span-full bg-white p-6 rounded-xl border",children:[f.jsx("h4",{className:"font-bold mb-4",children:"Audit & Rejection Log"}),f.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Quality control metrics and system modification logs."}),f.jsx("div",{className:"space-y-2",children:g.logs.slice(0,10).map(U=>f.jsxs("div",{className:"text-sm p-3 bg-slate-50 rounded border flex justify-between items-center",children:[f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"font-bold text-slate-700",children:U.action}),f.jsx("span",{className:"text-xs text-slate-500",children:U.details})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("span",{className:"block font-bold text-indigo-600",children:U.userName}),f.jsx("span",{className:"text-xs text-slate-400",children:O1(U.timestamp)})]})]},U.id))})]})]}),f.jsx("div",{className:"mt-8 text-center no-print border-t pt-6",children:f.jsx("p",{className:"text-xs text-slate-400",children:"Generated by LabPro Analytics Engine  Confidentially Report"})})]})]}),f.jsxs("div",{className:"print-footer print-only flex justify-between",children:[f.jsx("span",{children:"Generated by LabPro Analytics Engine"}),f.jsxs("span",{children:["Confidential Report  ",new Date().toLocaleDateString()]})]})]})},_re=({onBack:n})=>{const[e,t]=Ee.useState([]);return Ee.useEffect(()=>{const r=ut.collection("audit_logs").orderBy("timestamp","desc").limit(50).onSnapshot(i=>t(i.docs.map(s=>({id:s.id,...s.data()}))));return()=>r()},[]),f.jsxs("div",{className:"h-full flex flex-col bg-slate-50",children:[f.jsx(Ph,{activeTab:"logs"}),f.jsxs("div",{className:"px-6 pb-6 flex-1 flex flex-col",children:[f.jsx("div",{className:"flex items-center gap-2 mb-6",children:f.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"System Audit Logs"})}),f.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 flex-1 overflow-hidden flex flex-col",children:f.jsx("div",{className:"overflow-y-auto flex-1",children:f.jsxs("table",{className:"w-full text-left text-sm",children:[f.jsx("thead",{className:"bg-slate-50 border-b sticky top-0",children:f.jsxs("tr",{children:[f.jsx("th",{className:"p-4",children:"Time"}),f.jsx("th",{className:"p-4",children:"User"}),f.jsx("th",{className:"p-4",children:"Action"}),f.jsx("th",{className:"p-4",children:"Details"})]})}),f.jsx("tbody",{className:"divide-y divide-slate-50",children:e.map(r=>f.jsxs("tr",{className:"hover:bg-slate-50",children:[f.jsx("td",{className:"p-4 text-xs font-mono text-slate-500",children:O1(r.timestamp)}),f.jsx("td",{className:"p-4 font-bold text-slate-800",children:r.userName}),f.jsx("td",{className:"p-4 font-bold text-indigo-600",children:r.action}),f.jsx("td",{className:"p-4 text-slate-600",children:r.details})]},r.id))})]})})})]})]})},bre=({onBack:n})=>f.jsxs("div",{className:"h-full flex flex-col bg-slate-50",children:[f.jsx(Ph,{activeTab:"settings"}),f.jsxs("div",{className:"px-6",children:[f.jsx("div",{className:"flex items-center gap-2 mb-6",children:f.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"System Settings"})}),f.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"System Configuration"})]}),f.jsxs("div",{className:"bg-white p-8 rounded-xl border border-slate-200 max-w-2xl space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block font-bold text-slate-700 mb-2",children:"Laboratory Name"}),f.jsx("input",{className:"border border-slate-300 p-3 rounded-lg w-full outline-none focus:ring-2 focus:ring-indigo-500",defaultValue:"LabPro Diagnostics"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block font-bold text-slate-700 mb-2",children:"Address"}),f.jsx("input",{className:"border border-slate-300 p-3 rounded-lg w-full outline-none focus:ring-2 focus:ring-indigo-500",defaultValue:"123 Medical Plaza, NY"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block font-bold text-slate-700 mb-2",children:"Contact Phone"}),f.jsx("input",{className:"border border-slate-300 p-3 rounded-lg w-full outline-none focus:ring-2 focus:ring-indigo-500",defaultValue:"+1 (555) 123-4567"})]}),f.jsx("div",{className:"pt-4",children:f.jsx("button",{className:"bg-indigo-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-indigo-700 transition-colors",children:"Save Changes"})})]})]}),A5=({data:n,onClose:e})=>{const t=Array.isArray(n)?n:[n],r=()=>window.print();if(Ee.useEffect(()=>{const s=a=>{a.key==="Enter"&&r(),a.key==="Escape"&&e()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[]),!t||t.length===0)return null;const i=t[0];return f.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[1000] p-4 print:p-0 print:bg-white print:fixed print:inset-0 print:z-[9999]",onClick:e,children:f.jsxs("div",{className:"print-modal-root bg-white w-full max-w-4xl rounded-xl shadow-2xl overflow-hidden flex flex-col max-h-[95vh] print:max-h-none print:shadow-none print:w-full print:max-w-none print:rounded-none print:h-full print:absolute print:top-0 print:left-0",onClick:s=>s.stopPropagation(),children:[f.jsxs("div",{className:"bg-slate-800 text-white p-4 flex justify-between items-center print:hidden shrink-0",children:[f.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[f.jsx(v0,{className:"w-5 h-5"})," Report Preview"]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:r,className:"bg-indigo-500 hover:bg-indigo-600 px-4 py-2 rounded-lg font-bold text-sm shadow-sm transition-all",title:"Press Enter to Print",children:"Print Now"}),f.jsx("button",{onClick:e,className:"bg-slate-700 hover:bg-slate-600 px-4 py-2 rounded-lg font-bold text-sm shadow-sm transition-all",title:"Press Esc to Close",children:"Close"})]})]}),f.jsxs("div",{className:"printable-area p-8 overflow-y-auto font-serif text-slate-900 bg-white h-full print:p-8 print:overflow-visible",children:[f.jsxs("div",{className:"border-b-4 border-slate-900 pb-6 mb-8 flex justify-between items-end",children:[f.jsxs("div",{className:"w-2/3",children:[f.jsx("h1",{className:"text-4xl font-black tracking-tight text-slate-900 uppercase",children:"LabPro Diagnostics"}),f.jsx("p",{className:"text-sm font-medium text-slate-600 mt-2",children:"123 Medical Plaza, Suite 400, New York, NY 10001"}),f.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Phone: +1 (555) 123-4567 | Email: reports@labpro.com"}),f.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"ISO 15189:2012 Certified Laboratory"})]}),f.jsxs("div",{className:"text-right w-1/3",children:[f.jsx("h2",{className:"text-2xl font-bold uppercase tracking-widest text-slate-300",children:"Medical Report"}),f.jsxs("p",{className:"font-mono font-bold text-lg mt-1 text-slate-900",children:["SID: ",i.sampleLabelId||i.id.slice(0,8).toUpperCase()]}),f.jsx("p",{className:"text-sm text-slate-500 font-medium",children:hi(i.reportedAt||new Date)})]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-x-12 gap-y-4 mb-8 bg-slate-50 p-6 rounded-lg border border-slate-100 print:bg-transparent print:p-0 print:border-0 print:border-b print:border-slate-200 print:pb-4 print:mb-8 print:rounded-none",children:[f.jsxs("div",{className:"flex justify-between border-b border-slate-200 pb-1",children:[f.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Patient Name"}),f.jsx("span",{className:"font-bold text-slate-900 text-lg",children:i.patientName})]}),f.jsxs("div",{className:"flex justify-between border-b border-slate-200 pb-1",children:[f.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Age / Gender"}),f.jsxs("span",{className:"font-bold text-slate-900",children:[i.patientAge||"--"," Yrs / ",i.patientGender||"--"]})]}),f.jsxs("div",{className:"flex justify-between border-b border-slate-200 pb-1",children:[f.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Referred By"}),f.jsxs("span",{className:"font-bold text-slate-900",children:["Dr. ",i.doctorName||"Self"]})]}),f.jsxs("div",{className:"flex justify-between border-b border-slate-200 pb-1",children:[f.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Phone"}),f.jsx("span",{className:"font-bold text-slate-900",children:i.patientPhone||"--"})]})]}),f.jsx("div",{className:"space-y-10",children:t.map((s,a)=>f.jsxs("div",{className:a>0?"pt-8 border-t-2 border-dashed border-slate-200 print:break-before-auto":"",children:[f.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[f.jsx("h3",{className:"text-xl font-bold text-slate-900 uppercase border-b-2 border-slate-900 inline-block pb-1",children:s.testName}),f.jsxs("span",{className:"text-xs font-bold bg-slate-100 px-2 py-1 rounded text-slate-500 uppercase tracking-wider print:bg-transparent print:border print:border-slate-300",children:["Sample: ",s.sampleType]})]}),f.jsxs("table",{className:"w-full text-left mb-6",children:[f.jsx("thead",{className:"border-b-2 border-slate-800",children:f.jsxs("tr",{children:[f.jsx("th",{className:"py-2 pl-2 font-bold uppercase text-xs text-slate-600 w-1/2",children:"Investigation"}),f.jsx("th",{className:"py-2 font-bold uppercase text-xs text-slate-600 w-1/4",children:"Result"}),f.jsx("th",{className:"py-2 font-bold uppercase text-xs text-slate-600 w-1/4 text-right pr-2",children:"Reference Range"})]})}),f.jsxs("tbody",{className:"divide-y divide-slate-100",children:[s.results&&Object.entries(s.results).map(([c,u])=>{const d=typeof u=="object"?u.value:u,p=typeof u=="object"?u.unit:"",g=typeof u=="object"?u.flag:"N",_=g==="CL"||g==="CH",w=g==="L"||g==="H",P={N:"",L:"LOW",H:"HIGH",CL:"CRITICAL LOW",CH:"CRITICAL HIGH"}[g]||"";return f.jsxs("tr",{children:[f.jsx("td",{className:"py-3 pl-2 font-medium text-slate-800",children:c}),f.jsxs("td",{className:"py-3",children:[f.jsx("span",{className:`font-bold text-md ${_?"text-red-600 print:text-black print:font-black":w?"text-amber-700 print:text-black print:font-bold":"text-slate-900"}`,children:d}),f.jsx("span",{className:"text-slate-500 text-xs ml-1",children:p}),P&&f.jsx("span",{className:`text-[10px] ml-2 font-bold px-1.5 py-0.5 rounded ${_?"bg-red-100 text-red-700 print:border print:border-black":"bg-amber-100 text-amber-700 print:italic"}`,children:P})]}),f.jsx("td",{className:"py-3 text-right pr-2 text-slate-500 text-sm",children:"--"})]},c)}),(!s.results||Object.keys(s.results).length===0)&&f.jsx("tr",{children:f.jsx("td",{colSpan:3,className:"py-4 text-center text-slate-400 italic",children:"No quantitative results recorded."})})]})]}),(s.conclusion||s.pathologistRemarks)&&f.jsxs("div",{className:"mb-4 bg-slate-50 p-4 rounded border border-slate-100 print:bg-transparent print:border print:border-slate-300",children:[s.conclusion&&f.jsxs("div",{className:"mb-2",children:[f.jsx("h4",{className:"font-bold text-xs uppercase text-slate-500 mb-1",children:"Pathologist's Conclusion"}),f.jsx("p",{className:"text-slate-900 text-sm font-medium",children:s.conclusion})]}),s.pathologistRemarks&&f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold text-xs uppercase text-slate-500 mb-1",children:"Remarks"}),f.jsx("p",{className:"text-slate-800 text-sm",children:s.pathologistRemarks})]})]})]},s.id))}),f.jsx("div",{className:"mt-16 pt-8 flex justify-end print:break-inside-avoid",children:f.jsxs("div",{className:"text-center w-56",children:[f.jsx("div",{className:"h-20 mb-2 border-b border-slate-900 flex items-end justify-center pb-2",children:f.jsx("span",{className:"font-cursive text-2xl text-slate-600 italic",children:"Dr. A. Pathologist"})}),f.jsx("p",{className:"font-bold text-sm text-slate-900 uppercase",children:"Dr. Alice Pathologist"}),f.jsx("p",{className:"text-xs text-slate-500",children:"MD, Pathology (Reg: 12345)"}),f.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Chief Pathologist"})]})}),f.jsxs("div",{className:"mt-8 pt-4 border-t border-slate-200 text-center text-[10px] text-slate-400 flex justify-between",children:[f.jsx("span",{children:"Generated by LabPro System"}),f.jsx("span",{children:new Date().toLocaleString()}),f.jsx("span",{children:"Page 1 of 1"})]})]})]})})},xre=({data:n,onClose:e})=>{const t=()=>window.print();return Ee.useEffect(()=>{const r=i=>{i.key==="Enter"&&t(),i.key==="Escape"&&e()};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[]),n?f.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[1000] p-4 print:p-0 print:bg-white print:fixed print:inset-0 print:z-[9999]",onClick:e,children:f.jsxs("div",{className:"print-modal-root bg-white w-full max-w-2xl rounded-xl shadow-2xl overflow-hidden flex flex-col max-h-[95vh] print:max-h-none print:shadow-none print:w-full print:max-w-none print:rounded-none print:h-full print:absolute print:top-0 print:left-0",onClick:r=>r.stopPropagation(),children:[f.jsxs("div",{className:"bg-slate-800 text-white p-4 flex justify-between items-center print:hidden shrink-0",children:[f.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[f.jsx(Kc,{className:"w-5 h-5"})," Print Preview"]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:t,className:"bg-indigo-500 hover:bg-indigo-600 px-4 py-2 rounded-lg font-bold text-sm shadow-sm transition-all",title:"Press Enter to Print",children:"Print Now"}),f.jsx("button",{onClick:e,className:"bg-slate-700 hover:bg-slate-600 px-4 py-2 rounded-lg font-bold text-sm shadow-sm transition-all",title:"Press Esc to Close",children:"Close"})]})]}),f.jsxs("div",{className:"p-10 print:p-8 text-slate-900 font-serif h-full flex flex-col overflow-y-auto print:overflow-visible",children:[f.jsxs("div",{className:"border-b-2 border-slate-800 pb-6 mb-6 flex justify-between items-start",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold text-slate-900 tracking-tight",children:"LabPro Diagnostics"}),f.jsxs("p",{className:"text-sm text-slate-600 mt-2 leading-relaxed",children:["123 Medical Plaza, Suite 400",f.jsx("br",{}),"New York, NY 10001",f.jsx("br",{}),"Phone: +1 (555) 123-4567"]})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("h2",{className:"text-xl font-bold uppercase tracking-widest text-slate-400",children:"Invoice"}),f.jsxs("p",{className:"font-mono font-bold text-xl mt-1 text-slate-900",children:["#",(n.orderId||n.invoiceId||"N/A").slice(0,8).toUpperCase()]}),f.jsx("p",{className:"text-sm text-slate-500 mt-1",children:hi(n.date||new Date)})]})]}),f.jsxs("div",{className:"flex justify-between mb-8 bg-slate-50 p-5 rounded-lg border border-slate-100 print:bg-transparent print:p-0 print:border-0",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1",children:"Patient Details"}),f.jsx("p",{className:"font-bold text-lg text-slate-800",children:n.patientName||"N/A"}),f.jsxs("p",{className:"text-sm text-slate-700",children:[n.patientAge||n.age||"--"," / ",n.patientGender||n.gender||"--"]}),f.jsx("p",{className:"text-sm text-slate-700",children:n.patientPhone||"N/A"})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1",children:"Referred By"}),f.jsx("p",{className:"font-bold text-slate-800",children:n.doctorName||n.doctor||"Self"}),f.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mt-4 mb-1",children:"Payment Mode"}),f.jsx("p",{className:"uppercase font-bold text-slate-800",children:n.paymentMethod||"Cash"})]})]}),f.jsx("div",{className:"flex-1",children:f.jsxs("table",{className:"w-full text-left mb-8",children:[f.jsx("thead",{className:"border-b-2 border-slate-200",children:f.jsxs("tr",{children:[f.jsx("th",{className:"py-2 text-sm font-bold uppercase text-slate-500",children:"Test Description"}),f.jsx("th",{className:"py-2 text-right text-sm font-bold uppercase text-slate-500",children:"Amount"})]})}),f.jsx("tbody",{className:"divide-y divide-slate-100",children:(n.items||[]).map((r,i)=>f.jsxs("tr",{children:[f.jsxs("td",{className:"py-3",children:[f.jsx("p",{className:"font-bold text-slate-800",children:r.testName||r.name||"N/A"}),f.jsx("p",{className:"text-xs text-slate-500",children:r.code||""})]}),f.jsxs("td",{className:"py-3 text-right font-mono font-medium text-slate-700",children:["$",(r.price||0).toFixed(2)]})]},i))})]})}),f.jsx("div",{className:"flex justify-end border-t border-slate-200 pt-6",children:f.jsxs("div",{className:"w-56 space-y-2",children:[f.jsxs("div",{className:"flex justify-between text-sm",children:[f.jsx("span",{className:"text-slate-500 font-medium",children:"Subtotal:"}),f.jsxs("span",{className:"font-mono font-bold text-slate-700",children:["$",(n.subtotal||n.amount||0).toFixed(2)]})]}),(n.discount||0)>0&&f.jsxs("div",{className:"flex justify-between text-sm",children:[f.jsx("span",{className:"text-slate-500 font-medium",children:"Discount:"}),f.jsxs("span",{className:"font-mono font-bold text-red-500",children:["-$",(n.discount||0).toFixed(2)]})]}),f.jsxs("div",{className:"flex justify-between text-xl font-bold border-t border-slate-800 pt-3 mt-2 text-slate-900",children:[f.jsx("span",{children:"Total:"}),f.jsxs("span",{children:["$",(n.total||(n.amount||0)-(n.discount||0)).toFixed(2)]})]}),f.jsxs("div",{className:"flex justify-between text-sm mt-4 pt-4 border-t border-slate-200",children:[f.jsx("span",{className:"text-slate-500 font-medium",children:"Amount Paid:"}),f.jsxs("span",{className:"font-mono font-bold text-slate-700",children:["$",(n.paid||n.paidAmount||0).toFixed(2)]})]}),((n.due||0)>0||(n.total||n.amount||0)-(n.discount||0)-(n.paid||n.paidAmount||0)>0)&&f.jsxs("div",{className:"flex justify-between text-sm text-red-600 bg-red-50 p-2 rounded mt-2 print:bg-transparent print:p-0 print:text-red-600",children:[f.jsx("span",{className:"font-bold",children:"Balance Due:"}),f.jsxs("span",{className:"font-mono font-bold",children:["$",(n.due||(n.total||n.amount||0)-(n.discount||0)-(n.paid||n.paidAmount||0)).toFixed(2)]})]})]})}),f.jsxs("div",{className:"mt-12 pt-8 border-t border-slate-200 text-center text-xs text-slate-400",children:[f.jsx("p",{children:"Thank you for choosing LabPro Diagnostics."}),f.jsx("p",{children:"This is a computer generated invoice and does not require a signature."}),f.jsx("p",{className:"mt-2 font-mono",children:n.orderId||n.invoiceId||"N/A"})]})]})]})}):null},wre=({onBack:n})=>{const[e,t]=Ee.useState("dashboard"),[r,i]=Ee.useState([]),[s,a]=Ee.useState(!1),[c,u]=Ee.useState({todayPatients:0,todayOrders:0,pendingPayments:0,completed:0,todaySales:0}),[d,p]=Ee.useState([]),[g,_]=Ee.useState(""),[w,P]=Ee.useState([]),[O,L]=Ee.useState([]),[B,K]=Ee.useState(null),[W,J]=Ee.useState(null),ae=(ye,He)=>{if(!ye)return"--";const rt=ye.toDate?ye.toDate():new Date(ye);if(!He)return"--";const at=He.toDate?He.toDate():new Date(He),_t=Math.max(0,at.getTime()-rt.getTime()),gt=Math.floor(_t/36e5),mt=Math.floor(_t%36e5/6e4);return gt>0?`${gt}h ${mt}m`:`${mt}m`},le=()=>{const ye=window.open("","","width=800,height=600");ye==null||ye.document.write(`
            <html><head><title>TAT Log</title><style>
                body { font-family: sans-serif; padding: 20px; }
                table { width: 100%; border-collapse: collapse; margin-top: 20px; }
                th, td { border: 1px solid #ddd; padding: 10px; text-align: left; font-size: 12px; }
                th { background-color: #f0f0f0; }
                h2 { margin-bottom: 5px; }
                .meta { font-size: 12px; color: #666; margin-bottom: 20px; }
            </style></head>
            <body>
            <h2>Turnaround Time (TAT) Log</h2>
            <div class="meta">Printed: ${new Date().toLocaleString()} | Total Samples: ${w.length}</div>
            <table>
                <thead><tr><th>Patient</th><th>Test</th><th>Booked At</th><th>Reported At</th><th>TAT</th></tr></thead>
                <tbody>
                ${w.map(He=>{const rt=He.createdAt.toDate?He.createdAt.toDate():new Date(He.createdAt),at=He.reportedAt?He.reportedAt.toDate?He.reportedAt.toDate():new Date(He.reportedAt):null,_t=He.status==="reported"&&at?ae(He.createdAt,He.reportedAt):"Pending";return`<tr><td>${He.patientName}</td><td>${He.testName}</td><td>${rt.toLocaleString()}</td><td>${at?at.toLocaleString():"--"}</td><td>${_t}</td></tr>`}).join("")}
                </tbody>
            </table>
            <script>window.print(); window.close();<\/script>
            </body></html>
        `),ye==null||ye.document.close()},[U,C]=Ee.useState(null),[N,F]=Ee.useState({fullName:"",phone:"",age:"",ageUnit:"Years",gender:"male",address:"",referralType:"self",doctorName:"",clinicName:"",existingId:""}),[S,k]=Ee.useState([]),[M,Q]=Ee.useState({method:"cash",paidAmount:"",discount:0,discountReason:""}),[pe,se]=Ee.useState(""),[ve,me]=Ee.useState("All"),[Se,Ve]=Ee.useState(!1),ne=S.reduce((ye,He)=>ye+He.price,0),H=Se?50:0,te=Math.max(0,ne+H-M.discount),Y=parseFloat(M.paidAmount)||0,fe=Math.max(0,te-Y);Ee.useEffect(()=>{Q(ye=>({...ye,paidAmount:te.toString()}))},[te]),Ee.useEffect(()=>{const ye=ut.collection("tests").where("isActive","==",!0).onSnapshot(gt=>i(gt.docs.map(mt=>({id:mt.id,...mt.data()})))),He=ut.collection("doctors").where("status","==","active").onSnapshot(gt=>p(gt.docs.map(mt=>({id:mt.id,...mt.data()})))),rt=new Date;rt.setHours(0,0,0,0);const at=an.firestore.Timestamp.fromDate(rt),_t=ut.collection("orders").where("createdAt",">=",at).onSnapshot(gt=>{const mt=gt.docs.reduce((Yt,wt)=>Yt+(wt.data().totalAmount||0),0);u(Yt=>({...Yt,todayOrders:gt.size,todaySales:mt}))});return()=>{ye(),_t(),He()}},[]),Ee.useEffect(()=>{const ye=ut.collection("samples").orderBy("createdAt","desc").limit(20).onSnapshot(He=>{const rt=He.docs.map(mt=>({id:mt.id,...mt.data()}));P(rt);const at=[];rt.filter(mt=>mt.status==="rejected").forEach(mt=>{at.push({id:mt.id,text:`Sample rejected for ${mt.patientName} (${mt.testName})`,type:"alert"})});const gt=rt.filter(mt=>mt.status==="reported").length;gt>0&&at.push({id:"reports-ready",text:`${gt} recent reports ready for printing.`,type:"info"}),L(at)});return()=>ye()},[]);const ge=async(ye=!1)=>{const He=N.phone.trim();if(He.length<3){ye||alert("Please enter a valid phone number.");return}a(!0);try{const rt=await ut.collection("patients").where("phone",">=",He).limit(1).get();if(rt.empty)ye||alert("Patient not found. You can register as new.");else{const at=rt.docs[0].data();if(window.confirm(`Patient found: ${at.fullName} (${at.gender}, ${Jf(at.dob)} yrs).

Load existing patient record?`)){let _t="",gt="Years";at.dob&&(_t=Jf(at.dob).toString()),F(mt=>({...mt,fullName:at.fullName,gender:at.gender,address:at.address||"",age:_t,existingId:rt.docs[0].id}))}}}catch(rt){console.error(rt),ye||alert("Error searching for patient.")}finally{a(!1)}},xe=r.filter(ye=>{const He=ye.name.toLowerCase().includes(pe.toLowerCase())||ye.code.toLowerCase().includes(pe.toLowerCase()),rt=ve==="All"||ye.category===ve;return He&&rt}),we=["All",...Array.from(new Set(r.map(ye=>ye.category||"General")))],Ie=async()=>{if(!N.fullName||S.length===0){alert("Please enter patient details and select at least one test.");return}a(!0);try{let ye=N.existingId,He=new Date;if(N.age){const Rt=parseInt(N.age);N.ageUnit==="Years"&&He.setFullYear(He.getFullYear()-Rt),N.ageUnit==="Months"&&He.setMonth(He.getMonth()-Rt),N.ageUnit==="Days"&&He.setDate(He.getDate()-Rt)}const rt=He.toISOString().split("T")[0],at={fullName:N.fullName,phone:N.phone,gender:N.gender,address:N.address,dob:rt,updatedAt:an.firestore.Timestamp.now()};ye?await ut.collection("patients").doc(ye).update(at):ye=(await ut.collection("patients").add({...at,createdAt:an.firestore.Timestamp.now()})).id;let _t="Self",gt=null,mt="",Yt=0;if(N.referralType==="doctor"&&g){const Rt=d.find(Ot=>Ot.id===g);Rt&&(_t=Rt.name,gt=Rt.id,mt=Rt.phone,Yt=te*(Rt.commissionRate||0)/100)}else N.referralType==="doctor"&&N.doctorName&&(_t=N.doctorName);const wt=fe===0?"paid":Y>0?"partial":"unpaid",nn=await ut.collection("orders").add({patientId:ye,patientName:N.fullName,doctorName:_t,doctorId:gt,doctorPhone:mt,doctorCommission:Yt,commissionPaid:!1,totalAmount:te,status:"ordered",paymentStatus:wt,testCount:S.length,isUrgent:Se,createdAt:an.firestore.Timestamp.now()}),St=await ut.collection("invoices").add({orderId:nn.id,patientName:N.fullName,amount:te,discount:M.discount,paidAmount:Y,status:wt,createdAt:an.firestore.Timestamp.now(),payments:Y>0?[{amount:Y,method:M.method,date:new Date}]:[]}),rr=ut.batch();S.forEach(Rt=>{const Ot=ut.collection("samples").doc();rr.set(Ot,{orderId:nn.id,patientId:ye,patientName:N.fullName,patientAge:parseInt(N.age),patientGender:N.gender,patientPhone:N.phone,testId:Rt.id,testName:Rt.name,sampleType:Rt.sampleType,status:"ordered",isUrgent:Se,doctorName:_t,doctorPhone:mt,createdAt:an.firestore.Timestamp.now()})}),await rr.commit(),K({orderId:St.id,patientName:N.fullName,patientPhone:N.phone,patientAge:N.age+" "+N.ageUnit,patientGender:N.gender,date:new Date,doctorName:_t,items:S.map(Rt=>({testName:Rt.name,price:Rt.price,code:Rt.code})),amount:ne,discount:M.discount,paidAmount:Y,paymentMethod:M.method}),k([]),F({fullName:"",phone:"",age:"",ageUnit:"Years",gender:"male",address:"",referralType:"self",doctorName:"",clinicName:"",existingId:""}),Q({method:"cash",paidAmount:"",discount:0,discountReason:""}),_(""),Ve(!1)}catch(ye){console.error(ye),alert("Failed to book order.")}finally{a(!1)}},Ge=ye=>{let He="";ye.dob&&(He=Jf(ye.dob).toString()),F({fullName:ye.fullName,phone:ye.phone,age:He,ageUnit:"Years",gender:ye.gender,address:ye.address||"",referralType:"self",doctorName:"",clinicName:"",existingId:ye.id}),t("new-order")},Qe=async ye=>{if(ye)try{const He=await ut.collection("patients").doc(ye).get();He.exists?J({id:He.id,...He.data()}):alert("Patient record not found.")}catch(He){console.error(He),alert("Error fetching details")}},it=async ye=>{try{const He=await ut.collection("samples").where("orderId","==",ye).where("status","==","reported").get();if(He.empty){alert("No reported samples found for this order.");return}const rt=He.docs.map(at=>({id:at.id,...at.data()}));C(rt)}catch(He){console.error(He),alert("Error loading report.")}},dt=()=>f.jsxs("div",{className:"h-full flex flex-col md:flex-row overflow-hidden",style:{backgroundColor:j.MIDNIGHT_GREEN},children:[f.jsxs("div",{className:"w-full md:w-1/3 border-r border-[#0a9396]/20 overflow-y-auto p-6 scrollbar-thin",style:{backgroundColor:j.MIDNIGHT_GREEN},children:[f.jsxs("h3",{className:"font-bold text-lg mb-6 flex items-center gap-2",style:{color:j.CITRON},children:[f.jsx(qne,{className:"w-5 h-5",style:{color:j.GAMBOGE}})," Patient Details"]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold uppercase mb-1",style:{color:j.TIFFANY_BLUE},children:"Phone Number"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("div",{className:"relative flex-1",children:[f.jsx(vR,{className:"w-4 h-4 absolute left-3 top-3",style:{color:j.TIFFANY_BLUE}}),f.jsx("input",{type:"tel",value:N.phone,onChange:ye=>F({...N,phone:ye.target.value}),placeholder:"Search or Enter Phone",className:"w-full pl-9 p-2.5 rounded-lg text-sm focus:ring-2 focus:ring-[#ee9b00] outline-none transition-all",style:{backgroundColor:j.RICH_BLACK,borderColor:"transparent",color:j.CITRON}})]}),f.jsx("button",{onClick:()=>ge(),className:"p-2.5 rounded-lg transition-colors hover:opacity-80",style:{backgroundColor:j.PERSIAN_GREEN,color:j.RICH_BLACK},children:f.jsx(dg,{className:"w-4 h-4"})})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold uppercase mb-1",style:{color:j.TIFFANY_BLUE},children:"Full Name"}),f.jsx("input",{value:N.fullName,onChange:ye=>F({...N,fullName:ye.target.value}),placeholder:"Patient Name",className:"w-full p-2.5 rounded-lg text-sm focus:ring-2 focus:ring-[#ee9b00] outline-none",style:{backgroundColor:j.RICH_BLACK,borderColor:"transparent",color:j.CITRON}})]}),f.jsxs("div",{className:"flex gap-3",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("label",{className:"block text-xs font-bold uppercase mb-1",style:{color:j.TIFFANY_BLUE},children:"Age"}),f.jsxs("div",{className:"flex",children:[f.jsx("input",{type:"number",value:N.age,onChange:ye=>F({...N,age:ye.target.value}),className:"w-full p-2.5 rounded-l-lg text-sm focus:ring-2 focus:ring-[#ee9b00] outline-none",style:{backgroundColor:j.RICH_BLACK,borderColor:"transparent",color:j.CITRON}}),f.jsxs("select",{value:N.ageUnit,onChange:ye=>F({...N,ageUnit:ye.target.value}),className:"rounded-r-lg text-xs px-2 outline-none font-medium",style:{backgroundColor:j.RICH_BLACK,borderColor:"transparent",color:j.TIFFANY_BLUE},children:[f.jsx("option",{children:"Years"}),f.jsx("option",{children:"Months"}),f.jsx("option",{children:"Days"})]})]})]}),f.jsxs("div",{className:"flex-1",children:[f.jsx("label",{className:"block text-xs font-bold uppercase mb-1",style:{color:j.TIFFANY_BLUE},children:"Gender"}),f.jsxs("select",{value:N.gender,onChange:ye=>F({...N,gender:ye.target.value}),className:"w-full p-2.5 rounded-lg text-sm focus:ring-2 focus:ring-[#ee9b00] outline-none",style:{backgroundColor:j.RICH_BLACK,borderColor:"transparent",color:j.CITRON},children:[f.jsx("option",{value:"male",children:"Male"}),f.jsx("option",{value:"female",children:"Female"}),f.jsx("option",{value:"other",children:"Other"})]})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold uppercase mb-1",style:{color:j.TIFFANY_BLUE},children:"Referral By"}),f.jsxs("div",{className:"flex p-1 rounded-lg mb-2",style:{backgroundColor:j.RICH_BLACK},children:[f.jsx("button",{onClick:()=>F({...N,referralType:"self"}),className:`flex-1 py-1.5 text-xs font-bold rounded-md transition-all ${N.referralType==="self"?"shadow-sm":"opacity-50"}`,style:{backgroundColor:N.referralType==="self"?j.MIDNIGHT_GREEN:"transparent",color:N.referralType==="self"?j.CITRON:j.TIFFANY_BLUE},children:"Self"}),f.jsx("button",{onClick:()=>F({...N,referralType:"doctor"}),className:`flex-1 py-1.5 text-xs font-bold rounded-md transition-all ${N.referralType==="doctor"?"shadow-sm":"opacity-50"}`,style:{backgroundColor:N.referralType==="doctor"?j.MIDNIGHT_GREEN:"transparent",color:N.referralType==="doctor"?j.CITRON:j.TIFFANY_BLUE},children:"Doctor"})]}),N.referralType==="doctor"&&f.jsxs("div",{className:"animate-in fade-in slide-in-from-top-1 space-y-2",children:[f.jsxs("select",{value:g,onChange:ye=>{_(ye.target.value),ye.target.value&&F({...N,doctorName:""})},className:"w-full p-2.5 rounded-lg text-sm outline-none",style:{backgroundColor:j.RICH_BLACK,color:j.CITRON},children:[f.jsx("option",{value:"",children:"-- Select Registered Doctor --"}),d.map(ye=>f.jsxs("option",{value:ye.id,children:[ye.name," (",ye.clinic,")"]},ye.id))]}),f.jsx("p",{className:"text-center text-xs font-bold",style:{color:j.TIFFANY_BLUE},children:"- OR -"}),f.jsx("input",{value:N.doctorName,onChange:ye=>{F({...N,doctorName:ye.target.value}),_("")},placeholder:"Enter Manual Name",className:"w-full p-2.5 rounded-lg text-sm focus:ring-2 focus:ring-[#ee9b00] outline-none",style:{backgroundColor:j.RICH_BLACK,color:j.CITRON}})]})]})]}),f.jsxs("div",{className:"mt-8 pt-6 border-t border-[#0a9396]/20",children:[f.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",style:{color:j.CITRON},children:[f.jsx(Wte,{className:"w-5 h-5",style:{color:j.GAMBOGE}})," Payment"]}),f.jsxs("div",{className:"p-4 rounded-xl space-y-3",style:{backgroundColor:j.RICH_BLACK,border:`1px solid ${j.MIDNIGHT_GREEN}`},children:[f.jsxs("div",{className:"flex justify-between text-sm",style:{color:j.TIFFANY_BLUE},children:[f.jsxs("span",{children:["Subtotal (",S.length," tests)"]}),f.jsxs("span",{className:"font-mono font-bold",style:{color:j.CITRON},children:["$",ne]})]}),f.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-dashed border-slate-200",children:[f.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:Se,onChange:ye=>Ve(ye.target.checked),className:"w-4 h-4 text-red-600 border-red-300 rounded focus:ring-red-500"}),f.jsxs("span",{className:"text-sm font-bold text-red-600 flex items-center gap-1",children:[f.jsx(Yne,{className:"w-4 h-4 fill-current"})," Urgent Processing"]})]}),f.jsxs("span",{className:"font-mono font-bold text-red-600",children:["+",H]})]}),f.jsxs("div",{className:"flex justify-between items-center text-sm mb-2",style:{color:j.TIFFANY_BLUE},children:[f.jsx("span",{children:"Discount"}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"font-bold opacity-50",children:"-"}),f.jsx("input",{type:"number",value:M.discount,onChange:ye=>Q({...M,discount:parseFloat(ye.target.value)||0}),className:"w-16 p-1 text-right border rounded font-mono text-xs outline-none focus:ring-1 focus:ring-[#ee9b00]",style:{backgroundColor:j.MIDNIGHT_GREEN,borderColor:j.PERSIAN_GREEN,color:j.CITRON}})]})]}),f.jsxs("div",{className:"flex justify-between items-center text-lg font-bold pt-3 border-t border-dashed border-slate-700",style:{color:j.GAMBOGE},children:[f.jsx("span",{children:"Total Payable"}),f.jsxs("span",{children:["$",te]})]})]}),f.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold uppercase mb-1",style:{color:j.TIFFANY_BLUE},children:"Amount Paid"}),f.jsxs("div",{className:"relative",children:[f.jsx("span",{className:"absolute left-3 top-2.5 font-bold opacity-50",style:{color:j.TIFFANY_BLUE},children:"$"}),f.jsx("input",{type:"number",value:M.paidAmount,onChange:ye=>Q({...M,paidAmount:ye.target.value}),className:"w-full pl-6 pr-2 py-2 rounded-lg text-sm font-bold focus:ring-2 focus:ring-[#ee9b00] outline-none",style:{backgroundColor:j.RICH_BLACK,borderColor:"transparent",color:j.CITRON}})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold uppercase mb-1",style:{color:j.TIFFANY_BLUE},children:"Method"}),f.jsxs("select",{value:M.method,onChange:ye=>Q({...M,method:ye.target.value}),className:"w-full p-2 rounded-lg text-sm outline-none",style:{backgroundColor:j.RICH_BLACK,borderColor:"transparent",color:j.CITRON},children:[f.jsx("option",{value:"cash",children:"Cash"}),f.jsx("option",{value:"card",children:"Card"}),f.jsx("option",{value:"upi",children:"UPI/Online"})]})]})]}),f.jsxs("div",{className:"mt-6",children:[f.jsxs("button",{onClick:Ie,disabled:s||S.length===0||!N.fullName,className:"w-full py-3.5 rounded-xl font-bold shadow-lg disabled:opacity-50 disabled:shadow-none transition-all flex justify-center items-center gap-2",style:{backgroundColor:j.GAMBOGE,color:j.RICH_BLACK},children:[s?f.jsx(wh,{className:"w-5 h-5 animate-spin"}):f.jsx(hl,{className:"w-5 h-5"})," Confirm Order"]}),S.length===0&&f.jsx("p",{className:"text-xs text-center mt-2 opacity-50",style:{color:j.TIFFANY_BLUE},children:"Add tests to proceed"})]})]})]}),f.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden",style:{backgroundColor:j.RICH_BLACK},children:[f.jsx("div",{className:"p-4 border-b border-[#0a9396]/20 shadow-sm z-10",style:{backgroundColor:j.MIDNIGHT_GREEN},children:f.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-center",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"font-bold text-lg",style:{color:j.CITRON},children:"Test Catalog"}),f.jsxs("p",{className:"text-xs opacity-70",style:{color:j.TIFFANY_BLUE},children:[S.length," tests selected"]})]}),f.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[f.jsxs("div",{className:"relative flex-1 sm:w-64",children:[f.jsx(dg,{className:"w-4 h-4 absolute left-3 top-2.5 opacity-50",style:{color:j.TIFFANY_BLUE}}),f.jsx("input",{value:pe,onChange:ye=>se(ye.target.value),placeholder:"Search test name or code...",className:"w-full pl-9 pr-4 py-2 rounded-lg text-sm focus:ring-2 focus:ring-[#ee9b00] outline-none",style:{backgroundColor:j.RICH_BLACK,color:j.CITRON}})]}),f.jsx("select",{value:ve,onChange:ye=>me(ye.target.value),className:"p-2 rounded-lg text-sm outline-none max-w-[140px]",style:{backgroundColor:j.RICH_BLACK,color:j.CITRON},children:we.map(ye=>f.jsx("option",{value:ye,children:ye},ye))})]})]})}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:[f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:xe.map(ye=>{const He=S.some(rt=>rt.id===ye.id);return f.jsxs("div",{onClick:()=>{k(He?S.filter(rt=>rt.id!==ye.id):[...S,ye])},className:`p-4 rounded-xl border cursor-pointer transition-all group ${He?"ring-1 ring-[#0a9396]":"hover:border-[#0a9396]/50 hover:shadow-md"}`,style:{backgroundColor:He?j.MIDNIGHT_GREEN:j.RICH_BLACK,borderColor:He?j.PERSIAN_GREEN:`${j.PERSIAN_GREEN}30`},children:[f.jsxs("div",{className:"flex justify-between items-start mb-2",children:[f.jsx("h4",{className:"font-bold text-sm line-clamp-2 leading-tight pr-2",style:{color:j.CITRON},children:ye.name}),f.jsx("div",{className:`w-5 h-5 rounded-full border flex items-center justify-center shrink-0 transition-colors ${He?"":"bg-transparent"}`,style:{borderColor:j.TIFFANY_BLUE,backgroundColor:He?j.PERSIAN_GREEN:"transparent"},children:He&&f.jsx(Ov,{className:"w-3 h-3 text-white"})})]}),f.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[f.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider px-1.5 py-0.5 rounded",style:{backgroundColor:`${j.PERSIAN_GREEN}20`,color:j.TIFFANY_BLUE},children:ye.code}),f.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider px-1.5 py-0.5 rounded",style:{backgroundColor:`${j.PERSIAN_GREEN}20`,color:j.TIFFANY_BLUE},children:ye.sampleType})]}),f.jsxs("div",{className:"flex justify-between items-end border-t pt-2 mt-auto",style:{borderColor:`${j.PERSIAN_GREEN}20`},children:[f.jsx("span",{className:"text-[10px] font-medium opacity-50",style:{color:j.TIFFANY_BLUE},children:ye.category}),f.jsxs("span",{className:"font-bold",style:{color:j.GAMBOGE},children:["$",ye.price]})]})]},ye.id)})}),xe.length===0&&f.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-slate-400",children:[f.jsx(v0,{className:"w-12 h-12 mb-3 opacity-20"}),f.jsx("p",{style:{color:j.TIFFANY_BLUE},children:"No tests found matching your search."})]})]})]})]}),vt=()=>f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 animate-in fade-in p-6",children:[f.jsxs("div",{className:"lg:col-span-3 grid grid-cols-1 md:grid-cols-4 gap-4",children:[f.jsxs("div",{className:"p-5 rounded-xl shadow-sm flex items-center justify-between",style:{backgroundColor:j.MIDNIGHT_GREEN,border:`1px solid ${j.PERSIAN_GREEN}30`},children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-xs font-bold uppercase mb-1",style:{color:j.TIFFANY_BLUE},children:"Today's Orders"}),f.jsx("p",{className:"text-2xl font-bold",style:{color:j.CITRON},children:c.todayOrders})]}),f.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:`${j.PERSIAN_GREEN}20`,color:j.PERSIAN_GREEN},children:f.jsx(w5,{className:"w-5 h-5"})})]}),f.jsxs("div",{className:"p-5 rounded-xl shadow-sm flex items-center justify-between",style:{backgroundColor:j.MIDNIGHT_GREEN,border:`1px solid ${j.PERSIAN_GREEN}30`},children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-xs font-bold uppercase mb-1",style:{color:j.TIFFANY_BLUE},children:"Pending Dues"}),f.jsx("p",{className:"text-2xl font-bold",style:{color:j.ALLOY_ORANGE},children:"3"})]}),f.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:`${j.ALLOY_ORANGE}20`,color:j.ALLOY_ORANGE},children:f.jsx(x5,{className:"w-5 h-5"})})]}),f.jsxs("div",{className:"p-5 rounded-xl shadow-sm flex items-center justify-between",style:{backgroundColor:j.MIDNIGHT_GREEN,border:`1px solid ${j.PERSIAN_GREEN}30`},children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-xs font-bold uppercase mb-1",style:{color:j.TIFFANY_BLUE},children:"Completed"}),f.jsx("p",{className:"text-2xl font-bold",style:{color:"#4ade80"},children:"12"})]}),f.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-green-900/30",children:f.jsx("div",{className:"bg-green-500 rounded-full p-1",children:f.jsx(Ov,{className:"w-4 h-4 text-white font-bold"})})})]}),f.jsxs("div",{className:"p-5 rounded-xl shadow-sm flex items-center justify-between",style:{backgroundColor:j.MIDNIGHT_GREEN,border:`1px solid ${j.PERSIAN_GREEN}30`},children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-xs font-bold uppercase mb-1",style:{color:j.TIFFANY_BLUE},children:"Revenue Today"}),f.jsxs("p",{className:"text-2xl font-bold",style:{color:j.CITRON},children:["$",c.todaySales.toLocaleString()]})]}),f.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:`${j.GAMBOGE}20`,color:j.GAMBOGE},children:f.jsx(Wc,{className:"w-5 h-5"})})]})]}),f.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[f.jsxs("button",{onClick:()=>t("new-order"),className:"p-6 rounded-xl shadow-lg transition-all text-left group hover:scale-[1.02]",style:{backgroundColor:j.GAMBOGE},children:[f.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center mb-4",children:f.jsx(Fc,{className:"w-6 h-6 text-white"})}),f.jsx("h3",{className:"font-bold text-lg text-white",children:"Book New Order"}),f.jsx("p",{className:"text-white/80 text-sm mt-1",children:"Register patient & tests"})]}),f.jsxs("button",{onClick:()=>t("reports"),className:"p-6 rounded-xl border transition-all text-left group hover:border-[#0a9396]/50",style:{backgroundColor:j.MIDNIGHT_GREEN,borderColor:`${j.PERSIAN_GREEN}30`},children:[f.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center mb-4",style:{backgroundColor:`${j.PERSIAN_GREEN}20`},children:f.jsx(Kc,{className:"w-6 h-6",style:{color:j.PERSIAN_GREEN}})}),f.jsx("h3",{className:"font-bold text-lg",style:{color:j.CITRON},children:"Print Reports"}),f.jsx("p",{className:"text-sm mt-1 opacity-70",style:{color:j.TIFFANY_BLUE},children:"View & Print Results"})]}),f.jsxs("button",{onClick:()=>t("search-patients"),className:"p-6 rounded-xl border transition-all text-left group hover:border-[#0a9396]/50",style:{backgroundColor:j.MIDNIGHT_GREEN,borderColor:`${j.PERSIAN_GREEN}30`},children:[f.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center mb-4",style:{backgroundColor:`${j.ALLOY_ORANGE}20`},children:f.jsx(dg,{className:"w-6 h-6",style:{color:j.ALLOY_ORANGE}})}),f.jsx("h3",{className:"font-bold text-lg",style:{color:j.CITRON},children:"Patient Search"}),f.jsx("p",{className:"text-sm mt-1 opacity-70",style:{color:j.TIFFANY_BLUE},children:"History & records"})]})]}),f.jsxs("div",{className:"p-5 rounded-xl border shadow-sm",style:{backgroundColor:j.MIDNIGHT_GREEN,borderColor:`${j.PERSIAN_GREEN}30`},children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsxs("h3",{className:"font-bold flex items-center gap-2",style:{color:j.CITRON},children:[f.jsx(_5,{className:"w-5 h-5",style:{color:j.GAMBOGE}})," Live Test Tracker"]}),f.jsxs("button",{onClick:le,className:"text-xs font-bold px-3 py-1.5 rounded-lg flex items-center gap-1 hover:bg-white/5 transition-colors",style:{color:j.TIFFANY_BLUE,border:`1px solid ${j.PERSIAN_GREEN}30`},children:[f.jsx(Kc,{className:"w-3 h-3"})," Print TAT Log"]})]}),f.jsxs("div",{className:"space-y-4 max-h-[400px] overflow-y-auto custom-scrollbar",children:[w.map(ye=>{let He=`bg-[${j.RICH_BLACK}] text-[${j.TIFFANY_BLUE}] border border-[#0a9396]/20`,rt=ye.status;const at=(_t,gt)=>{if(!_t)return"--";const mt=_t.toDate?_t.toDate():new Date(_t);if(!gt&&mt.status==="reported")return"--";const Yt=gt?gt.toDate?gt.toDate():new Date(gt):new Date,wt=Math.max(0,Yt.getTime()-mt.getTime()),nn=Math.floor(wt/36e5),St=Math.floor(wt%36e5/6e4);return nn>0?`${nn}h ${St}m`:`${St}m`};return ye.status==="ordered"?(rt="Pending Collection",He="bg-gray-100/10 text-gray-300 border border-gray-500/30"):ye.status==="collected"?(rt="In Lab / Analyzing",He="bg-[#0a9396]/10 text-[#0a9396] border border-[#0a9396]/30"):ye.status==="reported"?(rt="Ready",He="bg-green-600 text-white border border-green-700 font-bold"):ye.status==="rejected"&&(rt="Rejected",He="bg-red-600 text-white border border-red-700 font-bold"),f.jsx("div",{className:"p-3 rounded-lg transition-colors border-b last:border-0 group/row",style:{borderColor:`${j.PERSIAN_GREEN}20`,backgroundColor:"transparent"},children:f.jsxs("div",{className:"flex gap-4 items-start",children:[f.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center font-bold text-xs shrink-0 mt-1",style:{backgroundColor:`${j.PERSIAN_GREEN}20`,color:j.TIFFANY_BLUE},children:ye.patientName.slice(0,2).toUpperCase()}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-bold truncate",style:{color:j.CITRON},children:ye.patientName}),f.jsx("p",{className:"text-xs truncate",style:{color:j.TIFFANY_BLUE},children:ye.testName})]}),f.jsx("span",{className:`text-[10px] uppercase font-bold px-2 py-1 rounded-full whitespace-nowrap ${He}`,children:rt})]}),f.jsxs("div",{className:"mt-2 flex flex-wrap gap-2 text-[10px] font-mono p-1.5 rounded border",style:{backgroundColor:j.RICH_BLACK,borderColor:`${j.PERSIAN_GREEN}20`,color:j.TIFFANY_BLUE},children:[f.jsxs("span",{title:"Booking Time",children:[" ",O1(ye.createdAt)]}),ye.collectedAt&&f.jsxs("span",{title:"Time in Collection",children:["  ",at(ye.createdAt,ye.collectedAt)]}),ye.analyzedAt&&f.jsxs("span",{title:"Time in Analysis",children:["  ",at(ye.collectedAt,ye.analyzedAt)]}),ye.reportedAt&&f.jsxs("span",{title:"Time in Approval",children:["  ",at(ye.analyzedAt,ye.reportedAt)]}),ye.reportedAt&&f.jsxs("span",{className:"font-bold ml-auto",style:{color:j.GAMBOGE},title:"Total Turnaround Time",children:["Total: ",at(ye.createdAt,ye.reportedAt)]})]})]})]})},ye.id)}),w.length===0&&f.jsx("p",{className:"text-center text-sm py-4 opacity-50",style:{color:j.TIFFANY_BLUE},children:"No recent test activity."})]})]})]}),f.jsx("div",{className:"space-y-6",children:f.jsxs("div",{className:"p-5 rounded-xl border",style:{backgroundColor:j.MIDNIGHT_GREEN,borderColor:`${j.PERSIAN_GREEN}30`},children:[f.jsxs("h3",{className:"font-bold mb-2 flex items-center gap-2",style:{color:j.CITRON},children:[f.jsx(KD,{className:"w-4 h-4",style:{color:j.GAMBOGE}})," Notifications"]}),f.jsx("div",{className:"space-y-3",children:O.length>0?O.map((ye,He)=>{let rt="",at="";return ye.type==="alert"?(rt="bg-red-600 text-white border-red-700",at="text-white"):ye.type==="warning"||ye.type==="info"?(rt="bg-amber-400 text-slate-900 border-amber-500",at="text-slate-900"):(rt="bg-slate-700 text-slate-200 border-slate-600",at="text-blue-400"),f.jsxs("div",{className:`flex gap-3 items-center text-sm p-3 rounded-lg border shadow-sm ${rt}`,children:[ye.type==="alert"?f.jsx(qg,{className:`w-5 h-5 shrink-0 ${at}`}):f.jsx(hl,{className:`w-5 h-5 shrink-0 ${at}`}),f.jsx("span",{className:"leading-snug font-medium",children:ye.text})]},ye.id||He)}):f.jsx("p",{className:"text-xs italic opacity-50",style:{color:j.TIFFANY_BLUE},children:"No new notifications."})})]})})]}),[ce,ht]=Ee.useState([]);Ee.useEffect(()=>{const ye=ut.collection("samples").where("isCritical","==",!0).orderBy("createdAt","desc").limit(50).onSnapshot(rt=>ht(rt.docs.map(at=>({id:at.id,...at.data()})))),He=ut.collection("notifications").where("targetRole","==","reception").orderBy("createdAt","desc").limit(20).onSnapshot(rt=>{L(rt.docs.map(at=>({id:at.id,...at.data()})))});return()=>{ye(),He()}},[]);const Bt=async ye=>{var at,_t;const He=prompt("Enter Doctor Name informed:",ye.doctorName||"");if(!He)return;const rt=prompt("Communication Method (Call/SMS/Email):","Call");try{await ut.collection("critical_logs").add({sampleId:ye.id,patientName:ye.patientName,testName:ye.testName,criticalValue:"Refer to Report",reportedBy:((at=xr.currentUser)==null?void 0:at.email)||"Receptionist",reportedTo:He,method:rt,timestamp:an.firestore.Timestamp.now()}),await ut.collection("samples").doc(ye.id).update({criticalReported:!0,criticalReportedAt:an.firestore.Timestamp.now(),criticalReportedBy:(_t=xr.currentUser)==null?void 0:_t.email}),alert("Marked as Reported.")}catch(gt){console.error(gt),alert("Failed to log action.")}},Mt=async()=>{const ye=await ut.collection("critical_logs").orderBy("timestamp","desc").limit(100).get(),He=[["Date","Patient","Test","Reported To","Method","Staff"]];ye.forEach(gt=>{var Yt;const mt=gt.data();He.push([((Yt=mt.timestamp)==null?void 0:Yt.toDate().toLocaleString())||"",mt.patientName,mt.testName,mt.reportedTo,mt.method,mt.reportedBy])});const rt="data:text/csv;charset=utf-8,"+He.map(gt=>gt.join(",")).join(`
`),at=encodeURI(rt),_t=document.createElement("a");_t.setAttribute("href",at),_t.setAttribute("download","critical_communication_log.csv"),document.body.appendChild(_t),_t.click()},Ke=()=>f.jsxs("div",{className:"h-full flex flex-col p-6",style:{backgroundColor:`${j.RICH_BLACK}`},children:[f.jsxs("div",{className:"flex justify-between items-center mb-6 bg-red-950/50 p-4 rounded-xl border border-red-900/50",children:[f.jsxs("div",{children:[f.jsxs("h3",{className:"text-2xl font-bold flex items-center gap-2 text-red-50",children:[f.jsx(qg,{className:"w-8 h-8 text-red-500"})," Critical Results Management"]}),f.jsx("p",{className:"text-red-200 font-medium",children:"Urgent action required for these patients."})]}),f.jsxs("button",{onClick:Mt,className:"border border-red-500 text-red-200 px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors hover:bg-red-900/40",children:[f.jsx(Zte,{className:"w-4 h-4"})," Download Log"]})]}),f.jsx("div",{className:"flex-1 overflow-y-auto rounded-xl shadow border border-red-900",style:{backgroundColor:j.MIDNIGHT_GREEN},children:f.jsxs("table",{className:"w-full text-left",children:[f.jsx("thead",{className:"bg-red-900/40 border-b border-red-900",children:f.jsxs("tr",{children:[f.jsx("th",{className:"p-4 text-red-100",children:"Date/Time"}),f.jsx("th",{className:"p-4 text-red-100",children:"Patient"}),f.jsx("th",{className:"p-4 text-red-100",children:"Contact"}),f.jsx("th",{className:"p-4 text-red-100",children:"Test"}),f.jsx("th",{className:"p-4 text-red-100",children:"Status"}),f.jsx("th",{className:"p-4 text-right text-red-100",children:"Action"})]})}),f.jsxs("tbody",{className:"divide-y divide-red-900/20",children:[ce.map(ye=>{const He=ye.doctorName&&ye.doctorName!=="Self",rt=He?`Dr. ${ye.doctorName}`:"Patient",at=He?ye.doctorPhone:ye.patientPhone;return f.jsxs("tr",{className:"hover:bg-red-900/10 transition-colors",children:[f.jsx("td",{className:"p-4 text-sm font-medium opacity-70",style:{color:j.TIFFANY_BLUE},children:hi(ye.analyzedAt||ye.createdAt)}),f.jsxs("td",{className:"p-4 font-bold",style:{color:j.CITRON},children:[ye.patientName,f.jsxs("div",{className:"text-xs font-normal opacity-70",style:{color:j.TIFFANY_BLUE},children:[ye.patientAge,"Y / ",ye.patientGender]})]}),f.jsxs("td",{className:"p-4 text-sm",children:[f.jsx("div",{className:"font-bold",style:{color:j.CITRON},children:rt}),f.jsxs("div",{className:"text-xs flex items-center gap-1 opacity-70",style:{color:j.TIFFANY_BLUE},children:[f.jsx(vR,{className:"w-3 h-3"})," ",at||"No Phone"]})]}),f.jsxs("td",{className:"p-4",style:{color:j.CITRON},children:[ye.testName," ",ye.isUrgent&&f.jsx("span",{className:"bg-red-600 text-white text-[10px] px-1 rounded uppercase font-bold ml-1",children:"URGENT"})]}),f.jsx("td",{className:"p-4",children:ye.criticalReported?f.jsxs("span",{className:"bg-green-600 text-white px-2 py-1 rounded text-xs font-bold flex items-center gap-1 w-fit",children:[f.jsx(hl,{className:"w-3 h-3"})," Reported"]}):f.jsx("span",{className:"bg-red-600 text-white border-2 border-white px-2 py-1 rounded text-xs font-bold animate-pulse shadow-[0_0_10px_rgba(239,68,68,0.6)]",children:"PENDING ACTION"})}),f.jsxs("td",{className:"p-4 text-right",children:[!ye.criticalReported&&f.jsx("button",{onClick:()=>Bt(ye),className:"bg-red-600 text-white px-3 py-1.5 rounded-lg text-xs font-bold hover:bg-red-500 hover:scale-105 transition-all shadow-lg shadow-red-900/50",children:"Mark Reported"}),ye.criticalReported&&f.jsxs("span",{className:"text-xs italic opacity-50",style:{color:j.TIFFANY_BLUE},children:["By ",ye.criticalReportedBy]})]})]},ye.id)}),ce.length===0&&f.jsx("tr",{children:f.jsx("td",{colSpan:6,className:"p-8 text-center opacity-50",style:{color:j.TIFFANY_BLUE},children:"No critical results found."})})]})]})})]}),bt=()=>{e!=="dashboard"?t("dashboard"):n&&n()};return f.jsxs("div",{className:"h-full flex flex-col",style:{backgroundColor:j.RICH_BLACK},children:[B&&f.jsx(xre,{data:B,onClose:()=>K(null)}),U&&f.jsx(A5,{data:U,onClose:()=>C(null)}),W&&f.jsx(dre,{patient:W,onClose:()=>J(null)}),f.jsxs("div",{className:"flex items-center justify-between px-6 py-3 border-b shadow-sm z-30 shrink-0",style:{backgroundColor:j.MIDNIGHT_GREEN,borderColor:`${j.PERSIAN_GREEN}30`},children:[f.jsxs("div",{className:"flex items-center gap-4",children:[n&&f.jsx("button",{onClick:bt,className:"p-2 rounded-full hover:bg-white/10",style:{color:j.CITRON},children:f.jsx(Vg,{className:"w-5 h-5 rotate-180"})}),f.jsx("h2",{className:"text-2xl font-bold",style:{color:j.CITRON},children:"Reception Desk"}),f.jsx("div",{className:"hidden md:flex p-1 rounded-lg",style:{backgroundColor:j.RICH_BLACK},children:["dashboard","new-order","history","reports","critical-reports","search-patients"].map(ye=>f.jsx("button",{onClick:()=>t(ye),className:`px-4 py-1.5 rounded-md text-sm font-bold capitalize transition-all ${e===ye?"shadow-sm":"hover:opacity-80"}`,style:{backgroundColor:e===ye?j.GAMBOGE:"transparent",color:e===ye?j.RICH_BLACK:j.TIFFANY_BLUE},children:ye.replace("-"," ")},ye))})]}),e==="dashboard"&&f.jsxs("button",{onClick:()=>t("new-order"),className:"px-4 py-2 rounded-lg flex items-center gap-2 font-bold shadow hover:opacity-90 transition-opacity",style:{backgroundColor:j.GAMBOGE,color:j.RICH_BLACK},children:[f.jsx(Fc,{className:"w-4 h-4"})," New Order"]})]}),f.jsxs("div",{className:"flex-1 min-h-0 overflow-hidden relative",children:[e==="dashboard"&&f.jsx("div",{className:"overflow-y-auto h-full pb-20 custom-scrollbar",children:vt()}),e==="new-order"&&dt(),e==="history"&&f.jsx("div",{className:"overflow-y-auto h-full p-6 pb-20 custom-scrollbar",children:f.jsx(lre,{onViewDetails:Qe,onPrintReport:it})}),e==="reports"&&f.jsx("div",{className:"overflow-y-auto h-full p-6 pb-20 custom-scrollbar",children:f.jsx(cre,{onPrint:ye=>C(ye)})}),e==="critical-reports"&&Ke(),e==="search-patients"&&f.jsx(ure,{onSelect:Ge,onViewDetails:ye=>J(ye)})]})]})},Ere=({onBack:n})=>{const[e,t]=Ee.useState([]),[r,i]=Ee.useState([]),[s,a]=Ee.useState(null),[c,u]=Ee.useState(null),[d,p]=Ee.useState([]);Ee.useEffect(()=>{const O=ut.collection("samples").where("status","==","ordered").onSnapshot(B=>t(B.docs.map(K=>({id:K.id,...K.data()})))),L=ut.collection("inventory_items").where("status","!=","out_of_stock").onSnapshot(B=>i(B.docs.map(K=>({id:K.id,...K.data()}))));return()=>{O(),L()}},[]);const g=Ee.useMemo(()=>{const O={};return e.forEach(L=>{const B=L.orderId||L.patientId;O[B]||(O[B]={orderId:L.orderId,patientName:L.patientName,patientPhone:L.patientPhone,tests:[],isUrgent:L.isUrgent||!1,createdAt:L.createdAt}),O[B].tests.push(L)}),Object.values(O).sort((L,B)=>{var J,ae;if(L.isUrgent&&!B.isUrgent)return-1;if(!L.isUrgent&&B.isUrgent)return 1;const K=(J=L.createdAt)!=null&&J.toDate?L.createdAt.toDate():new Date,W=(ae=B.createdAt)!=null&&ae.toDate?B.createdAt.toDate():new Date;return K.getTime()-W.getTime()})},[e]),_=async O=>{u({orderId:O.orderId,tests:O.tests});const L=[];for(const B of O.tests)try{const K=await ut.collection("tests").doc(B.testId).get();if(K.exists){const W=K.data();W.inventoryRequirements&&W.inventoryRequirements.forEach(J=>{const ae=L.find(le=>le.itemId===J.itemId);ae?ae.quantity+=J.quantity:L.push({...J})})}}catch(K){console.error("Error fetching test requirements",K)}p(L)},w=async()=>{if(c)try{const O=ut.batch();c.tests.forEach((L,B)=>{var J,ae;const K=nre(c.orderId,B+1),W=ut.collection("samples").doc(L.id);O.update(W,{status:"collected",collectedAt:an.firestore.Timestamp.now(),sampleLabelId:K,collectorName:((J=xr.currentUser)==null?void 0:J.email)||"Phlebotomist",collectorId:(ae=xr.currentUser)==null?void 0:ae.uid})}),d.forEach(L=>{var B;if(L.quantity>0){const K=r.find(W=>W.id===L.itemId);if(K){const W=ut.collection("inventory_items").doc(L.itemId);O.update(W,{quantity:an.firestore.FieldValue.increment(-L.quantity)});const J=(K.purchasePrice||0)*L.quantity,ae=ut.collection("inventory_transactions").doc();O.set(ae,{itemId:L.itemId,itemName:L.itemName,type:"deduction",quantity:-L.quantity,cost:J,performedBy:((B=xr.currentUser)==null?void 0:B.uid)||"sys",reason:`Batch Sample Collection: Order ${c.orderId}`,relatedSampleId:c.tests.map(le=>le.id).join(","),timestamp:an.firestore.Timestamp.now()})}}}),await O.commit(),u(null),p([])}catch(O){console.error("Collection failed:",O),alert("Failed to confirm collection: "+(O instanceof Error?O.message:String(O)))}},P=()=>{if(!c)return null;const O=g.find(L=>L.orderId===c.orderId);return O?f.jsx("div",{className:"fixed inset-0 bg-black/80 z-[1001] flex items-center justify-center p-4 backdrop-blur-sm",onClick:()=>u(null),children:f.jsxs("div",{className:"rounded-xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",style:{backgroundColor:j.RICH_BLACK,border:`1px solid ${j.PERSIAN_GREEN}40`},onClick:L=>L.stopPropagation(),children:[f.jsxs("div",{className:"p-5 border-b flex justify-between items-center shrink-0",style:{backgroundColor:j.MIDNIGHT_GREEN,borderColor:`${j.PERSIAN_GREEN}40`},children:[f.jsxs("h3",{className:"font-bold text-lg",style:{color:j.CITRON},children:["Batch Collection - ",O.tests.length," Test(s)"]}),f.jsx("button",{onClick:()=>u(null),children:f.jsx(xp,{className:"w-5 h-5 opacity-70 hover:opacity-100",style:{color:j.TIFFANY_BLUE}})})]}),f.jsxs("div",{className:"p-6 overflow-y-auto space-y-6",children:[f.jsxs("div",{className:"p-4 rounded-lg border",style:{backgroundColor:`${j.PERSIAN_GREEN}20`,borderColor:`${j.PERSIAN_GREEN}40`},children:[f.jsx("p",{className:"font-bold text-lg",style:{color:j.CITRON},children:O.patientName}),f.jsxs("p",{className:"text-sm",style:{color:j.TIFFANY_BLUE},children:["Order ID: ",O.orderId]}),O.isUrgent&&f.jsx("span",{className:"inline-block mt-2 bg-red-600 text-white text-xs px-2 py-1 rounded font-bold uppercase",children:"URGENT"})]}),f.jsxs("div",{children:[f.jsxs("h4",{className:"font-bold text-sm mb-3 flex items-center gap-2",style:{color:j.CITRON},children:[f.jsx(Lne,{className:"w-4 h-4"})," Tests to Collect"]}),f.jsx("div",{className:"space-y-2",children:O.tests.map((L,B)=>f.jsxs("div",{className:"flex items-center gap-3 p-3 rounded border",style:{backgroundColor:j.MIDNIGHT_GREEN,borderColor:`${j.PERSIAN_GREEN}20`},children:[f.jsx("span",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold",style:{backgroundColor:`${j.PERSIAN_GREEN}30`,color:j.CITRON},children:B+1}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"font-medium text-sm",style:{color:j.CITRON},children:L.testName}),f.jsx("p",{className:"text-xs",style:{color:j.TIFFANY_BLUE},children:L.sampleType})]})]},L.id))})]}),f.jsxs("div",{children:[f.jsxs("h4",{className:"font-bold text-sm mb-2 flex items-center gap-2",style:{color:j.CITRON},children:[f.jsx(Vc,{className:"w-4 h-4"})," Total Consumables"]}),f.jsxs("div",{className:"space-y-2 mb-4",children:[d.map((L,B)=>f.jsxs("div",{className:"flex items-center gap-2 p-2 rounded border",style:{backgroundColor:j.MIDNIGHT_GREEN,borderColor:`${j.PERSIAN_GREEN}20`},children:[f.jsx("span",{className:"flex-1 text-sm font-medium",style:{color:j.TIFFANY_BLUE},children:L.itemName}),f.jsx("input",{type:"number",className:"w-20 p-1 border rounded text-right text-sm outline-none focus:ring-1 focus:ring-[#ee9b00]",style:{backgroundColor:j.RICH_BLACK,color:j.CITRON,borderColor:`${j.PERSIAN_GREEN}40`},value:L.quantity,onChange:K=>{const W=[...d];W[B].quantity=parseFloat(K.target.value)||0,p(W)}}),f.jsx("button",{onClick:()=>p(d.filter((K,W)=>W!==B)),className:"text-red-400 hover:bg-red-900/20 p-1 rounded",children:f.jsx(hg,{className:"w-4 h-4"})})]},B)),d.length===0&&f.jsx("p",{className:"text-xs italic",style:{color:j.TIFFANY_BLUE},children:"No consumables required."})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("select",{id:"phleb-inv-select",className:"flex-1 p-2 border rounded text-sm outline-none",style:{backgroundColor:j.RICH_BLACK,color:j.CITRON,borderColor:`${j.PERSIAN_GREEN}40`},children:[f.jsx("option",{value:"",children:"Add Item..."}),r.map(L=>f.jsxs("option",{value:L.id,children:[L.name," (Stock: ",L.quantity,")"]},L.id))]}),f.jsx("button",{onClick:()=>{const L=document.getElementById("phleb-inv-select"),B=r.find(K=>K.id===L.value);B&&(p([...d,{itemId:B.id,itemName:B.name,quantity:1}]),L.value="")},className:"px-3 py-2 rounded text-sm font-bold shadow-md hover:opacity-90 transition-opacity",style:{backgroundColor:j.MIDNIGHT_GREEN,color:j.CITRON},children:"Add"})]})]})]}),f.jsxs("div",{className:"p-5 border-t flex justify-end gap-3 shrink-0",style:{backgroundColor:j.MIDNIGHT_GREEN,borderColor:`${j.PERSIAN_GREEN}40`},children:[f.jsx("button",{onClick:()=>u(null),className:"px-4 py-2 font-bold text-sm",style:{color:j.TIFFANY_BLUE},children:"Cancel"}),f.jsxs("button",{onClick:w,className:"text-white px-6 py-2 rounded-lg font-bold shadow-lg flex items-center gap-2 hover:opacity-90 transition-opacity",style:{backgroundColor:j.GAMBOGE,color:j.RICH_BLACK},children:[f.jsx(wne,{className:"w-4 h-4"})," Collect All (",O.tests.length,")"]})]})]})}):null};return f.jsxs("div",{className:"p-6 space-y-6 h-full flex flex-col",children:[P(),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[n&&f.jsx("button",{onClick:n,className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:f.jsx(Yc,{className:"w-5 h-5",style:{color:j.GAMBOGE}})}),f.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",style:{color:j.CITRON},children:[f.jsx(D1,{className:"w-6 h-6",style:{color:j.GAMBOGE}})," Sample Collection"]})]}),f.jsxs("div",{className:"px-3 py-1 rounded-full text-xs font-bold",style:{backgroundColor:`${j.GAMBOGE}20`,color:j.GAMBOGE},children:[g.length," Patient(s) | ",e.length," Sample(s)"]})]}),f.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:f.jsxs("div",{className:"space-y-3",children:[g.map(O=>f.jsxs("div",{className:"rounded-xl border shadow-sm transition-all overflow-hidden",style:{backgroundColor:j.MIDNIGHT_GREEN,borderColor:`${j.PERSIAN_GREEN}40`},children:[f.jsx("div",{className:"p-4 cursor-pointer hover:bg-white/5 transition-colors",onClick:()=>a(s===O.orderId?null:O.orderId),children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[f.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center font-bold text-lg",style:{backgroundColor:`${j.PERSIAN_GREEN}20`,color:j.TIFFANY_BLUE},children:O.patientName.substring(0,2).toUpperCase()}),f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("h4",{className:"font-bold text-lg",style:{color:j.CITRON},children:O.patientName}),O.isUrgent&&f.jsx("span",{className:"bg-red-600 text-white text-[10px] px-1.5 py-0.5 rounded font-bold uppercase animate-pulse",children:"URGENT"})]}),f.jsxs("p",{className:"text-sm",style:{color:j.TIFFANY_BLUE},children:[O.tests.length," Test",O.tests.length>1?"s":"","  Order #",O.orderId.slice(0,8)]})]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("button",{onClick:L=>{L.stopPropagation(),_(O)},className:"px-4 py-2 rounded-lg font-bold text-sm transition-colors shadow-sm flex items-center gap-2 hover:opacity-90",style:{backgroundColor:j.PERSIAN_GREEN,color:j.RICH_BLACK},children:[f.jsx(hl,{className:"w-4 h-4"})," Collect"]}),f.jsx(b5,{className:`w-5 h-5 transition-transform ${s===O.orderId?"rotate-90":""}`,style:{color:j.TIFFANY_BLUE}})]})]})}),s===O.orderId&&f.jsx("div",{className:"border-t px-4 py-3 space-y-2",style:{backgroundColor:`${j.RICH_BLACK}50`,borderColor:`${j.PERSIAN_GREEN}20`},children:O.tests.map((L,B)=>f.jsxs("div",{className:"flex items-center gap-3 p-2 rounded",style:{backgroundColor:j.MIDNIGHT_GREEN},children:[f.jsx("span",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shrink-0",style:{backgroundColor:`${j.PERSIAN_GREEN}20`,color:j.TIFFANY_BLUE},children:B+1}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"font-medium text-sm truncate",style:{color:j.CITRON},children:L.testName}),f.jsx("p",{className:"text-xs",style:{color:j.TIFFANY_BLUE},children:L.sampleType})]}),L.notes&&L.notes.includes("RECOLLECTION")&&f.jsx("span",{className:"text-[10px] px-2 py-1 rounded font-bold border flex-shrink-0",style:{backgroundColor:"#7f1d1d20",color:"#fca5a5",borderColor:"#ef444440"},children:"REDO"})]},L.id))})]},O.orderId)),g.length===0&&f.jsxs("div",{className:"flex flex-col items-center justify-center h-64 rounded-xl border border-dashed",style:{backgroundColor:j.MIDNIGHT_GREEN,borderColor:`${j.PERSIAN_GREEN}30`,color:j.TIFFANY_BLUE},children:[f.jsx(hl,{className:"w-12 h-12 mb-2 opacity-20"}),f.jsx("p",{children:"All samples collected. Great work!"})]})]})})]})},Tre=({onBack:n})=>{const[e,t]=Ee.useState([]),[r,i]=Ee.useState({}),[s,a]=Ee.useState(null),[c,u]=Ee.useState(null),[d,p]=Ee.useState(0),[g,_]=Ee.useState({}),{showToast:w,showAlert:P,showConfirm:O}=kh();Ee.useEffect(()=>{const N=ut.collection("samples").where("status","in",["collected","analyzing"]).onSnapshot(S=>t(S.docs.map(k=>({id:k.id,...k.data()})))),F=ut.collection("tests").onSnapshot(S=>{const k={};S.docs.forEach(M=>{k[M.id]={id:M.id,...M.data()}}),i(k)});return()=>{N(),F()}},[]);const L=Ee.useMemo(()=>{const N={};return e.forEach(F=>{const S=F.orderId||F.patientId;N[S]||(N[S]={orderId:F.orderId,patientName:F.patientName,patientAge:F.patientAge,patientGender:F.patientGender,tests:[],isUrgent:F.isUrgent||!1,createdAt:F.createdAt,completedCount:0}),N[S].tests.push(F),(F.status==="analyzing"||F.status==="review")&&N[S].completedCount++}),Object.values(N).sort((F,S)=>{var k,M;return F.isUrgent&&!S.isUrgent?-1:!F.isUrgent&&S.isUrgent?1:((k=F.createdAt)==null?void 0:k.toDate().getTime())-((M=S.createdAt)==null?void 0:M.toDate().getTime())})},[e]),B=(N,F,S,k)=>{let M=F.find(Q=>Q.type==="age"&&k>=(Q.ageMin||0)&&k<=(Q.ageMax||150));return M||(M=F.find(Q=>Q.type==="gender"&&Q.gender===S)),M||(M=F.find(Q=>Q.type==="general")),M?M.criticalMin!==void 0&&N<=M.criticalMin?"CL":M.criticalMax!==void 0&&N>=M.criticalMax?"CH":M.min!==void 0&&N<M.min?"L":M.max!==void 0&&N>M.max?"H":"N":"N"},K=N=>{u({orderId:N.orderId,tests:N.tests}),p(0),W(N.tests[0])},W=N=>{const F=r[N.testId];if(N.results)_(N.results);else if(F&&F.parameters){const S={};F.parameters.forEach(k=>{S[k.name]={value:"",flag:"N",unit:k.unit}}),_(S)}else _({})},J=(N,F,S)=>{if(!c)return;const k=c.tests[d];let M="N";if(S.type==="numeric"&&F!==""){const Q=parseFloat(F);M=B(Q,S.refRanges,k.patientGender||"male",k.patientAge||30)}_(Q=>({...Q,[N]:{value:F,flag:M,unit:S.unit}}))},ae=async()=>{if(!c)return!1;const N=c.tests[d],F=[],S=[],k=r[N.testId];if(k&&k.parameters&&k.parameters.forEach(M=>{const Q=g[M.name];if(Q&&Q.value&&M.type==="numeric"){(Q.flag==="CL"||Q.flag==="CH")&&F.push(`${M.name} (${Q.value} ${M.unit})`);const pe=parseFloat(Q.value);let se=M.refRanges.find(ve=>ve.type==="age"&&N.patientAge>=(ve.ageMin||0)&&N.patientAge<=(ve.ageMax||150));se||(se=M.refRanges.find(ve=>ve.type==="gender"&&ve.gender===N.patientGender)),se||(se=M.refRanges.find(ve=>ve.type==="general")),se&&(se.safeMin!==void 0&&pe<se.safeMin||se.safeMax!==void 0&&pe>se.safeMax)&&S.push(`${M.name} (Value: ${pe}, Safe: ${se.safeMin}-${se.safeMax})`)}}),S.length>0&&!await O(`Safe Range Violation detected:
${S.join(`
`)}

Proceed?`,{title:"Warning",confirmText:"Confirm & Save",type:"danger"}))return!1;F.length>0&&P("warning",`CRITICAL VALUES:
${F.join(`
`)}

Notify doctor immediately.`,"Critical Alert");try{return await ut.collection("samples").doc(N.id).update({status:"analyzing",results:g,analyzedAt:an.firestore.Timestamp.now(),isCritical:F.length>0}),!0}catch(M){return console.error("Save failed:",M),P("error","Failed to save results"),!1}},le=async N=>{if(!c||!await ae())return;const S=N==="next"?d+1:d-1;S>=0&&S<c.tests.length&&(p(S),W(c.tests[S]))},U=async()=>{if(!(!c||!await ae()||!await O(`Submit all ${c.tests.length} tests for pathologist review?`,{title:"Submit Batch",confirmText:"Submit All"})))try{const S=ut.batch();c.tests.forEach(k=>{const M=ut.collection("samples").doc(k.id);S.update(M,{status:"review",submittedForReviewAt:an.firestore.Timestamp.now()})}),await S.commit(),w("success",`All ${c.tests.length} tests submitted for review!`),u(null)}catch(S){console.error("Batch submit failed:",S),P("error","Failed to submit tests")}},C=()=>{if(!c)return null;const N=c.tests[d],F=r[N.testId];if(!F)return null;const S=(d+1)/c.tests.length*100;return f.jsx("div",{className:"fixed inset-0 bg-black/80 z-[1001] flex items-center justify-center p-4 backdrop-blur-sm",onClick:()=>u(null),children:f.jsxs("div",{className:"rounded-xl shadow-2xl w-full max-w-4xl overflow-hidden flex flex-col max-h-[95vh]",style:{backgroundColor:j.RICH_BLACK,border:`1px solid ${j.PERSIAN_GREEN}40`},onClick:k=>k.stopPropagation(),children:[f.jsxs("div",{className:"p-5 border-b flex justify-between items-center shrink-0",style:{backgroundColor:j.MIDNIGHT_GREEN,borderColor:`${j.PERSIAN_GREEN}40`},children:[f.jsxs("div",{children:[f.jsx("h3",{className:"font-bold text-lg",style:{color:j.CITRON},children:"Batch Results Entry"}),f.jsxs("p",{className:"text-sm",style:{color:j.TIFFANY_BLUE},children:[c.tests[0].patientName,"  Test ",d+1," of ",c.tests.length]})]}),f.jsx("button",{onClick:()=>u(null),children:f.jsx(xp,{className:"w-5 h-5",style:{color:j.TIFFANY_BLUE}})})]}),f.jsxs("div",{className:"px-5 py-3 border-b",style:{backgroundColor:j.MIDNIGHT_GREEN,borderColor:`${j.PERSIAN_GREEN}40`},children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("span",{className:"text-xs font-bold",style:{color:j.TIFFANY_BLUE},children:"Progress"}),f.jsxs("span",{className:"text-xs font-bold",style:{color:j.GAMBOGE},children:[Math.round(S),"%"]})]}),f.jsx("div",{className:"w-full h-2 rounded-full overflow-hidden",style:{backgroundColor:`${j.RICH_BLACK}`},children:f.jsx("div",{className:"h-full transition-all duration-300",style:{width:`${S}%`,backgroundColor:j.GAMBOGE}})}),f.jsx("div",{className:"flex gap-1 mt-3",children:c.tests.map((k,M)=>f.jsx("div",{className:`flex-1 h-1 rounded ${M===d?"ring-2 ring-offset-1":""}`,style:{backgroundColor:k.status==="analyzing"||k.status==="review"?j.SUCCESS:M<d?j.GAMBOGE:`${j.PERSIAN_GREEN}30`,ringColor:j.GAMBOGE},title:k.testName},k.id))})]}),f.jsxs("div",{className:"p-6 overflow-y-auto flex-1",children:[f.jsxs("div",{className:"mb-6 p-4 rounded-lg border",style:{backgroundColor:`${j.PERSIAN_GREEN}20`,borderColor:`${j.PERSIAN_GREEN}40`},children:[f.jsx("h4",{className:"font-bold text-xl mb-1",style:{color:j.CITRON},children:N.testName}),f.jsxs("p",{className:"text-sm",style:{color:j.TIFFANY_BLUE},children:["Sample ID: ",N.sampleLabelId,"  Type: ",N.sampleType]})]}),f.jsx("div",{className:"space-y-4",children:F.parameters&&F.parameters.map(k=>{const M=g[k.name]||{value:"",flag:"N",unit:k.unit},Q={N:"text-slate-500",L:"text-yellow-500",H:"text-yellow-500",CL:"text-red-600",CH:"text-red-600"},pe={N:"",L:"LOW",H:"HIGH",CL:" CRITICAL LOW",CH:" CRITICAL HIGH"},se=Q[M.flag],ve=pe[M.flag];return f.jsxs("div",{className:"p-3 rounded-lg border",style:{backgroundColor:j.MIDNIGHT_GREEN,borderColor:`${j.PERSIAN_GREEN}30`},children:[f.jsx("label",{className:"block text-sm font-bold mb-2",style:{color:j.CITRON},children:k.name}),k.type==="numeric"&&f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"number",step:"any",className:"w-full p-2 pr-24 border rounded-lg outline-none focus:ring-2 focus:ring-[#ee9b00]",style:{backgroundColor:j.RICH_BLACK,color:j.CITRON,borderColor:`${j.PERSIAN_GREEN}40`},value:M.value,onChange:me=>J(k.name,me.target.value,k)}),M.value&&f.jsx("span",{className:`absolute right-3 top-2.5 text-xs font-bold ${se}`,children:ve})]}),k.type==="text"&&f.jsx("input",{type:"text",className:"w-full p-2 border rounded-lg outline-none focus:ring-2 focus:ring-[#ee9b00]",style:{backgroundColor:j.RICH_BLACK,color:j.CITRON,borderColor:`${j.PERSIAN_GREEN}40`},value:M.value,onChange:me=>J(k.name,me.target.value,k)}),k.type==="numeric"&&f.jsx("div",{className:"mt-1 flex gap-2 text-[10px]",style:{color:j.TIFFANY_BLUE},children:k.refRanges.map((me,Se)=>f.jsxs("span",{className:"whitespace-nowrap border px-1 rounded",style:{borderColor:`${j.PERSIAN_GREEN}30`},children:[me.type,": ",me.min,"-",me.max]},Se))})]},k.name)})})]}),f.jsxs("div",{className:"p-5 border-t flex justify-between items-center shrink-0",style:{backgroundColor:j.MIDNIGHT_GREEN,borderColor:`${j.PERSIAN_GREEN}40`},children:[f.jsxs("button",{onClick:()=>le("prev"),disabled:d===0,className:"px-4 py-2 rounded-lg font-bold text-sm flex items-center gap-2 disabled:opacity-30 hover:opacity-80",style:{color:j.TIFFANY_BLUE},children:[f.jsx(Yc,{className:"w-4 h-4"})," Previous"]}),f.jsx("div",{className:"flex gap-3",children:d<c.tests.length-1?f.jsxs("button",{onClick:()=>le("next"),className:"px-6 py-2 rounded-lg font-bold text-sm flex items-center gap-2 hover:opacity-90 shadow-lg",style:{backgroundColor:j.GAMBOGE,color:j.RICH_BLACK},children:["Save & Next ",f.jsx(Vg,{className:"w-4 h-4"})]}):f.jsxs("button",{onClick:U,className:"px-6 py-2 rounded-lg font-bold text-sm flex items-center gap-2 hover:opacity-90 shadow-lg",style:{backgroundColor:j.SUCCESS,color:"white"},children:["Submit All for Review ",f.jsx(hl,{className:"w-4 h-4"})]})})]})]})})};return f.jsxs("div",{className:"p-6 space-y-6 h-full flex flex-col",children:[C(),f.jsxs("div",{className:"flex items-center gap-2",children:[n&&f.jsx("button",{onClick:n,className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:f.jsx(Yc,{className:"w-5 h-5",style:{color:j.GAMBOGE}})}),f.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",style:{color:j.CITRON},children:[f.jsx(Kf,{className:"w-6 h-6",style:{color:j.GAMBOGE}})," Lab Processing"]})]}),f.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:f.jsxs("div",{className:"space-y-3",children:[L.map(N=>f.jsxs("div",{className:"rounded-xl border shadow-sm transition-all overflow-hidden",style:{backgroundColor:j.MIDNIGHT_GREEN,borderColor:`${j.PERSIAN_GREEN}40`},children:[f.jsx("div",{className:"p-4 cursor-pointer hover:bg-white/5 transition-colors",onClick:()=>a(s===N.orderId?null:N.orderId),children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[f.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center font-bold text-lg",style:{backgroundColor:`${j.PERSIAN_GREEN}20`,color:j.TIFFANY_BLUE},children:N.patientName.substring(0,2).toUpperCase()}),f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("h4",{className:"font-bold text-lg",style:{color:j.CITRON},children:N.patientName}),N.isUrgent&&f.jsx("span",{className:"bg-red-600 text-white text-[10px] px-1.5 py-0.5 rounded font-bold uppercase animate-pulse",children:"URGENT"})]}),f.jsxs("p",{className:"text-sm",style:{color:j.TIFFANY_BLUE},children:[N.tests.length," Test",N.tests.length>1?"s":"","  ",N.completedCount,"/",N.tests.length," Analyzed  Order #",N.orderId.slice(0,8)]})]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("button",{onClick:F=>{F.stopPropagation(),K(N)},className:"px-4 py-2 rounded-lg font-bold text-sm transition-colors shadow-sm flex items-center gap-2 hover:opacity-90",style:{backgroundColor:j.GAMBOGE,color:j.RICH_BLACK},children:[f.jsx(Kf,{className:"w-4 h-4"})," Enter Results"]}),f.jsx(b5,{className:`w-5 h-5 transition-transform ${s===N.orderId?"rotate-90":""}`,style:{color:j.TIFFANY_BLUE}})]})]})}),s===N.orderId&&f.jsx("div",{className:"border-t px-4 py-3 space-y-2",style:{backgroundColor:`${j.RICH_BLACK}50`,borderColor:`${j.PERSIAN_GREEN}20`},children:N.tests.map((F,S)=>f.jsxs("div",{className:"flex items-center gap-3 p-2 rounded",style:{backgroundColor:j.MIDNIGHT_GREEN},children:[f.jsx("span",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shrink-0",style:{backgroundColor:`${j.PERSIAN_GREEN}20`,color:j.TIFFANY_BLUE},children:S+1}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"font-medium text-sm",style:{color:j.CITRON},children:F.testName}),f.jsxs("p",{className:"text-xs",style:{color:j.TIFFANY_BLUE},children:[F.sampleType,"  ",F.sampleLabelId]})]}),F.status==="analyzing"||F.status==="review"?f.jsx("span",{className:"text-xs px-2 py-1 rounded font-bold",style:{backgroundColor:`${j.SUCCESS}20`,color:j.SUCCESS},children:"Done"}):f.jsx("span",{className:"text-xs px-2 py-1 rounded font-bold",style:{backgroundColor:`${j.GAMBOGE}20`,color:j.GAMBOGE},children:"Pending"})]},F.id))})]},N.orderId)),L.length===0&&f.jsxs("div",{className:"flex flex-col items-center justify-center h-64 rounded-xl border border-dashed",style:{backgroundColor:j.MIDNIGHT_GREEN,borderColor:`${j.PERSIAN_GREEN}30`,color:j.TIFFANY_BLUE},children:[f.jsx(Kf,{className:"w-12 h-12 mb-2 opacity-20"}),f.jsx("p",{children:"No samples to process."})]})]})})]})},Are=({onBack:n})=>{const[e,t]=Ee.useState([]),[r,i]=Ee.useState(null),[s,a]=Ee.useState(null),[c,u]=Ee.useState(""),[d,p]=Ee.useState(""),[g,_]=Ee.useState(!1),[w,P]=Ee.useState(!1),[O,L]=Ee.useState(null),{showAlert:B,showConfirm:K,showToast:W}=kh();Ee.useEffect(()=>{const S=ut.collection("samples").where("status","==","review").onSnapshot(k=>t(k.docs.map(M=>({id:M.id,...M.data()}))));return()=>S()},[]);const J=Ee.useMemo(()=>{const S={};return e.forEach(k=>{const M=k.orderId||k.patientId;S[M]||(S[M]={orderId:k.orderId,patientName:k.patientName,patientAge:k.patientAge,patientGender:k.patientGender,tests:[],isUrgent:k.isUrgent||!1,hasCritical:!1,createdAt:k.createdAt}),S[M].tests.push(k),(k.isCritical||k.results&&Object.values(k.results).some(Q=>Q.flag==="CL"||Q.flag==="CH"))&&(S[M].hasCritical=!0)}),Object.values(S).sort((k,M)=>{var Q,pe;return k.hasCritical&&!M.hasCritical?-1:!k.hasCritical&&M.hasCritical?1:k.isUrgent&&!M.isUrgent?-1:!k.isUrgent&&M.isUrgent?1:((Q=k.createdAt)==null?void 0:Q.toDate().getTime())-((pe=M.createdAt)==null?void 0:pe.toDate().getTime())})},[e]),ae=S=>{a({orderId:S.orderId,tests:S.tests}),u(""),p("")},le=async()=>{if(s){_(!0);try{const S=new yte({apiKey:"PLACEHOLDER_API_KEY"}),M=`Act as a clinical pathologist. Review ALL test results for patient visit. Tests: ${s.tests.map(se=>{const ve=Object.entries(se.results||{}).map(([me,Se])=>{const Ve=typeof Se=="object"?Se.value:Se,ne=typeof Se=="object"?Se.unit:"",H=typeof Se=="object"?Se.flag:"N";return`${me}: ${Ve} ${ne} (${H})`}).join(", ");return`${se.testName}: ${ve}`}).join(" | ")}. Patient: ${s.tests[0].patientAge}y/${s.tests[0].patientGender}. Provide ONE professional, concise medical conclusion for the ENTIRE visit (max 4 sentences). Format: JSON with key "conclusion".`,pe=(await S.models.generateContent({model:"gemini-2.0-flash-exp",contents:M})).response.text();try{const se=pe.replace(/```json/g,"").replace(/```/g,"").trim(),ve=JSON.parse(se);ve.conclusion&&u(ve.conclusion)}catch{u(pe)}}catch(S){console.error("AI Error:",S),B("error","AI generation failed. Please type manually.")}finally{_(!1)}}},U=async()=>{if(!(!s||!await K(`Approve ALL ${s.tests.length} tests for ${s.tests[0].patientName}?

This will publish the combined report.`,{title:"Batch Approval",confirmText:"Approve All",type:"primary"}))){P(!0);try{const k=ut.batch();if(s.tests.forEach(M=>{var pe;const Q=ut.collection("samples").doc(M.id);k.update(Q,{status:"reported",reportedAt:an.firestore.Timestamp.now(),verifiedBy:((pe=xr.currentUser)==null?void 0:pe.email)||"Pathologist",pathologistRemarks:d,conclusion:c})}),s.orderId){const M=ut.collection("orders").doc(s.orderId);k.update(M,{status:"completed",completedAt:an.firestore.Timestamp.now()})}await k.commit(),W("success",`All ${s.tests.length} tests approved and published!`),a(null)}catch(k){console.error("Approval failed:",k),B("error","Failed to approve tests")}finally{P(!1)}}},C=async()=>{if(!s)return;const S=window.prompt("Enter rejection reason for this visit:");if(S){P(!0);try{const k=ut.batch();s.tests.forEach(M=>{var pe;const Q=ut.collection("samples").doc(M.id);k.update(Q,{status:"analyzing",rejectedAt:an.firestore.Timestamp.now(),rejectedBy:(pe=xr.currentUser)==null?void 0:pe.email,notes:`REJECTED BY PATHOLOGIST: ${S}`})}),await k.commit(),W("success","Visit rejected. All tests sent back to lab."),a(null)}catch(k){console.error("Rejection failed:",k),B("error","Failed to reject tests")}finally{P(!1)}}},N=()=>{if(!s)return;const S=s.tests.map(k=>({...k,conclusion:c,pathologistRemarks:d}));L(S)},F=()=>{if(!s)return null;const S=J.find(k=>k.orderId===s.orderId);return S?f.jsx("div",{className:"fixed inset-0 z-[1001] bg-black/80 flex items-center justify-center p-4 backdrop-blur-sm",onClick:()=>a(null),children:f.jsxs("div",{className:"rounded-xl shadow-2xl w-full max-w-6xl overflow-hidden flex flex-col max-h-[95vh]",style:{backgroundColor:j.RICH_BLACK,border:`1px solid ${j.PERSIAN_GREEN}40`},onClick:k=>k.stopPropagation(),children:[f.jsxs("div",{className:"p-5 border-b flex justify-between items-center shrink-0",style:{backgroundColor:j.MIDNIGHT_GREEN,borderColor:`${j.PERSIAN_GREEN}40`},children:[f.jsxs("div",{children:[f.jsxs("h3",{className:"font-bold text-lg",style:{color:j.CITRON},children:["Batch Review: ",S.patientName]}),f.jsxs("p",{className:"text-sm",style:{color:j.TIFFANY_BLUE},children:[S.tests.length," Test(s)  Order #",S.orderId.slice(0,8)]})]}),f.jsx("button",{onClick:()=>a(null),children:f.jsx(xp,{className:"w-5 h-5",style:{color:j.TIFFANY_BLUE}})})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-6 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[f.jsxs("div",{className:"space-y-4",children:[f.jsxs("h4",{className:"font-bold flex items-center gap-2",style:{color:j.CITRON},children:[f.jsx(dx,{className:"w-4 h-4"})," All Test Results"]}),S.tests.map((k,M)=>f.jsxs("div",{className:"p-4 rounded-lg border",style:{backgroundColor:j.MIDNIGHT_GREEN,borderColor:`${j.PERSIAN_GREEN}30`},children:[f.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[f.jsx("span",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold",style:{backgroundColor:`${j.PERSIAN_GREEN}30`,color:j.CITRON},children:M+1}),f.jsx("h5",{className:"font-bold text-sm",style:{color:j.CITRON},children:k.testName}),k.isCritical&&f.jsx("span",{className:"bg-red-600 text-white text-[10px] px-1.5 py-0.5 rounded font-bold uppercase animate-pulse",children:"CRITICAL"})]}),f.jsx("table",{className:"w-full text-xs",children:f.jsx("tbody",{className:"divide-y",style:{divideColor:`${j.PERSIAN_GREEN}20`},children:k.results&&Object.entries(k.results).map(([Q,pe])=>{const se=typeof pe=="object"?pe.value:pe,ve=typeof pe=="object"?pe.unit:"",me=typeof pe=="object"?pe.flag:"N",Se=me==="CL"||me==="CH",Ve=me==="L"||me==="H";return f.jsxs("tr",{children:[f.jsx("td",{className:"py-1 font-medium",style:{color:j.TIFFANY_BLUE},children:Q}),f.jsxs("td",{className:"py-1 text-right",children:[f.jsxs("span",{className:`font-bold ${Se?"text-red-500":Ve?"text-yellow-500":""}`,style:!Se&&!Ve?{color:j.CITRON}:{},children:[se," ",f.jsx("span",{className:"text-[10px] opacity-70",children:ve})]}),me!=="N"&&f.jsx("span",{className:`ml-2 text-[9px] font-bold ${Se?"text-red-400":"text-yellow-400"}`,children:me})]})]},Q)})})}),f.jsxs("div",{className:"mt-2 text-[10px] space-y-0.5",style:{color:j.TIFFANY_BLUE},children:[f.jsxs("p",{children:["Sample: ",k.sampleType,"  ",k.sampleLabelId]}),f.jsxs("p",{children:["Collected: ",hi(k.collectedAt)]})]})]},k.id))]}),f.jsxs("div",{className:"space-y-4 flex flex-col",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("h4",{className:"font-bold",style:{color:j.CITRON},children:"Clinical Evaluation"}),f.jsxs("button",{onClick:le,disabled:g,className:"text-xs px-2 py-1 rounded border font-bold flex items-center gap-1 hover:opacity-80",style:{backgroundColor:"#6d28d930",color:"#c4b5fd",borderColor:"#8b5cf640"},children:[g?f.jsx(wh,{className:"w-3 h-3 animate-spin"}):f.jsx(Pne,{className:"w-3 h-3"})," Auto-Generate"]})]}),f.jsxs("div",{className:"p-4 rounded-lg border",style:{backgroundColor:`${j.PERSIAN_GREEN}10`,borderColor:`${j.PERSIAN_GREEN}30`},children:[f.jsx("p",{className:"text-xs font-bold mb-2",style:{color:j.TIFFANY_BLUE},children:"Patient Demographics"}),f.jsxs("div",{className:"text-xs space-y-1",style:{color:j.CITRON},children:[f.jsxs("p",{children:["Name: ",S.patientName]}),f.jsxs("p",{children:["Age/Gender: ",S.patientAge,"/",S.patientGender]}),f.jsxs("p",{children:["Tests: ",S.tests.length]})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold uppercase mb-2",style:{color:j.TIFFANY_BLUE},children:"Consolidated Conclusion / Impression"}),f.jsx("textarea",{className:"w-full p-3 border rounded-lg text-sm outline-none resize-none focus:ring-2 focus:ring-[#00b4d8]",style:{backgroundColor:j.RICH_BLACK,borderColor:`${j.PERSIAN_GREEN}40`,color:j.CITRON,height:"200px"},placeholder:"Enter overall medical conclusion for all tests...",value:c,onChange:k=>u(k.target.value)}),f.jsxs("p",{className:"text-[10px] mt-1 italic",style:{color:j.TIFFANY_BLUE},children:["This conclusion will be applied to all ",S.tests.length," tests in the combined report."]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold uppercase mb-2",style:{color:j.TIFFANY_BLUE},children:"Remarks (Optional)"}),f.jsx("textarea",{className:"w-full p-3 border rounded-lg text-sm outline-none h-20 resize-none focus:ring-2 focus:ring-[#00b4d8]",style:{backgroundColor:j.RICH_BLACK,borderColor:`${j.PERSIAN_GREEN}40`,color:j.CITRON},placeholder:"Any additional clinical notes...",value:d,onChange:k=>p(k.target.value)})]}),f.jsxs("div",{className:"mt-auto pt-4 border-t flex gap-3 justify-end",style:{borderColor:`${j.PERSIAN_GREEN}40`},children:[f.jsxs("button",{onClick:C,disabled:w,className:"px-4 py-2 border rounded-lg font-bold text-sm hover:bg-red-900/20 transition-colors flex items-center gap-2",style:{borderColor:"#ef4444",color:"#fca5a5"},children:[f.jsx(xp,{className:"w-4 h-4"})," Reject All"]}),f.jsxs("button",{onClick:N,className:"px-4 py-2 border rounded-lg font-bold text-sm hover:bg-white/5 flex items-center gap-2",style:{borderColor:`${j.PERSIAN_GREEN}40`,color:j.TIFFANY_BLUE},children:[f.jsx(tne,{className:"w-4 h-4"})," Preview Report"]}),f.jsxs("button",{onClick:U,disabled:w,className:"px-6 py-2 rounded-lg font-bold text-sm hover:opacity-90 shadow-lg flex items-center gap-2",style:{backgroundColor:j.SUCCESS,color:"white"},children:[w?f.jsx(wh,{className:"w-4 h-4 animate-spin"}):f.jsx(hl,{className:"w-4 h-4"})," Approve All (",S.tests.length,")"]})]})]})]})]})}):null};return f.jsxs("div",{className:"p-6 space-y-6 h-full flex flex-col",children:[O&&f.jsx(A5,{data:O,onClose:()=>L(null)}),F(),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[n&&f.jsx("button",{onClick:n,className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:f.jsx(Yc,{className:"w-5 h-5",style:{color:j.GAMBOGE}})}),f.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",style:{color:j.CITRON},children:[f.jsx(Wf,{className:"w-6 h-6",style:{color:j.GAMBOGE}})," Pathologist Verification"]})]}),f.jsxs("div",{className:"px-3 py-1 rounded-full text-xs font-bold",style:{backgroundColor:`${j.GAMBOGE}20`,color:j.GAMBOGE},children:[J.length," Visit(s) | ",e.length," Test(s)"]})]}),f.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:f.jsxs("div",{className:"space-y-3",children:[J.map(S=>f.jsxs("div",{className:`rounded-xl border shadow-sm transition-all overflow-hidden ${S.hasCritical?"border-l-4 border-l-red-500":""}`,style:{backgroundColor:S.hasCritical?"#7f1d1d20":j.MIDNIGHT_GREEN,borderColor:`${j.PERSIAN_GREEN}40`},children:[f.jsx("div",{className:"p-4 cursor-pointer hover:bg-white/5 transition-colors",onClick:()=>i(r===S.orderId?null:S.orderId),children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[f.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center font-bold text-lg",style:{backgroundColor:`${j.PERSIAN_GREEN}20`,color:j.TIFFANY_BLUE},children:S.patientName.substring(0,2).toUpperCase()}),f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("h4",{className:"font-bold text-lg",style:{color:j.CITRON},children:S.patientName}),S.hasCritical&&f.jsx("span",{className:"bg-red-600 text-white text-[10px] px-1.5 py-0.5 rounded font-bold uppercase animate-pulse",children:"CRITICAL VALUES"}),S.isUrgent&&f.jsx("span",{className:"bg-red-600 text-white text-[10px] px-1.5 py-0.5 rounded font-bold uppercase",children:"URGENT"})]}),f.jsxs("p",{className:"text-sm",style:{color:j.TIFFANY_BLUE},children:[S.tests.length," Test",S.tests.length>1?"s":""," Awaiting Approval  Order #",S.orderId.slice(0,8)]})]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("button",{onClick:k=>{k.stopPropagation(),ae(S)},className:"px-4 py-2 rounded-lg font-bold text-sm transition-colors shadow-sm flex items-center gap-2 hover:opacity-90",style:{backgroundColor:j.SUCCESS,color:"white"},children:[f.jsx(Wf,{className:"w-4 h-4"})," Review & Approve"]}),f.jsx(b5,{className:`w-5 h-5 transition-transform ${r===S.orderId?"rotate-90":""}`,style:{color:j.TIFFANY_BLUE}})]})]})}),r===S.orderId&&f.jsx("div",{className:"border-t px-4 py-3 space-y-2",style:{backgroundColor:`${j.RICH_BLACK}50`,borderColor:`${j.PERSIAN_GREEN}20`},children:S.tests.map((k,M)=>{const Q=k.results&&Object.values(k.results).some(pe=>pe.flag==="CL"||pe.flag==="CH");return f.jsxs("div",{className:"flex items-center gap-3 p-2 rounded",style:{backgroundColor:j.MIDNIGHT_GREEN},children:[f.jsx("span",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shrink-0",style:{backgroundColor:`${j.PERSIAN_GREEN}20`,color:j.TIFFANY_BLUE},children:M+1}),f.jsxs("div",{className:"flex-1",children:[f.jsxs("p",{className:"font-medium text-sm flex items-center gap-2",style:{color:j.CITRON},children:[k.testName,Q&&f.jsx("span",{className:"bg-red-600 text-white text-[9px] px-1 py-0.5 rounded font-bold",children:"CRITICAL"})]}),f.jsxs("p",{className:"text-xs",style:{color:j.TIFFANY_BLUE},children:[k.sampleType,"  ",k.sampleLabelId]})]}),f.jsx("span",{className:"text-xs px-2 py-1 rounded font-bold",style:{backgroundColor:`${j.GAMBOGE}20`,color:j.GAMBOGE},children:"Ready"})]},k.id)})})]},S.orderId)),J.length===0&&f.jsxs("div",{className:"flex flex-col items-center justify-center h-64 rounded-xl border border-dashed",style:{backgroundColor:j.MIDNIGHT_GREEN,borderColor:`${j.PERSIAN_GREEN}30`,color:j.TIFFANY_BLUE},children:[f.jsx(Wf,{className:"w-12 h-12 mb-2 opacity-20"}),f.jsx("p",{children:"No visits pending review. Great work!"})]})]})})]})},sL=Gg.createContext(null),kh=()=>{const n=Gg.useContext(sL);if(!n)throw new Error("useDialog must be used within DialogProvider");return n},Nre=({user:n,role:e,redirectPath:t="/login",children:r})=>n?r?f.jsx(f.Fragment,{children:r}):f.jsx(LR,{}):f.jsx(zm,{to:t,replace:!0}),Sre=({user:n,role:e,onLogout:t,isInventoryModalOpen:r,setIsInventoryModalOpen:i})=>f.jsxs("div",{className:"flex flex-col h-screen w-full font-sans overflow-hidden transition-colors duration-500",style:{backgroundColor:j.RICH_BLACK,color:j.CITRON},children:[f.jsx(rL,{isOpen:r,onClose:()=>i(!1),userId:n.uid,userName:n.username||n.email||"User",userRole:e}),f.jsx(Kne,{user:n,onLogout:t}),f.jsx("main",{className:"flex-1 h-full overflow-hidden relative flex flex-col",children:f.jsx("div",{className:"flex-1 overflow-auto p-0 relative custom-scrollbar",children:f.jsx(LR,{})})})]}),Ire=({user:n,role:e,setIsInventoryModalOpen:t})=>{var i;const r=Ep();return f.jsx("div",{className:"p-8 h-full overflow-y-auto",children:f.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsxs("h2",{className:"text-3xl font-bold tracking-tight",style:{color:j.TIFFANY_BLUE},children:["Welcome back, ",f.jsx("span",{style:{color:j.GAMBOGE},children:n.username||"User"})]}),f.jsx("p",{className:"opacity-60 mt-1",children:"Select a workspace to begin."})]}),f.jsx("div",{className:"flex gap-4",children:f.jsxs("button",{onClick:()=>t(!0),className:"flex items-center gap-2 px-5 py-2.5 rounded-xl font-bold transition-all hover:scale-105 shadow-lg",style:{backgroundColor:j.MIDNIGHT_GREEN,color:j.TIFFANY_BLUE},children:[f.jsx(fg,{className:"w-5 h-5"})," Request Stock"]})})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[(i=tL[e])==null?void 0:i.map(s=>{if(s.startsWith("admin_"))return null;const c={dashboard:_0,reception:w5,collection:D1,lab_tech:Kf,lab_path:Wf,finance:Wc,inventory:Vc}[s]||hl,u=s.replace("_"," ");return f.jsxs("button",{onClick:()=>r(`/${s==="dashboard"?"":s}`),className:"p-6 rounded-2xl flex flex-col items-start gap-4 transition-all hover:-translate-y-1 hover:shadow-2xl group border border-transparent text-left relative overflow-hidden",style:{backgroundColor:j.MIDNIGHT_GREEN},children:[f.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/5 rounded-full -mr-10 -mt-10 blur-2xl transition-all group-hover:bg-white/10"}),f.jsx("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center shadow-lg",style:{backgroundColor:j.PERSIAN_GREEN},children:f.jsx(c,{className:"w-8 h-8 text-white"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-bold capitalize",style:{color:j.CITRON},children:u}),f.jsx("p",{className:"text-xs font-medium mt-1 opacity-60",style:{color:j.TIFFANY_BLUE},children:"Access module"})]}),f.jsx("div",{className:"mt-auto pt-4 w-full flex justify-end",children:f.jsx("div",{className:"p-2 rounded-full bg-black/20 group-hover:bg-black/30 transition-colors",children:f.jsx(Vg,{className:"w-5 h-5 text-white/50 group-hover:text-white"})})})]},s)}),(e==="admin"||e==="inventory_manager")&&f.jsxs("button",{onClick:()=>r("/admin"),className:"p-6 rounded-2xl flex flex-col items-start gap-4 transition-all hover:-translate-y-1 hover:shadow-2xl group border border-transparent text-left relative overflow-hidden",style:{backgroundColor:j.MIDNIGHT_GREEN},children:[f.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/5 rounded-full -mr-10 -mt-10 blur-2xl transition-all group-hover:bg-white/10"}),f.jsx("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center shadow-lg",style:{backgroundColor:j.GAMBOGE},children:f.jsx(Bg,{className:"w-8 h-8 text-white"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-bold capitalize",style:{color:j.CITRON},children:"Administration"}),f.jsx("p",{className:"text-xs font-medium mt-1 opacity-60",style:{color:j.TIFFANY_BLUE},children:"Manage system"})]}),f.jsx("div",{className:"mt-auto pt-4 w-full flex justify-end",children:f.jsx("div",{className:"p-2 rounded-full bg-black/20 group-hover:bg-black/30 transition-colors",children:f.jsx(Vg,{className:"w-5 h-5 text-white/50 group-hover:text-white"})})})]})]})]})})},Cre=({user:n,role:e})=>{var r;const t=Ep();return e!=="admin"&&e!=="inventory_manager"?f.jsx(zm,{to:"/dashboard"}):f.jsxs("div",{className:"h-full flex flex-col bg-slate-50",children:[f.jsx(Ph,{activeTab:"dashboard"}),f.jsx("div",{className:"p-6 md:p-8 h-full overflow-y-auto",children:f.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[f.jsx("h2",{className:"text-3xl font-bold tracking-tight text-slate-800",children:"System Administration"}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:(r=tL[e])==null?void 0:r.filter(i=>i.startsWith("admin_")).map(i=>{const a={admin_users:M1,admin_tests:QD,admin_finance:Wc,admin_reports:E5,admin_logs:ZD,admin_settings:Bg}[i]||Bg,c=i.replace("admin_","").replace(/_/g," ");return f.jsxs("button",{onClick:()=>t(`/${i}`),className:"p-6 rounded-2xl flex flex-col items-start gap-4 transition-all hover:-translate-y-1 hover:shadow-2xl group border border-transparent text-left relative overflow-hidden",style:{backgroundColor:j.MIDNIGHT_GREEN},children:[f.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/5 rounded-full -mr-10 -mt-10 blur-2xl transition-all group-hover:bg-white/10"}),f.jsx("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center shadow-lg",style:{backgroundColor:j.PERSIAN_GREEN},children:f.jsx(a,{className:"w-8 h-8 text-white"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-bold capitalize",style:{color:j.CITRON},children:c}),f.jsxs("p",{className:"text-xs font-medium mt-1 opacity-60",style:{color:j.TIFFANY_BLUE},children:["Manage ",c]})]}),f.jsx("div",{className:"mt-auto pt-4 w-full flex justify-end",children:f.jsx("div",{className:"p-2 rounded-full bg-black/20 group-hover:bg-black/30 transition-colors",children:f.jsx(Vg,{className:"w-5 h-5 text-white/50 group-hover:text-white"})})})]},i)})})]})})]})},aa=({Component:n})=>{const e=Ep();$g();const t=()=>{window.history.state&&window.history.state.idx>0?e(-1):e("/dashboard")};return f.jsx(Wne,{children:f.jsx(n,{onBack:t})})},Rre=()=>{const[n,e]=Ee.useState(null),[t,r]=Ee.useState(null),[i,s]=Ee.useState(!0),[a,c]=Ee.useState(!1),[u,d]=Ee.useState({isOpen:!1,type:"info",message:""}),[p,g]=Ee.useState({isOpen:!1,message:"",onConfirm:()=>{},onCancel:()=>{}}),[_,w]=Ee.useState({isOpen:!1,message:"",defaultValue:"",onConfirm:()=>{},onCancel:()=>{}}),[P,O]=Ee.useState([]),L=(C,N,F)=>{d({isOpen:!0,type:C,message:N,title:F})},B=(C,N)=>new Promise(F=>{g({isOpen:!0,message:C,title:N==null?void 0:N.title,confirmText:N==null?void 0:N.confirmText,cancelText:N==null?void 0:N.cancelText,type:N==null?void 0:N.type,onConfirm:()=>{g(S=>({...S,isOpen:!1})),F(!0)},onCancel:()=>{g(S=>({...S,isOpen:!1})),F(!1)}})}),K=(C,N)=>new Promise(F=>{w({isOpen:!0,message:C,title:N==null?void 0:N.title,defaultValue:(N==null?void 0:N.defaultValue)||"",placeholder:N==null?void 0:N.placeholder,onConfirm:S=>{w(k=>({...k,isOpen:!1})),F(S)},onCancel:()=>{w(S=>({...S,isOpen:!1})),F(null)}})}),W=(C,N)=>{const F=Date.now().toString()+Math.random().toString(36);O(S=>[...S,{id:F,type:C,message:N}]),setTimeout(()=>{O(S=>S.filter(k=>k.id!==F))},4e3)},J=C=>{O(N=>N.filter(F=>F.id!==C))},ae={showAlert:L,showConfirm:B,showPrompt:K,showToast:W};Ee.useEffect(()=>{const C=N=>{if(N.key==="Backspace"){const F=N.target;F.tagName==="INPUT"||F.tagName==="TEXTAREA"||F.isContentEditable||N.preventDefault()}};return window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)},[]),Ee.useEffect(()=>{const C=localStorage.getItem("labpro_role"),N=localStorage.getItem("labpro_user");if(C&&N)try{e(JSON.parse(N)),r(C),s(!1),console.log("Session restored synchronously from LocalStorage")}catch(S){console.error("Failed to parse saved user from LocalStorage",S)}const F=xr.onAuthStateChanged(async S=>{if(S){const k=localStorage.getItem("labpro_role"),M=localStorage.getItem("labpro_user");if(k&&M)try{e(JSON.parse(M)),r(k)}catch(Q){console.error("User Data Corrupt:",Q),e({uid:S.uid,email:S.email,id:S.uid})}else console.warn("Restoring partial session from Firebase."),e({uid:S.uid,email:S.email||"User",id:S.uid}),k&&r(k)}else{const k=localStorage.getItem("labpro_role"),M=localStorage.getItem("labpro_user");if(k&&M){console.log("onAuthStateChanged: restoring session from LocalStorage...");try{e(JSON.parse(M)),r(k);try{await xr.signInAnonymously()}catch(Q){console.warn("Anonymous sign-in failed during restore:",Q)}}catch(Q){console.warn("Firebase Auth failed (using local credentials only):",Q)}}else e(null),r(null)}s(!1)});return()=>F()},[]);const le=(C,N)=>{r(C),e(N),localStorage.setItem("labpro_role",C),localStorage.setItem("labpro_user",JSON.stringify(N))},U=()=>{xr.signOut(),localStorage.removeItem("labpro_role"),localStorage.removeItem("labpro_user"),e(null),r(null)};return i?f.jsx("div",{className:"h-screen w-full flex items-center justify-center bg-slate-50",children:f.jsx(wh,{className:"w-8 h-8 text-indigo-600 animate-spin"})}):f.jsxs(sL.Provider,{value:ae,children:[f.jsx(Qne,{isOpen:u.isOpen,type:u.type,title:u.title,message:u.message,onClose:()=>d(C=>({...C,isOpen:!1}))}),f.jsx(Xne,{isOpen:p.isOpen,title:p.title,message:p.message,confirmText:p.confirmText,cancelText:p.cancelText,type:p.type,onConfirm:p.onConfirm,onCancel:p.onCancel}),f.jsx(Zne,{isOpen:_.isOpen,title:_.title,message:_.message,defaultValue:_.defaultValue,placeholder:_.placeholder,onConfirm:_.onConfirm,onCancel:_.onCancel}),f.jsx(Jne,{toasts:P,onClose:J}),f.jsx(E8,{basename:"/labman",children:f.jsxs(b8,{children:[f.jsx(Mi,{path:"/login",element:n?f.jsx(zm,{to:"/dashboard"}):f.jsx(sre,{onLoginSuccess:le})}),f.jsxs(Mi,{path:"/",element:f.jsx(Nre,{user:n,role:t,children:f.jsx(Sre,{user:n,role:t,onLogout:U,isInventoryModalOpen:a,setIsInventoryModalOpen:c})}),children:[f.jsx(Mi,{index:!0,element:f.jsx(zm,{to:"/dashboard"})}),f.jsx(Mi,{path:"dashboard",element:f.jsx(Ire,{user:n,role:t,setIsInventoryModalOpen:c})}),f.jsx(Mi,{path:"admin",element:f.jsx(Cre,{user:n,role:t})}),f.jsx(Mi,{path:"patients",element:f.jsx(aa,{Component:fre})}),f.jsx(Mi,{path:"reception",element:f.jsx(aa,{Component:wre})}),f.jsx(Mi,{path:"collection",element:f.jsx(aa,{Component:Ere})}),f.jsx(Mi,{path:"lab_tech",element:f.jsx(aa,{Component:Tre})}),f.jsx(Mi,{path:"lab_path",element:f.jsx(aa,{Component:Are})}),f.jsx(Mi,{path:"inventory",element:f.jsx(aa,{Component:C=>f.jsx(pre,{...C,role:t})})}),f.jsx(Mi,{path:"finance",element:f.jsx(aa,{Component:iL})}),f.jsx(Mi,{path:"admin_users",element:f.jsx(aa,{Component:mre})}),f.jsx(Mi,{path:"admin_tests",element:f.jsx(aa,{Component:gre})}),f.jsx(Mi,{path:"admin_finance",element:f.jsx(aa,{Component:yre})}),f.jsx(Mi,{path:"admin_reports",element:f.jsx(aa,{Component:vre})}),f.jsx(Mi,{path:"admin_logs",element:f.jsx(aa,{Component:_re})}),f.jsx(Mi,{path:"admin_settings",element:f.jsx(aa,{Component:bre})}),f.jsx(Mi,{path:"*",element:f.jsx(zm,{to:"/dashboard"})})]})]})})]})},oL=document.getElementById("root");if(!oL)throw new Error("Could not find root element to mount to");const Pre=SM.createRoot(oL);Pre.render(f.jsx(Gg.StrictMode,{children:f.jsx(Rre,{})}));export{ur as _,Dre as c,bR as g};
